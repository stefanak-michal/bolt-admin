/*! For license information please see main.7f56e559.js.LICENSE.txt */
(()=>{var t={4445:(t,e)=>{"use strict";e.byteLength=function(t){var e=a(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,o=a(t),s=o[0],l=o[1],u=new i(function(t,e,n){return 3*(e+n)/4-n}(0,s,l)),c=0,h=l>0?s-4:s;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===l&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,u[c++]=255&e);1===l&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u},e.fromByteArray=function(t){for(var e,r=t.length,i=r%3,o=[],s=16383,a=0,u=r-i;a<u;a+=s)o.push(l(t,a,a+s>u?u:a+s));1===i?(e=t[r-1],o.push(n[e>>2]+n[e<<4&63]+"==")):2===i&&(e=(t[r-2]<<8)+t[r-1],o.push(n[e>>10]+n[e>>4&63]+n[e<<2&63]+"="));return o.join("")};for(var n=[],r=[],i="undefined"!==typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=o[s],r[o.charCodeAt(s)]=s;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,r){for(var i,o,s=[],a=e;a<r;a+=3)i=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},6382:(t,e,n)=>{"use strict";const r=n(4445),i=n(6900),o="function"===typeof Symbol&&"function"===typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=function(t){+t!=t&&(t=0);return l.alloc(+t)},e.INSPECT_MAX_BYTES=50;const s=2147483647;function a(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,l.prototype),e}function l(t,e,n){if("number"===typeof t){if("string"===typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return h(t)}return u(t,e,n)}function u(t,e,n){if("string"===typeof t)return function(t,e){"string"===typeof e&&""!==e||(e="utf8");if(!l.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const n=0|m(t,e);let r=a(n);const i=r.write(t,e);i!==n&&(r=r.slice(0,i));return r}(t,e);if(ArrayBuffer.isView(t))return function(t){if($(t,Uint8Array)){const e=new Uint8Array(t);return f(e.buffer,e.byteOffset,e.byteLength)}return d(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if($(t,ArrayBuffer)||t&&$(t.buffer,ArrayBuffer))return f(t,e,n);if("undefined"!==typeof SharedArrayBuffer&&($(t,SharedArrayBuffer)||t&&$(t.buffer,SharedArrayBuffer)))return f(t,e,n);if("number"===typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return l.from(r,e,n);const i=function(t){if(l.isBuffer(t)){const e=0|p(t.length),n=a(e);return 0===n.length||t.copy(n,0,0,e),n}if(void 0!==t.length)return"number"!==typeof t.length||K(t.length)?a(0):d(t);if("Buffer"===t.type&&Array.isArray(t.data))return d(t.data)}(t);if(i)return i;if("undefined"!==typeof Symbol&&null!=Symbol.toPrimitive&&"function"===typeof t[Symbol.toPrimitive])return l.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!==typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function h(t){return c(t),a(t<0?0:0|p(t))}function d(t){const e=t.length<0?0:0|p(t.length),n=a(e);for(let r=0;r<e;r+=1)n[r]=255&t[r];return n}function f(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(r,l.prototype),r}function p(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function m(t,e){if(l.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||$(t,ArrayBuffer))return t.byteLength;if("string"!==typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const n=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return Z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(t).length;default:if(i)return r?-1:Z(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,n){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return N(this,e,n);case"base64":return C(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function _(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),K(n=+n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"===typeof e)return e&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){let o,s=1,a=t.length,l=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let r=-1;for(o=n;o<a;o++)if(u(t,o)===u(e,-1===r?0:o-r)){if(-1===r&&(r=o),o-r+1===l)return r*s}else-1!==r&&(o-=o-r),r=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){let n=!0;for(let r=0;r<l;r++)if(u(t,o+r)!==u(e,r)){n=!1;break}if(n)return o}return-1}function b(t,e,n,r){n=Number(n)||0;const i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;const o=e.length;let s;for(r>o/2&&(r=o/2),s=0;s<r;++s){const r=parseInt(e.substr(2*s,2),16);if(K(r))return s;t[n+s]=r}return s}function w(t,e,n,r){return Y(Z(e,t.length-n),t,n,r)}function S(t,e,n,r){return Y(function(t){const e=[];for(let n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function x(t,e,n,r){return Y(G(e),t,n,r)}function E(t,e,n,r){return Y(function(t,e){let n,r,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function C(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);const r=[];let i=e;for(;i<n;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=n){let n,r,a,l;switch(s){case 1:e<128&&(o=e);break;case 2:n=t[i+1],128===(192&n)&&(l=(31&e)<<6|63&n,l>127&&(o=l));break;case 3:n=t[i+1],r=t[i+2],128===(192&n)&&128===(192&r)&&(l=(15&e)<<12|(63&n)<<6|63&r,l>2047&&(l<55296||l>57343)&&(o=l));break;case 4:n=t[i+1],r=t[i+2],a=t[i+3],128===(192&n)&&128===(192&r)&&128===(192&a)&&(l=(15&e)<<18|(63&n)<<12|(63&r)<<6|63&a,l>65535&&l<1114112&&(o=l))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return function(t){const e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);let n="",r=0;for(;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}(r)}e.kMaxLength=s,l.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),l.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(t,e,n){return u(t,e,n)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(t,e,n){return function(t,e,n){return c(t),t<=0?a(t):void 0!==e?"string"===typeof n?a(t).fill(e,n):a(t).fill(e):a(t)}(t,e,n)},l.allocUnsafe=function(t){return h(t)},l.allocUnsafeSlow=function(t){return h(t)},l.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==l.prototype},l.compare=function(t,e){if($(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),$(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let n=t.length,r=e.length;for(let i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);let n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;const r=l.allocUnsafe(e);let i=0;for(n=0;n<t.length;++n){let e=t[n];if($(e,Uint8Array))i+e.length>r.length?(l.isBuffer(e)||(e=l.from(e)),e.copy(r,i)):Uint8Array.prototype.set.call(r,e,i);else{if(!l.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,i)}i+=e.length}return r},l.byteLength=m,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)_(this,e,e+1);return this},l.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},l.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},l.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?k(this,0,t):g.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){let t="";const n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(t,e,n,r,i){if($(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;let o=(i>>>=0)-(r>>>=0),s=(n>>>=0)-(e>>>=0);const a=Math.min(o,s),u=this.slice(r,i),c=t.slice(e,n);for(let l=0;l<a;++l)if(u[l]!==c[l]){o=u[l],s=c[l];break}return o<s?-1:s<o?1:0},l.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},l.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},l.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},l.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let o=!1;for(;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return w(this,t,e,n);case"ascii":case"latin1":case"binary":return S(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function T(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function N(t,e,n){let r="";n=Math.min(t.length,n);for(let i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function I(t,e,n){const r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);let i="";for(let o=e;o<n;++o)i+=X[t[o]];return i}function P(t,e,n){const r=t.slice(e,n);let i="";for(let o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function M(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function j(t,e,n,r,i,o){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function R(t,e,n,r,i){q(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o,o>>=8,t[n++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,s>>=8,t[n++]=s,n}function A(t,e,n,r,i){q(e,r,i,t,n,7);let o=Number(e&BigInt(4294967295));t[n+7]=o,o>>=8,t[n+6]=o,o>>=8,t[n+5]=o,o>>=8,t[n+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[n+3]=s,s>>=8,t[n+2]=s,s>>=8,t[n+1]=s,s>>=8,t[n]=s,n+8}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,o){return e=+e,n>>>=0,o||D(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function U(t,e,n,r,o){return e=+e,n>>>=0,o||D(t,0,n,8),i.write(t,e,n,r,52,8),n+8}l.prototype.slice=function(t,e){const n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||M(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||M(t,e,this.length);let r=this[t+--e],i=1;for(;e>0&&(i*=256);)r+=this[t+--e]*i;return r},l.prototype.readUint8=l.prototype.readUInt8=function(t,e){return t>>>=0,e||M(t,1,this.length),this[t]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(t,e){return t>>>=0,e||M(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(t,e){return t>>>=0,e||M(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(t,e){return t>>>=0,e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(t,e){return t>>>=0,e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readBigUInt64LE=Q((function(t){H(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+n*2**24;return BigInt(r)+(BigInt(i)<<BigInt(32))})),l.prototype.readBigUInt64BE=Q((function(t){H(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+n;return(BigInt(r)<<BigInt(32))+BigInt(i)})),l.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||M(t,e,this.length);let r=this[t],i=1,o=0;for(;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||M(t,e,this.length);let r=e,i=1,o=this[t+--r];for(;r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},l.prototype.readInt8=function(t,e){return t>>>=0,e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){t>>>=0,e||M(t,2,this.length);const n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt16BE=function(t,e){t>>>=0,e||M(t,2,this.length);const n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},l.prototype.readInt32LE=function(t,e){return t>>>=0,e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return t>>>=0,e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readBigInt64LE=Q((function(t){H(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),l.prototype.readBigInt64BE=Q((function(t){H(t>>>=0,"offset");const e=this[t],n=this[t+7];void 0!==e&&void 0!==n||W(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+n)})),l.prototype.readFloatLE=function(t,e){return t>>>=0,e||M(t,4,this.length),i.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return t>>>=0,e||M(t,4,this.length),i.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return t>>>=0,e||M(t,8,this.length),i.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return t>>>=0,e||M(t,8,this.length),i.read(this,t,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){j(this,t,e,n,Math.pow(2,8*n)-1,0)}let i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e>>>=0,n>>>=0,!r){j(this,t,e,n,Math.pow(2,8*n)-1,0)}let i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},l.prototype.writeUint8=l.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,1,255,0),this[e]=255&t,e+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeBigUInt64LE=Q((function(t){return R(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeBigUInt64BE=Q((function(t){return A(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,BigInt(0),BigInt("0xffffffffffffffff"))})),l.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);j(this,t,e,n,r-1,-r)}let i=0,o=1,s=0;for(this[e]=255&t;++i<n&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o|0)-s&255;return e+n},l.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*n-1);j(this,t,e,n,r-1,-r)}let i=n-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o|0)-s&255;return e+n},l.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},l.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||j(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeBigInt64LE=Q((function(t){return R(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeBigInt64BE=Q((function(t){return A(this,t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),l.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},l.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},l.prototype.writeDoubleLE=function(t,e,n){return U(this,t,e,!0,n)},l.prototype.writeDoubleBE=function(t,e,n){return U(this,t,e,!1,n)},l.prototype.copy=function(t,e,n,r){if(!l.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);const i=r-n;return this===t&&"function"===typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,r):Uint8Array.prototype.set.call(t,this.subarray(n,r),e),i},l.prototype.fill=function(t,e,n,r){if("string"===typeof t){if("string"===typeof e?(r=e,e=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"===typeof t?t&=255:"boolean"===typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;let i;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(i=e;i<n;++i)this[i]=t;else{const o=l.isBuffer(t)?t:l.from(t,r),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<n-e;++i)this[i+e]=o[i%s]}return this};const z={};function B(t,e,n){z[t]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function F(t){let e="",n=t.length;const r="-"===t[0]?1:0;for(;n>=r+4;n-=3)e=`_${t.slice(n-3,n)}${e}`;return`${t.slice(0,n)}${e}`}function q(t,e,n,r,i,o){if(t>n||t<e){const r="bigint"===typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(o+1)}${r}`:`>= -(2${r} ** ${8*(o+1)-1}${r}) and < 2 ** ${8*(o+1)-1}${r}`:`>= ${e}${r} and <= ${n}${r}`,new z.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,n){H(e,"offset"),void 0!==t[e]&&void 0!==t[e+n]||W(e,t.length-(n+1))}(r,i,o)}function H(t,e){if("number"!==typeof t)throw new z.ERR_INVALID_ARG_TYPE(e,"number",t)}function W(t,e,n){if(Math.floor(t)!==t)throw H(t,n),new z.ERR_OUT_OF_RANGE(n||"offset","an integer",t);if(e<0)throw new z.ERR_BUFFER_OUT_OF_BOUNDS;throw new z.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${e}`,t)}B("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),B("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),B("ERR_OUT_OF_RANGE",(function(t,e,n){let r=`The value of "${t}" is out of range.`,i=n;return Number.isInteger(n)&&Math.abs(n)>2**32?i=F(String(n)):"bigint"===typeof n&&(i=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(i=F(i)),i+="n"),r+=` It must be ${e}. Received ${i}`,r}),RangeError);const V=/[^+/0-9A-Za-z-_]/g;function Z(t,e){let n;e=e||1/0;const r=t.length;let i=null;const o=[];for(let s=0;s<r;++s){if(n=t.charCodeAt(s),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(t){return r.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function Y(t,e,n,r){let i;for(i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function $(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function K(t){return t!==t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let i=0;i<16;++i)e[r+i]=t[n]+t[i]}return e}();function Q(t){return"undefined"===typeof BigInt?J:t}function J(){throw new Error("BigInt not supported")}},6900:(t,e)=>{e.read=function(t,e,n,r,i){var o,s,a=8*i-r-1,l=(1<<a)-1,u=l>>1,c=-7,h=n?i-1:0,d=n?-1:1,f=t[e+h];for(h+=d,o=f&(1<<-c)-1,f>>=-c,c+=a;c>0;o=256*o+t[e+h],h+=d,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+t[e+h],h+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,r),o-=u}return(f?-1:1)*s*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var s,a,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(s++,l/=2),s+h>=c?(a=0,s=c):s+h>=1?(a=(e*l-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=255&a,f+=p,a/=256,i-=8);for(s=s<<i|a,u+=i;u>0;t[n+f]=255&s,f+=p,s/=256,u-=8);t[n+f-p]|=128*m}},228:function(t,e){!function(t){"use strict";var e="1.8.0";function n(t){var e,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(e in i=arguments[n])t[e]=i[e];return t}var r=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function i(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var r=n.call(arguments,2);return function(){return t.apply(e,r.length?r.concat(n.call(arguments)):arguments)}}var o=0;function s(t){return"_leaflet_id"in t||(t._leaflet_id=++o),t._leaflet_id}function a(t,e,n){var r,i,o,s;return s=function(){r=!1,i&&(o.apply(n,i),i=!1)},o=function(){r?i=arguments:(t.apply(n,arguments),setTimeout(s,e),r=!0)},o}function l(t,e,n){var r=e[1],i=e[0],o=r-i;return t===r&&n?t:((t-i)%o+o)%o+i}function u(){return!1}function c(t,e){if(!1===e)return t;var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return h(t).split(/\s+/)}function f(t,e){for(var n in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?r(t.options):{}),e)t.options[n]=e[n];return t.options}function p(t,e,n){var r=[];for(var i in t)r.push(encodeURIComponent(n?i.toUpperCase():i)+"="+encodeURIComponent(t[i]));return(e&&-1!==e.indexOf("?")?"&":"?")+r.join("&")}var m=/\{ *([\w_ -]+) *\}/g;function g(t,e){return t.replace(m,(function(t,n){var r=e[n];if(void 0===r)throw new Error("No value provided for variable "+t);return"function"===typeof r&&(r=r(e)),r}))}var _=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function y(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var v="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var w=0;function S(t){var e=+new Date,n=Math.max(0,16-(e-w));return w=e+n,window.setTimeout(t,n)}var x=window.requestAnimationFrame||b("RequestAnimationFrame")||S,E=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function C(t,e,n){if(!n||x!==S)return x.call(window,i(t,e));t.call(e)}function k(t){t&&E.call(window,t)}var O={__proto__:null,extend:n,create:r,bind:i,get lastId(){return o},stamp:s,throttle:a,wrapNum:l,falseFn:u,formatNum:c,trim:h,splitWords:d,setOptions:f,getParamString:p,template:g,isArray:_,indexOf:y,emptyImageUrl:v,requestFn:x,cancelFn:E,requestAnimFrame:C,cancelAnimFrame:k};function T(){}function N(t){if("undefined"!==typeof L&&L&&L.Mixin){t=_(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}T.extend=function(t){var e=function(){f(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=e.__super__=this.prototype,o=r(i);for(var s in o.constructor=e,e.prototype=o,this)Object.prototype.hasOwnProperty.call(this,s)&&"prototype"!==s&&"__super__"!==s&&(e[s]=this[s]);return t.statics&&n(e,t.statics),t.includes&&(N(t.includes),n.apply(null,[o].concat(t.includes))),n(o,t),delete o.statics,delete o.includes,o.options&&(o.options=i.options?r(i.options):{},n(o.options,t.options)),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},T.include=function(t){var e=this.prototype.options;return n(this.prototype,t),t.options&&(this.prototype.options=e,this.mergeOptions(t.options)),this},T.mergeOptions=function(t){return n(this.prototype.options,t),this},T.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"===typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var I={on:function(t,e,n){if("object"===typeof t)for(var r in t)this._on(r,t[r],e);else for(var i=0,o=(t=d(t)).length;i<o;i++)this._on(t[i],e,n);return this},off:function(t,e,n){if(arguments.length)if("object"===typeof t)for(var r in t)this._off(r,t[r],e);else{t=d(t);for(var i=1===arguments.length,o=0,s=t.length;o<s;o++)i?this._off(t[o]):this._off(t[o],e,n)}else delete this._events;return this},_on:function(t,e,n){if("function"===typeof e){this._events=this._events||{};var r=this._events[t];r||(r=[],this._events[t]=r),n===this&&(n=void 0);for(var i={fn:e,ctx:n},o=r,s=0,a=o.length;s<a;s++)if(o[s].fn===e&&o[s].ctx===n)return;o.push(i)}else console.warn("wrong listener type: "+typeof e)},_off:function(t,e,n){var r,i,o;if(this._events&&(r=this._events[t]))if(1!==arguments.length)if(n===this&&(n=void 0),"function"===typeof e){for(i=0,o=r.length;i<o;i++){var s=r[i];if(s.ctx===n&&s.fn===e)return this._firingCount&&(s.fn=u,this._events[t]=r=r.slice()),void r.splice(i,1)}console.warn("listener not found")}else console.warn("wrong listener type: "+typeof e);else{if(this._firingCount)for(i=0,o=r.length;i<o;i++)r[i].fn=u;delete this._events[t]}},fire:function(t,e,r){if(!this.listens(t,r))return this;var i=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var s=0,a=o.length;s<a;s++){var l=o[s];l.fn.call(l.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(t,e){"string"!==typeof t&&console.warn('"string" type argument expected');var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var r in this._eventParents)if(this._eventParents[r].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"===typeof t){for(var r in t)this.once(r,t[r],e);return this}var o=i((function(){this.off(t,e,n).off(t,o,n)}),this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[s(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[s(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};I.addEventListener=I.on,I.removeEventListener=I.clearAllEventListeners=I.off,I.addOneTimeEventListener=I.once,I.fireEvent=I.fire,I.hasEventListeners=I.listens;var P=T.extend(I);function M(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var j=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function R(t,e,n){return t instanceof M?t:_(t)?new M(t[0],t[1]):void 0===t||null===t?t:"object"===typeof t&&"x"in t&&"y"in t?new M(t.x,t.y):new M(t,e,n)}function A(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function D(t,e){return!t||t instanceof A?t:new A(t,e)}function U(t,e){if(t)for(var n=e?[t,e]:t,r=0,i=n.length;r<i;r++)this.extend(n[r])}function z(t,e){return t instanceof U?t:new U(t,e)}function B(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function F(t,e,n){return t instanceof B?t:_(t)&&"object"!==typeof t[0]?3===t.length?new B(t[0],t[1],t[2]):2===t.length?new B(t[0],t[1]):null:void 0===t||null===t?t:"object"===typeof t&&"lat"in t?new B(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new B(t,e,n)}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(t){return this.clone()._add(R(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(R(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new M(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new M(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=j(this.x),this.y=j(this.y),this},distanceTo:function(t){var e=(t=R(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=R(t)).x===this.x&&t.y===this.y},contains:function(t){return t=R(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},A.prototype={extend:function(t){return t=R(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new M(this.min.x,this.max.y)},getTopRight:function(){return new M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"===typeof t[0]||t instanceof M?R(t):D(t))instanceof A?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=D(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>=e.x&&r.x<=n.x,s=i.y>=e.y&&r.y<=n.y;return o&&s},overlaps:function(t){t=D(t);var e=this.min,n=this.max,r=t.min,i=t.max,o=i.x>e.x&&r.x<n.x,s=i.y>e.y&&r.y<n.y;return o&&s},isValid:function(){return!(!this.min||!this.max)}},U.prototype={extend:function(t){var e,n,r=this._southWest,i=this._northEast;if(t instanceof B)e=t,n=t;else{if(!(t instanceof U))return t?this.extend(F(t)||z(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return r||i?(r.lat=Math.min(e.lat,r.lat),r.lng=Math.min(e.lng,r.lng),i.lat=Math.max(n.lat,i.lat),i.lng=Math.max(n.lng,i.lng)):(this._southWest=new B(e.lat,e.lng),this._northEast=new B(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,r=Math.abs(e.lat-n.lat)*t,i=Math.abs(e.lng-n.lng)*t;return new U(new B(e.lat-r,e.lng-i),new B(n.lat+r,n.lng+i))},getCenter:function(){return new B((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new B(this.getNorth(),this.getWest())},getSouthEast:function(){return new B(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"===typeof t[0]||t instanceof B||"lat"in t?F(t):z(t);var e,n,r=this._southWest,i=this._northEast;return t instanceof U?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=r.lat&&n.lat<=i.lat&&e.lng>=r.lng&&n.lng<=i.lng},intersects:function(t){t=z(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>=e.lat&&r.lat<=n.lat,s=i.lng>=e.lng&&r.lng<=n.lng;return o&&s},overlaps:function(t){t=z(t);var e=this._southWest,n=this._northEast,r=t.getSouthWest(),i=t.getNorthEast(),o=i.lat>e.lat&&r.lat<n.lat,s=i.lng>e.lng&&r.lng<n.lng;return o&&s},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=z(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},B.prototype={equals:function(t,e){return!!t&&(t=F(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+c(this.lat,t)+", "+c(this.lng,t)+")"},distanceTo:function(t){return H.distance(this,F(t))},wrap:function(){return H.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return z([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new B(this.lat,this.lng,this.alt)}};var q={latLngToPoint:function(t,e){var n=this.projection.project(t),r=this.scale(e);return this.transformation._transform(n,r)},pointToLatLng:function(t,e){var n=this.scale(e),r=this.transformation.untransform(t,n);return this.projection.unproject(r)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new A(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?l(t.lng,this.wrapLng,!0):t.lng;return new B(this.wrapLat?l(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),r=e.lat-n.lat,i=e.lng-n.lng;if(0===r&&0===i)return t;var o=t.getSouthWest(),s=t.getNorthEast();return new U(new B(o.lat-r,o.lng-i),new B(s.lat-r,s.lng-i))}},H=n({},q,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,r=t.lat*n,i=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),s=Math.sin((e.lng-t.lng)*n/2),a=o*o+Math.cos(r)*Math.cos(i)*s*s,l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return this.R*l}}),W=6378137,V={R:W,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,t.lat),-n),i=Math.sin(r*e);return new M(this.R*t.lng*e,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(t){var e=180/Math.PI;return new B((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=W*Math.PI;return new A([-t,-t],[t,t])}()};function Z(t,e,n,r){if(_(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=r}function G(t,e,n,r){return new Z(t,e,n,r)}Z.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new M((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var Y=n({},H,{code:"EPSG:3857",projection:V,transformation:function(){var t=.5/(Math.PI*V.R);return G(t,.5,-t,.5)}()}),$=n({},Y,{code:"EPSG:900913"});function K(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function X(t,e){var n,r,i,o,s,a,l="";for(n=0,i=t.length;n<i;n++){for(r=0,o=(s=t[n]).length;r<o;r++)l+=(r?"L":"M")+(a=s[r]).x+" "+a.y;l+=e?Rt.svg?"z":"x":""}return l||"M0 0"}var Q=document.documentElement.style,J="ActiveXObject"in window,tt=J&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),nt=jt("webkit"),rt=jt("android"),it=jt("android 2")||jt("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),st=rt&&jt("Google")&&ot<537&&!("AudioNode"in window),at=!!window.opera,lt=!et&&jt("chrome"),ut=jt("gecko")&&!nt&&!at&&!J,ct=!lt&&jt("safari"),ht=jt("phantom"),dt="OTransition"in Q,ft=0===navigator.platform.indexOf("Win"),pt=J&&"transition"in Q,mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!it,gt="MozPerspective"in Q,_t=!window.L_DISABLE_3D&&(pt||mt||gt)&&!dt&&!ht,yt="undefined"!==typeof orientation||jt("mobile"),vt=yt&&nt,bt=yt&&mt,wt=!window.PointerEvent&&window.MSPointerEvent,St=!(!window.PointerEvent&&!wt),xt="ontouchstart"in window||!!window.TouchEvent,Et=!window.L_NO_TOUCH&&(xt||St),Ct=yt&&at,kt=yt&&ut,Ot=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Tt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",u,e),window.removeEventListener("testPassiveEventSupport",u,e)}catch(n){}return t}(),Nt=!!document.createElement("canvas").getContext,It=!(!document.createElementNS||!K("svg").createSVGRect),Pt=!!It&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>","http://www.w3.org/2000/svg"===(t.firstChild&&t.firstChild.namespaceURI)}(),Mt=!It&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"===typeof e.adj}catch(n){return!1}}();function jt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Rt={ie:J,ielt9:tt,edge:et,webkit:nt,android:rt,android23:it,androidStock:st,opera:at,chrome:lt,gecko:ut,safari:ct,phantom:ht,opera12:dt,win:ft,ie3d:pt,webkit3d:mt,gecko3d:gt,any3d:_t,mobile:yt,mobileWebkit:vt,mobileWebkit3d:bt,msPointer:wt,pointer:St,touch:Et,touchNative:xt,mobileOpera:Ct,mobileGecko:kt,retina:Ot,passiveEvents:Tt,canvas:Nt,svg:It,vml:Mt,inlineSvg:Pt},At=Rt.msPointer?"MSPointerDown":"pointerdown",Dt=Rt.msPointer?"MSPointerMove":"pointermove",Lt=Rt.msPointer?"MSPointerUp":"pointerup",Ut=Rt.msPointer?"MSPointerCancel":"pointercancel",zt={touchstart:At,touchmove:Dt,touchend:Lt,touchcancel:Ut},Bt={touchstart:Kt,touchmove:$t,touchend:$t,touchcancel:$t},Ft={},qt=!1;function Ht(t,e,n){return"touchstart"===e&&Yt(),Bt[e]?(n=Bt[e].bind(this,n),t.addEventListener(zt[e],n,!1),n):(console.warn("wrong event specified:",e),L.Util.falseFn)}function Wt(t,e,n){zt[e]?t.removeEventListener(zt[e],n,!1):console.warn("wrong event specified:",e)}function Vt(t){Ft[t.pointerId]=t}function Zt(t){Ft[t.pointerId]&&(Ft[t.pointerId]=t)}function Gt(t){delete Ft[t.pointerId]}function Yt(){qt||(document.addEventListener(At,Vt,!0),document.addEventListener(Dt,Zt,!0),document.addEventListener(Lt,Gt,!0),document.addEventListener(Ut,Gt,!0),qt=!0)}function $t(t,e){if(e.pointerType!==(e.MSPOINTER_TYPE_MOUSE||"mouse")){for(var n in e.touches=[],Ft)e.touches.push(Ft[n]);e.changedTouches=[e],t(e)}}function Kt(t,e){e.MSPOINTER_TYPE_TOUCH&&e.pointerType===e.MSPOINTER_TYPE_TOUCH&&Ve(e),$t(t,e)}function Xt(t){var e,n,r={};for(n in t)e=t[n],r[n]=e&&e.bind?e.bind(t):e;return t=r,r.type="dblclick",r.detail=2,r.isTrusted=!1,r._simulated=!0,r}var Qt=200;function Jt(t,e){t.addEventListener("dblclick",e);var n,r=0;function i(t){if(1===t.detail){if("mouse"!==t.pointerType&&(!t.sourceCapabilities||t.sourceCapabilities.firesTouchEvents)){var i=Date.now();i-r<=Qt?2===++n&&e(Xt(t)):n=1,r=i}}else n=t.detail}return t.addEventListener("click",i),{dblclick:e,simDblclick:i}}function te(t,e){t.removeEventListener("dblclick",e.dblclick),t.removeEventListener("click",e.simDblclick)}var ee,ne,re,ie,oe,se=xe(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ae=xe(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),le="webkitTransition"===ae||"OTransition"===ae?ae+"End":"transitionend";function ue(t){return"string"===typeof t?document.getElementById(t):t}function ce(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var r=document.defaultView.getComputedStyle(t,null);n=r?r[e]:null}return"auto"===n?null:n}function he(t,e,n){var r=document.createElement(t);return r.className=e||"",n&&n.appendChild(r),r}function de(t){var e=t.parentNode;e&&e.removeChild(t)}function fe(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function pe(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function me(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ge(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=be(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function _e(t,e){if(void 0!==t.classList)for(var n=d(e),r=0,i=n.length;r<i;r++)t.classList.add(n[r]);else if(!ge(t,e)){var o=be(t);ve(t,(o?o+" ":"")+e)}}function ye(t,e){void 0!==t.classList?t.classList.remove(e):ve(t,h((" "+be(t)+" ").replace(" "+e+" "," ")))}function ve(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function be(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function we(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&Se(t,e)}function Se(t,e){var n=!1,r="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(r)}catch(i){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+r+"(opacity="+e+")"}function xe(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function Ee(t,e,n){var r=e||new M(0,0);t.style[se]=(Rt.ie3d?"translate("+r.x+"px,"+r.y+"px)":"translate3d("+r.x+"px,"+r.y+"px,0)")+(n?" scale("+n+")":"")}function Ce(t,e){t._leaflet_pos=e,Rt.any3d?Ee(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ke(t){return t._leaflet_pos||new M(0,0)}if("onselectstart"in document)ee=function(){Ae(window,"selectstart",Ve)},ne=function(){Le(window,"selectstart",Ve)};else{var Oe=xe(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ee=function(){if(Oe){var t=document.documentElement.style;re=t[Oe],t[Oe]="none"}},ne=function(){Oe&&(document.documentElement.style[Oe]=re,re=void 0)}}function Te(){Ae(window,"dragstart",Ve)}function Ne(){Le(window,"dragstart",Ve)}function Ie(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Pe(),ie=t,oe=t.style.outline,t.style.outline="none",Ae(window,"keydown",Pe))}function Pe(){ie&&(ie.style.outline=oe,ie=void 0,oe=void 0,Le(window,"keydown",Pe))}function Me(t){do{t=t.parentNode}while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function je(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Re={__proto__:null,TRANSFORM:se,TRANSITION:ae,TRANSITION_END:le,get:ue,getStyle:ce,create:he,remove:de,empty:fe,toFront:pe,toBack:me,hasClass:ge,addClass:_e,removeClass:ye,setClass:ve,getClass:be,setOpacity:we,testProp:xe,setTransform:Ee,setPosition:Ce,getPosition:ke,get disableTextSelection(){return ee},get enableTextSelection(){return ne},disableImageDrag:Te,enableImageDrag:Ne,preventOutline:Ie,restoreOutline:Pe,getSizedParentNode:Me,getScale:je};function Ae(t,e,n,r){if(e&&"object"===typeof e)for(var i in e)Be(t,i,e[i],n);else for(var o=0,s=(e=d(e)).length;o<s;o++)Be(t,e[o],n,r);return this}var De="_leaflet_events";function Le(t,e,n,r){if(1===arguments.length)Ue(t),delete t[De];else if(e&&"object"===typeof e)for(var i in e)Fe(t,i,e[i],n);else if(e=d(e),2===arguments.length)Ue(t,(function(t){return-1!==y(e,t)}));else for(var o=0,s=e.length;o<s;o++)Fe(t,e[o],n,r);return this}function Ue(t,e){for(var n in t[De]){var r=n.split(/\d/)[0];e&&!e(r)||Fe(t,r,null,null,n)}}var ze={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Be(t,e,n,r){var i=e+s(n)+(r?"_"+s(r):"");if(t[De]&&t[De][i])return this;var o=function(e){return n.call(r||t,e||window.event)},a=o;!Rt.touchNative&&Rt.pointer&&0===e.indexOf("touch")?o=Ht(t,e,o):Rt.touch&&"dblclick"===e?o=Jt(t,o):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(ze[e]||e,o,!!Rt.passiveEvents&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,Ke(t,e)&&a(e)},t.addEventListener(ze[e],o,!1)):t.addEventListener(e,a,!1):t.attachEvent("on"+e,o),t[De]=t[De]||{},t[De][i]=o}function Fe(t,e,n,r,i){i=i||e+s(n)+(r?"_"+s(r):"");var o=t[De]&&t[De][i];if(!o)return this;!Rt.touchNative&&Rt.pointer&&0===e.indexOf("touch")?Wt(t,e,o):Rt.touch&&"dblclick"===e?te(t,o):"removeEventListener"in t?t.removeEventListener(ze[e]||e,o,!1):t.detachEvent("on"+e,o),t[De][i]=null}function qe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function He(t){return Be(t,"wheel",qe),this}function We(t){return Ae(t,"mousedown touchstart dblclick contextmenu",qe),t._leaflet_disable_click=!0,this}function Ve(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ze(t){return Ve(t),qe(t),this}function Ge(t,e){if(!e)return new M(t.clientX,t.clientY);var n=je(e),r=n.boundingClientRect;return new M((t.clientX-r.left)/n.x-e.clientLeft,(t.clientY-r.top)/n.y-e.clientTop)}var Ye=Rt.win&&Rt.chrome?2*window.devicePixelRatio:Rt.gecko?window.devicePixelRatio:1;function $e(t){return Rt.edge?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Ye:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function Ke(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(r){return!1}return n!==t}var Xe={__proto__:null,on:Ae,off:Le,stopPropagation:qe,disableScrollPropagation:He,disableClickPropagation:We,preventDefault:Ve,stop:Ze,getMousePosition:Ge,getWheelDelta:$e,isExternalTarget:Ke,addListener:Ae,removeListener:Le},Qe=P.extend({run:function(t,e,n,r){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=ke(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=C(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),Ce(this._el,n),this.fire("step")},_complete:function(){k(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Je=P.extend({options:{crs:Y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=f(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(F(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ae&&Rt.any3d&&!Rt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ae(this._proxy,le,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,r){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(F(t),e,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&!0!==r&&(void 0!==r.animate&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,r.zoom):this._tryAnimatedPan(t,r.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(Rt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(Rt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var r=this.getZoomScale(e),i=this.getSize().divideBy(2),o=(t instanceof M?t:this.latLngToContainerPoint(t)).subtract(i).multiplyBy(1-1/r),s=this.containerPointToLatLng(i.add(o));return this.setView(s,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():z(t);var n=R(e.paddingTopLeft||e.padding||[0,0]),r=R(e.paddingBottomRight||e.padding||[0,0]),i=this.getBoundsZoom(t,!1,n.add(r));if((i="number"===typeof e.maxZoom?Math.min(e.maxZoom,i):i)===1/0)return{center:t.getCenter(),zoom:i};var o=r.subtract(n).divideBy(2),s=this.project(t.getSouthWest(),i),a=this.project(t.getNorthEast(),i);return{center:this.unproject(s.add(a).divideBy(2).add(o),i),zoom:i}},fitBounds:function(t,e){if(!(t=z(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=R(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Qe,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){_e(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!Rt.any3d)return this.setView(t,e,n);this._stop();var r=this.project(this.getCenter()),i=this.project(t),o=this.getSize(),s=this._zoom;t=F(t),e=void 0===e?s:e;var a=Math.max(o.x,o.y),l=a*this.getZoomScale(s,e),u=i.distanceTo(r)||1,c=1.42,h=c*c;function d(t){var e=(l*l-a*a+(t?-1:1)*h*h*u*u)/(2*(t?l:a)*h*u),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function f(t){return(Math.exp(t)-Math.exp(-t))/2}function p(t){return(Math.exp(t)+Math.exp(-t))/2}function m(t){return f(t)/p(t)}var g=d(0);function _(t){return a*(p(g)/p(g+c*t))}function y(t){return a*(p(g)*m(g+c*t)-f(g))/h}function v(t){return 1-Math.pow(1-t,1.5)}var b=Date.now(),w=(d(1)-g)/c,S=n.duration?1e3*n.duration:1e3*w*.8;function x(){var n=(Date.now()-b)/S,o=v(n)*w;n<=1?(this._flyToFrame=C(x,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(y(o)/u)),s),this.getScaleZoom(a/_(o),s),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),x.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=z(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,z(t));return n.equals(r)||this.panTo(r,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=R((e=e||{}).paddingTopLeft||e.padding||[0,0]),r=R(e.paddingBottomRight||e.padding||[0,0]),i=this.project(this.getCenter()),o=this.project(t),s=this.getPixelBounds(),a=D([s.min.add(n),s.max.subtract(r)]),l=a.getSize();if(!a.contains(o)){this._enforcingBounds=!0;var u=o.subtract(a.getCenter()),c=a.extend(o).getSize().subtract(l);i.x+=u.x<0?-c.x:c.x,i.y+=u.y<0?-c.y:c.y,this.panTo(this.unproject(i),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),o=e.divideBy(2).round(),s=r.divideBy(2).round(),a=o.subtract(s);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:r})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,r,t):navigator.geolocation.getCurrentPosition(e,r,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var e=new B(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),r=this._locateOptions;if(r.setView){var i=this.getBoundsZoom(n);this.setView(e,r.maxZoom?Math.min(i,r.maxZoom):i)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var s in t.coords)"number"===typeof t.coords[s]&&(o[s]=t.coords[s]);this.fire("locationfound",o)}},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),de(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(k(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)de(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=he("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new U(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=z(t),n=R(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),o=this.getMaxZoom(),s=t.getNorthWest(),a=t.getSouthEast(),l=this.getSize().subtract(n),u=D(this.project(a,r),this.project(s,r)).getSize(),c=Rt.any3d?this.options.zoomSnap:1,h=l.x/u.x,d=l.y/u.y,f=e?Math.max(h,d):Math.min(h,d);return r=this.getScaleZoom(f,r),c&&(r=Math.round(r/(c/100))*(c/100),r=e?Math.ceil(r/c)*c:Math.floor(r/c)*c),Math.max(i,Math.min(o,r))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new A(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"===typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var r=n.zoom(t*n.scale(e));return isNaN(r)?1/0:r},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(F(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(R(t),e)},layerPointToLatLng:function(t){var e=R(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(F(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(F(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(z(t))},distance:function(t,e){return this.options.crs.distance(F(t),F(e))},containerPointToLayerPoint:function(t){return R(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return R(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(R(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(t)))},mouseEventToContainerPoint:function(t){return Ge(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ue(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ae(e,"scroll",this._onScroll,this),this._containerId=s(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&Rt.any3d,_e(t,"leaflet-container"+(Rt.touch?" leaflet-touch":"")+(Rt.retina?" leaflet-retina":"")+(Rt.ielt9?" leaflet-oldie":"")+(Rt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ce(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Ce(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(_e(t.markerPane,"leaflet-zoom-hide"),_e(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){Ce(this._mapPane,new M(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var r=this._zoom!==e;this._moveStart(r,!1)._move(t,e)._moveEnd(r),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n,r){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),r?n&&n.pinch&&this.fire("zoom",n):((i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return k(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){Ce(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[s(this._container)]=this;var e=t?Le:Ae;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),Rt.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){k(this._resizeRequest),this._resizeRequest=C((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,r=[],i="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,a=!1;o;){if((n=this._targets[s(o)])&&("click"===e||"preclick"===e)&&this._draggableMoved(n)){a=!0;break}if(n&&n.listens(e,!0)){if(i&&!Ke(o,t))break;if(r.push(n),i)break}if(o===this._container)break;o=o.parentNode}return r.length||a||i||!this.listens(e,!0)||(r=[this]),r},_isClickDisabled:function(t){for(;t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var e=t.target||t.srcElement;if(!(!this._loaded||e._leaflet_disable_events||"click"===t.type&&this._isClickDisabled(e))){var n=t.type;"mousedown"===n&&Ie(e),this._fireDOMEvent(t,n)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,r){if("click"===t.type){var i=n({},t);i.type="preclick",this._fireDOMEvent(i,i.type,r)}var o=this._findEventTargets(t,e);if(r){for(var s=[],a=0;a<r.length;a++)r[a].listens(e,!0)&&s.push(r[a]);o=s.concat(o)}if(o.length){"contextmenu"===e&&Ve(t);var l=o[0],u={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var c=l.getLatLng&&(!l._radius||l._radius<=10);u.containerPoint=c?this.latLngToContainerPoint(l.getLatLng()):this.mouseEventToContainerPoint(t),u.layerPoint=this.containerPointToLayerPoint(u.containerPoint),u.latlng=c?l.getLatLng():this.layerPointToLatLng(u.layerPoint)}for(a=0;a<o.length;a++)if(o[a].fire(e,u,!0),u.originalEvent._stopped||!1===o[a].options.bubblingMouseEvents&&-1!==y(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ke(this._mapPane)||new M(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(r)},_latLngBoundsToNewLayerBounds:function(t,e,n){var r=this._getNewPixelOrigin(n,e);return D([this.project(t.getSouthWest(),e)._subtract(r),this.project(t.getNorthWest(),e)._subtract(r),this.project(t.getSouthEast(),e)._subtract(r),this.project(t.getNorthEast(),e)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var r=this.project(t,e),i=this.getSize().divideBy(2),o=new A(r.subtract(i),r.add(i)),s=this._getBoundsOffset(o,n,e);return s.round().equals([0,0])?t:this.unproject(r.add(s),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),r=new A(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(r,e))},_getBoundsOffset:function(t,e,n){var r=D(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),i=r.min.subtract(t.min),o=r.max.subtract(t.max);return new M(this._rebound(i.x,-o.x),this._rebound(i.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),r=Rt.any3d?this.options.zoomSnap:1;return r&&(t=Math.round(t/r)*r),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ye(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=he("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=se,n=this._proxy.style[e];Ee(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){de(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();Ee(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(e),i=this._getCenterOffset(t)._divideBy(1-1/r);return!(!0!==n.animate&&!this.getSize().contains(i))&&(C((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),!0)},_animateZoom:function(t,e,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,_e(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:r}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ye(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function tn(t,e){return new Je(t,e)}var en=T.extend({options:{position:"topright"},initialize:function(t){f(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),r=t._controlCorners[n];return _e(e,"leaflet-control"),-1!==n.indexOf("bottom")?r.insertBefore(e,r.firstChild):r.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(de(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),nn=function(t){return new en(t)};Je.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=he("div",e+"control-container",this._container);function r(r,i){var o=e+r+" "+e+i;t[r+i]=he("div",o,n)}r("top","left"),r("top","right"),r("bottom","left"),r("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)de(this._controlCorners[t]);de(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var rn=en.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,r){return n<r?-1:r<n?1:0}},initialize:function(t,e,n){for(var r in f(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[r],r);for(r in e)this._addLayer(e[r],r,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return en.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(s(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){_e(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(_e(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ye(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ye(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=he("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),We(e),He(e);var r=this._section=he("section",t+"-list");n&&(this._map.on("click",this.collapse,this),Ae(e,{mouseenter:function(){Ae(r,"click",Ve),this.expand(),setTimeout((function(){Le(r,"click",Ve)}))},mouseleave:this.collapse},this));var i=this._layersLink=he("a",t+"-toggle",e);i.href="#",i.title="Layers",i.setAttribute("role","button"),Ae(i,"click",Ve),Ae(i,"focus",this.expand,this),n||this.expand(),this._baseLayersList=he("div",t+"-base",r),this._separator=he("div",t+"-separator",r),this._overlaysList=he("div",t+"-overlays",r),e.appendChild(r)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&s(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(i((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;fe(this._baseLayersList),fe(this._overlaysList),this._layerControlInputs=[];var t,e,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),e=e||r.overlay,t=t||!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(t=t&&i>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(s(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",r=document.createElement("div");return r.innerHTML=n,r.firstChild},_addItem:function(t){var e,n=document.createElement("label"),r=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=r):e=this._createRadioElement("leaflet-base-layers_"+s(this),r),this._layerControlInputs.push(e),e.layerId=s(t.layer),Ae(e,"click",this._onInputClick,this);var i=document.createElement("span");i.innerHTML=" "+t.name;var o=document.createElement("span");return n.appendChild(o),o.appendChild(e),o.appendChild(i),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,r=[],i=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?r.push(e):t.checked||i.push(e);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])&&this._map.removeLayer(i[o]);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])||this._map.addLayer(r[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,r=this._map.getZoom(),i=n.length-1;i>=0;i--)t=n[i],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&r<e.options.minZoom||void 0!==e.options.maxZoom&&r>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this}}),on=function(t,e,n){return new rn(t,e,n)},sn=en.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=he("div",e+" leaflet-bar"),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,r,i){var o=he("a",n,r);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),We(o),Ae(o,"click",Ze),Ae(o,"click",i,this),Ae(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ye(this._zoomInButton,e),ye(this._zoomOutButton,e),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(_e(this._zoomOutButton,e),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(_e(this._zoomInButton,e),this._zoomInButton.setAttribute("aria-disabled","true"))}});Je.mergeOptions({zoomControl:!0}),Je.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new sn,this.addControl(this.zoomControl))}));var an=function(t){return new sn(t)},ln=en.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=he("div",e),r=this.options;return this._addScales(r,e+"-line",n),t.on(r.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=he("div",e,n)),t.imperial&&(this._iScale=he("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,r,i=3.2808399*t;i>5280?(e=i/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(r=this._getRoundNum(i),this._updateScale(this._iScale,r+" ft",r/i))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),un=function(t){return new ln(t)},cn='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',hn=en.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Rt.inlineSvg?cn+" ":"")+"Leaflet</a>"},initialize:function(t){f(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=he("div","leaflet-control-attribution"),We(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",(function(){this.removeAttribution(t.layer.getAttribution())}),this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(' <span aria-hidden="true">|</span> ')}}});Je.mergeOptions({attributionControl:!0}),Je.addInitHook((function(){this.options.attributionControl&&(new hn).addTo(this)}));var dn=function(t){return new hn(t)};en.Layers=rn,en.Zoom=sn,en.Scale=ln,en.Attribution=hn,nn.layers=on,nn.zoom=an,nn.scale=un,nn.attribution=dn;var fn=T.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});fn.addTo=function(t,e){return t.addHandler(e,this),this};var pn,mn={Events:I},gn=Rt.touch?"touchstart mousedown":"mousedown",_n=P.extend({options:{clickTolerance:3},initialize:function(t,e,n,r){f(this,r),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ae(this._dragStartTarget,gn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(_n._dragging===this&&this.finishDrag(!0),Le(this._dragStartTarget,gn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!ge(this._element,"leaflet-zoom-anim")))if(t.touches&&1!==t.touches.length)_n._dragging===this&&this.finishDrag();else if(!(_n._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&(_n._dragging=this,this._preventOutline&&Ie(this._element),Te(),ee(),!this._moving)){this.fire("down");var e=t.touches?t.touches[0]:t,n=Me(this._element);this._startPoint=new M(e.clientX,e.clientY),this._startPos=ke(this._element),this._parentScale=je(n);var r="mousedown"===t.type;Ae(document,r?"mousemove":"touchmove",this._onMove,this),Ae(document,r?"mouseup":"touchend touchcancel",this._onUp,this)}},_onMove:function(t){if(this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new M(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Ve(t),this._moved||(this.fire("dragstart"),this._moved=!0,_e(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),_e(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=t,this._updatePosition()))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),Ce(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){ye(document.body,"leaflet-dragging"),this._lastTarget&&(ye(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Le(document,"mousemove touchmove",this._onMove,this),Le(document,"mouseup touchend touchcancel",this._onUp,this),Ne(),ne(),this._moved&&this._moving&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)}),this._moving=!1,_n._dragging=!1}});function yn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=wn(t=xn(t,n),n)}function vn(t,e,n){return Math.sqrt(Tn(t,e,n,!0))}function bn(t,e,n){return Tn(t,e,n)}function wn(t,e){var n=t.length,r=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);r[0]=r[n-1]=1,Sn(t,r,e,0,n-1);var i,o=[];for(i=0;i<n;i++)r[i]&&o.push(t[i]);return o}function Sn(t,e,n,r,i){var o,s,a,l=0;for(s=r+1;s<=i-1;s++)(a=Tn(t[s],t[r],t[i],!0))>l&&(o=s,l=a);l>n&&(e[o]=1,Sn(t,e,n,r,o),Sn(t,e,n,o,i))}function xn(t,e){for(var n=[t[0]],r=1,i=0,o=t.length;r<o;r++)On(t[r],t[i])>e&&(n.push(t[r]),i=r);return i<o-1&&n.push(t[o-1]),n}function En(t,e,n,r,i){var o,s,a,l=r?pn:kn(t,n),u=kn(e,n);for(pn=u;;){if(!(l|u))return[t,e];if(l&u)return!1;a=kn(s=Cn(t,e,o=l||u,n,i),n),o===l?(t=s,l=a):(e=s,u=a)}}function Cn(t,e,n,r,i){var o,s,a=e.x-t.x,l=e.y-t.y,u=r.min,c=r.max;return 8&n?(o=t.x+a*(c.y-t.y)/l,s=c.y):4&n?(o=t.x+a*(u.y-t.y)/l,s=u.y):2&n?(o=c.x,s=t.y+l*(c.x-t.x)/a):1&n&&(o=u.x,s=t.y+l*(u.x-t.x)/a),new M(o,s,i)}function kn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function On(t,e){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function Tn(t,e,n,r){var i,o=e.x,s=e.y,a=n.x-o,l=n.y-s,u=a*a+l*l;return u>0&&((i=((t.x-o)*a+(t.y-s)*l)/u)>1?(o=n.x,s=n.y):i>0&&(o+=a*i,s+=l*i)),a=t.x-o,l=t.y-s,r?a*a+l*l:new M(o,s)}function Nn(t){return!_(t[0])||"object"!==typeof t[0][0]&&"undefined"!==typeof t[0][0]}function In(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Nn(t)}var Pn={__proto__:null,simplify:yn,pointToSegmentDistance:vn,closestPointOnSegment:bn,clipSegment:En,_getEdgeIntersection:Cn,_getBitCode:kn,_sqClosestPointOnSegment:Tn,isFlat:Nn,_flat:In};function Mn(t,e,n){var r,i,o,s,a,l,u,c,h,d=[1,4,2,8];for(i=0,u=t.length;i<u;i++)t[i]._code=kn(t[i],e);for(s=0;s<4;s++){for(c=d[s],r=[],i=0,o=(u=t.length)-1;i<u;o=i++)a=t[i],l=t[o],a._code&c?l._code&c||((h=Cn(l,a,c,e,n))._code=kn(h,e),r.push(h)):(l._code&c&&((h=Cn(l,a,c,e,n))._code=kn(h,e),r.push(h)),r.push(a));t=r}return t}var jn={__proto__:null,clipPolygon:Mn},Rn={project:function(t){return new M(t.lng,t.lat)},unproject:function(t){return new B(t.y,t.x)},bounds:new A([-180,-90],[180,90])},An={R:6378137,R_MINOR:6356752.314245179,bounds:new A([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,r=t.lat*e,i=this.R_MINOR/n,o=Math.sqrt(1-i*i),s=o*Math.sin(r),a=Math.tan(Math.PI/4-r/2)/Math.pow((1-s)/(1+s),o/2);return r=-n*Math.log(Math.max(a,1e-10)),new M(t.lng*e*n,r)},unproject:function(t){for(var e,n=180/Math.PI,r=this.R,i=this.R_MINOR/r,o=Math.sqrt(1-i*i),s=Math.exp(-t.y/r),a=Math.PI/2-2*Math.atan(s),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)e=o*Math.sin(a),e=Math.pow((1-e)/(1+e),o/2),a+=u=Math.PI/2-2*Math.atan(s*e)-a;return new B(a*n,t.x*n/r)}},Dn={__proto__:null,LonLat:Rn,Mercator:An,SphericalMercator:V},Ln=n({},H,{code:"EPSG:3395",projection:An,transformation:function(){var t=.5/(Math.PI*An.R);return G(t,.5,-t,.5)}()}),Un=n({},H,{code:"EPSG:4326",projection:Rn,transformation:G(1/180,1,-1/180,.5)}),zn=n({},q,{projection:Rn,transformation:G(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,r=e.lat-t.lat;return Math.sqrt(n*n+r*r)},infinite:!0});q.Earth=H,q.EPSG3395=Ln,q.EPSG3857=Y,q.EPSG900913=$,q.EPSG4326=Un,q.Simple=zn;var Bn=P.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[s(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[s(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.fire("add"),e.fire("layeradd",{layer:this})}}});Je.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=s(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=s(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return s(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?_(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[s(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=s(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;t=void 0===i.minZoom?t:Math.min(t,i.minZoom),e=void 0===i.maxZoom?e:Math.max(e,i.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Fn=Bn.extend({initialize:function(t,e){var n,r;if(f(this,e),this._layers={},t)for(n=0,r=t.length;n<r;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return("number"===typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,r=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,r);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return s(t)}}),qn=function(t,e){return new Fn(t,e)},Hn=Fn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Fn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Fn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new U;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Wn=function(t,e){return new Hn(t,e)},Vn=T.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){f(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var r=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(r,t),(this.options.crossOrigin||""===this.options.crossOrigin)&&(r.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),r},_setIconStyles:function(t,e){var n=this.options,r=n[e+"Size"];"number"===typeof r&&(r=[r,r]);var i=R(r),o=R("shadow"===e&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),i&&(t.style.width=i.x+"px",t.style.height=i.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Rt.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Zn(t){return new Vn(t)}var Gn=Vn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return"string"!==typeof Gn.imagePath&&(Gn.imagePath=this._detectIconPath()),(this.options.imagePath||Gn.imagePath)+Vn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var e=function(t,e,n){var r=e.exec(t);return r&&r[n]};return(t=e(t,/^url\((['"])?(.+)\1\)$/,2))&&e(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=he("div","leaflet-default-icon-path",document.body),e=ce(t,"background-image")||ce(t,"backgroundImage");if(document.body.removeChild(t),e=this._stripUrl(e))return e;var n=document.querySelector('link[href$="leaflet.css"]');return n?n.href.substring(0,n.href.length-11-1):""}}),Yn=fn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new _n(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),_e(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ye(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,o=ke(e._icon),s=n.getPixelBounds(),a=n.getPixelOrigin(),l=D(s.min._subtract(a).add(i),s.max._subtract(a).subtract(i));if(!l.contains(o)){var u=R((Math.max(l.max.x,o.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,o.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,o.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,o.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(r);n.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),Ce(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=C(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(k(this._panRequest),this._panRequest=C(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,r=ke(e._icon),i=e._map.layerPointToLatLng(r);n&&Ce(n,r),e._latlng=i,t.latlng=i,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){k(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),$n=Bn.extend({options:{icon:new Gn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){f(this,e),this._latlng=F(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),_e(n,e),t.keyboard&&(n.tabIndex="0",n.setAttribute("role","button")),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ae(n,"focus",this._panOnFocus,this);var i=t.icon.createShadow(this._shadow),o=!1;i!==this._shadow&&(this._removeShadow(),o=!0),i&&(_e(i,e),i.alt=""),this._shadow=i,t.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Le(this._icon,"focus",this._panOnFocus,this),de(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&de(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&Ce(this._icon,t),this._shadow&&Ce(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(_e(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Yn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Yn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&we(this._icon,t),this._shadow&&we(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var e=this.options.icon.options,n=e.iconSize?R(e.iconSize):R(0,0),r=e.iconAnchor?R(e.iconAnchor):R(0,0);t.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Kn(t,e){return new $n(t,e)}var Xn=Bn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return f(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Qn=Xn.extend({options:{fill:!0,radius:10},initialize:function(t,e){f(this,e),this._latlng=F(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Xn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),r=[t+n,e+n];this._pxBounds=new A(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Jn(t,e){return new Qn(t,e)}var tr=Qn.extend({initialize:function(t,e,r){if("number"===typeof e&&(e=n({},r,{radius:e})),f(this,e),this._latlng=F(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new U(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Xn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===H.distance){var i=Math.PI/180,o=this._mRadius/H.R/i,s=n.project([e+o,t]),a=n.project([e-o,t]),l=s.add(a).divideBy(2),u=n.unproject(l).lat,c=Math.acos((Math.cos(o*i)-Math.sin(e*i)*Math.sin(u*i))/(Math.cos(e*i)*Math.cos(u*i)))/i;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*e)),this._point=l.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-n.project([u,t-c]).x,this._radiusY=l.y-s.y}else{var h=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});function er(t,e,n){return new tr(t,e,n)}var nr=Xn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){f(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,r=1/0,i=null,o=Tn,s=0,a=this._parts.length;s<a;s++)for(var l=this._parts[s],u=1,c=l.length;u<c;u++){var h=o(t,e=l[u-1],n=l[u],!0);h<r&&(r=h,i=o(t,e,n))}return i&&(i.distance=Math.sqrt(r)),i},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,s,a=this._rings[0],l=a.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=a[t].distanceTo(a[t+1])/2;if(0===e)return this._map.layerPointToLatLng(a[0]);for(t=0,r=0;t<l-1;t++)if(i=a[t],o=a[t+1],(r+=n=i.distanceTo(o))>e)return s=(r-e)/n,this._map.layerPointToLatLng([o.x-s*(o.x-i.x),o.y-s*(o.y-i.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=F(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new U,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Nn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=Nn(t),r=0,i=t.length;r<i;r++)n?(e[r]=F(t[r]),this._bounds.extend(e[r])):e[r]=this._convertLatLngs(t[r]);return e},_project:function(){var t=new A;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new M(t,t);this._rawPxBounds&&(this._pxBounds=new A([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)]))},_projectLatlngs:function(t,e,n){var r,i,o=t[0]instanceof B,s=t.length;if(o){for(i=[],r=0;r<s;r++)i[r]=this._map.latLngToLayerPoint(t[r]),n.extend(i[r]);e.push(i)}else for(r=0;r<s;r++)this._projectLatlngs(t[r],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,r,i,o,s,a,l=this._parts;for(e=0,r=0,i=this._rings.length;e<i;e++)for(n=0,o=(a=this._rings[e]).length;n<o-1;n++)(s=En(a[n],a[n+1],t,n,!0))&&(l[r]=l[r]||[],l[r].push(s[0]),s[1]===a[n+1]&&n!==o-2||(l[r].push(s[1]),r++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,r=t.length;n<r;n++)t[n]=yn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,r,i,o,s,a,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(r=0,i=(s=(a=this._parts[n]).length)-1;r<s;i=r++)if((e||0!==r)&&vn(t,a[i],a[r])<=l)return!0;return!1}});function rr(t,e){return new nr(t,e)}nr._flat=In;var ir=nr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,r,i,o,s,a,l,u=this._rings[0],c=u.length;if(!c)return null;for(o=s=a=0,t=0,e=c-1;t<c;e=t++)n=u[t],r=u[e],i=n.y*r.x-r.y*n.x,s+=(n.x+r.x)*i,a+=(n.y+r.y)*i,o+=3*i;return l=0===o?u[0]:[s/o,a/o],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=nr.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof B&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){nr.prototype._setLatLngs.call(this,t),Nn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Nn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new M(e,e);if(t=new A(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var r,i=0,o=this._rings.length;i<o;i++)(r=Mn(this._rings[i],t,!0)).length&&this._parts.push(r)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,r,i,o,s,a,l,u=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,a=this._parts.length;i<a;i++)for(o=0,s=(l=(e=this._parts[i]).length)-1;o<l;s=o++)n=e[o],r=e[s],n.y>t.y!==r.y>t.y&&t.x<(r.x-n.x)*(t.y-n.y)/(r.y-n.y)+n.x&&(u=!u);return u||nr.prototype._containsPoint.call(this,t,!0)}});function or(t,e){return new ir(t,e)}var sr=Hn.extend({initialize:function(t,e){f(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,r,i=_(t)?t:t.features;if(i){for(e=0,n=i.length;e<n;e++)((r=i[e]).geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var s=ar(t,o);return s?(s.feature=pr(t),s.defaultOptions=s.options,this.resetStyle(s),o.onEachFeature&&o.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"===typeof e&&(e=e(t.feature)),t.setStyle(e))}});function ar(t,e){var n,r,i,o,s="Feature"===t.type?t.geometry:t,a=s?s.coordinates:null,l=[],u=e&&e.pointToLayer,c=e&&e.coordsToLatLng||ur;if(!a&&!s)return null;switch(s.type){case"Point":return lr(u,t,n=c(a),e);case"MultiPoint":for(i=0,o=a.length;i<o;i++)n=c(a[i]),l.push(lr(u,t,n,e));return new Hn(l);case"LineString":case"MultiLineString":return r=cr(a,"LineString"===s.type?0:1,c),new nr(r,e);case"Polygon":case"MultiPolygon":return r=cr(a,"Polygon"===s.type?1:2,c),new ir(r,e);case"GeometryCollection":for(i=0,o=s.geometries.length;i<o;i++){var h=ar({geometry:s.geometries[i],type:"Feature",properties:t.properties},e);h&&l.push(h)}return new Hn(l);default:throw new Error("Invalid GeoJSON object.")}}function lr(t,e,n,r){return t?t(e,n):new $n(n,r&&r.markersInheritOptions&&r)}function ur(t){return new B(t[1],t[0],t[2])}function cr(t,e,n){for(var r,i=[],o=0,s=t.length;o<s;o++)r=e?cr(t[o],e-1,n):(n||ur)(t[o]),i.push(r);return i}function hr(t,e){return void 0!==(t=F(t)).alt?[c(t.lng,e),c(t.lat,e),c(t.alt,e)]:[c(t.lng,e),c(t.lat,e)]}function dr(t,e,n,r){for(var i=[],o=0,s=t.length;o<s;o++)i.push(e?dr(t[o],e-1,n,r):hr(t[o],r));return!e&&n&&i.push(i[0]),i}function fr(t,e){return t.feature?n({},t.feature,{geometry:e}):pr(e)}function pr(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var mr={toGeoJSON:function(t){return fr(this,{type:"Point",coordinates:hr(this.getLatLng(),t)})}};function gr(t,e){return new sr(t,e)}$n.include(mr),tr.include(mr),Qn.include(mr),nr.include({toGeoJSON:function(t){var e=!Nn(this._latlngs);return fr(this,{type:(e?"Multi":"")+"LineString",coordinates:dr(this._latlngs,e?1:0,!1,t)})}}),ir.include({toGeoJSON:function(t){var e=!Nn(this._latlngs),n=e&&!Nn(this._latlngs[0]),r=dr(this._latlngs,n?2:e?1:0,!0,t);return e||(r=[r]),fr(this,{type:(n?"Multi":"")+"Polygon",coordinates:r})}}),Fn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),fr(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,r=[];return this.eachLayer((function(e){if(e.toGeoJSON){var i=e.toGeoJSON(t);if(n)r.push(i.geometry);else{var o=pr(i);"FeatureCollection"===o.type?r.push.apply(r,o.features):r.push(o)}}})),n?fr(this,{geometries:r,type:"GeometryCollection"}):{type:"FeatureCollection",features:r}}});var _r=gr,yr=Bn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=z(e),f(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(_e(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){de(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&pe(this._image),this},bringToBack:function(){return this._map&&me(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=z(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:he("img");_e(e,"leaflet-image-layer"),this._zoomAnimated&&_e(e,"leaflet-zoom-animated"),this.options.className&&_e(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onload=i(this.fire,this,"load"),e.onerror=i(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Ee(this._image,n,e)},_reset:function(){var t=this._image,e=new A(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();Ce(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){we(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),vr=function(t,e,n){return new yr(t,e,n)},br=yr.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:he("video");if(_e(e,"leaflet-image-layer"),this._zoomAnimated&&_e(e,"leaflet-zoom-animated"),this.options.className&&_e(e,this.options.className),e.onselectstart=u,e.onmousemove=u,e.onloadeddata=i(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),r=[],o=0;o<n.length;o++)r.push(n[o].src);this._url=n.length>0?r:[e.src]}else{_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted,e.playsInline=!!this.options.playsInline;for(var s=0;s<this._url.length;s++){var a=he("source");a.src=this._url[s],e.appendChild(a)}}}});function wr(t,e,n){return new br(t,e,n)}var Sr=yr.extend({_initImage:function(){var t=this._image=this._url;_e(t,"leaflet-image-layer"),this._zoomAnimated&&_e(t,"leaflet-zoom-animated"),this.options.className&&_e(t,this.options.className),t.onselectstart=u,t.onmousemove=u}});function xr(t,e,n){return new Sr(t,e,n)}var Er=Bn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0},initialize:function(t,e){f(this,t),this._source=e},openOn:function(t){return(t=arguments.length?t:this._source._map).hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&we(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&we(this._container,1),this.bringToFront(),this.options.interactive&&(_e(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(we(this._container,0),this._removeTimeout=setTimeout(i(de,void 0,this._container),200)):de(this._container),this.options.interactive&&(ye(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=F(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&pe(this._container),this},bringToBack:function(){return this._map&&me(this._container),this},_prepareOpen:function(t){var e=this._source;if(!e._map)return!1;if(e instanceof Hn){e=null;var n=this._source._layers;for(var r in n)if(n[r]._map){e=n[r];break}if(!e)return!1;this._source=e}if(!t)if(e.getCenter)t=e.getCenter();else if(e.getLatLng)t=e.getLatLng();else{if(!e.getBounds)throw new Error("Unable to get source layer LatLng.");t=e.getBounds().getCenter()}return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=R(this.options.offset),n=this._getAnchor();this._zoomAnimated?Ce(this._container,t.add(n)):e=e.add(t).add(n);var r=this._containerBottom=-e.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=r+"px",this._container.style.left=i+"px"}},_getAnchor:function(){return[0,0]}});Je.include({_initOverlay:function(t,e,n,r){var i=e;return i instanceof t||(i=new t(r).setContent(e)),n&&i.setLatLng(n),i}}),Bn.include({_initOverlay:function(t,e,n,r){var i=n;return i instanceof t?(f(i,r),i._source=this):(i=e&&!r?e:new t(r,this)).setContent(n),i}});var Cr=Er.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return!(t=arguments.length?t:this._source._map).hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,Er.prototype.openOn.call(this,t)},onAdd:function(t){Er.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Xn||this._source.on("preclick",qe))},onRemove:function(t){Er.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Xn||this._source.off("preclick",qe))},getEvents:function(){var t=Er.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",e=this._container=he("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=he("div",t+"-content-wrapper",e);if(this._contentNode=he("div",t+"-content",n),We(e),He(this._contentNode),Ae(e,"contextmenu",qe),this._tipContainer=he("div",t+"-tip-container",e),this._tip=he("div",t+"-tip",this._tipContainer),this.options.closeButton){var r=this._closeButton=he("a",t+"-close-button",e);r.setAttribute("role","button"),r.setAttribute("aria-label","Close popup"),r.href="#close",r.innerHTML='<span aria-hidden="true">&#215;</span>',Ae(r,"click",this.close,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var r=t.offsetHeight,i=this.options.maxHeight,o="leaflet-popup-scrolled";i&&r>i?(e.height=i+"px",_e(t,o)):ye(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();Ce(this._container,e.add(n))},_adjustPan:function(t){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var e=this._map,n=parseInt(ce(this._container,"marginBottom"),10)||0,r=this._container.offsetHeight+n,i=this._containerWidth,o=new M(this._containerLeft,-r-this._containerBottom);o._add(ke(this._container));var s=e.layerPointToContainerPoint(o),a=R(this.options.autoPanPadding),l=R(this.options.autoPanPaddingTopLeft||a),u=R(this.options.autoPanPaddingBottomRight||a),c=e.getSize(),h=0,d=0;s.x+i+u.x>c.x&&(h=s.x+i-c.x+u.x),s.x-h-l.x<0&&(h=s.x-l.x),s.y+r+u.y>c.y&&(d=s.y+r-c.y+u.y),s.y-d-l.y<0&&(d=s.y-l.y),(h||d)&&e.fire("autopanstart").panBy([h,d],{animate:t&&"moveend"===t.type})}},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),kr=function(t,e){return new Cr(t,e)};Je.mergeOptions({closePopupOnClick:!0}),Je.include({openPopup:function(t,e,n){return this._initOverlay(Cr,t,e,n).openOn(this),this},closePopup:function(t){return(t=arguments.length?t:this._popup)&&t.close(),this}}),Bn.include({bindPopup:function(t,e){return this._popup=this._initOverlay(Cr,this._popup,t,e),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&this._popup._prepareOpen(t)&&this._popup.openOn(this._map),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(this._popup&&this._map){Ze(t);var e=t.layer||t.target;this._popup._source!==e||e instanceof Xn?(this._popup._source=e,this.openPopup(t.latlng)):this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Or=Er.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){Er.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){Er.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=Er.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=he("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,r=this._map,i=this._container,o=r.latLngToContainerPoint(r.getCenter()),s=r.layerPointToContainerPoint(t),a=this.options.direction,l=i.offsetWidth,u=i.offsetHeight,c=R(this.options.offset),h=this._getAnchor();"top"===a?(e=l/2,n=u):"bottom"===a?(e=l/2,n=0):"center"===a?(e=l/2,n=u/2):"right"===a?(e=0,n=u/2):"left"===a?(e=l,n=u/2):s.x<o.x?(a="right",e=0,n=u/2):(a="left",e=l+2*(c.x+h.x),n=u/2),t=t.subtract(R(e,n,!0)).add(c).add(h),ye(i,"leaflet-tooltip-right"),ye(i,"leaflet-tooltip-left"),ye(i,"leaflet-tooltip-top"),ye(i,"leaflet-tooltip-bottom"),_e(i,"leaflet-tooltip-"+a),Ce(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&we(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Tr=function(t,e){return new Or(t,e)};Je.include({openTooltip:function(t,e,n){return this._initOverlay(Or,t,e,n).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Bn.include({bindTooltip:function(t,e){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Or,this._tooltip,t,e),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&this._tooltip._prepareOpen(t)&&this._tooltip.openOn(this._map),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){!this._tooltip||!this._map||this._map.dragging&&this._map.dragging.moving()||(this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0))},_moveTooltip:function(t){var e,n,r=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),r=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(r)}});var Nr=Vn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(fe(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var r=R(n.bgPos);e.style.backgroundPosition=-r.x+"px "+-r.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Ir(t){return new Nr(t)}Vn.Default=Gn;var Pr=Bn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Rt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){f(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),de(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(pe(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(me(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=a(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof M?t:new M(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,r=-t(-1/0,1/0),i=0,o=n.length;i<o;i++)e=n[i].style.zIndex,n[i]!==this._container&&e&&(r=t(r,+e));isFinite(r)&&(this.options.zIndex=r+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Rt.ielt9){we(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(i.current&&i.loaded){var o=Math.min(1,(t-i.loaded)/200);we(i.el,o),o<1?e=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(k(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this))}},_onOpaqueTile:u,_initContainer:function(){this._container||(this._container=he("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(de(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[t],i=this._map;return r||((r=this._levels[t]={}).el=he("div","leaflet-tile-container leaflet-zoom-animated",this._container),r.el.style.zIndex=e,r.origin=i.project(i.unproject(i.getPixelOrigin()),t).round(),r.zoom=t,this._setZoomTransform(r,i.getCenter(),i.getZoom()),u(r.el.offsetWidth),this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:u,_onRemoveLevel:u,_onCreateLevel:u,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var r=e.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)de(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,r){var i=Math.floor(t/2),o=Math.floor(e/2),s=n-1,a=new M(+i,+o);a.z=+s;var l=this._tileCoordsToKey(a),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),s>r&&this._retainParent(i,o,s,r))},_retainChildren:function(t,e,n,r){for(var i=2*t;i<2*t+2;i++)for(var o=2*e;o<2*e+2;o++){var s=new M(i,o);s.z=n+1;var a=this._tileCoordsToKey(s),l=this._tiles[a];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<r&&this._retainChildren(i,o,n+1,r))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,r){var i=Math.round(e);i=void 0!==this.options.maxZoom&&i>this.options.maxZoom||void 0!==this.options.minZoom&&i<this.options.minZoom?void 0:this._clampZoom(i);var o=this.options.updateWhenZooming&&i!==this._tileZoom;r&&!o||(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==i&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var r=this._map.getZoomScale(n,t.zoom),i=t.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(e,n)).round();Rt.any3d?Ee(t.el,i,r):Ce(t.el,i)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],r).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],r).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],r).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),r=e.getZoomScale(n,this._tileZoom),i=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*r);return new A(i.subtract(o),i.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var r=this._getTiledPixelBounds(t),i=this._pxBoundsToTileRange(r),o=i.getCenter(),s=[],a=this.options.keepBuffer,l=new A(i.getBottomLeft().subtract([a,-a]),i.getTopRight().add([a,-a]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var c=this._tiles[u].coords;c.z===this._tileZoom&&l.contains(new M(c.x,c.y))||(this._tiles[u].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=i.min.y;h<=i.max.y;h++)for(var d=i.min.x;d<=i.max.x;d++){var f=new M(d,h);if(f.z=this._tileZoom,this._isValidTile(f)){var p=this._tiles[this._tileCoordsToKey(f)];p?p.current=!0:s.push(f)}}if(s.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==s.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<s.length;d++)this._addTile(s[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(t);return z(this.options.bounds).overlaps(r)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),r=t.scaleBy(n),i=r.add(n);return[e.unproject(r,t.z),e.unproject(i,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new U(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new M(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(de(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){_e(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=u,t.onmousemove=u,Rt.ielt9&&this.options.opacity<1&&we(t,this.options.opacity)},_addTile:function(t,e){var n=this._getTilePos(t),r=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),i(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&C(i(this._tileReady,this,t,null,o)),Ce(o,n),this._tiles[r]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var r=this._tileCoordsToKey(t);(n=this._tiles[r])&&(n.loaded=+new Date,this._map._fadeAnimated?(we(n.el,0),k(this._fadeFrame),this._fadeFrame=C(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(_e(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Rt.ielt9||!this._map._fadeAnimated?C(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new M(this._wrapX?l(t.x,this._wrapX):t.x,this._wrapY?l(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new A(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Mr(t){return new Pr(t)}var jr=Pr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,e){this._url=t,(e=f(this,e)).detectRetina&&Rt.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"===typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Ae(n,"load",i(this._tileOnLoad,this,e,n)),Ae(n,"error",i(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),"string"===typeof this.options.referrerPolicy&&(n.referrerPolicy=this.options.referrerPolicy),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:Rt.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=r),e["-y"]=r}return g(this._url,n(e,this.options))},_tileOnLoad:function(t,e){Rt.ielt9?setTimeout(i(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var r=this.options.errorTileUrl;r&&e.getAttribute("src")!==r&&(e.src=r),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=u,e.onerror=u,!e.complete)){e.src=v;var n=this._tiles[t].coords;de(e),delete this._tiles[t],this.fire("tileabort",{tile:e,coords:n})}},_removeTile:function(t){var e=this._tiles[t];if(e)return e.el.setAttribute("src",v),Pr.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==v))return Pr.prototype._tileReady.call(this,t,e,n)}});function Rr(t,e){return new jr(t,e)}var Ar=jr.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var r=n({},this.defaultWmsParams);for(var i in e)i in this.options||(r[i]=e[i]);var o=(e=f(this,e)).detectRetina&&Rt.retina?2:1,s=this.getTileSize();r.width=s.x*o,r.height=s.y*o,this.wmsParams=r},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,jr.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,r=D(n.project(e[0]),n.project(e[1])),i=r.min,o=r.max,s=(this._wmsVersion>=1.3&&this._crs===Un?[i.y,i.x,o.y,o.x]:[i.x,i.y,o.x,o.y]).join(","),a=jr.prototype.getTileUrl.call(this,t);return a+p(this.wmsParams,a,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+s},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});function Dr(t,e){return new Ar(t,e)}jr.WMS=Ar,Rr.wms=Dr;var Lr=Bn.extend({options:{padding:.1},initialize:function(t){f(this,t),s(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&_e(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),i=this._map.project(this._center,e),o=r.multiplyBy(-n).add(i).subtract(this._map._getNewPixelOrigin(t,e));Rt.any3d?Ee(this._container,o,n):Ce(this._container,o)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new A(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ur=Lr.extend({options:{tolerance:0},getEvents:function(){var t=Lr.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Lr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ae(t,"mousemove",this._onMouseMove,this),Ae(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ae(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){k(this._redrawRequest),delete this._ctx,de(this._container),Le(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){Lr.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),r=Rt.retina?2:1;Ce(e,t.min),e.width=r*n.x,e.height=r*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Rt.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Lr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[s(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,r=e.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete t._order,delete this._layers[s(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"===typeof t.options.dashArray){var e,n,r=t.options.dashArray.split(/[, ]+/),i=[];for(n=0;n<r.length;n++){if(e=Number(r[n]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||C(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new A,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)t=r.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,r,i,o,s=t._parts,a=s.length,l=this._ctx;if(a){for(l.beginPath(),n=0;n<a;n++){for(r=0,i=s[n].length;r<i;r++)o=s[n][r],l[r?"lineTo":"moveTo"](o.x,o.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,r=Math.max(Math.round(t._radius),1),i=(Math.max(Math.round(t._radiusY),1)||r)/r;1!==i&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(e.x,e.y/i,r,0,2*Math.PI,!1),1!==i&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(r)&&("click"!==t.type&&"preclick"!==t.type||!this._map._draggableMoved(e))&&(n=e);this._fireEvent(!!n&&[n],t)},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ye(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,r,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(e)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(t),r&&(_e(this._container,"leaflet-interactive"),this._fireEvent([r],t,"mouseover"),this._hoveredLayer=r)),this._fireEvent(!!this._hoveredLayer&&[this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(i((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;n&&(n.prev=r,r?r.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,r=e.prev;r&&(r.next=n,n?n.prev=r:r&&(this._drawLast=r),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function zr(t){return Rt.canvas?new Ur(t):null}var Br=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Fr={_initContainer:function(){this._container=he("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Lr.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Br("shape");_e(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Br("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;de(e),t.removeInteractiveTarget(e),delete this._layers[s(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,r=t.options,i=t._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(e||(e=t._stroke=Br("stroke")),i.appendChild(e),e.weight=r.weight+"px",e.color=r.color,e.opacity=r.opacity,r.dashArray?e.dashStyle=_(r.dashArray)?r.dashArray.join(" "):r.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=r.lineCap.replace("butt","flat"),e.joinstyle=r.lineJoin):e&&(i.removeChild(e),t._stroke=null),r.fill?(n||(n=t._fill=Br("fill")),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),r=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+r+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){pe(t._container)},_bringToBack:function(t){me(t._container)}},qr=Rt.vml?Br:K,Hr=Lr.extend({_initContainer:function(){this._container=qr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=qr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){de(this._container),Le(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!this._map._animatingZoom||!this._bounds){Lr.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),Ce(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=qr("path");t.options.className&&_e(e,t.options.className),t.options.interactive&&_e(e,"leaflet-interactive"),this._updateStyle(t),this._layers[s(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){de(t._path),t.removeInteractiveTarget(t._path),delete this._layers[s(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,X(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),r="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",i=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+r+2*n+",0 "+r+2*-n+",0 ";this._setPath(t,i)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){pe(t._path)},_bringToBack:function(t){me(t._path)}});function Wr(t){return Rt.svg||Rt.vml?new Hr(t):null}Rt.vml&&Hr.include(Fr),Je.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&zr(t)||Wr(t)}});var Vr=ir.extend({initialize:function(t,e){ir.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=z(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Zr(t,e){return new Vr(t,e)}Hr.create=qr,Hr.pointsToPath=X,sr.geometryToLayer=ar,sr.coordsToLatLng=ur,sr.coordsToLatLngs=cr,sr.latLngToCoords=hr,sr.latLngsToCoords=dr,sr.getFeature=fr,sr.asFeature=pr,Je.mergeOptions({boxZoom:!0});var Gr=fn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Le(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){de(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),ee(),Te(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ae(document,{contextmenu:Ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=he("div","leaflet-zoom-box",this._container),_e(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new A(this._point,this._startPoint),n=e.getSize();Ce(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(de(this._box),ye(this._container,"leaflet-crosshair")),ne(),Ne(),Le(document,{contextmenu:Ze,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var e=new U(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Je.addInitHook("addHandler","boxZoom",Gr),Je.mergeOptions({doubleClickZoom:!0});var Yr=fn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),r=e.options.zoomDelta,i=t.originalEvent.shiftKey?n-r:n+r;"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}});Je.addInitHook("addHandler","doubleClickZoom",Yr),Je.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var $r=fn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new _n(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}_e(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ye(this._map._container,"leaflet-grab"),ye(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=z(this._map.options.maxBounds);this._offsetLimit=D(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-e+n)%t+e-n,o=(r+e+n)%t-e-n,s=Math.abs(i+n)<Math.abs(o+n)?i:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=s},_onDragEnd:function(t){var e=this._map,n=e.options,r=!n.inertia||t.noInertia||this._times.length<2;if(e.fire("dragend",t),r)e.fire("moveend");else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,s=n.easeLinearity,a=i.multiplyBy(s/o),l=a.distanceTo([0,0]),u=Math.min(n.inertiaMaxSpeed,l),c=a.multiplyBy(u/l),h=u/(n.inertiaDeceleration*s),d=c.multiplyBy(-h/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),C((function(){e.panBy(d,{duration:h,easeLinearity:s,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});Je.addInitHook("addHandler","dragging",$r),Je.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Kr=fn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ae(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Le(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,r=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,r=this._panKeys={},i=this.keyCodes;for(e=0,n=i.left.length;e<n;e++)r[i.left[e]]=[-1*t,0];for(e=0,n=i.right.length;e<n;e++)r[i.right[e]]=[t,0];for(e=0,n=i.down.length;e<n;e++)r[i.down[e]]=[0,t];for(e=0,n=i.up.length;e<n;e++)r[i.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,r=this._zoomKeys={},i=this.keyCodes;for(e=0,n=i.zoomIn.length;e<n;e++)r[i.zoomIn[e]]=t;for(e=0,n=i.zoomOut.length;e<n;e++)r[i.zoomOut[e]]=-t},_addHooks:function(){Ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Le(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,r=this._map;if(n in this._panKeys)r._panAnim&&r._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=R(e).multiplyBy(3)),r.panBy(e),r.options.maxBounds&&r.panInsideBounds(r.options.maxBounds));else if(n in this._zoomKeys)r.setZoom(r.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!r._popup||!r._popup.options.closeOnEscapeKey)return;r.closePopup()}Ze(t)}}});Je.addInitHook("addHandler","keyboard",Kr),Je.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Xr=fn.extend({addHooks:function(){Ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Le(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=$e(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),Ze(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var r=this._delta/(4*this._map.options.wheelPxPerZoomLevel),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,o=n?Math.ceil(i/n)*n:i,s=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,s&&("center"===t.options.scrollWheelZoom?t.setZoom(e+s):t.setZoomAround(this._lastMousePos,e+s))}});Je.addInitHook("addHandler","scrollWheelZoom",Xr);var Qr=600;Je.mergeOptions({tapHold:Rt.touchNative&&Rt.safari&&Rt.mobile,tapTolerance:15});var Jr=fn.extend({addHooks:function(){Ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Le(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),1===t.touches.length){var e=t.touches[0];this._startPos=this._newPos=new M(e.clientX,e.clientY),this._holdTimeout=setTimeout(i((function(){this._cancel(),this._isTapValid()&&(Ae(document,"touchend",Ve),Ae(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",e))}),this),Qr),Ae(document,"touchend touchcancel contextmenu",this._cancel,this),Ae(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Le(document,"touchend",Ve),Le(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Le(document,"touchend touchcancel contextmenu",this._cancel,this),Le(document,"touchmove",this._onMove,this)},_onMove:function(t){var e=t.touches[0];this._newPos=new M(e.clientX,e.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,e){var n=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:e.screenX,screenY:e.screenY,clientX:e.clientX,clientY:e.clientY});n._simulated=!0,e.target.dispatchEvent(n)}});Je.addInitHook("addHandler","tapHold",Jr),Je.mergeOptions({touchZoom:Rt.touch,bounceAtZoomLimits:!0});var ti=fn.extend({addHooks:function(){_e(this._map._container,"leaflet-touch-zoom"),Ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ye(this._map._container,"leaflet-touch-zoom"),Le(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Ae(document,"touchmove",this._onTouchMove,this),Ae(document,"touchend touchcancel",this._onTouchEnd,this),Ve(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),r=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(r)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var s=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===s.x&&0===s.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(s),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),k(this._animRequest);var a=i(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=C(a,this,!0),Ve(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,k(this._animRequest),Le(document,"touchmove",this._onTouchMove,this),Le(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Je.addInitHook("addHandler","touchZoom",ti),Je.BoxZoom=Gr,Je.DoubleClickZoom=Yr,Je.Drag=$r,Je.Keyboard=Kr,Je.ScrollWheelZoom=Xr,Je.TapHold=Jr,Je.TouchZoom=ti,t.Bounds=A,t.Browser=Rt,t.CRS=q,t.Canvas=Ur,t.Circle=tr,t.CircleMarker=Qn,t.Class=T,t.Control=en,t.DivIcon=Nr,t.DivOverlay=Er,t.DomEvent=Xe,t.DomUtil=Re,t.Draggable=_n,t.Evented=P,t.FeatureGroup=Hn,t.GeoJSON=sr,t.GridLayer=Pr,t.Handler=fn,t.Icon=Vn,t.ImageOverlay=yr,t.LatLng=B,t.LatLngBounds=U,t.Layer=Bn,t.LayerGroup=Fn,t.LineUtil=Pn,t.Map=Je,t.Marker=$n,t.Mixin=mn,t.Path=Xn,t.Point=M,t.PolyUtil=jn,t.Polygon=ir,t.Polyline=nr,t.Popup=Cr,t.PosAnimation=Qe,t.Projection=Dn,t.Rectangle=Vr,t.Renderer=Lr,t.SVG=Hr,t.SVGOverlay=Sr,t.TileLayer=jr,t.Tooltip=Or,t.Transformation=Z,t.Util=O,t.VideoOverlay=br,t.bind=i,t.bounds=D,t.canvas=zr,t.circle=er,t.circleMarker=Jn,t.control=nn,t.divIcon=Ir,t.extend=n,t.featureGroup=Wn,t.geoJSON=gr,t.geoJson=_r,t.gridLayer=Mr,t.icon=Zn,t.imageOverlay=vr,t.latLng=F,t.latLngBounds=z,t.layerGroup=qn,t.map=tn,t.marker=Kn,t.point=R,t.polygon=or,t.polyline=rr,t.popup=kr,t.rectangle=Zr,t.setOptions=f,t.stamp=s,t.svg=Wr,t.svgOverlay=xr,t.tileLayer=Rr,t.tooltip=Tr,t.transformation=G,t.version=e,t.videoOverlay=wr;var ei=window.L;t.noConflict=function(){return window.L=ei,this},window.L=t}(e)},379:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assertNotificationFilterIsEmpty=e.assertImpersonatedUserIsEmpty=e.assertTxConfigIsEmpty=e.assertDatabaseIsEmpty=void 0;var r=n(5359);n(4260);e.assertTxConfigIsEmpty=function(t,e,n){if(void 0===e&&(e=function(){}),t&&!t.isEmpty()){var i=(0,r.newError)("Driver is connected to the database that does not support transaction configuration. Please upgrade to neo4j 3.5.0 or later in order to use this functionality");throw e(i.message),n.onError(i),i}},e.assertDatabaseIsEmpty=function(t,e,n){if(void 0===e&&(e=function(){}),t){var i=(0,r.newError)("Driver is connected to the database that does not support multiple databases. Please upgrade to neo4j 4.0.0 or later in order to use this functionality");throw e(i.message),n.onError(i),i}},e.assertImpersonatedUserIsEmpty=function(t,e,n){if(void 0===e&&(e=function(){}),t){var i=(0,r.newError)("Driver is connected to the database that does not support user impersonation. Please upgrade to neo4j 4.4.0 or later in order to use this functionality. "+"Trying to impersonate ".concat(t,"."));throw e(i.message),n.onError(i),i}},e.assertNotificationFilterIsEmpty=function(t,e,n){if(void 0===e&&(e=function(){}),void 0!==t){var i=(0,r.newError)("Driver is connected to a database that does not support user notification filters. Please upgrade to Neo4j 5.7.0 or later in order to use this functionality. "+"Trying to set notifications to ".concat(r.json.stringify(t),"."));throw e(i.message),n.onError(i),i}}},2298:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=n(379),l=(n(2366),n(4666)),u=o(n(8607)),c=n(4260),h=n(5359),d=s(n(8871)),f=s(n(9155)),p=h.internal.bookmarks.Bookmarks,m=h.internal.constants,g=m.ACCESS_MODE_WRITE,_=m.BOLT_PROTOCOL_V1,y=(h.internal.logger.Logger,h.internal.txConfig.TxConfig),v=function(){function t(t,e,n,r,i,o){var s=void 0===n?{}:n,a=s.disableLosslessIntegers,l=s.useBigInt;void 0===r&&(r=function(){return null}),this._server=t||{},this._chunker=e,this._packer=this._createPacker(e),this._unpacker=this._createUnpacker(a,l),this._responseHandler=r(this),this._log=i,this._onProtocolError=o,this._fatalError=null,this._lastMessageSignature=null,this._config={disableLosslessIntegers:a,useBigInt:l}}return Object.defineProperty(t.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new f.default(Object.values(d.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"version",{get:function(){return _},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"supportsReAuth",{get:function(){return!1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"initialized",{get:function(){return!!this._initialized},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"authToken",{get:function(){return this._authToken},enumerable:!1,configurable:!0}),t.prototype.packer=function(){return this._packer},t.prototype.packable=function(t){return this._packer.packable(t,this.transformer.toStructure)},t.prototype.unpacker=function(){return this._unpacker},t.prototype.unpack=function(t){return this._unpacker.unpack(t,this.transformer.fromStructure)},t.prototype.transformMetadata=function(t){return t},t.prototype.initialize=function(t){var e=this,n=void 0===t?{}:t,r=n.userAgent,i=(n.boltAgent,n.authToken),o=n.notificationFilter,s=n.onError,l=n.onComplete,h=new c.LoginObserver({onError:function(t){return e._onLoginError(t,s)},onCompleted:function(t){return e._onLoginCompleted(t,l)}});return(0,a.assertNotificationFilterIsEmpty)(o,this._onProtocolError,h),this.write(u.default.init(r,i),h,!0),h},t.prototype.logoff=function(t){var e=void 0===t?{}:t,n=e.onComplete,r=e.onError,i=(e.flush,new c.LogoffObserver({onCompleted:n,onError:r})),o=(0,h.newError)("Driver is connected to a database that does not support logoff. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(o.message),i.onError(o),o},t.prototype.logon=function(t){var e=this,n=void 0===t?{}:t,r=n.authToken,i=n.onComplete,o=n.onError,s=(n.flush,new c.LoginObserver({onCompleted:function(){return e._onLoginCompleted({},r,i)},onError:function(t){return e._onLoginError(t,o)}})),a=(0,h.newError)("Driver is connected to a database that does not support logon. Please upgrade to Neo4j 5.5.0 or later in order to use this functionality.");throw this._onProtocolError(a.message),s.onError(a),a},t.prototype.prepareToClose=function(){},t.prototype.beginTransaction=function(t){var e=void 0===t?{}:t,n=e.bookmarks,r=e.txConfig,i=e.database,o=e.mode,s=e.impersonatedUser,a=e.notificationFilter,l=e.beforeError,u=e.afterError,c=e.beforeComplete,h=e.afterComplete;return this.run("BEGIN",n?n.asBeginTransactionParameters():{},{bookmarks:n,txConfig:r,database:i,mode:o,impersonatedUser:s,notificationFilter:a,beforeError:l,afterError:u,beforeComplete:c,afterComplete:h,flush:!1})},t.prototype.commitTransaction=function(t){var e=void 0===t?{}:t,n=e.beforeError,r=e.afterError,i=e.beforeComplete,o=e.afterComplete;return this.run("COMMIT",{},{bookmarks:p.empty(),txConfig:y.empty(),mode:g,beforeError:n,afterError:r,beforeComplete:i,afterComplete:o})},t.prototype.rollbackTransaction=function(t){var e=void 0===t?{}:t,n=e.beforeError,r=e.afterError,i=e.beforeComplete,o=e.afterComplete;return this.run("ROLLBACK",{},{bookmarks:p.empty(),txConfig:y.empty(),mode:g,beforeError:n,afterError:r,beforeComplete:i,afterComplete:o})},t.prototype.run=function(t,e,n){var r=void 0===n?{}:n,i=(r.bookmarks,r.txConfig),o=r.database,s=(r.mode,r.impersonatedUser),l=r.notificationFilter,h=r.beforeKeys,d=r.afterKeys,f=r.beforeError,p=r.afterError,m=r.beforeComplete,g=r.afterComplete,_=r.flush,y=void 0===_||_,v=r.highRecordWatermark,b=void 0===v?Number.MAX_VALUE:v,w=r.lowRecordWatermark,S=void 0===w?Number.MAX_VALUE:w,x=new c.ResultStreamObserver({server:this._server,beforeKeys:h,afterKeys:d,beforeError:f,afterError:p,beforeComplete:m,afterComplete:g,highRecordWatermark:b,lowRecordWatermark:S});return(0,a.assertTxConfigIsEmpty)(i,this._onProtocolError,x),(0,a.assertDatabaseIsEmpty)(o,this._onProtocolError,x),(0,a.assertImpersonatedUserIsEmpty)(s,this._onProtocolError,x),(0,a.assertNotificationFilterIsEmpty)(l,this._onProtocolError,x),this.write(u.default.run(t,e),x,!1),this.write(u.default.pullAll(),x,y),x},Object.defineProperty(t.prototype,"currentFailure",{get:function(){return this._responseHandler.currentFailure},enumerable:!1,configurable:!0}),t.prototype.reset=function(t){var e=void 0===t?{}:t,n=e.onError,r=e.onComplete,i=new c.ResetObserver({onProtocolError:this._onProtocolError,onError:n,onComplete:r});return this.write(u.default.reset(),i,!0),i},t.prototype.telemetry=function(t,e){t.api;var n=void 0===e?{}:e,r=(n.onError,n.onCompleted),i=new c.CompletedObserver;return r&&r(),i},t.prototype._createPacker=function(t){return new l.v1.Packer(t)},t.prototype._createUnpacker=function(t,e){return new l.v1.Unpacker(t,e)},t.prototype.write=function(t,e,n){if(this.queueObserverIfProtocolIsNotBroken(e)){this._log.isDebugEnabled()&&this._log.debug("C: ".concat(t)),this._lastMessageSignature=t.signature;var r=new l.structure.Structure(t.signature,t.fields);this.packable(r)(),this._chunker.messageBoundary(),n&&this._chunker.flush()}},t.prototype.isLastMessageLogon=function(){return this._lastMessageSignature===u.SIGNATURES.HELLO||this._lastMessageSignature===u.SIGNATURES.LOGON},t.prototype.isLastMessageReset=function(){return this._lastMessageSignature===u.SIGNATURES.RESET},t.prototype.notifyFatalError=function(t){return this._fatalError=t,this._responseHandler._notifyErrorToObservers(t)},t.prototype.updateCurrentObserver=function(){return this._responseHandler._updateCurrentObserver()},t.prototype.hasOngoingObservableRequests=function(){return this._responseHandler.hasOngoingObservableRequests()},t.prototype.queueObserverIfProtocolIsNotBroken=function(t){return this.isBroken()?(this.notifyFatalErrorToObserver(t),!1):this._responseHandler._queueObserver(t)},t.prototype.isBroken=function(){return!!this._fatalError},t.prototype.notifyFatalErrorToObserver=function(t){t&&t.onError&&t.onError(this._fatalError)},t.prototype.resetFailure=function(){this._responseHandler._resetFailure()},t.prototype._onLoginCompleted=function(t,e,n){if(this._initialized=!0,this._authToken=e,t){var r=t.server;this._server.version||(this._server.version=r)}n&&n(t)},t.prototype._onLoginError=function(t,e){this._onProtocolError(t.message),e&&e(t)},t}();e.default=v},8871:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(e,"__esModule",{value:!0});var i=n(5359),o=n(4666),s=n(9155),a=i.error.PROTOCOL_ERROR;e.default={createNodeTransformer:function(){return new s.TypeTransformer({signature:78,isTypeInstance:function(t){return t instanceof i.Node},toStructure:function(t){throw(0,i.newError)("It is not allowed to pass nodes in query parameters, given: ".concat(t),a)},fromStructure:function(t){o.structure.verifyStructSize("Node",3,t.size);var e=r(t.fields,3),n=e[0],s=e[1],a=e[2];return new i.Node(n,s,a)}})},createRelationshipTransformer:function(){return new s.TypeTransformer({signature:82,isTypeInstance:function(t){return t instanceof i.Relationship},toStructure:function(t){throw(0,i.newError)("It is not allowed to pass relationships in query parameters, given: ".concat(t),a)},fromStructure:function(t){o.structure.verifyStructSize("Relationship",5,t.size);var e=r(t.fields,5),n=e[0],s=e[1],a=e[2],l=e[3],u=e[4];return new i.Relationship(n,s,a,l,u)}})},createUnboundRelationshipTransformer:function(){return new s.TypeTransformer({signature:114,isTypeInstance:function(t){return t instanceof i.UnboundRelationship},toStructure:function(t){throw(0,i.newError)("It is not allowed to pass unbound relationships in query parameters, given: ".concat(t),a)},fromStructure:function(t){o.structure.verifyStructSize("UnboundRelationship",3,t.size);var e=r(t.fields,3),n=e[0],s=e[1],a=e[2];return new i.UnboundRelationship(n,s,a)}})},createPathTransformer:function(){return new s.TypeTransformer({signature:80,isTypeInstance:function(t){return t instanceof i.Path},toStructure:function(t){throw(0,i.newError)("It is not allowed to pass paths in query parameters, given: ".concat(t),a)},fromStructure:function(t){o.structure.verifyStructSize("Path",3,t.size);for(var e=r(t.fields,3),n=e[0],s=e[1],a=e[2],l=[],u=n[0],c=0;c<a.length;c+=2){var h=n[a[c+1]],d=(0,i.toNumber)(a[c]),f=void 0;d>0?(f=s[d-1])instanceof i.UnboundRelationship&&(s[d-1]=f=f.bindTo(u,h)):(f=s[-d-1])instanceof i.UnboundRelationship&&(s[-d-1]=f=f.bindTo(h,u)),l.push(new i.PathSegment(u,f,h)),u=h}return new i.Path(n[0],n[n.length-1],l)}})}}},9559:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(2298)),s=i(n(4666)),a=n(5359),l=i(n(7398)),u=i(n(9155)),c=a.internal.constants.BOLT_PROTOCOL_V2,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype._createPacker=function(t){return new s.default.Packer(t)},e.prototype._createUnpacker=function(t,e){return new s.default.Unpacker(t,e)},Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new u.default(Object.values(l.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),e}(o.default);e.default=h},7398:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(5359),a=n(4666),l=n(9155),u=n(8159),c=o(n(8871)),h=s.internal.temporalUtil,d=h.dateToEpochDay,f=h.localDateTimeToEpochSecond,p=h.localTimeToNanoOfDay;function m(t,e,n){if(!e&&!n)return t;var r=function(t){return n?t.toBigInt():t.toNumberOrInfinity()},i=Object.create(Object.getPrototypeOf(t));for(var o in t)if(!0===Object.prototype.hasOwnProperty.call(t,o)){var a=t[o];i[o]=(0,s.isInt)(a)?r(a):a}return Object.freeze(i),i}e.default=r(r({},c.default),{createPoint2DTransformer:function(){return new l.TypeTransformer({signature:88,isTypeInstance:function(t){return(0,s.isPoint)(t)&&(null===t.z||void 0===t.z)},toStructure:function(t){return new a.structure.Structure(88,[(0,s.int)(t.srid),t.x,t.y])},fromStructure:function(t){a.structure.verifyStructSize("Point2D",3,t.size);var e=i(t.fields,3),n=e[0],r=e[1],o=e[2];return new s.Point(n,r,o,void 0)}})},createPoint3DTransformer:function(){return new l.TypeTransformer({signature:89,isTypeInstance:function(t){return(0,s.isPoint)(t)&&null!==t.z&&void 0!==t.z},toStructure:function(t){return new a.structure.Structure(89,[(0,s.int)(t.srid),t.x,t.y,t.z])},fromStructure:function(t){a.structure.verifyStructSize("Point3D",4,t.size);var e=i(t.fields,4),n=e[0],r=e[1],o=e[2],l=e[3];return new s.Point(n,r,o,l)}})},createDurationTransformer:function(){return new l.TypeTransformer({signature:69,isTypeInstance:s.isDuration,toStructure:function(t){var e=(0,s.int)(t.months),n=(0,s.int)(t.days),r=(0,s.int)(t.seconds),i=(0,s.int)(t.nanoseconds);return new a.structure.Structure(69,[e,n,r,i])},fromStructure:function(t){a.structure.verifyStructSize("Duration",4,t.size);var e=i(t.fields,4),n=e[0],r=e[1],o=e[2],l=e[3];return new s.Duration(n,r,o,l)}})},createLocalTimeTransformer:function(t){var e=t.disableLosslessIntegers,n=t.useBigInt;return new l.TypeTransformer({signature:116,isTypeInstance:s.isLocalTime,toStructure:function(t){var e=p(t.hour,t.minute,t.second,t.nanosecond);return new a.structure.Structure(116,[e])},fromStructure:function(t){a.structure.verifyStructSize("LocalTime",1,t.size);var r=i(t.fields,1)[0];return m((0,u.nanoOfDayToLocalTime)(r),e,n)}})},createTimeTransformer:function(t){var e=t.disableLosslessIntegers,n=t.useBigInt;return new l.TypeTransformer({signature:84,isTypeInstance:s.isTime,toStructure:function(t){var e=p(t.hour,t.minute,t.second,t.nanosecond),n=(0,s.int)(t.timeZoneOffsetSeconds);return new a.structure.Structure(84,[e,n])},fromStructure:function(t){a.structure.verifyStructSize("Time",2,t.size);var r=i(t.fields,2),o=r[0],l=r[1],c=(0,u.nanoOfDayToLocalTime)(o);return m(new s.Time(c.hour,c.minute,c.second,c.nanosecond,l),e,n)}})},createDateTransformer:function(t){var e=t.disableLosslessIntegers,n=t.useBigInt;return new l.TypeTransformer({signature:68,isTypeInstance:s.isDate,toStructure:function(t){var e=d(t.year,t.month,t.day);return new a.structure.Structure(68,[e])},fromStructure:function(t){a.structure.verifyStructSize("Date",1,t.size);var r=i(t.fields,1)[0];return m((0,u.epochDayToDate)(r),e,n)}})},createLocalDateTimeTransformer:function(t){var e=t.disableLosslessIntegers,n=t.useBigInt;return new l.TypeTransformer({signature:100,isTypeInstance:s.isLocalDateTime,toStructure:function(t){var e=f(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),n=(0,s.int)(t.nanosecond);return new a.structure.Structure(100,[e,n])},fromStructure:function(t){a.structure.verifyStructSize("LocalDateTime",2,t.size);var r=i(t.fields,2),o=r[0],s=r[1];return m((0,u.epochSecondAndNanoToLocalDateTime)(o,s),e,n)}})},createDateTimeWithZoneIdTransformer:function(t){var e=t.disableLosslessIntegers,n=t.useBigInt;return new l.TypeTransformer({signature:102,isTypeInstance:function(t){return(0,s.isDateTime)(t)&&null!=t.timeZoneId},toStructure:function(t){var e=f(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),n=(0,s.int)(t.nanosecond),r=t.timeZoneId;return new a.structure.Structure(102,[e,n,r])},fromStructure:function(t){a.structure.verifyStructSize("DateTimeWithZoneId",3,t.size);var r=i(t.fields,3),o=r[0],l=r[1],c=r[2],h=(0,u.epochSecondAndNanoToLocalDateTime)(o,l);return m(new s.DateTime(h.year,h.month,h.day,h.hour,h.minute,h.second,h.nanosecond,null,c),e,n)}})},createDateTimeWithOffsetTransformer:function(t){var e=t.disableLosslessIntegers,n=t.useBigInt;return new l.TypeTransformer({signature:70,isTypeInstance:function(t){return(0,s.isDateTime)(t)&&null==t.timeZoneId},toStructure:function(t){var e=f(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),n=(0,s.int)(t.nanosecond),r=(0,s.int)(t.timeZoneOffsetSeconds);return new a.structure.Structure(70,[e,n,r])},fromStructure:function(t){a.structure.verifyStructSize("DateTimeWithZoneOffset",3,t.size);var r=i(t.fields,3),o=r[0],l=r[1],c=r[2],h=(0,u.epochSecondAndNanoToLocalDateTime)(o,l);return m(new s.DateTime(h.year,h.month,h.day,h.hour,h.minute,h.second,h.nanosecond,c,null),e,n)}})}})},8256:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(9559)),a=o(n(8607)),l=n(379),u=n(4260),c=o(n(8149)),h=o(n(9155)),d=n(5359),f=(d.internal.bookmarks.Bookmarks,d.internal.constants.BOLT_PROTOCOL_V3),p=d.internal.txConfig.TxConfig,m="context",g="CALL dbms.cluster.routing.getRoutingTable($".concat(m,")"),_=new u.StreamObserver,y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"version",{get:function(){return f},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new h.default(Object.values(c.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),e.prototype.transformMetadata=function(t){return"t_first"in t&&(t.result_available_after=t.t_first,delete t.t_first),"t_last"in t&&(t.result_consumed_after=t.t_last,delete t.t_last),t},e.prototype.initialize=function(t){var e=this,n=void 0===t?{}:t,r=n.userAgent,i=(n.boltAgent,n.authToken),o=n.notificationFilter,s=n.onError,c=n.onComplete,h=new u.LoginObserver({onError:function(t){return e._onLoginError(t,s)},onCompleted:function(t){return e._onLoginCompleted(t,i,c)}});return(0,l.assertNotificationFilterIsEmpty)(o,this._onProtocolError,h),this.write(a.default.hello(r,i),h,!0),h},e.prototype.prepareToClose=function(){this.write(a.default.goodbye(),_,!0)},e.prototype.beginTransaction=function(t){var e=void 0===t?{}:t,n=e.bookmarks,r=e.txConfig,i=e.database,o=e.impersonatedUser,s=e.notificationFilter,c=e.mode,h=e.beforeError,d=e.afterError,f=e.beforeComplete,p=e.afterComplete,m=new u.ResultStreamObserver({server:this._server,beforeError:h,afterError:d,beforeComplete:f,afterComplete:p});return m.prepareToHandleSingleResponse(),(0,l.assertDatabaseIsEmpty)(i,this._onProtocolError,m),(0,l.assertImpersonatedUserIsEmpty)(o,this._onProtocolError,m),(0,l.assertNotificationFilterIsEmpty)(s,this._onProtocolError,m),this.write(a.default.begin({bookmarks:n,txConfig:r,mode:c}),m,!0),m},e.prototype.commitTransaction=function(t){var e=void 0===t?{}:t,n=e.beforeError,r=e.afterError,i=e.beforeComplete,o=e.afterComplete,s=new u.ResultStreamObserver({server:this._server,beforeError:n,afterError:r,beforeComplete:i,afterComplete:o});return s.prepareToHandleSingleResponse(),this.write(a.default.commit(),s,!0),s},e.prototype.rollbackTransaction=function(t){var e=void 0===t?{}:t,n=e.beforeError,r=e.afterError,i=e.beforeComplete,o=e.afterComplete,s=new u.ResultStreamObserver({server:this._server,beforeError:n,afterError:r,beforeComplete:i,afterComplete:o});return s.prepareToHandleSingleResponse(),this.write(a.default.rollback(),s,!0),s},e.prototype.run=function(t,e,n){var r=void 0===n?{}:n,i=r.bookmarks,o=r.txConfig,s=r.database,c=r.impersonatedUser,h=r.notificationFilter,d=r.mode,f=r.beforeKeys,p=r.afterKeys,m=r.beforeError,g=r.afterError,_=r.beforeComplete,y=r.afterComplete,v=r.flush,b=void 0===v||v,w=r.highRecordWatermark,S=void 0===w?Number.MAX_VALUE:w,x=r.lowRecordWatermark,E=void 0===x?Number.MAX_VALUE:x,C=new u.ResultStreamObserver({server:this._server,beforeKeys:f,afterKeys:p,beforeError:m,afterError:g,beforeComplete:_,afterComplete:y,highRecordWatermark:S,lowRecordWatermark:E});return(0,l.assertDatabaseIsEmpty)(s,this._onProtocolError,C),(0,l.assertImpersonatedUserIsEmpty)(c,this._onProtocolError,C),(0,l.assertNotificationFilterIsEmpty)(h,this._onProtocolError,C),this.write(a.default.runWithMetadata(t,e,{bookmarks:i,txConfig:o,mode:d}),C,!1),this.write(a.default.pullAll(),C,b),C},e.prototype.requestRoutingInformation=function(t){var e,n=t.routingContext,r=void 0===n?{}:n,o=t.sessionContext,s=void 0===o?{}:o,a=t.onError,l=t.onCompleted,c=this.run(g,((e={})[m]=r,e),i(i({},s),{txConfig:p.empty()}));return new u.ProcedureRouteObserver({resultObserver:c,onProtocolError:this._onProtocolError,onError:a,onCompleted:l})},e}(s.default);e.default=y},8149:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(7398));e.default=r({},o.default)},7341:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(8256)),a=o(n(8607)),l=n(379),u=n(4260),c=o(n(2628)),h=o(n(9155)),d=n(5359),f=(d.internal.bookmarks.Bookmarks,d.internal.constants),p=f.BOLT_PROTOCOL_V4_0,m=f.FETCH_ALL,g=d.internal.txConfig.TxConfig,_="context",y="database",v="CALL dbms.routing.getRoutingTable($".concat(_,", $").concat(y,")"),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"version",{get:function(){return p},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new h.default(Object.values(c.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),e.prototype.beginTransaction=function(t){var e=void 0===t?{}:t,n=e.bookmarks,r=e.txConfig,i=e.database,o=e.impersonatedUser,s=e.notificationFilter,c=e.mode,h=e.beforeError,d=e.afterError,f=e.beforeComplete,p=e.afterComplete,m=new u.ResultStreamObserver({server:this._server,beforeError:h,afterError:d,beforeComplete:f,afterComplete:p});return m.prepareToHandleSingleResponse(),(0,l.assertImpersonatedUserIsEmpty)(o,this._onProtocolError,m),(0,l.assertNotificationFilterIsEmpty)(s,this._onProtocolError,m),this.write(a.default.begin({bookmarks:n,txConfig:r,database:i,mode:c}),m,!0),m},e.prototype.run=function(t,e,n){var r=void 0===n?{}:n,i=r.bookmarks,o=r.txConfig,s=r.database,c=r.impersonatedUser,h=r.notificationFilter,d=r.mode,f=r.beforeKeys,p=r.afterKeys,g=r.beforeError,_=r.afterError,y=r.beforeComplete,v=r.afterComplete,b=r.flush,w=void 0===b||b,S=r.reactive,x=void 0!==S&&S,E=r.fetchSize,C=void 0===E?m:E,k=r.highRecordWatermark,O=void 0===k?Number.MAX_VALUE:k,T=r.lowRecordWatermark,N=void 0===T?Number.MAX_VALUE:T,I=new u.ResultStreamObserver({server:this._server,reactive:x,fetchSize:C,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:f,afterKeys:p,beforeError:g,afterError:_,beforeComplete:y,afterComplete:v,highRecordWatermark:O,lowRecordWatermark:N});(0,l.assertImpersonatedUserIsEmpty)(c,this._onProtocolError,I),(0,l.assertNotificationFilterIsEmpty)(h,this._onProtocolError,I);var P=x;return this.write(a.default.runWithMetadata(t,e,{bookmarks:i,txConfig:o,database:s,mode:d}),I,P&&w),x||this.write(a.default.pull({n:C}),I,w),I},e.prototype._requestMore=function(t,e,n){this.write(a.default.pull({stmtId:t,n:e}),n,!0)},e.prototype._requestDiscard=function(t,e){this.write(a.default.discard({stmtId:t}),e,!0)},e.prototype._noOp=function(){},e.prototype.requestRoutingInformation=function(t){var e,n=t.routingContext,r=void 0===n?{}:n,o=t.databaseName,s=void 0===o?null:o,a=t.sessionContext,l=void 0===a?{}:a,c=t.onError,h=t.onCompleted,d=this.run(v,((e={})[_]=r,e[y]=s,e),i(i({},l),{txConfig:g.empty()}));return new u.ProcedureRouteObserver({resultObserver:d,onProtocolError:this._onProtocolError,onError:c,onCompleted:h})},e}(s.default);e.default=b},2628:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(8149));e.default=r({},o.default)},7422:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(7341)),s=i(n(8607)),a=n(4260),l=n(5359),u=n(379),c=i(n(6211)),h=i(n(9155)),d=l.internal.constants.BOLT_PROTOCOL_V4_1,f=function(t){function e(e,n,r,i,o,s,a){void 0===i&&(i=function(){return null});var l=t.call(this,e,n,r,i,o,s)||this;return l._serversideRouting=a,l}return r(e,t),Object.defineProperty(e.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new h.default(Object.values(c.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t){var e=this,n=void 0===t?{}:t,r=n.userAgent,i=(n.boltAgent,n.authToken),o=n.notificationFilter,l=n.onError,c=n.onComplete,h=new a.LoginObserver({onError:function(t){return e._onLoginError(t,l)},onCompleted:function(t){return e._onLoginCompleted(t,i,c)}});return(0,u.assertNotificationFilterIsEmpty)(o,this._onProtocolError,h),this.write(s.default.hello(r,i,this._serversideRouting),h,!0),h},e}(o.default);e.default=f},6211:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(2628));e.default=r({},o.default)},8747:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(7422)),s=n(5359),a=i(n(2930)),l=i(n(9155)),u=s.internal.constants.BOLT_PROTOCOL_V4_2,c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"version",{get:function(){return u},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new l.default(Object.values(a.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),e}(o.default);e.default=c},2930:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(6211));e.default=r({},o.default)},9220:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(8747)),a=o(n(8607)),l=n(4260),u=n(379),c=o(n(833)),h=o(n(1023)),d=o(n(9155)),f=n(5359),p=f.internal.bookmarks.Bookmarks,m=f.internal.constants.BOLT_PROTOCOL_V4_3,g=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"version",{get:function(){return m},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new d.default(Object.values(c.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),e.prototype.requestRoutingInformation=function(t){var e=t.routingContext,n=void 0===e?{}:e,r=t.databaseName,i=void 0===r?null:r,o=t.sessionContext,s=void 0===o?{}:o,u=t.onError,c=t.onCompleted,h=new l.RouteObserver({onProtocolError:this._onProtocolError,onError:u,onCompleted:c}),d=s.bookmarks||p.empty();return this.write(a.default.route(n,d.values(),i),h,!0),h},e.prototype.initialize=function(t){var e=this,n=void 0===t?{}:t,r=n.userAgent,i=(n.boltAgent,n.authToken),o=n.notificationFilter,s=n.onError,c=n.onComplete,h=new l.LoginObserver({onError:function(t){return e._onLoginError(t,s)},onCompleted:function(t){return void 0!==t.patch_bolt&&e._applyPatches(t.patch_bolt),e._onLoginCompleted(t,i,c)}});return(0,u.assertNotificationFilterIsEmpty)(o,this._onProtocolError,h),this.write(a.default.hello(r,i,this._serversideRouting,["utc"]),h,!0),h},e.prototype._applyPatches=function(t){t.includes("utc")&&this._applyUtcPatch()},e.prototype._applyUtcPatch=function(){var t=this;this._transformer=new d.default(Object.values(i(i({},c.default),h.default)).map((function(e){return e(t._config,t._log)})))},e}(s.default);e.default=g},833:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(2930));e.default=r({},o.default)},6737:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(9220)),a=n(5359),l=o(n(8607)),u=n(4260),c=n(379),h=o(n(5488)),d=o(n(1023)),f=o(n(9155)),p=a.internal.constants,m=p.BOLT_PROTOCOL_V4_4,g=p.FETCH_ALL,_=a.internal.bookmarks.Bookmarks,y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"version",{get:function(){return m},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new f.default(Object.values(h.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),e.prototype.requestRoutingInformation=function(t){var e=t.routingContext,n=void 0===e?{}:e,r=t.databaseName,i=void 0===r?null:r,o=t.impersonatedUser,s=void 0===o?null:o,a=t.sessionContext,c=void 0===a?{}:a,h=t.onError,d=t.onCompleted,f=new u.RouteObserver({onProtocolError:this._onProtocolError,onError:h,onCompleted:d}),p=c.bookmarks||_.empty();return this.write(l.default.routeV4x4(n,p.values(),{databaseName:i,impersonatedUser:s}),f,!0),f},e.prototype.run=function(t,e,n){var r=void 0===n?{}:n,i=r.bookmarks,o=r.txConfig,s=r.database,a=r.mode,h=r.impersonatedUser,d=r.notificationFilter,f=r.beforeKeys,p=r.afterKeys,m=r.beforeError,_=r.afterError,y=r.beforeComplete,v=r.afterComplete,b=r.flush,w=void 0===b||b,S=r.reactive,x=void 0!==S&&S,E=r.fetchSize,C=void 0===E?g:E,k=r.highRecordWatermark,O=void 0===k?Number.MAX_VALUE:k,T=r.lowRecordWatermark,N=void 0===T?Number.MAX_VALUE:T,I=new u.ResultStreamObserver({server:this._server,reactive:x,fetchSize:C,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:f,afterKeys:p,beforeError:m,afterError:_,beforeComplete:y,afterComplete:v,highRecordWatermark:O,lowRecordWatermark:N});(0,c.assertNotificationFilterIsEmpty)(d,this._onProtocolError,I);var P=x;return this.write(l.default.runWithMetadata(t,e,{bookmarks:i,txConfig:o,database:s,mode:a,impersonatedUser:h}),I,P&&w),x||this.write(l.default.pull({n:C}),I,w),I},e.prototype.beginTransaction=function(t){var e=void 0===t?{}:t,n=e.bookmarks,r=e.txConfig,i=e.database,o=e.mode,s=e.impersonatedUser,a=e.notificationFilter,h=e.beforeError,d=e.afterError,f=e.beforeComplete,p=e.afterComplete,m=new u.ResultStreamObserver({server:this._server,beforeError:h,afterError:d,beforeComplete:f,afterComplete:p});return m.prepareToHandleSingleResponse(),(0,c.assertNotificationFilterIsEmpty)(a,this._onProtocolError,m),this.write(l.default.begin({bookmarks:n,txConfig:r,database:i,mode:o,impersonatedUser:s}),m,!0),m},e.prototype._applyUtcPatch=function(){var t=this;this._transformer=new f.default(Object.values(i(i({},h.default),d.default)).map((function(e){return e(t._config,t._log)})))},e}(s.default);e.default=y},5488:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(833));e.default=r({},o.default)},2182:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(6737)),s=n(379),a=i(n(1099)),l=i(n(9155)),u=i(n(8607)),c=n(4260),h=n(5359).internal.constants.BOLT_PROTOCOL_V5_0,d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new l.default(Object.values(a.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t){var e=this,n=void 0===t?{}:t,r=n.userAgent,i=(n.boltAgent,n.authToken),o=n.notificationFilter,a=n.onError,l=n.onComplete,h=new c.LoginObserver({onError:function(t){return e._onLoginError(t,a)},onCompleted:function(t){return e._onLoginCompleted(t,i,l)}});return(0,s.assertNotificationFilterIsEmpty)(o,this._onProtocolError,h),this.write(u.default.hello(r,i,this._serversideRouting),h,!0),h},e}(o.default);e.default=d},1099:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(4666),a=n(5359),l=o(n(5488)),u=o(n(1023));e.default=r(r(r({},l.default),u.default),{createNodeTransformer:function(t){return l.default.createNodeTransformer(t).extendsWith({fromStructure:function(t){s.structure.verifyStructSize("Node",4,t.size);var e=i(t.fields,4),n=e[0],r=e[1],o=e[2],l=e[3];return new a.Node(n,r,o,l)}})},createRelationshipTransformer:function(t){return l.default.createRelationshipTransformer(t).extendsWith({fromStructure:function(t){s.structure.verifyStructSize("Relationship",8,t.size);var e=i(t.fields,8),n=e[0],r=e[1],o=e[2],l=e[3],u=e[4],c=e[5],h=e[6],d=e[7];return new a.Relationship(n,r,o,l,u,c,h,d)}})},createUnboundRelationshipTransformer:function(t){return l.default.createUnboundRelationshipTransformer(t).extendsWith({fromStructure:function(t){s.structure.verifyStructSize("UnboundRelationship",4,t.size);var e=i(t.fields,4),n=e[0],r=e[1],o=e[2],l=e[3];return new a.UnboundRelationship(n,r,o,l)}})}})},1023:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(4666),s=n(5359),a=i(n(5488)),l=n(8159),u=n(6946),c=s.internal.temporalUtil.localDateTimeToEpochSecond;var h=new Map;function d(t,e,n){var r=function(t){if(!h.has(t)){var e=new Intl.DateTimeFormat("en-US",{timeZone:t,year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,era:"narrow"});h.set(t,e)}return h.get(t)}(t),i=(0,s.int)(e).multiply(1e3).add((0,s.int)(n).div(1e6)).toNumber(),o=r.formatToParts(i).reduce((function(t,e){return"era"===e.type?t.adjustEra="B"===e.value.toUpperCase()?function(t){return t.subtract(1).negate()}:u.identity:"hour"===e.type?t.hour=(0,s.int)(e.value).modulo(24):"literal"!==e.type&&(t[e.type]=(0,s.int)(e.value)),t}),{});o.year=o.adjustEra(o.year);var a=c(o.year,o.month,o.day,o.hour,o.minute,o.second,o.nanosecond);return o.timeZoneOffsetSeconds=a.subtract(e),o.hour=o.hour.modulo(24),o}function f(t,e,n){if(!e&&!n)return t;var r=function(t){return n?t.toBigInt():t.toNumberOrInfinity()},i=Object.create(Object.getPrototypeOf(t));for(var o in t)if(!0===Object.prototype.hasOwnProperty.call(t,o)){var a=t[o];i[o]=(0,s.isInt)(a)?r(a):a}return Object.freeze(i),i}e.default={createDateTimeWithZoneIdTransformer:function(t,e){var n=t.disableLosslessIntegers,i=t.useBigInt;return a.default.createDateTimeWithZoneIdTransformer(t).extendsWith({signature:105,fromStructure:function(t){o.structure.verifyStructSize("DateTimeWithZoneId",3,t.size);var e=r(t.fields,3),a=e[0],l=e[1],u=e[2],c=d(u,a,l);return f(new s.DateTime(c.year,c.month,c.day,c.hour,c.minute,c.second,(0,s.int)(l),c.timeZoneOffsetSeconds,u),n,i)},toStructure:function(t){var n=c(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),r=null!=t.timeZoneOffsetSeconds?t.timeZoneOffsetSeconds:function(t,e,n){var r=d(t,e,n),i=c(r.year,r.month,r.day,r.hour,r.minute,r.second,n).subtract(e),o=e.subtract(i),s=d(t,o,n),a=c(s.year,s.month,s.day,s.hour,s.minute,s.second,n).subtract(o);return a}(t.timeZoneId,n,t.nanosecond);null==t.timeZoneOffsetSeconds&&e.warn('DateTime objects without "timeZoneOffsetSeconds" property are prune to bugs related to ambiguous times. For instance, 2022-10-30T2:30:00[Europe/Berlin] could be GMT+1 or GMT+2.');var i=n.subtract(r),a=(0,s.int)(t.nanosecond),l=t.timeZoneId;return new o.structure.Structure(105,[i,a,l])}})},createDateTimeWithOffsetTransformer:function(t){var e=t.disableLosslessIntegers,n=t.useBigInt;return a.default.createDateTimeWithOffsetTransformer(t).extendsWith({signature:73,toStructure:function(t){var e=c(t.year,t.month,t.day,t.hour,t.minute,t.second,t.nanosecond),n=(0,s.int)(t.nanosecond),r=(0,s.int)(t.timeZoneOffsetSeconds),i=e.subtract(r);return new o.structure.Structure(73,[i,n,r])},fromStructure:function(t){o.structure.verifyStructSize("DateTimeWithZoneOffset",3,t.size);var i=r(t.fields,3),a=i[0],u=i[1],c=i[2],h=(0,s.int)(a).add(c),d=(0,l.epochSecondAndNanoToLocalDateTime)(h,u);return f(new s.DateTime(d.year,d.month,d.day,d.hour,d.minute,d.second,d.nanosecond,c,null),e,n)}})}}},4101:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(2182)),a=n(379),l=o(n(8700)),u=o(n(9155)),c=o(n(8607)),h=n(4260),d=n(5359).internal.constants.BOLT_PROTOCOL_V5_1,f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new u.default(Object.values(l.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t){var e=this,n=void 0===t?{}:t,r=n.userAgent,o=(n.boltAgent,n.authToken),s=n.notificationFilter,l=n.onError,u=n.onComplete,d={},f=new h.LoginObserver({onError:function(t){return e._onLoginError(t,l)},onCompleted:function(t){return d.metadata=t,e._onLoginCompleted(t)}});return(0,a.assertNotificationFilterIsEmpty)(s,this._onProtocolError,f),this.write(c.default.hello5x1(r,this._serversideRouting),f,!1),this.logon({authToken:o,onComplete:function(t){return u(i(i({},t),d.metadata))},onError:l,flush:!0})},e.prototype.logon=function(t){var e=this,n=void 0===t?{}:t,r=n.authToken,i=n.onComplete,o=n.onError,s=n.flush,a=new h.LoginObserver({onCompleted:function(){return e._onLoginCompleted(null,r,i)},onError:function(t){return e._onLoginError(t,o)}});return this.write(c.default.logon(r),a,s),a},e.prototype.logoff=function(t){var e=void 0===t?{}:t,n=e.onComplete,r=e.onError,i=e.flush,o=new h.LogoffObserver({onCompleted:n,onError:r});return this.write(c.default.logoff(),o,i),o},e}(s.default);e.default=f},8700:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(1099));e.default=r({},o.default)},4364:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(4101)),a=o(n(6169)),l=o(n(9155)),u=o(n(8607)),c=n(4260),h=n(5359).internal.constants,d=h.BOLT_PROTOCOL_V5_2,f=h.FETCH_ALL,p=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new l.default(Object.values(a.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t){var e=this,n=void 0===t?{}:t,r=n.userAgent,o=(n.boltAgent,n.authToken),s=n.notificationFilter,a=n.onError,l=n.onComplete,h={},d=new c.LoginObserver({onError:function(t){return e._onLoginError(t,a)},onCompleted:function(t){return h.metadata=t,e._onLoginCompleted(t)}});return this.write(u.default.hello5x2(r,s,this._serversideRouting),d,!1),this.logon({authToken:o,onComplete:function(t){return l(i(i({},t),h.metadata))},onError:a,flush:!0})},e.prototype.beginTransaction=function(t){var e=void 0===t?{}:t,n=e.bookmarks,r=e.txConfig,i=e.database,o=e.mode,s=e.impersonatedUser,a=e.notificationFilter,l=e.beforeError,h=e.afterError,d=e.beforeComplete,f=e.afterComplete,p=new c.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:d,afterComplete:f});return p.prepareToHandleSingleResponse(),this.write(u.default.begin({bookmarks:n,txConfig:r,database:i,mode:o,impersonatedUser:s,notificationFilter:a}),p,!0),p},e.prototype.run=function(t,e,n){var r=void 0===n?{}:n,i=r.bookmarks,o=r.txConfig,s=r.database,a=r.mode,l=r.impersonatedUser,h=r.notificationFilter,d=r.beforeKeys,p=r.afterKeys,m=r.beforeError,g=r.afterError,_=r.beforeComplete,y=r.afterComplete,v=r.flush,b=void 0===v||v,w=r.reactive,S=void 0!==w&&w,x=r.fetchSize,E=void 0===x?f:x,C=r.highRecordWatermark,k=void 0===C?Number.MAX_VALUE:C,O=r.lowRecordWatermark,T=void 0===O?Number.MAX_VALUE:O,N=new c.ResultStreamObserver({server:this._server,reactive:S,fetchSize:E,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:d,afterKeys:p,beforeError:m,afterError:g,beforeComplete:_,afterComplete:y,highRecordWatermark:k,lowRecordWatermark:T}),I=S;return this.write(u.default.runWithMetadata(t,e,{bookmarks:i,txConfig:o,database:s,mode:a,impersonatedUser:l,notificationFilter:h}),N,I&&b),S||this.write(u.default.pull({n:E}),N,b),N},e}(s.default);e.default=p},6169:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(8700));e.default=r({},o.default)},6003:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(4364)),a=o(n(9114)),l=o(n(9155)),u=o(n(8607)),c=n(4260),h=n(5359).internal.constants.BOLT_PROTOCOL_V5_3,d=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"version",{get:function(){return h},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new l.default(Object.values(a.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t){var e=this,n=void 0===t?{}:t,r=n.userAgent,o=n.boltAgent,s=n.authToken,a=n.notificationFilter,l=n.onError,h=n.onComplete,d={},f=new c.LoginObserver({onError:function(t){return e._onLoginError(t,l)},onCompleted:function(t){return d.metadata=t,e._onLoginCompleted(t)}});return this.write(u.default.hello5x3(r,o,a,this._serversideRouting),f,!1),this.logon({authToken:s,onComplete:function(t){return h(i(i({},t),d.metadata))},onError:l,flush:!0})},e}(s.default);e.default=d},9114:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(6169));e.default=r({},o.default)},5610:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(6003)),s=i(n(2263)),a=i(n(8607)),l=n(4260),u=i(n(9155)),c=n(5359).internal.constants.BOLT_PROTOCOL_V5_4,h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"version",{get:function(){return c},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new u.default(Object.values(s.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),e.prototype.telemetry=function(t,e){var n=t.api,r=void 0===e?{}:e,i=r.onError,o=r.onCompleted,s=new l.TelemetryObserver({onCompleted:o,onError:i});return this.write(a.default.telemetry({api:n}),s,!1),s},e}(o.default);e.default=h},2263:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(9114));e.default=r({},o.default)},4313:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(5610)),a=o(n(2856)),l=o(n(9155)),u=o(n(8607)),c=n(4260),h=n(5359).internal.constants,d=h.BOLT_PROTOCOL_V5_5,f=h.FETCH_ALL,p=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"version",{get:function(){return d},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new l.default(Object.values(a.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),e.prototype.initialize=function(t){var e=this,n=void 0===t?{}:t,r=n.userAgent,o=n.boltAgent,s=n.authToken,a=n.notificationFilter,l=n.onError,h=n.onComplete,d={},f=new c.LoginObserver({onError:function(t){return e._onLoginError(t,l)},onCompleted:function(t){return d.metadata=t,e._onLoginCompleted(t)}});return this.write(u.default.hello5x5(r,o,a,this._serversideRouting),f,!1),this.logon({authToken:s,onComplete:function(t){return h(i(i({},t),d.metadata))},onError:l,flush:!0})},e.prototype.beginTransaction=function(t){var e=void 0===t?{}:t,n=e.bookmarks,r=e.txConfig,i=e.database,o=e.mode,s=e.impersonatedUser,a=e.notificationFilter,l=e.beforeError,h=e.afterError,d=e.beforeComplete,f=e.afterComplete,p=new c.ResultStreamObserver({server:this._server,beforeError:l,afterError:h,beforeComplete:d,afterComplete:f});return p.prepareToHandleSingleResponse(),this.write(u.default.begin5x5({bookmarks:n,txConfig:r,database:i,mode:o,impersonatedUser:s,notificationFilter:a}),p,!0),p},e.prototype.run=function(t,e,n){var r=void 0===n?{}:n,i=r.bookmarks,o=r.txConfig,s=r.database,a=r.mode,l=r.impersonatedUser,h=r.notificationFilter,d=r.beforeKeys,p=r.afterKeys,m=r.beforeError,g=r.afterError,_=r.beforeComplete,y=r.afterComplete,v=r.flush,b=void 0===v||v,w=r.reactive,S=void 0!==w&&w,x=r.fetchSize,E=void 0===x?f:x,C=r.highRecordWatermark,k=void 0===C?Number.MAX_VALUE:C,O=r.lowRecordWatermark,T=void 0===O?Number.MAX_VALUE:O,N=new c.ResultStreamObserver({server:this._server,reactive:S,fetchSize:E,moreFunction:this._requestMore.bind(this),discardFunction:this._requestDiscard.bind(this),beforeKeys:d,afterKeys:p,beforeError:m,afterError:g,beforeComplete:_,afterComplete:y,highRecordWatermark:k,lowRecordWatermark:T,enrichMetadata:this._enrichMetadata}),I=S;return this.write(u.default.runWithMetadata5x5(t,e,{bookmarks:i,txConfig:o,database:s,mode:a,impersonatedUser:l,notificationFilter:h}),N,I&&b),S||this.write(u.default.pull({n:E}),N,b),N},e.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map((function(t){return i(i({},t),{description:null!=t.neo4j_code?t.status_description:t.description,diagnostic_record:null!==t.diagnostic_record?i(i({},p),t.diagnostic_record):null})}))),t},e}(s.default);e.default=m},2856:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(2263));e.default=r({},o.default)},8832:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(4313)),a=o(n(2856)),l=o(n(9155)),u=n(5359).internal.constants.BOLT_PROTOCOL_V5_6,c=Object.freeze({OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"}),h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"version",{get:function(){return u},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"transformer",{get:function(){var t=this;return void 0===this._transformer&&(this._transformer=new l.default(Object.values(a.default).map((function(e){return e(t._config,t._log)})))),this._transformer},enumerable:!1,configurable:!0}),e.prototype._enrichMetadata=function(t){return Array.isArray(t.statuses)&&(t.statuses=t.statuses.map((function(t){return i(i({},t),{diagnostic_record:null!==t.diagnostic_record?i(i({},c),t.diagnostic_record):null})}))),t},e}(s.default);e.default=h},1482:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(5359),o=r(n(2298)),s=r(n(9559)),a=r(n(8256)),l=r(n(7341)),u=r(n(7422)),c=r(n(8747)),h=r(n(9220)),d=r(n(6737)),f=r(n(2182)),p=r(n(4101)),m=r(n(4364)),g=r(n(6003)),_=r(n(5610)),y=r(n(4313)),v=r(n(8832)),b=(n(2366),r(n(6664)));e.default=function(t){var e=void 0===t?{}:t,n=e.version,r=e.chunker,w=e.dechunker,S=e.channel,x=e.disableLosslessIntegers,E=e.useBigInt,C=e.serversideRouting,k=e.server,O=e.log,T=e.observer;return function(t,e,n,r,b,w,S,x){switch(t){case 1:return new o.default(e,n,r,w,x,S);case 2:return new s.default(e,n,r,w,x,S);case 3:return new a.default(e,n,r,w,x,S);case 4:return new l.default(e,n,r,w,x,S);case 4.1:return new u.default(e,n,r,w,x,S,b);case 4.2:return new c.default(e,n,r,w,x,S,b);case 4.3:return new h.default(e,n,r,w,x,S,b);case 4.4:return new d.default(e,n,r,w,x,S,b);case 5:return new f.default(e,n,r,w,x,S,b);case 5.1:return new p.default(e,n,r,w,x,S,b);case 5.2:return new m.default(e,n,r,w,x,S,b);case 5.3:return new g.default(e,n,r,w,x,S,b);case 5.4:return new _.default(e,n,r,w,x,S,b);case 5.5:return new y.default(e,n,r,w,x,S,b);case 5.6:return new v.default(e,n,r,w,x,S,b);default:throw(0,i.newError)("Unknown Bolt protocol version: "+t)}}(n,k,r,{disableLosslessIntegers:x,useBigInt:E},C,(function(t){var e=new b.default({transformMetadata:t.transformMetadata.bind(t),log:O,observer:T});return S.onerror=T.onError.bind(T),S.onmessage=function(t){return w.write(t)},w.onmessage=function(n){try{e.handleResponse(t.unpack(n))}catch(r){return T.onError(r)}},e}),T.onProtocolError.bind(T),O)}},5069:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(2366),i=n(5359),o=1616949271;function s(t,e){return{major:t,minor:e}}function a(){return function(t){if(t.length>4)throw(0,i.newError)("It should not have more than 4 versions of the protocol");var e=(0,r.alloc)(20);return e.writeInt32(o),t.forEach((function(t){if(t instanceof Array){var n=t[0],r=n.major,i=(o=n.minor)-t[1].minor;e.writeInt32(i<<16|o<<8|r)}else{r=t.major;var o=t.minor;e.writeInt32(o<<8|r)}})),e.reset(),e}([[s(5,6),s(5,0)],[s(4,4),s(4,2)],s(4,1),s(3,0)])}e.default=function(t,e){var n=this;return new Promise((function(r,o){var s=function(t){o(t)};t.onerror=s.bind(n),t._error&&s(t._error),t.onmessage=function(t){try{var n=function(t,e){var n=[t.readUInt8(),t.readUInt8(),t.readUInt8(),t.readUInt8()];if(72===n[0]&&84===n[1]&&84===n[2]&&80===n[3])throw e.error("Handshake failed since server responded with HTTP."),(0,i.newError)("Server responded HTTP. Make sure you are not trying to connect to the http endpoint (HTTP defaults to port 7474 whereas BOLT defaults to port 7687)");return Number(n[3]+"."+n[2])}(t,e);r({protocolVersion:n,consumeRemainingBuffer:function(e){t.hasRemaining()&&e(t.readSlice(t.remaining()))}})}catch(s){o(s)}},t.write(a())}))}},6860:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.RawRoutingTable=e.BoltProtocol=void 0;var s=o(n(5069)),a=o(n(1482)),l=o(n(9220)),u=o(n(7840));i(n(4260),e),e.BoltProtocol=l.default,e.RawRoutingTable=u.default,e.default={handshake:s.default,create:a.default}},8607:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SIGNATURES=void 0;var r=n(5359),i=r.internal.constants,o=i.ACCESS_MODE_READ,s=i.FETCH_ALL,a=r.internal.util.assertString,l=Object.freeze({INIT:1,RESET:15,RUN:16,PULL_ALL:63,HELLO:1,GOODBYE:2,BEGIN:17,COMMIT:18,ROLLBACK:19,TELEMETRY:84,ROUTE:102,LOGON:106,LOGOFF:107,DISCARD:47,PULL:63});e.SIGNATURES=l;var u=function(){function t(t,e,n){this.signature=t,this.fields=e,this.toString=n}return t.init=function(e,n){return new t(1,[e,n],(function(){return"INIT ".concat(e," {...}")}))},t.run=function(e,n){return new t(16,[e,n],(function(){return"RUN ".concat(e," ").concat(r.json.stringify(n))}))},t.pullAll=function(){return p},t.reset=function(){return m},t.hello=function(e,n,r,i){void 0===r&&(r=null),void 0===i&&(i=null);var o=Object.assign({user_agent:e},n);return r&&(o.routing=r),i&&(o.patch_bolt=i),new t(1,[o],(function(){return"HELLO {user_agent: '".concat(e,"', ...}")}))},t.hello5x1=function(e,n){void 0===n&&(n=null);var r={user_agent:e};return n&&(r.routing=n),new t(1,[r],(function(){return"HELLO {user_agent: '".concat(e,"', ...}")}))},t.hello5x2=function(e,n,i){void 0===n&&(n=null),void 0===i&&(i=null);var o={user_agent:e};return d(o,n),i&&(o.routing=i),new t(1,[o],(function(){return"HELLO ".concat(r.json.stringify(o))}))},t.hello5x3=function(e,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null);var s={};return e&&(s.user_agent=e),n&&(s.bolt_agent={product:n.product,platform:n.platform,language:n.language,language_details:n.languageDetails}),d(s,i),o&&(s.routing=o),new t(1,[s],(function(){return"HELLO ".concat(r.json.stringify(s))}))},t.hello5x5=function(e,n,i,o){void 0===i&&(i=null),void 0===o&&(o=null);var s={};return e&&(s.user_agent=e),n&&(s.bolt_agent={product:n.product,platform:n.platform,language:n.language,language_details:n.languageDetails}),f(s,i),o&&(s.routing=o),new t(1,[s],(function(){return"HELLO ".concat(r.json.stringify(s))}))},t.logon=function(e){return new t(106,[e],(function(){return"LOGON { ... }"}))},t.logoff=function(){return new t(107,[],(function(){return"LOGOFF"}))},t.begin=function(e){var n=void 0===e?{}:e,i=c(n.bookmarks,n.txConfig,n.database,n.mode,n.impersonatedUser,n.notificationFilter);return new t(17,[i],(function(){return"BEGIN ".concat(r.json.stringify(i))}))},t.begin5x5=function(e){var n=void 0===e?{}:e,i=c(n.bookmarks,n.txConfig,n.database,n.mode,n.impersonatedUser,n.notificationFilter,{appendNotificationFilter:f});return new t(17,[i],(function(){return"BEGIN ".concat(r.json.stringify(i))}))},t.commit=function(){return g},t.rollback=function(){return _},t.runWithMetadata=function(e,n,i){var o=void 0===i?{}:i,s=c(o.bookmarks,o.txConfig,o.database,o.mode,o.impersonatedUser,o.notificationFilter);return new t(16,[e,n,s],(function(){return"RUN ".concat(e," ").concat(r.json.stringify(n)," ").concat(r.json.stringify(s))}))},t.runWithMetadata5x5=function(e,n,i){var o=void 0===i?{}:i,s=c(o.bookmarks,o.txConfig,o.database,o.mode,o.impersonatedUser,o.notificationFilter,{appendNotificationFilter:f});return new t(16,[e,n,s],(function(){return"RUN ".concat(e," ").concat(r.json.stringify(n)," ").concat(r.json.stringify(s))}))},t.goodbye=function(){return y},t.pull=function(e){var n=void 0===e?{}:e,i=n.stmtId,o=void 0===i?-1:i,a=n.n,l=h(null===o||void 0===o?-1:o,(void 0===a?s:a)||s);return new t(63,[l],(function(){return"PULL ".concat(r.json.stringify(l))}))},t.discard=function(e){var n=void 0===e?{}:e,i=n.stmtId,o=void 0===i?-1:i,a=n.n,l=h(null===o||void 0===o?-1:o,(void 0===a?s:a)||s);return new t(47,[l],(function(){return"DISCARD ".concat(r.json.stringify(l))}))},t.telemetry=function(e){var n=e.api,i=(0,r.int)(n);return new t(84,[i],(function(){return"TELEMETRY ".concat(i.toString())}))},t.route=function(e,n,i){return void 0===e&&(e={}),void 0===n&&(n=[]),void 0===i&&(i=null),new t(102,[e,n,i],(function(){return"ROUTE ".concat(r.json.stringify(e)," ").concat(r.json.stringify(n)," ").concat(i)}))},t.routeV4x4=function(e,n,i){void 0===e&&(e={}),void 0===n&&(n=[]),void 0===i&&(i={});var o={};return i.databaseName&&(o.db=i.databaseName),i.impersonatedUser&&(o.imp_user=i.impersonatedUser),new t(102,[e,n,o],(function(){return"ROUTE ".concat(r.json.stringify(e)," ").concat(r.json.stringify(n)," ").concat(r.json.stringify(o))}))},t}();function c(t,e,n,r,i,s,l){var u;void 0===l&&(l={});var c={};return t.isEmpty()||(c.bookmarks=t.values()),null!==e.timeout&&(c.tx_timeout=e.timeout),e.metadata&&(c.tx_metadata=e.metadata),n&&(c.db=a(n,"database")),i&&(c.imp_user=a(i,"impersonatedUser")),r===o&&(c.mode="r"),(null!==(u=l.appendNotificationFilter)&&void 0!==u?u:d)(c,s),c}function h(t,e){var n={n:(0,r.int)(e)};return-1!==t&&(n.qid=(0,r.int)(t)),n}function d(t,e){e&&(e.minimumSeverityLevel&&(t.notifications_minimum_severity=e.minimumSeverityLevel),e.disabledCategories&&(t.notifications_disabled_categories=e.disabledCategories),e.disabledClassifications&&(t.notifications_disabled_categories=e.disabledClassifications))}function f(t,e){e&&(e.minimumSeverityLevel&&(t.notifications_minimum_severity=e.minimumSeverityLevel),e.disabledCategories&&(t.notifications_disabled_classifications=e.disabledCategories),e.disabledClassifications&&(t.notifications_disabled_classifications=e.disabledClassifications))}e.default=u;var p=new u(63,[],(function(){return"PULL_ALL"})),m=new u(15,[],(function(){return"RESET"})),g=new u(18,[],(function(){return"COMMIT"})),_=new u(19,[],(function(){return"ROLLBACK"})),y=new u(2,[],(function(){return"GOODBYE"}))},6664:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5359);function i(){}function o(t){return t}var s={onNext:i,onCompleted:i,onError:i},a=function(){function t(t){var e=void 0===t?{}:t,n=e.transformMetadata,r=e.log,s=e.observer;this._pendingObservers=[],this._log=r,this._transformMetadata=n||o,this._observer=Object.assign({onObserversCountChange:i,onError:i,onFailure:i,onErrorApplyTransformation:o},s)}return Object.defineProperty(t.prototype,"currentFailure",{get:function(){return this._currentFailure},enumerable:!1,configurable:!0}),t.prototype.handleResponse=function(t){var e=t.fields[0];switch(t.signature){case 113:this._log.isDebugEnabled()&&this._log.debug("S: RECORD ".concat(r.json.stringify(t))),this._currentObserver.onNext(e);break;case 112:this._log.isDebugEnabled()&&this._log.debug("S: SUCCESS ".concat(r.json.stringify(t)));try{var n=this._transformMetadata(e);this._currentObserver.onCompleted(n)}finally{this._updateCurrentObserver()}break;case 127:this._log.isDebugEnabled()&&this._log.debug("S: FAILURE ".concat(r.json.stringify(t)));try{var i=function(t){if("Neo.TransientError.Transaction.Terminated"===t)return"Neo.ClientError.Transaction.Terminated";if("Neo.TransientError.Transaction.LockClientStopped"===t)return"Neo.ClientError.Transaction.LockClientStopped";return t}(e.code),o=(0,r.newError)(e.message,i);this._currentFailure=this._observer.onErrorApplyTransformation(o),this._currentObserver.onError(this._currentFailure)}finally{this._updateCurrentObserver(),this._observer.onFailure(this._currentFailure)}break;case 126:this._log.isDebugEnabled()&&this._log.debug("S: IGNORED ".concat(r.json.stringify(t)));try{this._currentFailure&&this._currentObserver.onError?this._currentObserver.onError(this._currentFailure):this._currentObserver.onError&&this._currentObserver.onError((0,r.newError)("Ignored either because of an error or RESET"))}finally{this._updateCurrentObserver()}break;default:this._observer.onError((0,r.newError)("Unknown Bolt protocol message: "+t))}},t.prototype._updateCurrentObserver=function(){this._currentObserver=this._pendingObservers.shift(),this._observer.onObserversCountChange(this._observersCount)},Object.defineProperty(t.prototype,"_observersCount",{get:function(){return null==this._currentObserver?this._pendingObservers.length:this._pendingObservers.length+1},enumerable:!1,configurable:!0}),t.prototype._queueObserver=function(t){return(t=t||s).onCompleted=t.onCompleted||i,t.onError=t.onError||i,t.onNext=t.onNext||i,void 0===this._currentObserver?this._currentObserver=t:this._pendingObservers.push(t),this._observer.onObserversCountChange(this._observersCount),!0},t.prototype._notifyErrorToObservers=function(t){for(this._currentObserver&&this._currentObserver.onError&&this._currentObserver.onError(t);this._pendingObservers.length>0;){var e=this._pendingObservers.shift();e&&e.onError&&e.onError(t)}},t.prototype.hasOngoingObservableRequests=function(){return null!=this._currentObserver||this._pendingObservers.length>0},t.prototype._resetFailure=function(){this._currentFailure=null},t}();e.default=a},7840:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});i(n(5359));var o=function(){function t(){}return t.ofRecord=function(e){return null===e?t.ofNull():new l(e)},t.ofMessageResponse=function(e){return null===e?t.ofNull():new s(e)},t.ofNull=function(){return new a},Object.defineProperty(t.prototype,"ttl",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"db",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"servers",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isNull",{get:function(){throw new Error("Not implemented")},enumerable:!1,configurable:!0}),t}();e.default=o;var s=function(t){function e(e){var n=t.call(this)||this;return n._response=e,n}return r(e,t),Object.defineProperty(e.prototype,"ttl",{get:function(){return this._response.rt.ttl},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){return this._response.rt.servers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"db",{get:function(){return this._response.rt.db},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){return null===this._response},enumerable:!1,configurable:!0}),e}(o),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),Object.defineProperty(e.prototype,"isNull",{get:function(){return!0},enumerable:!1,configurable:!0}),e}(o),l=function(t){function e(e){var n=t.call(this)||this;return n._record=e,n}return r(e,t),Object.defineProperty(e.prototype,"ttl",{get:function(){return this._record.get("ttl")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"servers",{get:function(){return this._record.get("servers")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"db",{get:function(){return this._record.has("db")?this._record.get("db"):null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){return null===this._record},enumerable:!1,configurable:!0}),e}(o)},4260:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.TelemetryObserver=e.ProcedureRouteObserver=e.RouteObserver=e.CompletedObserver=e.FailedObserver=e.ResetObserver=e.LogoffObserver=e.LoginObserver=e.ResultStreamObserver=e.StreamObserver=void 0;var o=n(5359),s=i(n(7840)),a=n(6831),l=o.internal.constants.FETCH_ALL,u=o.error.PROTOCOL_ERROR,c=function(){function t(){}return t.prototype.onNext=function(t){},t.prototype.onError=function(t){},t.prototype.onCompleted=function(t){},t}();e.StreamObserver=c;var h=function(t){function e(e){var n=void 0===e?{}:e,r=n.reactive,i=void 0!==r&&r,o=n.moreFunction,s=n.discardFunction,u=n.fetchSize,c=void 0===u?l:u,h=n.beforeError,d=n.afterError,f=n.beforeKeys,p=n.afterKeys,m=n.beforeComplete,g=n.afterComplete,_=n.server,y=n.highRecordWatermark,v=void 0===y?Number.MAX_VALUE:y,w=n.lowRecordWatermark,S=void 0===w?Number.MAX_VALUE:w,x=n.enrichMetadata,E=t.call(this)||this;return E._fieldKeys=null,E._fieldLookup=null,E._head=null,E._queuedRecords=[],E._tail=null,E._error=null,E._observers=[],E._meta={},E._server=_,E._beforeError=h,E._afterError=d,E._beforeKeys=f,E._afterKeys=p,E._beforeComplete=m,E._afterComplete=g,E._enrichMetadata=x||a.functional.identity,E._queryId=null,E._moreFunction=o,E._discardFunction=s,E._discard=!1,E._fetchSize=c,E._lowRecordWatermark=S,E._highRecordWatermark=v,E._setState(i?b.READY:b.READY_STREAMING),E._setupAutoPull(),E._paused=!1,E._pulled=!i,E._haveRecordStreamed=!1,E}return r(e,t),e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1,this._setupAutoPull(!0),this._state.pull(this)},e.prototype.onNext=function(t){this._haveRecordStreamed=!0;var e=new o.Record(this._fieldKeys,t,this._fieldLookup);this._observers.some((function(t){return t.onNext}))?this._observers.forEach((function(t){t.onNext&&t.onNext(e)})):(this._queuedRecords.push(e),this._queuedRecords.length>this._highRecordWatermark&&(this._autoPull=!1))},e.prototype.onCompleted=function(t){this._state.onSuccess(this,t)},e.prototype.onError=function(t){this._state.onError(this,t)},e.prototype.cancel=function(){this._discard=!0},e.prototype.prepareToHandleSingleResponse=function(){this._head=[],this._fieldKeys=[],this._setState(b.STREAMING)},e.prototype.markCompleted=function(){this._head=[],this._fieldKeys=[],this._tail={},this._setState(b.SUCCEEDED)},e.prototype.subscribe=function(t){if(this._head&&t.onKeys&&t.onKeys(this._head),this._queuedRecords.length>0&&t.onNext)for(var e=0;e<this._queuedRecords.length;e++)t.onNext(this._queuedRecords[e]),this._queuedRecords.length-e-1<=this._lowRecordWatermark&&(this._autoPull=!0,this._state===b.READY&&this._handleStreaming());this._tail&&t.onCompleted&&t.onCompleted(this._tail),this._error&&t.onError(this._error),this._observers.push(t),this._state===b.READY&&this._handleStreaming()},e.prototype._handleHasMore=function(t){this._setState(b.READY),this._handleStreaming(),delete t.has_more},e.prototype._handlePullSuccess=function(t){var e=this,n=this._enrichMetadata(Object.assign(this._server?{server:this._server}:{},this._meta,{stream_summary:{have_records_streamed:this._haveRecordStreamed,pulled:this._pulled,has_keys:this._fieldKeys.length>0}},t));if([void 0,null,"r","w","rw","s"].includes(n.type)){this._setState(b.SUCCEEDED);var r=null;this._beforeComplete&&(r=this._beforeComplete(n));var i=function(){e._tail=n,e._observers.some((function(t){return t.onCompleted}))&&e._observers.forEach((function(t){t.onCompleted&&t.onCompleted(n)})),e._afterComplete&&e._afterComplete(n)};r?Promise.resolve(r).then((function(){return i()})):i()}else this.onError((0,o.newError)('Server returned invalid query type. Expected one of [undefined, null, "r", "w", "rw", "s"] but got \''.concat(n.type,"'"),u))},e.prototype._handleRunSuccess=function(t,e){var n=this;if(null===this._fieldKeys){if(this._fieldKeys=[],this._fieldLookup={},t.fields&&t.fields.length>0){this._fieldKeys=t.fields;for(var r=0;r<t.fields.length;r++)this._fieldLookup[t.fields[r]]=r}null!=t.fields&&delete t.fields,null!==t.qid&&void 0!==t.qid&&(this._queryId=t.qid,delete t.qid),this._storeMetadataForCompletion(t);var i=null;this._beforeKeys&&(i=this._beforeKeys(this._fieldKeys));var o=function(){n._head=n._fieldKeys,n._observers.some((function(t){return t.onKeys}))&&n._observers.forEach((function(t){t.onKeys&&t.onKeys(n._fieldKeys)})),n._afterKeys&&n._afterKeys(n._fieldKeys),e()};i?Promise.resolve(i).then((function(){return o()})):o()}},e.prototype._handleError=function(t){var e=this;this._setState(b.FAILED),this._error=t;var n=null;this._beforeError&&(n=this._beforeError(t));var r=function(){e._observers.some((function(t){return t.onError}))&&e._observers.forEach((function(e){e.onError&&e.onError(t)})),e._afterError&&e._afterError(t)};n?Promise.resolve(n).then((function(){return r()})):r()},e.prototype._handleStreaming=function(){this._head&&this._observers.some((function(t){return t.onNext||t.onCompleted}))&&(this._paused||!this._discard&&!this._autoPull||this._more())},e.prototype._more=function(){this._discard?this._discardFunction(this._queryId,this):(this._pulled=!0,this._moreFunction(this._queryId,this._fetchSize,this)),this._setState(b.STREAMING)},e.prototype._storeMetadataForCompletion=function(t){for(var e=Object.keys(t),n=e.length,r="";n--;)r=e[n],this._meta[r]=t[r]},e.prototype._setState=function(t){this._state=t},e.prototype._setupAutoPull=function(){this._autoPull=!0},e}(c);e.ResultStreamObserver=h;var d=function(t){function e(e){var n=void 0===e?{}:e,r=n.onError,i=n.onCompleted,o=t.call(this)||this;return o._onError=r,o._onCompleted=i,o}return r(e,t),e.prototype.onNext=function(t){this.onError((0,o.newError)("Received RECORD when initializing "+o.json.stringify(t)))},e.prototype.onError=function(t){this._onError&&this._onError(t)},e.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},e}(c);e.LoginObserver=d;var f=function(t){function e(e){var n=void 0===e?{}:e,r=n.onError,i=n.onCompleted,o=t.call(this)||this;return o._onError=r,o._onCompleted=i,o}return r(e,t),e.prototype.onNext=function(t){this.onError((0,o.newError)("Received RECORD when logging off "+o.json.stringify(t)))},e.prototype.onError=function(t){this._onError&&this._onError(t)},e.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},e}(c);e.LogoffObserver=f;var p=function(t){function e(e){var n=void 0===e?{}:e,r=n.onProtocolError,i=n.onError,o=n.onComplete,s=t.call(this)||this;return s._onProtocolError=r,s._onError=i,s._onComplete=o,s}return r(e,t),e.prototype.onNext=function(t){this.onError((0,o.newError)("Received RECORD when resetting: received record is: "+o.json.stringify(t),u))},e.prototype.onError=function(t){t.code===u&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},e.prototype.onCompleted=function(t){this._onComplete&&this._onComplete(t)},e}(c);e.ResetObserver=p;var m=function(t){function e(e){var n=void 0===e?{}:e,r=n.onError,i=n.onCompleted,o=t.call(this)||this;return o._onError=r,o._onCompleted=i,o}return r(e,t),e.prototype.onNext=function(t){this.onError((0,o.newError)("Received RECORD when sending telemetry "+o.json.stringify(t),u))},e.prototype.onError=function(t){this._onError&&this._onError(t)},e.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(t)},e}(h);e.TelemetryObserver=m;var g=function(t){function e(e){var n=e.error,r=e.onError,i=t.call(this,{beforeError:r})||this;return i.onError(n),i}return r(e,t),e}(h);e.FailedObserver=g;var _=function(t){function e(){var e=t.call(this)||this;return t.prototype.markCompleted.call(e),e}return r(e,t),e}(h);e.CompletedObserver=_;var y=function(t){function e(e){var n=e.resultObserver,r=e.onProtocolError,i=e.onError,o=e.onCompleted,s=t.call(this)||this;return s._resultObserver=n,s._onError=i,s._onCompleted=o,s._records=[],s._onProtocolError=r,n.subscribe(s),s}return r(e,t),e.prototype.onNext=function(t){this._records.push(t)},e.prototype.onError=function(t){t.code===u&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},e.prototype.onCompleted=function(){null===this._records||1===this._records.length?this._onCompleted&&this._onCompleted(s.default.ofRecord(this._records[0])):this.onError((0,o.newError)("Illegal response from router. Received "+this._records.length+" records but expected only one.\n"+o.json.stringify(this._records),u))},e}(c);e.ProcedureRouteObserver=y;var v=function(t){function e(e){var n=void 0===e?{}:e,r=n.onProtocolError,i=n.onError,o=n.onCompleted,s=t.call(this)||this;return s._onProtocolError=r,s._onError=i,s._onCompleted=o,s}return r(e,t),e.prototype.onNext=function(t){this.onError((0,o.newError)("Received RECORD when resetting: received record is: "+o.json.stringify(t),u))},e.prototype.onError=function(t){t.code===u&&this._onProtocolError&&this._onProtocolError(t.message),this._onError&&this._onError(t)},e.prototype.onCompleted=function(t){this._onCompleted&&this._onCompleted(s.default.ofMessageResponse(t))},e}(c);e.RouteObserver=v;var b={READY_STREAMING:{onSuccess:function(t,e){t._handleRunSuccess(e,(function(){t._setState(b.STREAMING)}))},onError:function(t,e){t._handleError(e)},name:function(){return"READY_STREAMING"},pull:function(){}},READY:{onSuccess:function(t,e){t._handleRunSuccess(e,(function(){return t._handleStreaming()}))},onError:function(t,e){t._handleError(e)},name:function(){return"READY"},pull:function(t){return t._more()}},STREAMING:{onSuccess:function(t,e){e.has_more?t._handleHasMore(e):t._handlePullSuccess(e)},onError:function(t,e){t._handleError(e)},name:function(){return"STREAMING"},pull:function(){}},FAILED:{onError:function(t){},name:function(){return"FAILED"},pull:function(){}},SUCCEEDED:{name:function(){return"SUCCEEDED"},pull:function(){}}}},8159:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.epochSecondAndNanoToLocalDateTime=e.nanoOfDayToLocalTime=e.epochDayToDate=void 0;var r=n(5359),i=r.internal.temporalUtil,o=i.DAYS_0000_TO_1970,s=i.DAYS_PER_400_YEAR_CYCLE,a=i.NANOS_PER_HOUR,l=i.NANOS_PER_MINUTE,u=i.NANOS_PER_SECOND,c=i.SECONDS_PER_DAY,h=i.floorDiv,d=i.floorMod;function f(t){var e=(t=(0,r.int)(t)).add(o).subtract(60),n=(0,r.int)(0);if(e.lessThan(0)){var i=e.add(1).div(s).subtract(1);n=i.multiply(400),e=e.add(i.multiply(-s))}var a=e.multiply(400).add(591).div(s),l=e.subtract(a.multiply(365).add(a.div(4)).subtract(a.div(100)).add(a.div(400)));l.lessThan(0)&&(a=a.subtract(1),l=e.subtract(a.multiply(365).add(a.div(4)).subtract(a.div(100)).add(a.div(400)))),a=a.add(n);var u=l,c=u.multiply(5).add(2).div(153),h=c.add(2).modulo(12).add(1),d=u.subtract(c.multiply(306).add(5).div(10)).add(1);return a=a.add(c.div(10)),new r.Date(a,h,d)}function p(t){var e=(t=(0,r.int)(t)).div(a),n=(t=t.subtract(e.multiply(a))).div(l),i=(t=t.subtract(n.multiply(l))).div(u),o=t.subtract(i.multiply(u));return new r.LocalTime(e,n,i,o)}e.epochDayToDate=f,e.nanoOfDayToLocalTime=p,e.epochSecondAndNanoToLocalDateTime=function(t,e){var n=h(t,c),i=d(t,c).multiply(u).add(e),o=f(n),s=p(i);return new r.LocalDateTime(o.year,o.month,o.day,s.hour,s.minute,s.second,s.nanosecond)}},9155:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypeTransformer=void 0;var r=n(4666),i=n(5359).internal.objectUtil,o=function(){function t(t){this._transformers=t,this._transformersPerSignature=new Map(t.map((function(t){return[t.signature,t]}))),this.fromStructure=this.fromStructure.bind(this),this.toStructure=this.toStructure.bind(this),Object.freeze(this)}return t.prototype.fromStructure=function(t){try{return t instanceof r.structure.Structure&&this._transformersPerSignature.has(t.signature)?(0,this._transformersPerSignature.get(t.signature).fromStructure)(t):t}catch(e){return i.createBrokenObject(e)}},t.prototype.toStructure=function(t){var e=this._transformers.find((function(e){return(0,e.isTypeInstance)(t)}));return void 0!==e?e.toStructure(t):t},t}();e.default=o;var s=function(){function t(t){var e=t.signature,n=t.fromStructure,r=t.toStructure,i=t.isTypeInstance;this.signature=e,this.isTypeInstance=i,this.fromStructure=n,this.toStructure=r,Object.freeze(this)}return t.prototype.extendsWith=function(e){var n=e.signature,r=e.fromStructure,i=e.toStructure,o=e.isTypeInstance;return new t({signature:n||this.signature,fromStructure:r||this.fromStructure,toStructure:i||this.toStructure,isTypeInstance:o||this.isTypeInstance})},t}();e.TypeTransformer=s},8979:function(t,e){"use strict";var n=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t){this.position=0,this.length=t}return t.prototype.getUInt8=function(t){throw new Error("Not implemented")},t.prototype.getInt8=function(t){throw new Error("Not implemented")},t.prototype.getFloat64=function(t){throw new Error("Not implemented")},t.prototype.putUInt8=function(t,e){throw new Error("Not implemented")},t.prototype.putInt8=function(t,e){throw new Error("Not implemented")},t.prototype.putFloat64=function(t,e){throw new Error("Not implemented")},t.prototype.getInt16=function(t){return this.getInt8(t)<<8|this.getUInt8(t+1)},t.prototype.getUInt16=function(t){return this.getUInt8(t)<<8|this.getUInt8(t+1)},t.prototype.getInt32=function(t){return this.getInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)},t.prototype.getUInt32=function(t){return this.getUInt8(t)<<24|this.getUInt8(t+1)<<16|this.getUInt8(t+2)<<8|this.getUInt8(t+3)},t.prototype.getInt64=function(t){return this.getInt8(t)<<56|this.getUInt8(t+1)<<48|this.getUInt8(t+2)<<40|this.getUInt8(t+3)<<32|this.getUInt8(t+4)<<24|this.getUInt8(t+5)<<16|this.getUInt8(t+6)<<8|this.getUInt8(t+7)},t.prototype.getSlice=function(t,e){return new i(t,e,this)},t.prototype.putInt16=function(t,e){this.putInt8(t,e>>8),this.putUInt8(t+1,255&e)},t.prototype.putUInt16=function(t,e){this.putUInt8(t,e>>8&255),this.putUInt8(t+1,255&e)},t.prototype.putInt32=function(t,e){this.putInt8(t,e>>24),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,255&e)},t.prototype.putUInt32=function(t,e){this.putUInt8(t,e>>24&255),this.putUInt8(t+1,e>>16&255),this.putUInt8(t+2,e>>8&255),this.putUInt8(t+3,255&e)},t.prototype.putInt64=function(t,e){this.putInt8(t,e>>48),this.putUInt8(t+1,e>>42&255),this.putUInt8(t+2,e>>36&255),this.putUInt8(t+3,e>>30&255),this.putUInt8(t+4,e>>24&255),this.putUInt8(t+5,e>>16&255),this.putUInt8(t+6,e>>8&255),this.putUInt8(t+7,255&e)},t.prototype.putBytes=function(t,e){for(var n=0,r=e.remaining();n<r;n++)this.putUInt8(t+n,e.readUInt8())},t.prototype.readUInt8=function(){return this.getUInt8(this._updatePos(1))},t.prototype.readInt8=function(){return this.getInt8(this._updatePos(1))},t.prototype.readUInt16=function(){return this.getUInt16(this._updatePos(2))},t.prototype.readUInt32=function(){return this.getUInt32(this._updatePos(4))},t.prototype.readInt16=function(){return this.getInt16(this._updatePos(2))},t.prototype.readInt32=function(){return this.getInt32(this._updatePos(4))},t.prototype.readInt64=function(){return this.getInt32(this._updatePos(8))},t.prototype.readFloat64=function(){return this.getFloat64(this._updatePos(8))},t.prototype.writeUInt8=function(t){this.putUInt8(this._updatePos(1),t)},t.prototype.writeInt8=function(t){this.putInt8(this._updatePos(1),t)},t.prototype.writeInt16=function(t){this.putInt16(this._updatePos(2),t)},t.prototype.writeInt32=function(t){this.putInt32(this._updatePos(4),t)},t.prototype.writeUInt32=function(t){this.putUInt32(this._updatePos(4),t)},t.prototype.writeInt64=function(t){this.putInt64(this._updatePos(8),t)},t.prototype.writeFloat64=function(t){this.putFloat64(this._updatePos(8),t)},t.prototype.writeBytes=function(t){this.putBytes(this._updatePos(t.remaining()),t)},t.prototype.readSlice=function(t){return this.getSlice(this._updatePos(t),t)},t.prototype._updatePos=function(t){var e=this.position;return this.position+=t,e},t.prototype.remaining=function(){return this.length-this.position},t.prototype.hasRemaining=function(){return this.remaining()>0},t.prototype.reset=function(){this.position=0},t.prototype.toString=function(){return this.constructor.name+"( position="+this.position+" )\n  "+this.toHex()},t.prototype.toHex=function(){for(var t="",e=0;e<this.length;e++){var n=this.getUInt8(e).toString(16);1===n.length&&(n="0"+n),t+=n,e!==this.length-1&&(t+=" ")}return t},t}();e.default=r;var i=function(t){function e(e,n,r){var i=t.call(this,n)||this;return i._start=e,i._inner=r,i}return n(e,t),e.prototype.putUInt8=function(t,e){this._inner.putUInt8(this._start+t,e)},e.prototype.getUInt8=function(t){return this._inner.getUInt8(this._start+t)},e.prototype.putInt8=function(t,e){this._inner.putInt8(this._start+t,e)},e.prototype.putFloat64=function(t,e){this._inner.putFloat64(this._start+t,e)},e.prototype.getInt8=function(t){return this._inner.getInt8(this._start+t)},e.prototype.getFloat64=function(t){return this._inner.getFloat64(this._start+t)},e}(r)},3540:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseBuffer=void 0;var i=r(n(8979));e.BaseBuffer=i.default,e.default=i.default},1571:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(193)),o=n(5359),s=o.internal.util,a=s.ENCRYPTION_OFF,l=s.ENCRYPTION_ON,u=function(){function t(t,e,n){void 0===e&&(e=c),void 0===n&&(n=function(t){return new WebSocket(t)});var r=this;this._open=!0,this._pending=[],this._error=null,this._handleConnectionError=this._handleConnectionError.bind(this),this._config=t,this._receiveTimeout=null,this._receiveTimeoutStarted=!1,this._receiveTimeoutId=null,this._closingPromise=null;var s=function(t,e){var n=function(t){return!0===t.encrypted||t.encrypted===l}(t),r=function(t){return!1===t.encrypted||t.encrypted===a}(t),i=t.trust,s=function(t){var e="function"===typeof t?t():"";return e&&e.toLowerCase().indexOf("https")>=0}(e);if(function(t,e,n){null===n||(t&&!n?console.warn("Neo4j driver is configured to use secure WebSocket on a HTTP web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to not use encryption."):e&&n&&console.warn("Neo4j driver is configured to use insecure WebSocket on a HTTPS web page. WebSockets might not work in a mixed content environment. Please consider configuring driver to use encryption."))}(n,r,s),r)return{scheme:"ws",error:null};if(s)return{scheme:"wss",error:null};if(n){return i&&"TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"!==i?{scheme:null,error:(0,o.newError)("The browser version of this driver only supports one trust strategy, 'TRUST_SYSTEM_CA_SIGNED_CERTIFICATES'. "+i+' is not supported. Please either use TRUST_SYSTEM_CA_SIGNED_CERTIFICATES or disable encryption by setting `encrypted:"'+a+'"` in the driver configuration.')}:{scheme:"wss",error:null}}return{scheme:"ws",error:null}}(t,e),u=s.scheme,h=s.error;if(h)this._error=h;else{this._ws=function(t,e,n){var r=t+"://"+e.asHostPort();try{return n(r)}catch(h){if(function(t,e){return"SyntaxError"===t.name&&(n=e.asHostPort(),"["===n.charAt(0)&&-1!==n.indexOf("]"));var n}(h,e)){var i=function(t,e){var n=e.host().replace(/:/g,"-"),r=n.replace("%","s")+".ipv6-literal.net";return"".concat(t,"://").concat(r,":").concat(e.port())}(t,e);return n(i)}throw h}}(u,t.address,n),this._ws.binaryType="arraybuffer";var d=this;this._ws.onclose=function(t){t&&!t.wasClean&&d._handleConnectionError(),d._open=!1},this._ws.onopen=function(){d._clearConnectionTimeout();var t=d._pending;d._pending=null;for(var e=0;e<t.length;e++)d.write(t[e])},this._ws.onmessage=function(t){if(r._resetTimeout(),d.onmessage){var e=new i.default(t.data);d.onmessage(e)}},this._ws.onerror=this._handleConnectionError,this._connectionTimeoutFired=!1,this._connectionTimeoutId=this._setupConnectionTimeout()}}return t.prototype._handleConnectionError=function(){if(this._connectionTimeoutFired)return this._error=(0,o.newError)("Failed to establish connection in ".concat(this._config.connectionTimeout,"ms"),this._config.connectionErrorCode),void(this.onerror&&this.onerror(this._error));this._open&&!this._timedout&&(this._error=(0,o.newError)("WebSocket connection failure. Due to security constraints in your web browser, the reason for the failure is not available to this Neo4j Driver. Please use your browsers development console to determine the root cause of the failure. Common reasons include the database being unavailable, using the wrong connection URL or temporary network problems. If you have enabled encryption, ensure your browser is configured to trust the certificate Neo4j is configured to use. WebSocket `readyState` is: "+this._ws.readyState,this._config.connectionErrorCode),this.onerror&&this.onerror(this._error))},t.prototype.write=function(t){if(null!==this._pending)this._pending.push(t);else{if(!(t instanceof i.default))throw(0,o.newError)("Don't know how to send buffer: "+t);try{this._ws.send(t._buffer)}catch(e){if(1===this._ws.readyState)throw e;this._handleConnectionError()}}},t.prototype.close=function(){var t=this;return null===this._closingPromise&&(this._closingPromise=new Promise((function(e,n){t._clearConnectionTimeout(),t._ws&&3!==t._ws.readyState?(t._open=!1,t.stopReceiveTimeout(),t._ws.onclose=function(){e()},t._ws.close()):e()}))),this._closingPromise},t.prototype.setupReceiveTimeout=function(t){this._receiveTimeout=t},t.prototype.stopReceiveTimeout=function(){null!==this._receiveTimeout&&this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!1,null!=this._receiveTimeoutId&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=null)},t.prototype.startReceiveTimeout=function(){this._open&&null!==this._receiveTimeout&&!this._receiveTimeoutStarted&&(this._receiveTimeoutStarted=!0,this._resetTimeout())},t.prototype._resetTimeout=function(){var t=this;this._receiveTimeoutStarted&&(null!==this._receiveTimeoutId&&clearTimeout(this._receiveTimeoutId),this._receiveTimeoutId=setTimeout((function(){t._receiveTimeoutId=null,t._timedout=!0,t.stopReceiveTimeout(),t._error=(0,o.newError)("Connection lost. Server didn't respond in ".concat(t._receiveTimeout,"ms"),t._config.connectionErrorCode),t.close(),t.onerror&&t.onerror(t._error)}),this._receiveTimeout))},t.prototype._setupConnectionTimeout=function(){var t=this,e=this._config.connectionTimeout;if(e){var n=this._ws;return setTimeout((function(){1!==n.readyState&&(t._connectionTimeoutFired=!0,n.close())}),e)}return null},t.prototype._clearConnectionTimeout=function(){var t=this._connectionTimeoutId;(t||0===t)&&(this._connectionTimeoutFired=!1,this._connectionTimeoutId=null,clearTimeout(t))},t}();function c(){return"undefined"!==typeof window&&window.location?window.location.protocol:null}e.default=u},7744:function(t,e){"use strict";var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.default={load:function(t){return n(this,void 0,void 0,(function(){return r(this,(function(e){return[2,t]}))}))}}},4117:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.resolve=function(t){return this._resolveToItself(t)},e}(n(5359).internal.resolver.BaseHostNameResolver);e.default=i},8845:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ClientCertificatesLoader=e.HostNameResolver=e.Channel=void 0;var i=r(n(1571)),o=r(n(4117)),s=r(n(7744));e.Channel=i.default,e.HostNameResolver=o.default,e.ClientCertificatesLoader=s.default},193:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.alloc=void 0;var o=i(n(6382)),s=function(t){function e(e){var n=this,r=function(t){return t instanceof o.default.Buffer?t:"number"===typeof t&&"function"===typeof o.default.Buffer.alloc?o.default.Buffer.alloc(t):new o.default.Buffer(t)}(e);return(n=t.call(this,r.length)||this)._buffer=r,n}return r(e,t),e.prototype.getUInt8=function(t){return this._buffer.readUInt8(t)},e.prototype.getInt8=function(t){return this._buffer.readInt8(t)},e.prototype.getFloat64=function(t){return this._buffer.readDoubleBE(t)},e.prototype.putUInt8=function(t,e){this._buffer.writeUInt8(e,t)},e.prototype.putInt8=function(t,e){this._buffer.writeInt8(e,t)},e.prototype.putFloat64=function(t,e){this._buffer.writeDoubleBE(e,t)},e.prototype.putBytes=function(n,r){if(r instanceof e){var i=Math.min(r.length-r.position,this.length-n);r._buffer.copy(this._buffer,n,r.position,r.position+i),r.position+=i}else t.prototype.putBytes.call(this,n,r)},e.prototype.getSlice=function(t,n){return new e(this._buffer.slice(t,t+n))},e}(i(n(3540)).default);e.default=s,e.alloc=function(t){return new s(t)}},336:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5359),i=r.internal.util,o=i.ENCRYPTION_OFF,s=i.ENCRYPTION_ON,a=r.error.SERVICE_UNAVAILABLE,l=[null,void 0,!0,!1,s,o],u=[null,void 0,"TRUST_ALL_CERTIFICATES","TRUST_CUSTOM_CA_SIGNED_CERTIFICATES","TRUST_SYSTEM_CA_SIGNED_CERTIFICATES"],c=function(t,e,n,i){this.address=t,this.encrypted=function(t){var e=t.encrypted;if(-1===l.indexOf(e))throw(0,r.newError)("Illegal value of the encrypted setting ".concat(e,". Expected one of ").concat(l));return e}(e),this.trust=function(t){var e=t.trust;if(-1===u.indexOf(e))throw(0,r.newError)("Illegal value of the trust setting ".concat(e,". Expected one of ").concat(u));return e}(e),this.trustedCertificates=function(t){return t.trustedCertificates||[]}(e),this.knownHostsPath=function(t){return t.knownHosts||null}(e),this.connectionErrorCode=n||a,this.connectionTimeout=e.connectionTimeout,this.clientCertificate=i};e.default=c},9827:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Dechunker=e.Chunker=void 0;var o=i(n(8979)),s=n(193),a=i(n(2451)),l=function(t){function e(e,n){var r=t.call(this,0)||this;return r._bufferSize=n||1400,r._ch=e,r._buffer=(0,s.alloc)(r._bufferSize),r._currentChunkStart=0,r._chunkOpen=!1,r}return r(e,t),e.prototype.putUInt8=function(t,e){this._ensure(1),this._buffer.writeUInt8(e)},e.prototype.putInt8=function(t,e){this._ensure(1),this._buffer.writeInt8(e)},e.prototype.putFloat64=function(t,e){this._ensure(8),this._buffer.writeFloat64(e)},e.prototype.putBytes=function(t,e){for(;e.remaining()>0;)this._ensure(1),this._buffer.remaining()>e.remaining()?this._buffer.writeBytes(e):this._buffer.writeBytes(e.readSlice(this._buffer.remaining()));return this},e.prototype.flush=function(){if(this._buffer.position>0){this._closeChunkIfOpen();var t=this._buffer;this._buffer=null,this._ch.write(t.getSlice(0,t.position)),this._buffer=(0,s.alloc)(this._bufferSize),this._chunkOpen=!1}return this},e.prototype.messageBoundary=function(){this._closeChunkIfOpen(),this._buffer.remaining()<2&&this.flush(),this._buffer.writeInt16(0)},e.prototype._ensure=function(t){var e=this._chunkOpen?t:t+2;this._buffer.remaining()<e&&this.flush(),this._chunkOpen||(this._currentChunkStart=this._buffer.position,this._buffer.position=this._buffer.position+2,this._chunkOpen=!0)},e.prototype._closeChunkIfOpen=function(){if(this._chunkOpen){var t=this._buffer.position-(this._currentChunkStart+2);this._buffer.putUInt16(this._currentChunkStart,t),this._chunkOpen=!1}},e}(o.default);e.Chunker=l;var u=function(){function t(){this._currentMessage=[],this._partialChunkHeader=0,this._state=this.AWAITING_CHUNK}return t.prototype.AWAITING_CHUNK=function(t){return t.remaining()>=2?this._onHeader(t.readUInt16()):(this._partialChunkHeader=t.readUInt8()<<8,this.IN_HEADER)},t.prototype.IN_HEADER=function(t){return this._onHeader(65535&(this._partialChunkHeader|t.readUInt8()))},t.prototype.IN_CHUNK=function(t){return this._chunkSize<=t.remaining()?(this._currentMessage.push(t.readSlice(this._chunkSize)),this.AWAITING_CHUNK):(this._chunkSize-=t.remaining(),this._currentMessage.push(t.readSlice(t.remaining())),this.IN_CHUNK)},t.prototype.CLOSED=function(t){},t.prototype._onHeader=function(t){if(0===t){var e=void 0;switch(this._currentMessage.length){case 0:return this.AWAITING_CHUNK;case 1:e=this._currentMessage[0];break;default:e=new a.default(this._currentMessage)}return this._currentMessage=[],this.onmessage(e),this.AWAITING_CHUNK}return this._chunkSize=t,this.IN_CHUNK},t.prototype.write=function(t){for(;t.hasRemaining();)this._state=this._state(t)},t}();e.Dechunker=u},2451:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=n(3540),o=n(193),s=function(t){function e(e){for(var n=this,r=0,i=0;i<e.length;i++)r+=e[i].length;return(n=t.call(this,r)||this)._buffers=e,n}return r(e,t),e.prototype.getUInt8=function(t){for(var e=0;e<this._buffers.length;e++){var n=this._buffers[e];if(!(t>=n.length))return n.getUInt8(t);t-=n.length}},e.prototype.getInt8=function(t){for(var e=0;e<this._buffers.length;e++){var n=this._buffers[e];if(!(t>=n.length))return n.getInt8(t);t-=n.length}},e.prototype.getFloat64=function(t){for(var e=(0,o.alloc)(8),n=0;n<8;n++)e.putUInt8(n,this.getUInt8(t+n));return e.getFloat64(0)},e}(i.BaseBuffer);e.default=s},2366:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.utf8=e.alloc=e.ChannelConfig=void 0,i(n(8845),e),i(n(9827),e);var s=n(336);Object.defineProperty(e,"ChannelConfig",{enumerable:!0,get:function(){return o(s).default}});var a=n(193);Object.defineProperty(e,"alloc",{enumerable:!0,get:function(){return a.alloc}});var l=n(5151);Object.defineProperty(e,"utf8",{enumerable:!0,get:function(){return o(l).default}})},5151:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(193)),o=n(5359),s=r(n(6382)),a=new(n(8694).StringDecoder)("utf8");e.default={encode:function(t){return new i.default(function(t){return"function"===typeof s.default.Buffer.from?s.default.Buffer.from(t,"utf8"):new s.default.Buffer(t,"utf8")}(t))},decode:function(t,e){if(Object.prototype.hasOwnProperty.call(t,"_buffer"))return function(t,e){var n=t.position,r=n+e;return t.position=Math.min(r,t.length),t._buffer.toString("utf8",n,r)}(t,e);if(Object.prototype.hasOwnProperty.call(t,"_buffers"))return function(t,e){return function(t,e,n,r){var i=e,o=t.position;return t._updatePos(Math.min(e,t.length-o)),t._buffers.reduce((function(t,e){if(i<=0)return t;if(o>=e.length)return o-=e.length,"";e._updatePos(o-e.position);var r=Math.min(e.length-o,i),s=e.readSlice(r);return e._updatePos(r),i=Math.max(i-s.length,0),o=0,t+n(s)}),"")+r()}(t,e,(function(t){return a.write(t._buffer)}),(function(){return a.end()}))}(t,e);throw(0,o.newError)("Don't know how to decode strings from '".concat(t,"'"))}}},4749:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(5359),s=n(6831),a=function(){function t(t){var e=t.authTokenManager,n=t.userAgent,r=t.boltAgent;this._authTokenManager=e||(0,o.staticAuthTokenManager)({}),this._userAgent=n,this._boltAgent=r}return t.prototype.authenticate=function(t){var e=t.connection,n=t.auth,o=t.skipReAuth,a=t.waitReAuth,l=t.forceReAuth;return r(this,void 0,void 0,(function(){var t,r;return i(this,(function(i){switch(i.label){case 0:return null==n?[3,3]:(t=!0===e.supportsReAuth&&(!s.object.equals(e.authToken,n)&&!0!==o||!0===l),null==e.authToken||t?[4,e.connect(this._userAgent,this._boltAgent,n,a||!1)]:[3,2]);case 1:case 5:return[2,i.sent()];case 2:case 6:return[2,e];case 3:return[4,this._authTokenManager.getToken()];case 4:return r=i.sent(),s.object.equals(r,e.authToken)?[3,6]:[4,e.connect(this._userAgent,this._boltAgent,r,!1)]}}))}))},t.prototype.handleError=function(t){var e=t.connection,n=t.code;return!(!e||!n.startsWith("Neo.ClientError.Security."))&&this._authTokenManager.handleSecurityException(e.authToken,n)},t}();e.default=a},6933:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(2366),s=function(){function t(t){var e=t.clientCertificateProvider,n=t.loader;this._clientCertificateProvider=e,this._loader=n||o.ClientCertificatesLoader,this._clientCertificate=null}return t.prototype.getClientCertificate=function(){return r(this,void 0,void 0,(function(){var t,e,n=this;return i(this,(function(r){switch(r.label){case 0:return(t=null!=this._clientCertificateProvider)?(e=null==this._clientCertificate)?[3,2]:[4,this._clientCertificateProvider.hasUpdate()]:[3,3];case 1:e=r.sent(),r.label=2;case 2:t=e,r.label=3;case 3:return t&&(this._clientCertificate=Promise.resolve(this._clientCertificateProvider.getClientCertificate()).then(this._loader.load).then((function(t){return n._clientCertificate=t,n._clientCertificate})).catch((function(t){throw n._clientCertificate=null,t}))),[2,this._clientCertificate]}}))}))},t}();e.default=s},1575:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=s(n(9929)),l=n(5943),u=n(5359),c=u.internal.constants,h=c.BOLT_PROTOCOL_V3,d=c.BOLT_PROTOCOL_V4_0,f=c.BOLT_PROTOCOL_V4_4,p=c.BOLT_PROTOCOL_V5_1,m=u.error.SERVICE_UNAVAILABLE,g=function(t){function e(e){var n=e.id,r=e.config,i=e.log,o=e.address,s=e.userAgent,a=e.boltAgent,l=e.authTokenManager,u=e.newPool,c=t.call(this,{id:n,config:r,log:i,userAgent:s,boltAgent:a,authTokenManager:l,newPool:u})||this;return c._address=o,c}return r(e,t),e.prototype.acquireConnection=function(t){var e=void 0===t?{}:t,n=(e.accessMode,e.database),r=(e.bookmarks,e.auth),s=e.forceReAuth;return i(this,void 0,void 0,(function(){var t,e,i=this;return o(this,(function(o){switch(o.label){case 0:return t=l.ConnectionErrorHandler.create({errorCode:m,handleSecurityError:function(t,e,r){return i._handleSecurityError(t,e,r,n)}}),[4,this._connectionPool.acquire({auth:r,forceReAuth:s},this._address)];case 1:return e=o.sent(),r?[4,this._verifyStickyConnection({auth:r,connection:e,address:this._address})]:[3,3];case 2:return o.sent(),[2,e];case 3:return[2,new l.DelegateConnection(e,t)]}}))}))},e.prototype._handleSecurityError=function(e,n,r,i){return this._log.warn("Direct driver ".concat(this._id," will close connection to ").concat(n," for database '").concat(i,"' because of an error ").concat(e.code," '").concat(e.message,"'")),t.prototype._handleSecurityError.call(this,e,n,r)},e.prototype._hasProtocolVersion=function(t){return i(this,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return[4,this._createChannelConnection(this._address)];case 1:return e=r.sent(),n=e.protocol()?e.protocol().version:null,[4,e.close()];case 2:return r.sent(),n?[2,t(n)]:[2,!1]}}))}))},e.prototype.supportsMultiDb=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion((function(t){return t>=d}))];case 1:return[2,t.sent()]}}))}))},e.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise((function(e,n){t._hasProtocolVersion(e).catch(n)}))},e.prototype.supportsTransactionConfig=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion((function(t){return t>=h}))];case 1:return[2,t.sent()]}}))}))},e.prototype.supportsUserImpersonation=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion((function(t){return t>=f}))];case 1:return[2,t.sent()]}}))}))},e.prototype.supportsSessionAuth=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion((function(t){return t>=p}))];case 1:return[2,t.sent()]}}))}))},e.prototype.verifyAuthentication=function(t){var e=t.auth;return i(this,void 0,void 0,(function(){var t=this;return o(this,(function(n){return[2,this._verifyAuthentication({auth:e,getAddress:function(){return t._address}})]}))}))},e.prototype.verifyConnectivityAndGetServerInfo=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._verifyConnectivityAndGetServerVersion({address:this._address})];case 1:return[2,t.sent()]}}))}))},e}(a.default);e.default=g},9929:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},s=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},l=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var u=n(5943),c=n(5359),h=l(n(4749)),d=n(6831),f=l(n(7909)),p=l(n(6933)),m=c.error.SERVICE_UNAVAILABLE,g=["Neo.ClientError.Security.CredentialsExpired","Neo.ClientError.Security.Forbidden","Neo.ClientError.Security.TokenExpired","Neo.ClientError.Security.Unauthorized"],_=c.internal.pool,y=_.Pool,v=_.PoolConfig,b=function(t){function e(n,r){var l=n.id,c=n.config,d=n.log,m=n.userAgent,g=n.boltAgent,_=n.authTokenManager,b=n.newPool,w=void 0===b?function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new(y.bind.apply(y,a([void 0],s(t),!1)))}:b;void 0===r&&(r=null);var S=t.call(this)||this;return S._id=l,S._config=c,S._log=d,S._clientCertificateHolder=new p.default({clientCertificateProvider:S._config.clientCertificate}),S._authenticationProvider=new h.default({authTokenManager:_,userAgent:m,boltAgent:g}),S._livenessCheckProvider=new f.default({connectionLivenessCheckTimeout:c.connectionLivenessCheckTimeout}),S._userAgent=m,S._boltAgent=g,S._createChannelConnection=r||function(t){return i(S,void 0,void 0,(function(){var e,n;return o(this,(function(r){switch(r.label){case 0:return e=u.createChannelConnection,n=[t,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,e.apply(void 0,n.concat([r.sent()]))]}}))}))},S._connectionPool=w({create:S._createConnection.bind(S),destroy:S._destroyConnection.bind(S),validateOnAcquire:S._validateConnectionOnAcquire.bind(S),validateOnRelease:S._validateConnectionOnRelease.bind(S),installIdleObserver:e._installIdleObserverOnConnection.bind(S),removeIdleObserver:e._removeIdleObserverOnConnection.bind(S),config:v.fromDriverConfig(c),log:S._log}),S._openConnections={},S}return r(e,t),e.prototype._createConnectionErrorHandler=function(){return new u.ConnectionErrorHandler(m)},e.prototype._getClientCertificate=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){return[2,this._config.clientCertificate.getClientCertificate()]}))}))},e.prototype._createConnection=function(t,e,n){var r=this,i=t.auth;return this._createChannelConnection(e).then((function(t){return t.release=function(){return t.idleTimestamp=Date.now(),n(e,t)},r._openConnections[t.id]=t,r._authenticationProvider.authenticate({connection:t,auth:i}).catch((function(e){throw r._destroyConnection(t),e}))}))},e.prototype._validateConnectionOnAcquire=function(t,e){var n=t.auth,r=t.skipReAuth;return i(this,void 0,void 0,(function(){var t,i;return o(this,(function(o){switch(o.label){case 0:if(!this._validateConnection(e))return[2,!1];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this._livenessCheckProvider.check(e)];case 2:return o.sent(),[3,4];case 3:return t=o.sent(),this._log.debug("The connection ".concat(e.id," is not alive because of an error ").concat(t.code," '").concat(t.message,"'")),[2,!1];case 4:return o.trys.push([4,6,,7]),[4,this._authenticationProvider.authenticate({connection:e,auth:n,skipReAuth:r})];case 5:return o.sent(),[2,!0];case 6:return i=o.sent(),this._log.debug("The connection ".concat(e.id," is not valid because of an error ").concat(i.code," '").concat(i.message,"'")),[2,!1];case 7:return[2]}}))}))},e.prototype._validateConnectionOnRelease=function(t){return!0!==t._sticky&&this._validateConnection(t)},e.prototype._validateConnection=function(t){if(!t.isOpen())return!1;var e=this._config.maxConnectionLifetime;return!(Date.now()-t.creationTimestamp>e)},e.prototype._destroyConnection=function(t){return delete this._openConnections[t.id],t.close()},e.prototype._verifyConnectivityAndGetServerVersion=function(t){var e=t.address;return i(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return[4,this._connectionPool.acquire({},e)];case 1:t=r.sent(),n=new c.ServerInfo(t.server,t.protocol().version),r.label=2;case 2:return r.trys.push([2,,5,7]),t.protocol().isLastMessageLogon()?[3,4]:[4,t.resetAndFlush()];case 3:r.sent(),r.label=4;case 4:return[3,7];case 5:return[4,t.release()];case 6:return r.sent(),[7];case 7:return[2,n]}}))}))},e.prototype._verifyAuthentication=function(t){var e=t.getAddress,n=t.auth;return i(this,void 0,void 0,(function(){var t,r,i,s,a,l;return o(this,(function(o){switch(o.label){case 0:t=[],o.label=1;case 1:return o.trys.push([1,8,9,11]),[4,e()];case 2:return r=o.sent(),[4,this._connectionPool.acquire({auth:n,skipReAuth:!0},r)];case 3:if(i=o.sent(),t.push(i),s=!i.protocol().isLastMessageLogon(),!i.supportsReAuth)throw(0,c.newError)("Driver is connected to a database that does not support user switch.");return s&&i.supportsReAuth?[4,this._authenticationProvider.authenticate({connection:i,auth:n,waitReAuth:!0,forceReAuth:!0})]:[3,5];case 4:return o.sent(),[3,7];case 5:return!s||i.supportsReAuth?[3,7]:[4,this._connectionPool.acquire({auth:n},r,{requireNew:!0})];case 6:(a=o.sent())._sticky=!0,t.push(a),o.label=7;case 7:return[2,!0];case 8:if(l=o.sent(),g.includes(l.code))return[2,!1];throw l;case 9:return[4,Promise.all(t.map((function(t){return t.release()})))];case 10:return o.sent(),[7];case 11:return[2]}}))}))},e.prototype._verifyStickyConnection=function(t){var e=t.auth,n=t.connection;t.address;return i(this,void 0,void 0,(function(){var t,r;return o(this,(function(i){switch(i.label){case 0:return t=d.object.equals(e,n.authToken),r=!t,n._sticky=t&&!n.supportsReAuth,r||n._sticky?[4,n.release()]:[3,2];case 1:throw i.sent(),(0,c.newError)("Driver is connected to a database that does not support user switch.");case 2:return[2]}}))}))},e.prototype.close=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._connectionPool.close()];case 1:return t.sent(),[4,Promise.all(Object.values(this._openConnections).map((function(t){return t.close()})))];case 2:return t.sent(),[2]}}))}))},e._installIdleObserverOnConnection=function(t,e){t._setIdle(e)},e._removeIdleObserverOnConnection=function(t){t._unsetIdle()},e.prototype._handleSecurityError=function(t,e,n){return this._authenticationProvider.handleError({connection:n,code:t.code})&&(t.retriable=!0),"Neo.ClientError.Security.AuthorizationExpired"===t.code&&this._connectionPool.apply(e,(function(t){t.authToken=null})),n&&n.close().catch((function(){})),t},e}(c.ConnectionProvider);e.default=b},8230:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return s(e,t),e},l=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},u=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},c=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},d=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var f=n(5359),p=a(n(7940)),m=n(2366),g=d(n(5350)),_=d(n(9929)),y=n(4577),v=n(5943),b=n(6831),w=f.error.SERVICE_UNAVAILABLE,S=f.error.SESSION_EXPIRED,x=f.internal.bookmarks.Bookmarks,E=f.internal.constants,C=E.ACCESS_MODE_READ,k=E.ACCESS_MODE_WRITE,O=E.BOLT_PROTOCOL_V3,T=E.BOLT_PROTOCOL_V4_0,N=E.BOLT_PROTOCOL_V4_4,I=E.BOLT_PROTOCOL_V5_1,P="Neo.ClientError.Database.DatabaseNotFound",M="Neo.ClientError.Transaction.InvalidBookmark",j="Neo.ClientError.Transaction.InvalidBookmarkMixture",R="Neo.ClientError.Security.AuthorizationExpired",A="Neo.ClientError.Statement.ArgumentError",D="Neo.ClientError.Request.Invalid",L="Neo.ClientError.Statement.TypeError",U="N/A",z=null,B=(0,f.int)(3e4),F=function(t){function e(e){var n=e.id,r=e.address,o=e.routingContext,s=e.hostNameResolver,a=e.config,c=e.log,h=e.userAgent,d=e.boltAgent,g=e.authTokenManager,_=e.routingTablePurgeDelay,w=e.newPool,S=t.call(this,{id:n,config:a,log:c,userAgent:h,boltAgent:d,authTokenManager:g,newPool:w},(function(t){return l(S,void 0,void 0,(function(){var e,n;return u(this,(function(r){switch(r.label){case 0:return e=v.createChannelConnection,n=[t,this._config,this._createConnectionErrorHandler(),this._log],[4,this._clientCertificateHolder.getClientCertificate()];case 1:return[2,e.apply(void 0,n.concat([r.sent(),this._routingContext]))]}}))}))}))||this;return S._routingContext=i(i({},o),{address:r.toString()}),S._seedRouter=r,S._rediscovery=new p.default(S._routingContext),S._loadBalancingStrategy=new y.LeastConnectedLoadBalancingStrategy(S._connectionPool),S._hostNameResolver=s,S._dnsResolver=new m.HostNameResolver,S._log=c,S._useSeedRouter=!0,S._routingTableRegistry=new q(_?(0,f.int)(_):B),S._refreshRoutingTable=b.functional.reuseOngoingRequest(S._refreshRoutingTable,S),S}return r(e,t),e.prototype._createConnectionErrorHandler=function(){return new v.ConnectionErrorHandler(S)},e.prototype._handleUnavailability=function(t,e,n){return this._log.warn("Routing driver ".concat(this._id," will forget ").concat(e," for database '").concat(n,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forget(e,n||z),t},e.prototype._handleSecurityError=function(e,n,r,i){return this._log.warn("Routing driver ".concat(this._id," will close connections to ").concat(n," for database '").concat(i,"' because of an error ").concat(e.code," '").concat(e.message,"'")),t.prototype._handleSecurityError.call(this,e,n,r,i)},e.prototype._handleWriteFailure=function(t,e,n){return this._log.warn("Routing driver ".concat(this._id," will forget writer ").concat(e," for database '").concat(n,"' because of an error ").concat(t.code," '").concat(t.message,"'")),this.forgetWriter(e,n||z),(0,f.newError)("No longer possible to write to server at "+e,S,t)},e.prototype.acquireConnection=function(t){var e=void 0===t?{}:t,n=e.accessMode,r=e.database,i=e.bookmarks,o=e.impersonatedUser,s=e.onDatabaseNameResolved,a=e.auth;return l(this,void 0,void 0,(function(){var t,e,l,c,h,d,p,m=this;return u(this,(function(u){switch(u.label){case 0:return l={database:r||z},c=new v.ConnectionErrorHandler(S,(function(t,e){return m._handleUnavailability(t,e,l.database)}),(function(t,e){return m._handleWriteFailure(t,e,l.database)}),(function(t,e,n){return m._handleSecurityError(t,e,n,l.database)})),[4,this._freshRoutingTable({accessMode:n,database:l.database,bookmarks:i,impersonatedUser:o,auth:a,onDatabaseNameResolved:function(t){l.database=l.database||t,s&&s(t)}})];case 1:if(h=u.sent(),n===C)e=this._loadBalancingStrategy.selectReader(h.readers),t="read";else{if(n!==k)throw(0,f.newError)("Illegal mode "+n);e=this._loadBalancingStrategy.selectWriter(h.writers),t="write"}if(!e)throw(0,f.newError)("Failed to obtain connection towards ".concat(t," server. Known routing table is: ").concat(h),S);u.label=2;case 2:return u.trys.push([2,6,,7]),[4,this._connectionPool.acquire({auth:a},e)];case 3:return d=u.sent(),a?[4,this._verifyStickyConnection({auth:a,connection:d,address:e})]:[3,5];case 4:return u.sent(),[2,d];case 5:return[2,new v.DelegateConnection(d,c)];case 6:throw p=u.sent(),c.handleAndTransformError(p,e);case 7:return[2]}}))}))},e.prototype._hasProtocolVersion=function(t){return l(this,void 0,void 0,(function(){var e,n,r,i,o,s;return u(this,(function(a){switch(a.label){case 0:return[4,this._resolveSeedRouter(this._seedRouter)];case 1:e=a.sent(),r=0,a.label=2;case 2:if(!(r<e.length))return[3,8];a.label=3;case 3:return a.trys.push([3,6,,7]),[4,this._createChannelConnection(e[r])];case 4:return i=a.sent(),o=i.protocol()?i.protocol().version:null,[4,i.close()];case 5:return a.sent(),o?[2,t(o)]:[2,!1];case 6:return s=a.sent(),n=s,[3,7];case 7:return r++,[3,2];case 8:if(n)throw n;return[2,!1]}}))}))},e.prototype.supportsMultiDb=function(){return l(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion((function(t){return t>=T}))];case 1:return[2,t.sent()]}}))}))},e.prototype.supportsTransactionConfig=function(){return l(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion((function(t){return t>=O}))];case 1:return[2,t.sent()]}}))}))},e.prototype.supportsUserImpersonation=function(){return l(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion((function(t){return t>=N}))];case 1:return[2,t.sent()]}}))}))},e.prototype.supportsSessionAuth=function(){return l(this,void 0,void 0,(function(){return u(this,(function(t){switch(t.label){case 0:return[4,this._hasProtocolVersion((function(t){return t>=I}))];case 1:return[2,t.sent()]}}))}))},e.prototype.getNegotiatedProtocolVersion=function(){var t=this;return new Promise((function(e,n){t._hasProtocolVersion(e).catch(n)}))},e.prototype.verifyAuthentication=function(t){var e=t.database,n=t.accessMode,r=t.auth;return l(this,void 0,void 0,(function(){var t=this;return u(this,(function(i){return[2,this._verifyAuthentication({auth:r,getAddress:function(){return l(t,void 0,void 0,(function(){var t,i,o;return u(this,(function(s){switch(s.label){case 0:return t={database:e||z},[4,this._freshRoutingTable({accessMode:n,database:t.database,auth:r,onDatabaseNameResolved:function(e){t.database=t.database||e}})];case 1:if(i=s.sent(),0===(o=n===k?i.writers:i.readers).length)throw(0,f.newError)("No servers available for database '".concat(t.database,"' with access mode '").concat(n,"'"),w);return[2,o[0]]}}))}))}})]}))}))},e.prototype.verifyConnectivityAndGetServerInfo=function(t){var e=t.database,n=t.accessMode;return l(this,void 0,void 0,(function(){var t,r,i,o,s,a,l,h,d,p,m;return u(this,(function(u){switch(u.label){case 0:return t={database:e||z},[4,this._freshRoutingTable({accessMode:n,database:t.database,onDatabaseNameResolved:function(e){t.database=t.database||e}})];case 1:r=u.sent(),i=n===k?r.writers:r.readers,o=(0,f.newError)("No servers available for database '".concat(t.database,"' with access mode '").concat(n,"'"),w),u.label=2;case 2:u.trys.push([2,9,10,11]),s=c(i),a=s.next(),u.label=3;case 3:if(a.done)return[3,8];l=a.value,u.label=4;case 4:return u.trys.push([4,6,,7]),[4,this._verifyConnectivityAndGetServerVersion({address:l})];case 5:return[2,u.sent()];case 6:return h=u.sent(),o=h,[3,7];case 7:return a=s.next(),[3,3];case 8:return[3,11];case 9:return d=u.sent(),p={error:d},[3,11];case 10:try{a&&!a.done&&(m=s.return)&&m.call(s)}finally{if(p)throw p.error}return[7];case 11:throw o}}))}))},e.prototype.forget=function(t,e){this._routingTableRegistry.apply(e,{applyWhenExists:function(e){return e.forget(t)}}),this._connectionPool.purge(t).catch((function(){}))},e.prototype.forgetWriter=function(t,e){this._routingTableRegistry.apply(e,{applyWhenExists:function(e){return e.forgetWriter(t)}})},e.prototype._freshRoutingTable=function(t){var e=void 0===t?{}:t,n=e.accessMode,r=e.database,i=e.bookmarks,o=e.impersonatedUser,s=e.onDatabaseNameResolved,a=e.auth,l=this._routingTableRegistry.get(r,(function(){return new p.RoutingTable({database:r})}));return l.isStaleFor(n)?(this._log.info('Routing table is stale for database: "'.concat(r,'" and access mode: "').concat(n,'": ').concat(l)),this._refreshRoutingTable(l,i,o,a).then((function(t){return s(t.database),t}))):l},e.prototype._refreshRoutingTable=function(t,e,n,r){var i=t.routers;return this._useSeedRouter?this._fetchRoutingTableFromSeedRouterFallbackToKnownRouters(i,t,e,n,r):this._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter(i,t,e,n,r)},e.prototype._fetchRoutingTableFromSeedRouterFallbackToKnownRouters=function(t,e,n,r,i){return l(this,void 0,void 0,(function(){var o,s,a,l,c,d,f;return u(this,(function(u){switch(u.label){case 0:return o=[],[4,this._fetchRoutingTableUsingSeedRouter(o,this._seedRouter,e,n,r,i)];case 1:return s=h.apply(void 0,[u.sent(),2]),a=s[0],l=s[1],a?(this._useSeedRouter=!1,[3,4]):[3,2];case 2:return[4,this._fetchRoutingTableUsingKnownRouters(t,e,n,r,i)];case 3:c=h.apply(void 0,[u.sent(),2]),d=c[0],f=c[1],a=d,l=f||l,u.label=4;case 4:return[4,this._applyRoutingTableIfPossible(e,a,l)];case 5:return[2,u.sent()]}}))}))},e.prototype._fetchRoutingTableFromKnownRoutersFallbackToSeedRouter=function(t,e,n,r,i){return l(this,void 0,void 0,(function(){var o,s,a,l;return u(this,(function(u){switch(u.label){case 0:return[4,this._fetchRoutingTableUsingKnownRouters(t,e,n,r,i)];case 1:return o=h.apply(void 0,[u.sent(),2]),s=o[0],a=o[1],s?[3,3]:[4,this._fetchRoutingTableUsingSeedRouter(t,this._seedRouter,e,n,r,i)];case 2:l=h.apply(void 0,[u.sent(),2]),s=l[0],a=l[1],u.label=3;case 3:return[4,this._applyRoutingTableIfPossible(e,s,a)];case 4:return[2,u.sent()]}}))}))},e.prototype._fetchRoutingTableUsingKnownRouters=function(t,n,r,i,o){return l(this,void 0,void 0,(function(){var s,a,l,c;return u(this,(function(u){switch(u.label){case 0:return[4,this._fetchRoutingTable(t,n,r,i,o)];case 1:return s=h.apply(void 0,[u.sent(),2]),a=s[0],l=s[1],a?[2,[a,null]]:(c=t.length-1,e._forgetRouter(n,t,c),[2,[null,l]])}}))}))},e.prototype._fetchRoutingTableUsingSeedRouter=function(t,e,n,r,i,o){return l(this,void 0,void 0,(function(){var s,a;return u(this,(function(l){switch(l.label){case 0:return[4,this._resolveSeedRouter(e)];case 1:return s=l.sent(),a=s.filter((function(e){return t.indexOf(e)<0})),[4,this._fetchRoutingTable(a,n,r,i,o)];case 2:return[2,l.sent()]}}))}))},e.prototype._resolveSeedRouter=function(t){return l(this,void 0,void 0,(function(){var e,n,r=this;return u(this,(function(i){switch(i.label){case 0:return[4,this._hostNameResolver.resolve(t)];case 1:return e=i.sent(),[4,Promise.all(e.map((function(t){return r._dnsResolver.resolve(t)})))];case 2:return n=i.sent(),[2,[].concat.apply([],n)]}}))}))},e.prototype._fetchRoutingTable=function(t,n,r,i,o){return l(this,void 0,void 0,(function(){var s=this;return u(this,(function(a){return[2,t.reduce((function(a,c,d){return l(s,void 0,void 0,(function(){var s,l,f,p,m,g,_;return u(this,(function(u){switch(u.label){case 0:return[4,a];case 1:return s=h.apply(void 0,[u.sent(),1]),(l=s[0])?[2,[l,null]]:(f=d-1,e._forgetRouter(n,t,f),[4,this._createSessionForRediscovery(c,r,i,o)]);case 2:if(p=h.apply(void 0,[u.sent(),2]),m=p[0],g=p[1],!m)return[3,8];u.label=3;case 3:return u.trys.push([3,5,6,7]),[4,this._rediscovery.lookupRoutingTableOnRouter(m,n.database,c,i)];case 4:return[2,[u.sent(),null]];case 5:return _=u.sent(),[2,this._handleRediscoveryError(_,c)];case 6:return m.close(),[7];case 7:return[3,9];case 8:return[2,[null,g]];case 9:return[2]}}))}))}),Promise.resolve([null,null]))]}))}))},e.prototype._createSessionForRediscovery=function(t,e,n,r){return l(this,void 0,void 0,(function(){var i,o,s,a,l,c=this;return u(this,(function(u){switch(u.label){case 0:return u.trys.push([0,4,,5]),[4,this._connectionPool.acquire({auth:r},t)];case 1:return i=u.sent(),r?[4,this._verifyStickyConnection({auth:r,connection:i,address:t})]:[3,3];case 2:u.sent(),u.label=3;case 3:return o=v.ConnectionErrorHandler.create({errorCode:S,handleSecurityError:function(t,e,n){return c._handleSecurityError(t,e,n)}}),s=i._sticky?new v.DelegateConnection(i):new v.DelegateConnection(i,o),a=new g.default(s),i.protocol().version<4?[2,[new f.Session({mode:k,bookmarks:x.empty(),connectionProvider:a}),null]]:[2,[new f.Session({mode:C,database:"system",bookmarks:e,connectionProvider:a,impersonatedUser:n}),null]];case 4:return l=u.sent(),[2,this._handleRediscoveryError(l,t)];case 5:return[2]}}))}))},e.prototype._handleRediscoveryError=function(t,e){if(function(t){return[P,M,j,A,D,L,U].includes(t.code)}(t)||function(t){return t.code.startsWith("Neo.ClientError.Security.")&&![R].includes(t.code)}(t))throw t;if("Neo.ClientError.Procedure.ProcedureNotFound"===t.code)throw(0,f.newError)("Server at ".concat(e.asHostPort()," can't perform routing. Make sure you are connecting to a causal cluster"),w,t);return this._log.warn("unable to fetch routing table because of an error ".concat(t)),[null,t]},e.prototype._applyRoutingTableIfPossible=function(t,e,n){return l(this,void 0,void 0,(function(){return u(this,(function(r){switch(r.label){case 0:if(!e)throw(0,f.newError)("Could not perform discovery. No routing servers available. Known routing table: ".concat(t),w,n);return 0===e.writers.length&&(this._useSeedRouter=!0),[4,this._updateRoutingTable(e)];case 1:return r.sent(),[2,e]}}))}))},e.prototype._updateRoutingTable=function(t){return l(this,void 0,void 0,(function(){return u(this,(function(e){switch(e.label){case 0:return[4,this._connectionPool.keepAll(t.allServers())];case 1:return e.sent(),this._routingTableRegistry.removeExpired(),this._routingTableRegistry.register(t),this._log.info("Updated routing table ".concat(t)),[2]}}))}))},e._forgetRouter=function(t,e,n){var r=e[n];t&&r&&t.forgetRouter(r)},e}(_.default);e.default=F;var q=function(){function t(t){this._tables=new Map,this._routingTablePurgeDelay=t}return t.prototype.register=function(t){return this._tables.set(t.database,t),this},t.prototype.apply=function(t,e){var n=void 0===e?{}:e,r=n.applyWhenExists,i=n.applyWhenDontExists,o=void 0===i?function(){}:i;return this._tables.has(t)?r(this._tables.get(t)):"string"===typeof t||null===t?o():this._forEach(r),this},t.prototype.get=function(t,e){return this._tables.has(t)?this._tables.get(t):"function"===typeof e?e():e},t.prototype.removeExpired=function(){var t=this;return this._removeIf((function(e){return e.isExpiredFor(t._routingTablePurgeDelay)}))},t.prototype._forEach=function(t){var e,n;try{for(var r=c(this._tables),i=r.next();!i.done;i=r.next()){t(h(i.value,2)[1])}}catch(o){e={error:o}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return this},t.prototype._remove=function(t){return this._tables.delete(t),this},t.prototype._removeIf=function(t){var e,n;try{for(var r=c(this._tables),i=r.next();!i.done;i=r.next()){var o=h(i.value,2),s=o[0];t(o[1])&&this._remove(s)}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return this},t}()},5350:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(e){var n=t.call(this)||this;return n._connection=e,n}return r(e,t),e.prototype.acquireConnection=function(t){var e=void 0===t?{}:t,n=(e.accessMode,e.database,e.bookmarks,this._connection);return this._connection=null,Promise.resolve(n)},e}(n(5359).ConnectionProvider);e.default=i},8723:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingConnectionProvider=e.DirectConnectionProvider=e.PooledConnectionProvider=e.SingleConnectionProvider=void 0;var i=n(5350);Object.defineProperty(e,"SingleConnectionProvider",{enumerable:!0,get:function(){return r(i).default}});var o=n(9929);Object.defineProperty(e,"PooledConnectionProvider",{enumerable:!0,get:function(){return r(o).default}});var s=n(1575);Object.defineProperty(e,"DirectConnectionProvider",{enumerable:!0,get:function(){return r(s).default}});var a=n(8230);Object.defineProperty(e,"RoutingConnectionProvider",{enumerable:!0,get:function(){return r(a).default}})},7909:function(t,e){"use strict";var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){var e=t.connectionLivenessCheckTimeout;this._connectionLivenessCheckTimeout=e}return t.prototype.check=function(t){return n(this,void 0,void 0,(function(){var e;return r(this,(function(n){switch(n.label){case 0:return this._isCheckDisabled||this._isNewlyCreatedConnection(t)?[2,!0]:(e=Date.now()-t.idleTimestamp,0===this._connectionLivenessCheckTimeout||e>this._connectionLivenessCheckTimeout?[4,t.resetAndFlush().then((function(){return!0}))]:[3,2]);case 1:return[2,n.sent()];case 2:return[2,!0]}}))}))},Object.defineProperty(t.prototype,"_isCheckDisabled",{get:function(){return null==this._connectionLivenessCheckTimeout||this._connectionLivenessCheckTimeout<0},enumerable:!1,configurable:!0}),t.prototype._isNewlyCreatedConnection=function(t){return null==t.authToken},t}();e.default=i},2125:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=void 0;var a=n(2366),l=n(5359),u=s(n(1051)),c=s(n(6860)),h=l.error.PROTOCOL_ERROR,d=l.internal.logger.Logger,f=0;e.createChannelConnection=function(t,e,n,r,i,o,s){void 0===o&&(o=null),void 0===s&&(s=function(t){return new a.Channel(t)});var l=s(new a.ChannelConfig(t,e,n.errorCode(),i));return c.default.handshake(l,r).then((function(i){var s=i.protocolVersion,u=i.consumeRemainingBuffer,h=new a.Chunker(l),d=new a.Dechunker,f=new p(l,n,t,r,e.disableLosslessIntegers,o,h,e.notificationFilter,(function(t){return c.default.create({version:s,channel:l,chunker:h,dechunker:d,disableLosslessIntegers:e.disableLosslessIntegers,useBigInt:e.useBigInt,serversideRouting:o,server:t.server,log:t.logger,observer:{onObserversCountChange:t._handleOngoingRequestsNumberChange.bind(t),onError:t._handleFatalError.bind(t),onFailure:t._resetOnFailure.bind(t),onProtocolError:t._handleProtocolError.bind(t),onErrorApplyTransformation:function(e){return t.handleAndTransformError(e,t._address)}}})}),e.telemetryDisabled);return u((function(t){return d.write(t)})),f})).catch((function(t){return l.close().then((function(){throw t}))}))};var p=function(t){function e(e,n,r,i,o,s,a,l,u,c){void 0===o&&(o=!1),void 0===s&&(s=null);var h,p,m=t.call(this,n)||this;return m._authToken=null,m._idle=!1,m._reseting=!1,m._resetObservers=[],m._id=f++,m._address=r,m._server={address:r.asHostPort()},m._creationTimestamp=Date.now(),m._disableLosslessIntegers=o,m._ch=e,m._chunker=a,m._log=(h=m,new d((p=i)._level,(function(t,e){return p._loggerFunction(t,"".concat(h," ").concat(e))}))),m._serversideRouting=s,m._notificationFilter=l,m._telemetryDisabledDriverConfig=!0===c,m._telemetryDisabledConnection=!0,m._dbConnectionId=null,m._protocol=u(m),m._isBroken=!1,m._log.isDebugEnabled()&&m._log.debug("created towards ".concat(r)),m}return r(e,t),e.prototype.beginTransaction=function(t){return this._sendTelemetryIfEnabled(t),this._protocol.beginTransaction(t)},e.prototype.run=function(t,e,n){return this._sendTelemetryIfEnabled(n),this._protocol.run(t,e,n)},e.prototype._sendTelemetryIfEnabled=function(t){this._telemetryDisabledConnection||this._telemetryDisabledDriverConfig||null==t||null==t.apiTelemetryConfig||this._protocol.telemetry({api:t.apiTelemetryConfig.api},{onCompleted:t.apiTelemetryConfig.onTelemetrySuccess,onError:t.beforeError})},e.prototype.commitTransaction=function(t){return this._protocol.commitTransaction(t)},e.prototype.rollbackTransaction=function(t){return this._protocol.rollbackTransaction(t)},e.prototype.getProtocolVersion=function(){return this._protocol.version},Object.defineProperty(e.prototype,"authToken",{get:function(){return this._authToken},set:function(t){this._authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return this._protocol.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"databaseId",{get:function(){return this._dbConnectionId},set:function(t){this._dbConnectionId=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"idleTimestamp",{get:function(){return this._idleTimestamp},set:function(t){this._idleTimestamp=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"creationTimestamp",{get:function(){return this._creationTimestamp},enumerable:!1,configurable:!0}),e.prototype.connect=function(t,e,n,r){return i(this,void 0,void 0,(function(){var i=this;return o(this,(function(o){switch(o.label){case 0:if(this._protocol.initialized&&!this._protocol.supportsReAuth)throw(0,l.newError)("Connection does not support re-auth");return this._authToken=n,this._protocol.initialized?[3,2]:[4,this._initialize(t,e,n)];case 1:case 3:return[2,o.sent()];case 2:return r?[4,new Promise((function(t,e){i._protocol.logoff({onError:e}),i._protocol.logon({authToken:n,onError:e,onComplete:function(){return t(i)},flush:!0})}))]:[3,4];case 4:return this._protocol.logoff(),this._protocol.logon({authToken:n,flush:!0}),[2,this]}}))}))},e.prototype._initialize=function(t,e,n){var r=this,i=this;return new Promise((function(o,s){r._protocol.initialize({userAgent:t,boltAgent:e,authToken:n,notificationFilter:r._notificationFilter,onError:function(t){return s(t)},onComplete:function(t){if(t){var e=t.server;r.version&&!e||(r.version=e);var n=t.connection_id;if(r.databaseId||(r.databaseId=n),t.hints){var s=t.hints["connection.recv_timeout_seconds"];if(null!==s&&void 0!==s){var a=(0,l.toNumber)(s);Number.isInteger(a)&&a>0?r._ch.setupReceiveTimeout(1e3*a):r._log.info("Server located at ".concat(r._address," supplied an invalid connection receive timeout value (").concat(a,"). ")+"Please, verify the server configuration and status because this can be the symptom of a bigger issue.")}!0===t.hints["telemetry.enabled"]&&(r._telemetryDisabledConnection=!1)}}o(i)}})}))},e.prototype.protocol=function(){return this._protocol},Object.defineProperty(e.prototype,"address",{get:function(){return this._address},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._server.version},set:function(t){this._server.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"server",{get:function(){return this._server},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logger",{get:function(){return this._log},enumerable:!1,configurable:!0}),e.prototype._handleFatalError=function(t){this._isBroken=!0,this._error=this.handleAndTransformError(this._protocol.currentFailure||t,this._address),this._log.isErrorEnabled()&&this._log.error("experienced a fatal error caused by ".concat(this._error," (").concat(l.json.stringify(this._error),")")),this._protocol.notifyFatalError(this._error)},e.prototype._setIdle=function(t){this._idle=!0,this._ch.stopReceiveTimeout(),this._protocol.queueObserverIfProtocolIsNotBroken(t)},e.prototype._unsetIdle=function(){this._idle=!1,this._updateCurrentObserver()},e.prototype._queueObserver=function(t){return this._protocol.queueObserverIfProtocolIsNotBroken(t)},e.prototype.hasOngoingObservableRequests=function(){return!this._idle&&this._protocol.hasOngoingObservableRequests()},e.prototype.resetAndFlush=function(){var t=this;return new Promise((function(e,n){t._reset({onError:function(e){if(t._isBroken)n(e);else{var r=t._handleProtocolError("Received FAILURE as a response for RESET: "+e);n(r)}},onComplete:function(){e()}})}))},e.prototype._resetOnFailure=function(){var t=this;this.isOpen()&&this._reset({onError:function(){t._protocol.resetFailure()},onComplete:function(){t._protocol.resetFailure()}})},e.prototype._reset=function(t){var e=this;if(this._reseting)this._protocol.isLastMessageReset()?this._resetObservers.push(t):this._protocol.reset({onError:function(e){t.onError(e)},onComplete:function(){t.onComplete()}});else{this._resetObservers.push(t),this._reseting=!0;var n=function(t){e._reseting=!1;var n=e._resetObservers;e._resetObservers=[],n.forEach(t)};this._protocol.reset({onError:function(t){n((function(e){return e.onError(t)}))},onComplete:function(){n((function(t){return t.onComplete()}))}})}},e.prototype._updateCurrentObserver=function(){this._protocol.updateCurrentObserver()},e.prototype.isOpen=function(){return!this._isBroken&&this._ch._open},e.prototype._handleOngoingRequestsNumberChange=function(t){this._idle||(0===t?this._ch.stopReceiveTimeout():this._ch.startReceiveTimeout())},e.prototype.close=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return this._log.isDebugEnabled()&&this._log.debug("closing"),this._protocol&&this.isOpen()&&this._protocol.prepareToClose(),[4,this._ch.close()];case 1:return t.sent(),this._log.isDebugEnabled()&&this._log.debug("closed"),[2]}}))}))},e.prototype.toString=function(){return"Connection [".concat(this.id,"][").concat(this.databaseId||"","]")},e.prototype._handleProtocolError=function(t){this._protocol.resetFailure(),this._updateCurrentObserver();var e=(0,l.newError)(t,h);return this._handleFatalError(e),e},e}(u.default);e.default=p},363:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e,n){var r=t.call(this,n)||this;return n&&(r._originalErrorHandler=e._errorHandler,e._errorHandler=r._errorHandler),r._delegate=e,r}return r(e,t),e.prototype.beginTransaction=function(t){return this._delegate.beginTransaction(t)},e.prototype.run=function(t,e,n){return this._delegate.run(t,e,n)},e.prototype.commitTransaction=function(t){return this._delegate.commitTransaction(t)},e.prototype.rollbackTransaction=function(t){return this._delegate.rollbackTransaction(t)},e.prototype.getProtocolVersion=function(){return this._delegate.getProtocolVersion()},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"databaseId",{get:function(){return this._delegate.databaseId},set:function(t){this._delegate.databaseId=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"server",{get:function(){return this._delegate.server},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){return this._delegate.authToken},set:function(t){this._delegate.authToken=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){return this._delegate.supportsReAuth},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"address",{get:function(){return this._delegate.address},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._delegate.version},set:function(t){this._delegate.version=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"creationTimestamp",{get:function(){return this._delegate.creationTimestamp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"idleTimestamp",{get:function(){return this._delegate.idleTimestamp},set:function(t){this._delegate.idleTimestamp=t},enumerable:!1,configurable:!0}),e.prototype.isOpen=function(){return this._delegate.isOpen()},e.prototype.protocol=function(){return this._delegate.protocol()},e.prototype.connect=function(t,e,n,r){return this._delegate.connect(t,e,n,r)},e.prototype.write=function(t,e,n){return this._delegate.write(t,e,n)},e.prototype.resetAndFlush=function(){return this._delegate.resetAndFlush()},e.prototype.hasOngoingObservableRequests=function(){return this._delegate.hasOngoingObservableRequests()},e.prototype.close=function(){return this._delegate.close()},e.prototype.release=function(){return this._originalErrorHandler&&(this._delegate._errorHandler=this._originalErrorHandler),this._delegate.release()},e}(i(n(1051)).default);e.default=o},981:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(5359),i=r.error.SERVICE_UNAVAILABLE,o=r.error.SESSION_EXPIRED,s=function(){function t(t,e,n,r){this._errorCode=t,this._handleUnavailability=e||a,this._handleWriteFailure=n||a,this._handleSecurityError=r||a}return t.create=function(e){return new t(e.errorCode,e.handleUnavailability,e.handleWriteFailure,e.handleSecurityError)},t.prototype.errorCode=function(){return this._errorCode},t.prototype.handleAndTransformError=function(t,e,n){return function(t){return null!=t&&null!=t.code&&t.code.startsWith("Neo.ClientError.Security.")}(t)?this._handleSecurityError(t,e,n):function(t){if(t)return t.code===o||t.code===i||"Neo.TransientError.General.DatabaseUnavailable"===t.code;return!1}(t)?this._handleUnavailability(t,e,n):function(t){if(t)return"Neo.ClientError.Cluster.NotALeader"===t.code||"Neo.ClientError.General.ForbiddenOnReadOnlyDatabase"===t.code;return!1}(t)?this._handleWriteFailure(t,e,n):t},t}();function a(t){return t}e.default=s},1051:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0});n(6860);var i=function(t){function e(e){var n=t.call(this)||this;return n._errorHandler=e,n}return r(e,t),Object.defineProperty(e.prototype,"id",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"databaseId",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"authToken",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"supportsReAuth",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"creationTimestamp",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"idleTimestamp",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),e.prototype.protocol=function(){throw new Error("not implemented")},Object.defineProperty(e.prototype,"address",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){throw new Error("not implemented")},set:function(t){throw new Error("not implemented")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"server",{get:function(){throw new Error("not implemented")},enumerable:!1,configurable:!0}),e.prototype.connect=function(t,e,n,r){throw new Error("not implemented")},e.prototype.write=function(t,e,n){throw new Error("not implemented")},e.prototype.close=function(){throw new Error("not implemented")},e.prototype.handleAndTransformError=function(t,e){return this._errorHandler?this._errorHandler.handleAndTransformError(t,e,this):t},e}(n(5359).Connection);e.default=i},5943:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.createChannelConnection=e.ConnectionErrorHandler=e.DelegateConnection=e.ChannelConnection=e.Connection=void 0;var a=s(n(1051));e.Connection=a.default;var l=o(n(2125));e.ChannelConnection=l.default,Object.defineProperty(e,"createChannelConnection",{enumerable:!0,get:function(){return l.createChannelConnection}});var u=s(n(363));e.DelegateConnection=u.default;var c=s(n(981));e.ConnectionErrorHandler=c.default,e.default=a.default},1666:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},s=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.packstream=e.channel=e.buf=e.bolt=e.loadBalancing=void 0,e.loadBalancing=o(n(4577)),e.bolt=o(n(6860)),e.buf=o(n(3540)),e.channel=o(n(2366)),e.packstream=o(n(4666)),s(n(8723),e)},6946:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reuseOngoingRequest=e.identity=void 0;var r=n(5359);e.identity=function(t){return t},e.reuseOngoingRequest=function(t,e){void 0===e&&(e=null);var n=new Map;return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];var s=r.json.stringify(i);if(n.has(s))return n.get(s);var a=t.apply(e,i);return n.set(s,a),a.finally((function(){n.delete(s)}))}}},6831:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.object=e.functional=void 0,e.functional=o(n(6946)),e.object=o(n(3568))},3568:function(t,e){"use strict";var n=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.equals=void 0,e.equals=function(t,e){var r,i;if(t===e)return!0;if(null===t||null===e)return!1;if("object"===typeof t&&"object"===typeof e){var o=Object.keys(t),s=Object.keys(e);if(o.length!==s.length)return!1;try{for(var a=n(o),l=a.next();!l.done;l=a.next()){var u=l.value;if(t[u]!==e[u])return!1}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}return!0}return!1}},4577:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.LeastConnectedLoadBalancingStrategy=e.LoadBalancingStrategy=void 0;var i=r(n(2577));e.LoadBalancingStrategy=i.default;var o=r(n(6055));e.LeastConnectedLoadBalancingStrategy=o.default,e.default=o.default},6055:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(4073)),s=function(t){function e(e){var n=t.call(this)||this;return n._readersIndex=new o.default,n._writersIndex=new o.default,n._connectionPool=e,n}return r(e,t),e.prototype.selectReader=function(t){return this._select(t,this._readersIndex)},e.prototype.selectWriter=function(t){return this._select(t,this._writersIndex)},e.prototype._select=function(t,e){var n=t.length;if(0===n)return null;var r=e.next(n),i=r,o=null,s=Number.MAX_SAFE_INTEGER;do{var a=t[i],l=this._connectionPool.activeResourceCount(a);l<s&&(o=a,s=l),i===n-1?i=0:i++}while(i!==r);return o},e}(i(n(2577)).default);e.default=s},2577:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.selectReader=function(t){throw new Error("Abstract function")},t.prototype.selectWriter=function(t){throw new Error("Abstract function")},t}();e.default=n},4073:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._offset=t||0}return t.prototype.next=function(t){if(0===t)return-1;var e=this._offset;return this._offset+=1,this._offset===Number.MAX_SAFE_INTEGER&&(this._offset=0),e%t},t}();e.default=n},4666:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.structure=e.v2=e.v1=void 0;var s=o(n(9379));e.v1=s;var a=o(n(8150));e.v2=a;var l=o(n(1871));e.structure=l,e.default=a},9379:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var r=n(2366),i=n(6831),o=n(1871),s=n(5359),a=s.error.PROTOCOL_ERROR,l=function(){function t(t){this._ch=t,this._byteArraysSupported=!0}return t.prototype.packable=function(t,e){var n=this;void 0===e&&(e=i.functional.identity);try{t=e(t)}catch(l){return function(){throw l}}if(null===t)return function(){return n._ch.writeUInt8(192)};if(!0===t)return function(){return n._ch.writeUInt8(195)};if(!1===t)return function(){return n._ch.writeUInt8(194)};if("number"===typeof t)return function(){return n.packFloat(t)};if("string"===typeof t)return function(){return n.packString(t)};if("bigint"===typeof t)return function(){return n.packInteger((0,s.int)(t))};if((0,s.isInt)(t))return function(){return n.packInteger(t)};if(t instanceof Int8Array)return function(){return n.packBytes(t)};if(t instanceof Array)return function(){n.packListHeader(t.length);for(var r=0;r<t.length;r++)n.packable(void 0===t[r]?null:t[r],e)()};if(function(t){if(null==t)return!1;return"function"===typeof t[Symbol.iterator]}(t))return this.packableIterable(t,e);if(t instanceof o.Structure){for(var r=[],a=0;a<t.fields.length;a++)r[a]=this.packable(t.fields[a],e);return function(){return n.packStruct(t.signature,r)}}return"object"===typeof t?function(){for(var r=Object.keys(t),i=0,o=0;o<r.length;o++)void 0!==t[r[o]]&&i++;n.packMapHeader(i);for(o=0;o<r.length;o++){var s=r[o];void 0!==t[s]&&(n.packString(s),n.packable(t[s],e)())}}:this._nonPackableValue("Unable to pack the given value: ".concat(t))},t.prototype.packableIterable=function(t,e){try{var n=Array.from(t);return this.packable(n,e)}catch(r){throw(0,s.newError)("Cannot pack given iterable, ".concat(r.message,": ").concat(t))}},t.prototype.packStruct=function(t,e){e=e||[],this.packStructHeader(e.length,t);for(var n=0;n<e.length;n++)e[n]()},t.prototype.packInteger=function(t){var e=t.high,n=t.low;t.greaterThanOrEqual(-16)&&t.lessThan(128)?this._ch.writeInt8(n):t.greaterThanOrEqual(-128)&&t.lessThan(-16)?(this._ch.writeUInt8(200),this._ch.writeInt8(n)):t.greaterThanOrEqual(-32768)&&t.lessThan(32768)?(this._ch.writeUInt8(201),this._ch.writeInt16(n)):t.greaterThanOrEqual(-2147483648)&&t.lessThan(2147483648)?(this._ch.writeUInt8(202),this._ch.writeInt32(n)):(this._ch.writeUInt8(203),this._ch.writeInt32(e),this._ch.writeInt32(n))},t.prototype.packFloat=function(t){this._ch.writeUInt8(193),this._ch.writeFloat64(t)},t.prototype.packString=function(t){var e=r.utf8.encode(t),n=e.length;if(n<16)this._ch.writeUInt8(128|n),this._ch.writeBytes(e);else if(n<256)this._ch.writeUInt8(208),this._ch.writeUInt8(n),this._ch.writeBytes(e);else if(n<65536)this._ch.writeUInt8(209),this._ch.writeUInt8(n/256|0),this._ch.writeUInt8(n%256),this._ch.writeBytes(e);else{if(!(n<4294967296))throw(0,s.newError)("UTF-8 strings of size "+n+" are not supported");this._ch.writeUInt8(210),this._ch.writeUInt8((n/16777216|0)%256),this._ch.writeUInt8((n/65536|0)%256),this._ch.writeUInt8((n/256|0)%256),this._ch.writeUInt8(n%256),this._ch.writeBytes(e)}},t.prototype.packListHeader=function(t){if(t<16)this._ch.writeUInt8(144|t);else if(t<256)this._ch.writeUInt8(212),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(213),this._ch.writeUInt8((t/256|0)%256),this._ch.writeUInt8(t%256);else{if(!(t<4294967296))throw(0,s.newError)("Lists of size "+t+" are not supported");this._ch.writeUInt8(214),this._ch.writeUInt8((t/16777216|0)%256),this._ch.writeUInt8((t/65536|0)%256),this._ch.writeUInt8((t/256|0)%256),this._ch.writeUInt8(t%256)}},t.prototype.packBytes=function(t){if(!this._byteArraysSupported)throw(0,s.newError)("Byte arrays are not supported by the database this driver is connected to");this.packBytesHeader(t.length);for(var e=0;e<t.length;e++)this._ch.writeInt8(t[e])},t.prototype.packBytesHeader=function(t){if(t<256)this._ch.writeUInt8(204),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(205),this._ch.writeUInt8((t/256|0)%256),this._ch.writeUInt8(t%256);else{if(!(t<4294967296))throw(0,s.newError)("Byte arrays of size "+t+" are not supported");this._ch.writeUInt8(206),this._ch.writeUInt8((t/16777216|0)%256),this._ch.writeUInt8((t/65536|0)%256),this._ch.writeUInt8((t/256|0)%256),this._ch.writeUInt8(t%256)}},t.prototype.packMapHeader=function(t){if(t<16)this._ch.writeUInt8(160|t);else if(t<256)this._ch.writeUInt8(216),this._ch.writeUInt8(t);else if(t<65536)this._ch.writeUInt8(217),this._ch.writeUInt8(t/256|0),this._ch.writeUInt8(t%256);else{if(!(t<4294967296))throw(0,s.newError)("Maps of size "+t+" are not supported");this._ch.writeUInt8(218),this._ch.writeUInt8((t/16777216|0)%256),this._ch.writeUInt8((t/65536|0)%256),this._ch.writeUInt8((t/256|0)%256),this._ch.writeUInt8(t%256)}},t.prototype.packStructHeader=function(t,e){if(t<16)this._ch.writeUInt8(176|t),this._ch.writeUInt8(e);else if(t<256)this._ch.writeUInt8(220),this._ch.writeUInt8(t),this._ch.writeUInt8(e);else{if(!(t<65536))throw(0,s.newError)("Structures of size "+t+" are not supported");this._ch.writeUInt8(221),this._ch.writeUInt8(t/256|0),this._ch.writeUInt8(t%256)}},t.prototype.disableByteArrays=function(){this._byteArraysSupported=!1},t.prototype._nonPackableValue=function(t){return function(){throw(0,s.newError)(t,a)}},t}();e.Packer=l;var u=function(){function t(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1),this._disableLosslessIntegers=t,this._useBigInt=e}return t.prototype.unpack=function(t,e){void 0===e&&(e=i.functional.identity);var n=t.readUInt8(),r=240&n,o=15&n;if(192===n)return null;var a=this._unpackBoolean(n);if(null!==a)return a;var l=this._unpackNumberOrInteger(n,t);if(null!==l){if((0,s.isInt)(l)){if(this._useBigInt)return l.toBigInt();if(this._disableLosslessIntegers)return l.toNumberOrInfinity()}return l}var u=this._unpackString(n,r,o,t);if(null!==u)return u;var c=this._unpackList(n,r,o,t,e);if(null!==c)return c;var h=this._unpackByteArray(n,t);if(null!==h)return h;var d=this._unpackMap(n,r,o,t,e);if(null!==d)return d;var f=this._unpackStruct(n,r,o,t,e);if(null!==f)return f;throw(0,s.newError)("Unknown packed value with marker "+n.toString(16))},t.prototype.unpackInteger=function(t){var e=t.readUInt8(),n=this._unpackInteger(e,t);if(null==n)throw(0,s.newError)("Unable to unpack integer value with marker "+e.toString(16));return n},t.prototype._unpackBoolean=function(t){return 195===t||194!==t&&null},t.prototype._unpackNumberOrInteger=function(t,e){return 193===t?e.readFloat64():this._unpackInteger(t,e)},t.prototype._unpackInteger=function(t,e){if(t>=0&&t<128)return(0,s.int)(t);if(t>=240&&t<256)return(0,s.int)(t-256);if(200===t)return(0,s.int)(e.readInt8());if(201===t)return(0,s.int)(e.readInt16());if(202===t){var n=e.readInt32();return(0,s.int)(n)}if(203===t){var r=e.readInt32(),i=e.readInt32();return new s.Integer(i,r)}return null},t.prototype._unpackString=function(t,e,n,i){return 128===e?r.utf8.decode(i,n):208===t?r.utf8.decode(i,i.readUInt8()):209===t?r.utf8.decode(i,i.readUInt16()):210===t?r.utf8.decode(i,i.readUInt32()):null},t.prototype._unpackList=function(t,e,n,r,i){return 144===e?this._unpackListWithSize(n,r,i):212===t?this._unpackListWithSize(r.readUInt8(),r,i):213===t?this._unpackListWithSize(r.readUInt16(),r,i):214===t?this._unpackListWithSize(r.readUInt32(),r,i):null},t.prototype._unpackListWithSize=function(t,e,n){for(var r=[],i=0;i<t;i++)r.push(this.unpack(e,n));return r},t.prototype._unpackByteArray=function(t,e){return 204===t?this._unpackByteArrayWithSize(e.readUInt8(),e):205===t?this._unpackByteArrayWithSize(e.readUInt16(),e):206===t?this._unpackByteArrayWithSize(e.readUInt32(),e):null},t.prototype._unpackByteArrayWithSize=function(t,e){for(var n=new Int8Array(t),r=0;r<t;r++)n[r]=e.readInt8();return n},t.prototype._unpackMap=function(t,e,n,r,i){return 160===e?this._unpackMapWithSize(n,r,i):216===t?this._unpackMapWithSize(r.readUInt8(),r,i):217===t?this._unpackMapWithSize(r.readUInt16(),r,i):218===t?this._unpackMapWithSize(r.readUInt32(),r,i):null},t.prototype._unpackMapWithSize=function(t,e,n){for(var r={},i=0;i<t;i++){r[this.unpack(e,n)]=this.unpack(e,n)}return r},t.prototype._unpackStruct=function(t,e,n,r,i){return 176===e?this._unpackStructWithSize(n,r,i):220===t?this._unpackStructWithSize(r.readUInt8(),r,i):221===t?this._unpackStructWithSize(r.readUInt16(),r,i):null},t.prototype._unpackStructWithSize=function(t,e,n){for(var r=e.readUInt8(),i=new o.Structure(r,[]),s=0;s<t;s++)i.fields.push(this.unpack(e,n));return n(i)},t}();e.Unpacker=u},8150:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.Unpacker=e.Packer=void 0;var a=s(n(9379)),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.disableByteArrays=function(){throw new Error("Bolt V2 should always support byte arrays")},e}(a.Packer);e.Packer=l;var u=function(t){function e(e,n){return void 0===e&&(e=!1),void 0===n&&(n=!1),t.call(this,e,n)||this}return r(e,t),e}(a.Unpacker);e.Unpacker=u},1871:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.verifyStructSize=e.Structure=void 0;var r=n(5359),i=r.error.PROTOCOL_ERROR,o=function(){function t(t,e){this.signature=t,this.fields=e}return Object.defineProperty(t.prototype,"size",{get:function(){return this.fields.length},enumerable:!1,configurable:!0}),t.prototype.toString=function(){for(var t="",e=0;e<this.fields.length;e++)e>0&&(t+=", "),t+=this.fields[e];return"Structure("+this.signature+", ["+t+"])"},t}();e.Structure=o,e.verifyStructSize=function(t,e,n){if(e!==n)throw(0,r.newError)("Wrong struct size for ".concat(t,", expected ").concat(e," but was ").concat(n),i)},e.default=o},7940:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.RoutingTable=e.Rediscovery=void 0;var i=r(n(8969));e.Rediscovery=i.default;var o=r(n(3123));e.RoutingTable=o.default,e.default=i.default},8969:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=r(n(3123)),o=(n(5359),function(){function t(t){this._routingContext=t}return t.prototype.lookupRoutingTableOnRouter=function(t,e,n,r){var o=this;return t._acquireConnection((function(s){return o._requestRawRoutingTable(s,t,e,n,r).then((function(t){return t.isNull?null:i.default.fromRawRoutingTable(e,n,t)}))}))},t.prototype._requestRawRoutingTable=function(t,e,n,r,i){var o=this;return new Promise((function(r,s){t.protocol().requestRoutingInformation({routingContext:o._routingContext,databaseName:n,impersonatedUser:i,sessionContext:{bookmarks:e._lastBookmarks,mode:e._mode,database:e._database,afterComplete:e._onComplete},onCompleted:r,onError:s})}))},t}());e.default=o},3123:function(t,e,n){"use strict";var r=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.createValidRoutingTable=void 0;var o=n(5359),s=o.internal.constants,a=s.ACCESS_MODE_WRITE,l=s.ACCESS_MODE_READ,u=o.internal.serverAddress.ServerAddress,c=o.error.PROTOCOL_ERROR,h=function(){function t(t){var e=void 0===t?{}:t,n=e.database,r=e.routers,i=e.readers,s=e.writers,a=e.expirationTime,l=e.ttl;this.database=n||null,this.databaseName=n||"default database",this.routers=r||[],this.readers=i||[],this.writers=s||[],this.expirationTime=a||(0,o.int)(0),this.ttl=l}return t.fromRawRoutingTable=function(t,e,n){return f(t,e,n)},t.prototype.forget=function(t){this.readers=d(this.readers,t),this.writers=d(this.writers,t)},t.prototype.forgetRouter=function(t){this.routers=d(this.routers,t)},t.prototype.forgetWriter=function(t){this.writers=d(this.writers,t)},t.prototype.isStaleFor=function(t){return this.expirationTime.lessThan(Date.now())||this.routers.length<1||t===l&&0===this.readers.length||t===a&&0===this.writers.length},t.prototype.isExpiredFor=function(t){return this.expirationTime.add(t).lessThan(Date.now())},t.prototype.allServers=function(){return i(i(i([],r(this.routers),!1),r(this.readers),!1),r(this.writers),!1)},t.prototype.toString=function(){return"RoutingTable["+"database=".concat(this.databaseName,", ")+"expirationTime=".concat(this.expirationTime,", ")+"currentTime=".concat(Date.now(),", ")+"routers=[".concat(this.routers,"], ")+"readers=[".concat(this.readers,"], ")+"writers=[".concat(this.writers,"]]")},t}();function d(t,e){return t.filter((function(t){return t.asKey()!==e.asKey()}))}function f(t,e,n){var r=n.ttl,i=function(t,e){try{var n=(0,o.int)(Date.now()),r=(0,o.int)(t.ttl).multiply(1e3).add(n);return r.lessThan(n)?o.Integer.MAX_VALUE:r}catch(i){throw(0,o.newError)("Unable to parse TTL entry from router ".concat(e," from raw routing table:\n").concat(o.json.stringify(t),"\nError message: ").concat(i.message),c)}}(n,e),s=function(t,e){try{var n=[],r=[],i=[];return t.servers.forEach((function(t){var e=t.role,o=t.addresses;"ROUTE"===e?n=m(o).map((function(t){return u.fromUrl(t)})):"WRITE"===e?i=m(o).map((function(t){return u.fromUrl(t)})):"READ"===e&&(r=m(o).map((function(t){return u.fromUrl(t)})))})),{routers:n,readers:r,writers:i}}catch(s){throw(0,o.newError)("Unable to parse servers entry from router ".concat(e," from addresses:\n").concat(o.json.stringify(t.servers),"\nError message: ").concat(s.message),c)}}(n,e),a=s.routers,l=s.readers,d=s.writers;return p(a,"routers",e),p(l,"readers",e),new h({database:t||n.db,routers:a,readers:l,writers:d,expirationTime:i,ttl:r})}function p(t,e,n){if(0===t.length)throw(0,o.newError)("Received no "+e+" from router "+n,c)}function m(t){if(!Array.isArray(t))throw new TypeError("Array expected but got: "+t);return Array.from(t)}e.default=h,e.createValidRoutingTable=f},2035:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.staticAuthTokenManager=e.authTokenManagers=e.AuthTokenAndExpiration=void 0;var s=o(n(4149)),a=n(1397),l=function(){function t(){}return t.prototype.getToken=function(){throw new Error("Not Implemented")},t.prototype.handleSecurityException=function(t,e){throw new Error("Not implemented")},t}();e.default=l;var u=function(){this.token=s.default.none(),this.expiration=void 0};e.AuthTokenAndExpiration=u;var c=new(function(){function t(){}return t.prototype.bearer=function(t){var e=t.tokenProvider;if("function"!==typeof e)throw new TypeError("tokenProvider should be function, but got: ".concat(typeof e));return new d(e,["Neo.ClientError.Security.Unauthorized","Neo.ClientError.Security.TokenExpired"])},t.prototype.basic=function(t){var e=this,n=t.tokenProvider;if("function"!==typeof n)throw new TypeError("tokenProvider should be function, but got: ".concat(typeof n));return new d((function(){return r(e,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return t={},[4,n()];case 1:return[2,(t.token=e.sent(),t)]}}))}))}),["Neo.ClientError.Security.Unauthorized"])},t}());e.authTokenManagers=c,Object.freeze(c),e.staticAuthTokenManager=function(t){var e=t.authToken;return new f(e)};var h=function(){function t(t){void 0===t&&(t=[]),this._subscribers=t}return t.prototype.subscribe=function(t){this._subscribers.push(t)},t.prototype.onCompleted=function(t){this._subscribers.forEach((function(e){return e.onCompleted(t)}))},t.prototype.onError=function(t){this._subscribers.forEach((function(e){return e.onError(t)}))},t}(),d=function(){function t(t,e,n,r){this._tokenProvider=t,this._handledSecurityCodes=e,this._currentAuthData=n,this._refreshObservable=r}return t.prototype.getToken=function(){var t;return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return void 0===this._currentAuthData||void 0!==this._currentAuthData.expiration&&this._currentAuthData.expiration<new Date?[4,this._refreshAuthToken()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2,null===(t=this._currentAuthData)||void 0===t?void 0:t.token]}}))}))},t.prototype.handleSecurityException=function(t,e){var n;return!!this._handledSecurityCodes.includes(e)&&(a.util.equals(t,null===(n=this._currentAuthData)||void 0===n?void 0:n.token)&&this._scheduleRefreshAuthToken(),!0)},t.prototype._scheduleRefreshAuthToken=function(t){var e=this;void 0===this._refreshObservable&&(this._currentAuthData=void 0,this._refreshObservable=new h,Promise.resolve(this._tokenProvider()).then((function(t){var n;e._currentAuthData=t,null===(n=e._refreshObservable)||void 0===n||n.onCompleted(t)})).catch((function(t){var n;null===(n=e._refreshObservable)||void 0===n||n.onError(t)})).finally((function(){e._refreshObservable=void 0}))),void 0!==t&&this._refreshObservable.subscribe(t)},t.prototype._refreshAuthToken=function(){return r(this,void 0,void 0,(function(){var t=this;return i(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e,n){t._scheduleRefreshAuthToken({onCompleted:e,onError:n})}))];case 1:return[2,e.sent()]}}))}))},t}(),f=function(){function t(t){this._authToken=t}return t.prototype.getToken=function(){return this._authToken},t.prototype.handleSecurityException=function(t,e){return!1},t}()},4149:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={basic:function(t,e,n){return null!=n?{scheme:"basic",principal:t,credentials:e,realm:n}:{scheme:"basic",principal:t,credentials:e}},kerberos:function(t){return{scheme:"kerberos",principal:"",credentials:t}},bearer:function(t){return{scheme:"bearer",credentials:t}},none:function(){return{scheme:"none"}},custom:function(t,e,n,i,o){var s={scheme:i,principal:t};return r(e)&&(s.credentials=e),r(n)&&(s.realm=n),r(o)&&(s.parameters=o),s}};function r(t){return!(null===t||void 0===t||""===t||Object.getPrototypeOf(t)===Object.prototype&&0===Object.keys(t).length)}e.default=n},5445:function(t,e){"use strict";var n=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},r=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},i=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.bookmarkManager=void 0;var a=function(){function t(){throw new Error("Not implemented")}return t.prototype.updateBookmarks=function(t,e){return n(this,void 0,void 0,(function(){return r(this,(function(t){throw new Error("Not implemented")}))}))},t.prototype.getBookmarks=function(){return n(this,void 0,void 0,(function(){return r(this,(function(t){throw new Error("Not implemented")}))}))},t}();e.default=a,e.bookmarkManager=function(t){void 0===t&&(t={});var e=new Set(t.initialBookmarks);return new l(e,t.bookmarksSupplier,t.bookmarksConsumer)};var l=function(){function t(t,e,n){this._bookmarks=t,this._bookmarksSupplier=e,this._bookmarksConsumer=n}return t.prototype.updateBookmarks=function(t,e){return n(this,void 0,void 0,(function(){var n,a,l,u,c,h,d,f,p,m;return r(this,(function(r){switch(r.label){case 0:n=this._bookmarks;try{for(a=i(t),l=a.next();!l.done;l=a.next())h=l.value,n.delete(h)}catch(g){d={error:g}}finally{try{l&&!l.done&&(f=a.return)&&f.call(a)}finally{if(d)throw d.error}}try{for(u=i(e),c=u.next();!c.done;c=u.next())h=c.value,n.add(h)}catch(_){p={error:_}}finally{try{c&&!c.done&&(m=u.return)&&m.call(u)}finally{if(p)throw p.error}}return"function"!==typeof this._bookmarksConsumer?[3,2]:[4,this._bookmarksConsumer(s([],o(n),!1))];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getBookmarks=function(){var t;return n(this,void 0,void 0,(function(){var e,n,a,l,u,c,h;return r(this,(function(r){switch(r.label){case 0:return e=new Set(this._bookmarks),"function"!==typeof this._bookmarksSupplier?[3,2]:[4,this._bookmarksSupplier()];case 1:n=null!==(t=r.sent())&&void 0!==t?t:[];try{for(a=i(n),l=a.next();!l.done;l=a.next())u=l.value,e.add(u)}catch(d){c={error:d}}finally{try{l&&!l.done&&(h=a.return)&&h.call(a)}finally{if(c)throw c.error}}r.label=2;case 2:return[2,s([],o(e),!1)]}}))}))},t}()},5430:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},i.apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),s=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&o(e,t,n);return s(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.resolveCertificateProvider=e.clientCertificateProviders=e.RotatingClientCertificateProvider=e.ClientCertificateProvider=void 0;var l=a(n(961)),u=function(){this.certfile="",this.keyfile="",this.password=void 0};e.default=u;var c=function(){function t(){}return t.prototype.hasUpdate=function(){throw new Error("Not Implemented")},t.prototype.getClientCertificate=function(){throw new Error("Not Implemented")},t}();e.ClientCertificateProvider=c;var h=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.updateCertificate=function(t){throw new Error("Not implemented")},e}(c);e.RotatingClientCertificateProvider=h;var d=new(function(){function t(){}return t.prototype.rotating=function(t){var e=t.initialCertificate;if(null==e||!f(e))throw new TypeError("initialCertificate should be ClientCertificate, but got ".concat(l.stringify(e)));var n=i({},e);return new _(n)},t}());function f(t){return null!=t&&"object"===typeof t&&"certfile"in t&&(p(e=t.certfile)||m(e,p))&&"keyfile"in t&&function(t){function e(t){return"string"===typeof t||null!=t&&"object"===typeof t&&"path"in t&&"string"===typeof t.path&&g("password",t)}return e(t)||m(t,e)}(t.keyfile)&&g("password",t);var e}function p(t){return"string"===typeof t}function m(t,e,n){return void 0===n&&(n=!1),Array.isArray(t)&&(n||t.length>0)&&t.filter(e).length===t.length}function g(t,e){return!(t in e)||null==e[t]||"string"===typeof e[t]}e.clientCertificateProviders=d,Object.freeze(d),e.resolveCertificateProvider=function(t){if(null!=t){if("object"===typeof t&&"hasUpdate"in t&&"getClientCertificate"in t&&"function"===typeof t.getClientCertificate&&"function"===typeof t.hasUpdate)return t;if(f(t)){var e=i({},t);return{getClientCertificate:function(){return e},hasUpdate:function(){return!1}}}throw new TypeError("clientCertificate should be configured with ClientCertificate or ClientCertificateProvider, but got ".concat(l.stringify(t)))}};var _=function(){function t(t,e){void 0===e&&(e=!1),this._certificate=t,this._updated=e}return t.prototype.hasUpdate=function(){try{return this._updated}finally{this._updated=!1}},t.prototype.getClientCertificate=function(){return this._certificate},t.prototype.updateCertificate=function(t){if(!f(t))throw new TypeError("certificate should be ClientCertificate, but got ".concat(l.stringify(t)));this._certificate=i({},t),this._updated=!0},t}()},8677:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Releasable=void 0;var n=function(){function t(){}return t.prototype.release=function(){throw new Error("Not implemented")},t}();e.Releasable=n;var r=function(){function t(){}return t.prototype.acquireConnection=function(t){throw Error("Not implemented")},t.prototype.supportsMultiDb=function(){throw Error("Not implemented")},t.prototype.supportsTransactionConfig=function(){throw Error("Not implemented")},t.prototype.supportsUserImpersonation=function(){throw Error("Not implemented")},t.prototype.supportsSessionAuth=function(){throw Error("Not implemented")},t.prototype.verifyConnectivityAndGetServerInfo=function(t){throw Error("Not implemented")},t.prototype.verifyAuthentication=function(t){throw Error("Not implemented")},t.prototype.getNegotiatedProtocolVersion=function(){throw Error("Not Implemented")},t.prototype.close=function(){throw Error("Not implemented")},t}();e.default=r},2259:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.beginTransaction=function(t){throw new Error("Not implemented")},t.prototype.run=function(t,e,n){throw new Error("Not implemented")},t.prototype.commitTransaction=function(t){throw new Error("Not implemented")},t.prototype.rollbackTransaction=function(t){throw new Error("Not implemented")},t.prototype.resetAndFlush=function(){throw new Error("Not implemented")},t.prototype.isOpen=function(){throw new Error("Not implemented")},t.prototype.getProtocolVersion=function(){throw new Error("Not implemented")},t.prototype.hasOngoingObservableRequests=function(){throw new Error("Not implemented")},t}();e.default=n},709:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.QueryConfig=e.SessionConfig=e.routing=e.WRITE=e.READ=e.Driver=void 0;var s=n(1036),a=o(n(9915)),l=n(9708),u=n(5549),c=o(n(9519)),h=n(6021),d=n(5445),f=o(n(4807)),p=o(n(7691)),m=n(1421),g=36e5,_=l.ACCESS_MODE_READ;e.READ=_;var y=l.ACCESS_MODE_WRITE;e.WRITE=y;var v=0,b=function(){this.defaultAccessMode=y,this.bookmarks=[],this.database="",this.impersonatedUser=void 0,this.auth=void 0,this.fetchSize=void 0,this.bookmarkManager=void 0,this.notificationFilter=void 0};e.SessionConfig=b;var w={WRITE:"WRITE",READ:"READ"};e.routing=w,Object.freeze(w);var S=function(){this.routing=w.WRITE,this.resultTransformer=void 0,this.database="",this.impersonatedUser=void 0,this.bookmarkManager=void 0,this.transactionConfig=void 0,this.auth=void 0,this.signal=void 0};e.QueryConfig=S;var x=function(){function t(t,e,n,r,i){void 0===e&&(e={}),void 0===r&&(r=function(t){return new c.default(t)}),void 0===i&&(i=function(t){return new p.default(t)}),function(t){t.maxConnectionLifetime=E(t.maxConnectionLifetime,g),t.maxConnectionPoolSize=E(t.maxConnectionPoolSize,l.DEFAULT_POOL_MAX_SIZE),t.connectionAcquisitionTimeout=E(t.connectionAcquisitionTimeout,l.DEFAULT_POOL_ACQUISITION_TIMEOUT),t.fetchSize=C(t.fetchSize,1e3),t.connectionTimeout=function(t){var e=parseInt(t.connectionTimeout,10);return 0===e||!isNaN(e)&&e<0?null:isNaN(e)?l.DEFAULT_CONNECTION_TIMEOUT_MILLIS:e}(t),t.connectionLivenessCheckTimeout=function(t){if(null==t)return;var e=parseInt(t,10);if(e<0||Number.isNaN(e))throw new Error("The connectionLivenessCheckTimeout can only be a positive value or 0 for always. However connectionLivenessCheckTimeout = ".concat(e));return e}(t.connectionLivenessCheckTimeout)}(e);var o=u.Logger.create(e);!function(t,e){var n,r,i=t.resolver;if(null!==i&&void 0!==i&&"function"!==typeof i)throw new TypeError("Configured resolver should be a function. Got: ".concat(typeof i));t.connectionAcquisitionTimeout<t.connectionTimeout&&e.warn('Configuration for "connectionAcquisitionTimeout" should be greater than or equal to "connectionTimeout". Otherwise, the connection acquisition timeout will take precedence for over the connection timeout in scenarios where a new connection is created while it is acquired');if(null!=(null===(n=t.notificationFilter)||void 0===n?void 0:n.disabledCategories)&&null!=(null===(r=t.notificationFilter)||void 0===r?void 0:r.disabledClassifications))throw new Error('The notificationFilter can\'t have both "disabledCategories" and  "disabledClassifications" configured at the same time.')}(e,o),this._id=v++,this._meta=t,this._config=e,this._log=o,this._createConnectionProvider=n,this._createSession=r,this._defaultExecuteQueryBookmarkManager=(0,d.bookmarkManager)(),this._queryExecutor=i(this.session.bind(this)),this._connectionProvider=null,this._afterConstruction()}return Object.defineProperty(t.prototype,"executeQueryBookmarkManager",{get:function(){return this._defaultExecuteQueryBookmarkManager},enumerable:!1,configurable:!0}),t.prototype.executeQuery=function(t,e,n){var o,s,a;return void 0===n&&(n={}),r(this,void 0,void 0,(function(){var r,l,u;return i(this,(function(i){switch(i.label){case 0:if(r=null===n.bookmarkManager?void 0:null!==(o=n.bookmarkManager)&&void 0!==o?o:this.executeQueryBookmarkManager,l=null!==(s=n.resultTransformer)&&void 0!==s?s:f.default.eagerResultTransformer(),(u=null!==(a=n.routing)&&void 0!==a?a:w.WRITE)!==w.READ&&u!==w.WRITE)throw(0,m.newError)('Illegal query routing config: "'.concat(u,'"'));return[4,this._queryExecutor.execute({resultTransformer:l,bookmarkManager:r,routing:u,database:n.database,impersonatedUser:n.impersonatedUser,transactionConfig:n.transactionConfig,auth:n.auth,signal:n.signal},t,e)];case 1:return[2,i.sent()]}}))}))},t.prototype.verifyConnectivity=function(t){var e=(void 0===t?{}:t).database,n=void 0===e?"":e;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:n,accessMode:_})},t.prototype.verifyAuthentication=function(t){var e=void 0===t?{}:t,n=e.database,o=e.auth;return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this._getOrCreateConnectionProvider().verifyAuthentication({database:null!==n&&void 0!==n?n:"system",auth:o,accessMode:_})];case 1:return[2,t.sent()]}}))}))},t.prototype.getServerInfo=function(t){var e=(void 0===t?{}:t).database,n=void 0===e?"":e;return this._getOrCreateConnectionProvider().verifyConnectivityAndGetServerInfo({database:n,accessMode:_})},t.prototype.supportsMultiDb=function(){return this._getOrCreateConnectionProvider().supportsMultiDb()},t.prototype.supportsTransactionConfig=function(){return this._getOrCreateConnectionProvider().supportsTransactionConfig()},t.prototype.supportsUserImpersonation=function(){return this._getOrCreateConnectionProvider().supportsUserImpersonation()},t.prototype.supportsSessionAuth=function(){return this._getOrCreateConnectionProvider().supportsSessionAuth()},t.prototype.getNegotiatedProtocolVersion=function(){return this._getOrCreateConnectionProvider().getNegotiatedProtocolVersion()},t.prototype.isEncrypted=function(){return this._isEncrypted()},t.prototype._supportsRouting=function(){return this._meta.routing},t.prototype._isEncrypted=function(){return this._config.encrypted===h.ENCRYPTION_ON||!0===this._config.encrypted},t.prototype._getTrust=function(){return this._config.trust},t.prototype.session=function(t){var e=void 0===t?{}:t,n=e.defaultAccessMode,r=void 0===n?y:n,i=e.bookmarks,o=e.database,s=void 0===o?"":o,a=e.impersonatedUser,l=e.fetchSize,u=e.bookmarkManager,c=e.notificationFilter,h=e.auth;return this._newSession({defaultAccessMode:r,bookmarkOrBookmarks:i,database:s,reactive:!1,impersonatedUser:a,fetchSize:C(l,this._config.fetchSize),bookmarkManager:u,notificationFilter:c,auth:h})},t.prototype.close=function(){return this._log.info("Driver ".concat(this._id," closing")),null!=this._connectionProvider?this._connectionProvider.close():Promise.resolve()},t.prototype[Symbol.asyncDispose]=function(){return this.close()},t.prototype._afterConstruction=function(){this._log.info("".concat(this._meta.typename," driver ").concat(this._id," created for server address ").concat(this._meta.address.toString()))},t.prototype._newSession=function(t){var e=t.defaultAccessMode,n=t.bookmarkOrBookmarks,r=t.database,i=t.reactive,o=t.impersonatedUser,a=t.fetchSize,l=t.bookmarkManager,u=t.notificationFilter,h=t.auth,d=c.default._validateSessionMode(e),f=this._getOrCreateConnectionProvider(),p=null!=n?new s.Bookmarks(n):s.Bookmarks.empty();return this._createSession({mode:d,database:null!==r&&void 0!==r?r:"",connectionProvider:f,bookmarks:p,config:this._config,reactive:i,impersonatedUser:o,fetchSize:a,bookmarkManager:l,notificationFilter:u,auth:h,log:this._log})},t.prototype._getOrCreateConnectionProvider=function(){var t;return null==this._connectionProvider&&(this._connectionProvider=this._createConnectionProvider(this._id,this._config,this._log,(t=this._config,new a.default(t.resolver)))),this._connectionProvider},t}();function E(t,e){var n=parseInt(t,10);return n>0||0===n?n:n<0?Number.MAX_SAFE_INTEGER:e}function C(t,e){var n=parseInt(t,10);if(n>0||n===l.FETCH_ALL)return n;if(0===n||n<0)throw new Error("The fetch size can only be a positive value or ".concat(l.FETCH_ALL," for ALL. However fetchSize = ").concat(n));return e}e.Driver=x,e.default=x},1421:function(t,e){"use strict";var n=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.PROTOCOL_ERROR=e.SESSION_EXPIRED=e.SERVICE_UNAVAILABLE=e.Neo4jError=e.isRetriableError=e.newError=void 0;var r="ServiceUnavailable";e.SERVICE_UNAVAILABLE=r;var i="SessionExpired";e.SESSION_EXPIRED=i;e.PROTOCOL_ERROR="ProtocolError";var o=function(t){function e(n,o,s){var a=t.call(this,n,null!=s?{cause:s}:void 0)||this;return a.constructor=e,a.__proto__=e.prototype,a.code=o,a.name="Neo4jError",a.retriable=function(t){return t===r||t===i||function(t){return"Neo.ClientError.Security.AuthorizationExpired"===t}(t)||function(t){return!0===(null===t||void 0===t?void 0:t.includes("TransientError"))}(t)}(o),a}return n(e,t),e.isRetriable=function(t){return null!==t&&void 0!==t&&t instanceof e&&t.retriable},e}(Error);e.Neo4jError=o,e.newError=function(t,e,n){return new o(t,null!==e&&void 0!==e?e:"N/A",n)};var s=o.isRetriable;e.isRetriableError=s},9211:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=void 0;var r=n(961),i={value:!0,enumerable:!1,configurable:!1,writable:!1},o="__isNode__",s="__isRelationship__",a="__isUnboundRelationship__",l="__isPath__",u="__isPathSegment__";function c(t,e){return null!=t&&!0===t[e]}var h=function(){function t(t,e,n,r){this.identity=t,this.labels=e,this.properties=n,this.elementId=g(r,(function(){return t.toString()}))}return t.prototype.toString=function(){for(var t="("+this.elementId,e=0;e<this.labels.length;e++)t+=":"+this.labels[e];var n=Object.keys(this.properties);if(n.length>0){t+=" {";for(e=0;e<n.length;e++)e>0&&(t+=","),t+=n[e]+":"+(0,r.stringify)(this.properties[n[e]]);t+="}"}return t+=")"},t}();e.Node=h,Object.defineProperty(h.prototype,o,i),e.isNode=function(t){return c(t,o)};var d=function(){function t(t,e,n,r,i,o,s,a){this.identity=t,this.start=e,this.end=n,this.type=r,this.properties=i,this.elementId=g(o,(function(){return t.toString()})),this.startNodeElementId=g(s,(function(){return e.toString()})),this.endNodeElementId=g(a,(function(){return n.toString()}))}return t.prototype.toString=function(){var t="("+this.startNodeElementId+")-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+(0,r.stringify)(this.properties[e[n]]);t+="}"}return t+="]->("+this.endNodeElementId+")"},t}();e.Relationship=d,Object.defineProperty(d.prototype,s,i),e.isRelationship=function(t){return c(t,s)};var f=function(){function t(t,e,n,r){this.identity=t,this.type=e,this.properties=n,this.elementId=g(r,(function(){return t.toString()}))}return t.prototype.bind=function(t,e){return new d(this.identity,t,e,this.type,this.properties,this.elementId)},t.prototype.bindTo=function(t,e){return new d(this.identity,t.identity,e.identity,this.type,this.properties,this.elementId,t.elementId,e.elementId)},t.prototype.toString=function(){var t="-[:"+this.type,e=Object.keys(this.properties);if(e.length>0){t+=" {";for(var n=0;n<e.length;n++)n>0&&(t+=","),t+=e[n]+":"+(0,r.stringify)(this.properties[e[n]]);t+="}"}return t+="]->"},t}();e.UnboundRelationship=f,Object.defineProperty(f.prototype,a,i),e.isUnboundRelationship=function(t){return c(t,a)};var p=function(t,e,n){this.start=t,this.relationship=e,this.end=n};e.PathSegment=p,Object.defineProperty(p.prototype,u,i),e.isPathSegment=function(t){return c(t,u)};var m=function(t,e,n){this.start=t,this.end=e,this.segments=n,this.length=n.length};function g(t,e){return void 0===t||null===t?e():t}e.Path=m,Object.defineProperty(m.prototype,l,i),e.isPath=function(t){return c(t,l)}},5359:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Releasable=e.ConnectionProvider=e.EagerResult=e.Result=e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.GqlStatusObject=e.Notification=e.ServerInfo=e.queryType=e.ResultSummary=e.Record=e.isPathSegment=e.PathSegment=e.isPath=e.Path=e.isUnboundRelationship=e.UnboundRelationship=e.isRelationship=e.Relationship=e.isNode=e.Node=e.Time=e.LocalTime=e.LocalDateTime=e.isTime=e.isLocalTime=e.isLocalDateTime=e.isDuration=e.isDateTime=e.isDate=e.Duration=e.DateTime=e.Date=e.Point=e.isPoint=e.internal=e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=e.Integer=e.error=e.isRetriableError=e.Neo4jError=e.newError=e.authTokenManagers=void 0,e.resolveCertificateProvider=e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.routing=e.staticAuthTokenManager=e.bookmarkManager=e.auth=e.json=e.driver=e.types=e.Driver=e.Session=e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Connection=void 0;var a=n(1421);Object.defineProperty(e,"newError",{enumerable:!0,get:function(){return a.newError}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return a.Neo4jError}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return a.isRetriableError}});var l=o(n(905));e.Integer=l.default,Object.defineProperty(e,"int",{enumerable:!0,get:function(){return l.int}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return l.isInt}}),Object.defineProperty(e,"inSafeRange",{enumerable:!0,get:function(){return l.inSafeRange}}),Object.defineProperty(e,"toNumber",{enumerable:!0,get:function(){return l.toNumber}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return l.toString}});var u=n(9381);Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return u.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return u.DateTime}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return u.Duration}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return u.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return u.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return u.isDuration}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return u.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return u.isLocalTime}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return u.isTime}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return u.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return u.LocalTime}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return u.Time}});var c=n(9211);Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return c.Node}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return c.isNode}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return c.Relationship}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return c.isRelationship}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return c.UnboundRelationship}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return c.isUnboundRelationship}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return c.Path}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return c.isPath}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return c.PathSegment}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return c.isPathSegment}});var h=s(n(7586));e.Record=h.default;var d=n(5687);Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return d.isPoint}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return d.Point}});var f=o(n(167));e.ResultSummary=f.default,Object.defineProperty(e,"queryType",{enumerable:!0,get:function(){return f.queryType}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return f.ServerInfo}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return f.Plan}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return f.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return f.QueryStatistics}}),Object.defineProperty(e,"Stats",{enumerable:!0,get:function(){return f.Stats}});var p=o(n(6200));e.Notification=p.default,Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return p.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return p.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return p.notificationClassification}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return p.notificationSeverityLevel}});var m=n(9579);Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return m.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return m.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return m.notificationFilterMinimumSeverityLevel}});var g=s(n(8958));e.Result=g.default;var _=s(n(2387));e.EagerResult=_.default;var y=o(n(8677));e.ConnectionProvider=y.default,Object.defineProperty(e,"Releasable",{enumerable:!0,get:function(){return y.Releasable}});var v=s(n(2259));e.Connection=v.default;var b=s(n(2019));e.Transaction=b.default;var w=s(n(5039));e.ManagedTransaction=w.default;var S=s(n(9919));e.TransactionPromise=S.default;var x=s(n(9519));e.Session=x.default;var E=o(n(709)),C=E;e.Driver=E.default,e.driver=C;var k=s(n(4149));e.auth=k.default;var O=n(5445);Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return O.bookmarkManager}});var T=n(2035);Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return T.authTokenManagers}}),Object.defineProperty(e,"staticAuthTokenManager",{enumerable:!0,get:function(){return T.staticAuthTokenManager}});var N=n(709);Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return N.routing}});var I=o(n(4774));e.types=I;var P=o(n(961));e.json=P;var M=s(n(4807));e.resultTransformers=M.default;var j=n(5430);Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return j.clientCertificateProviders}}),Object.defineProperty(e,"resolveCertificateProvider",{enumerable:!0,get:function(){return j.resolveCertificateProvider}});var R=o(n(1397));e.internal=R;var A={SERVICE_UNAVAILABLE:a.SERVICE_UNAVAILABLE,SESSION_EXPIRED:a.SESSION_EXPIRED,PROTOCOL_ERROR:a.PROTOCOL_ERROR};e.error=A;var D={authTokenManagers:T.authTokenManagers,newError:a.newError,Neo4jError:a.Neo4jError,isRetriableError:a.isRetriableError,error:A,Integer:l.default,int:l.int,isInt:l.isInt,inSafeRange:l.inSafeRange,toNumber:l.toNumber,toString:l.toString,internal:R,isPoint:d.isPoint,Point:d.Point,Date:u.Date,DateTime:u.DateTime,Duration:u.Duration,isDate:u.isDate,isDateTime:u.isDateTime,isDuration:u.isDuration,isLocalDateTime:u.isLocalDateTime,isLocalTime:u.isLocalTime,isTime:u.isTime,LocalDateTime:u.LocalDateTime,LocalTime:u.LocalTime,Time:u.Time,Node:c.Node,isNode:c.isNode,Relationship:c.Relationship,isRelationship:c.isRelationship,UnboundRelationship:c.UnboundRelationship,isUnboundRelationship:c.isUnboundRelationship,Path:c.Path,isPath:c.isPath,PathSegment:c.PathSegment,isPathSegment:c.isPathSegment,Record:h.default,ResultSummary:f.default,queryType:f.queryType,ServerInfo:f.ServerInfo,Notification:p.default,GqlStatusObject:p.GqlStatusObject,Plan:f.Plan,ProfiledPlan:f.ProfiledPlan,QueryStatistics:f.QueryStatistics,Stats:f.Stats,Result:g.default,EagerResult:_.default,Transaction:b.default,ManagedTransaction:w.default,TransactionPromise:S.default,Session:x.default,Driver:E.default,Connection:v.default,Releasable:y.Releasable,types:I,driver:C,json:P,auth:k.default,bookmarkManager:O.bookmarkManager,routing:N.routing,resultTransformers:M.default,notificationCategory:p.notificationCategory,notificationClassification:p.notificationClassification,notificationSeverityLevel:p.notificationSeverityLevel,notificationFilterDisabledCategory:m.notificationFilterDisabledCategory,notificationFilterDisabledClassification:m.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:m.notificationFilterMinimumSeverityLevel,clientCertificateProviders:j.clientCertificateProviders,resolveCertificateProvider:j.resolveCertificateProvider};e.default=D},905:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toString=e.toNumber=e.inSafeRange=e.isInt=e.int=void 0;var r=n(1421),i=new Map,o=function(){function t(t,e){this.low=null!==t&&void 0!==t?t:0,this.high=null!==e&&void 0!==e?e:0}return t.prototype.inSafeRange=function(){return this.greaterThanOrEqual(t.MIN_SAFE_VALUE)&&this.lessThanOrEqual(t.MAX_SAFE_VALUE)},t.prototype.toInt=function(){return this.low},t.prototype.toNumber=function(){return this.high*a+(this.low>>>0)},t.prototype.toBigInt=function(){if(this.isZero())return BigInt(0);if(this.isPositive())return BigInt(this.high>>>0)*BigInt(a)+BigInt(this.low>>>0);var t=this.negate();return BigInt(-1)*(BigInt(t.high>>>0)*BigInt(a)+BigInt(t.low>>>0))},t.prototype.toNumberOrInfinity=function(){return this.lessThan(t.MIN_SAFE_VALUE)?Number.NEGATIVE_INFINITY:this.greaterThan(t.MAX_SAFE_VALUE)?Number.POSITIVE_INFINITY:this.toNumber()},t.prototype.toString=function(e){if((e=null!==e&&void 0!==e?e:10)<2||e>36)throw RangeError("radix out of range: "+e.toString());if(this.isZero())return"0";var n;if(this.isNegative()){if(this.equals(t.MIN_VALUE)){var r=t.fromNumber(e),i=this.div(r);return n=i.multiply(r).subtract(this),i.toString(e)+n.toInt().toString(e)}return"-"+this.negate().toString(e)}var o=t.fromNumber(Math.pow(e,6));n=this;for(var s="";;){var a=n.div(o),l=(n.subtract(a.multiply(o)).toInt()>>>0).toString(e);if((n=a).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},t.prototype.valueOf=function(){return this.toBigInt()},t.prototype.getHighBits=function(){return this.high},t.prototype.getLowBits=function(){return this.low},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.equals(t.MIN_VALUE)?64:this.negate().getNumBitsAbs();var e=0!==this.high?this.high:this.low,n=0;for(n=31;n>0&&0===(e&1<<n);n--);return 0!==this.high?n+33:n+1},t.prototype.isZero=function(){return 0===this.high&&0===this.low},t.prototype.isNegative=function(){return this.high<0},t.prototype.isPositive=function(){return this.high>=0},t.prototype.isOdd=function(){return 1===(1&this.low)},t.prototype.isEven=function(){return 0===(1&this.low)},t.prototype.equals=function(e){var n=t.fromValue(e);return this.high===n.high&&this.low===n.low},t.prototype.notEquals=function(t){return!this.equals(t)},t.prototype.lessThan=function(t){return this.compare(t)<0},t.prototype.lessThanOrEqual=function(t){return this.compare(t)<=0},t.prototype.greaterThan=function(t){return this.compare(t)>0},t.prototype.greaterThanOrEqual=function(t){return this.compare(t)>=0},t.prototype.compare=function(e){var n=t.fromValue(e);if(this.equals(n))return 0;var r=this.isNegative(),i=n.isNegative();return r&&!i?-1:!r&&i?1:this.subtract(n).isNegative()?-1:1},t.prototype.negate=function(){return this.equals(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.add=function(e){var n=t.fromValue(e),r=this.high>>>16,i=65535&this.high,o=this.low>>>16,s=65535&this.low,a=n.high>>>16,l=65535&n.high,u=n.low>>>16,c=0,h=0,d=0,f=0;return d+=(f+=s+(65535&n.low))>>>16,f&=65535,h+=(d+=o+u)>>>16,d&=65535,c+=(h+=i+l)>>>16,h&=65535,c+=r+a,c&=65535,t.fromBits(d<<16|f,c<<16|h)},t.prototype.subtract=function(e){var n=t.fromValue(e);return this.add(n.negate())},t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;var n=t.fromValue(e);if(n.isZero())return t.ZERO;if(this.equals(t.MIN_VALUE))return n.isOdd()?t.MIN_VALUE:t.ZERO;if(n.equals(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return n.isNegative()?this.negate().multiply(n.negate()):this.negate().multiply(n).negate();if(n.isNegative())return this.multiply(n.negate()).negate();if(this.lessThan(u)&&n.lessThan(u))return t.fromNumber(this.toNumber()*n.toNumber());var r=this.high>>>16,i=65535&this.high,o=this.low>>>16,s=65535&this.low,a=n.high>>>16,l=65535&n.high,c=n.low>>>16,h=65535&n.low,d=0,f=0,p=0,m=0;return p+=(m+=s*h)>>>16,m&=65535,f+=(p+=o*h)>>>16,p&=65535,f+=(p+=s*c)>>>16,p&=65535,d+=(f+=i*h)>>>16,f&=65535,d+=(f+=o*c)>>>16,f&=65535,d+=(f+=s*l)>>>16,f&=65535,d+=r*h+i*c+o*l+s*a,d&=65535,t.fromBits(p<<16|m,d<<16|f)},t.prototype.div=function(e){var n,i,o,s=t.fromValue(e);if(s.isZero())throw(0,r.newError)("division by zero");if(this.isZero())return t.ZERO;if(this.equals(t.MIN_VALUE))return s.equals(t.ONE)||s.equals(t.NEG_ONE)?t.MIN_VALUE:s.equals(t.MIN_VALUE)?t.ONE:(n=this.shiftRight(1).div(s).shiftLeft(1)).equals(t.ZERO)?s.isNegative()?t.ONE:t.NEG_ONE:(i=this.subtract(s.multiply(n)),o=n.add(i.div(s)));if(s.equals(t.MIN_VALUE))return t.ZERO;if(this.isNegative())return s.isNegative()?this.negate().div(s.negate()):this.negate().div(s).negate();if(s.isNegative())return this.div(s.negate()).negate();for(o=t.ZERO,i=this;i.greaterThanOrEqual(s);){n=Math.max(1,Math.floor(i.toNumber()/s.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),l=a<=48?1:Math.pow(2,a-48),u=t.fromNumber(n),c=u.multiply(s);c.isNegative()||c.greaterThan(i);)n-=l,c=(u=t.fromNumber(n)).multiply(s);u.isZero()&&(u=t.ONE),o=o.add(u),i=i.subtract(c)}return o},t.prototype.modulo=function(e){var n=t.fromValue(e);return this.subtract(this.div(n).multiply(n))},t.prototype.not=function(){return t.fromBits(~this.low,~this.high)},t.prototype.and=function(e){var n=t.fromValue(e);return t.fromBits(this.low&n.low,this.high&n.high)},t.prototype.or=function(e){var n=t.fromValue(e);return t.fromBits(this.low|n.low,this.high|n.high)},t.prototype.xor=function(e){var n=t.fromValue(e);return t.fromBits(this.low^n.low,this.high^n.high)},t.prototype.shiftLeft=function(e){var n=t.toNumber(e);return 0===(n&=63)?t.ZERO:n<32?t.fromBits(this.low<<n,this.high<<n|this.low>>>32-n):t.fromBits(0,this.low<<n-32)},t.prototype.shiftRight=function(e){var n=t.toNumber(e),r=t.toNumber(e);return 0===(n&=63)?t.ZERO:r<32?t.fromBits(this.low>>>n|this.high<<32-n,this.high>>n):t.fromBits(this.high>>n-32,this.high>=0?0:-1)},t.isInteger=function(t){return!0===(null===t||void 0===t?void 0:t.__isInteger__)},t.fromInt=function(e){var n;if((e|=0)>=-128&&e<128&&null!=(n=i.get(e)))return n;var r=new t(e,e<0?-1:0);return e>=-128&&e<128&&i.set(e,r),r},t.fromBits=function(e,n){return new t(e,n)},t.fromNumber=function(e){return isNaN(e)||!isFinite(e)?t.ZERO:e<=-l?t.MIN_VALUE:e+1>=l?t.MAX_VALUE:e<0?t.fromNumber(-e).negate():new t(e%a|0,e/a|0)},t.fromString=function(e,n,i){var o,a=(void 0===i?{}:i).strictStringValidation;if(0===e.length)throw(0,r.newError)("number format error: empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if((n=null!==n&&void 0!==n?n:10)<2||n>36)throw(0,r.newError)("radix out of range: "+n.toString());if((o=e.indexOf("-"))>0)throw(0,r.newError)('number format error: interior "-" character: '+e);if(0===o)return t.fromString(e.substring(1),n).negate();for(var l=t.fromNumber(Math.pow(n,8)),u=t.ZERO,c=0;c<e.length;c+=8){var h=Math.min(8,e.length-c),d=e.substring(c,c+h),f=parseInt(d,n);if(!0===a&&!s(d,f,n))throw(0,r.newError)('number format error: "'.concat(d,'" is NaN in radix ').concat(n,": ").concat(e));if(h<8){var p=t.fromNumber(Math.pow(n,h));u=u.multiply(p).add(t.fromNumber(f))}else u=(u=u.multiply(l)).add(t.fromNumber(f))}return u},t.fromValue=function(e,n){return void 0===n&&(n={}),e instanceof t?e:"number"===typeof e?(!0===n.ceilFloat&&(e=Math.ceil(e)),t.fromNumber(e)):"string"===typeof e?t.fromString(e,void 0,n):"bigint"===typeof e?t.fromString(e.toString()):new t(e.low,e.high)},t.toNumber=function(e){switch(typeof e){case"number":return e;case"bigint":return Number(e);default:return t.fromValue(e).toNumber()}},t.toString=function(e,n){return t.fromValue(e).toString(n)},t.inSafeRange=function(e){return t.fromValue(e).inSafeRange()},t.ZERO=t.fromInt(0),t.ONE=t.fromInt(1),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647),t.MIN_VALUE=t.fromBits(0,-2147483648),t.MIN_SAFE_VALUE=t.fromBits(1,-2097152),t.MAX_SAFE_VALUE=t.fromBits(-1,2097151),t.__isInteger__=!0,t}();function s(t,e,n){return!Number.isNaN(t)&&!Number.isNaN(e)&&function(t,e,n){var r=t.toString(e),i=Math.max(n-r.length,0),o="0".repeat(i);return"".concat(o).concat(r)}(e,n,t.length)===t.toLowerCase()}Object.defineProperty(o.prototype,"__isInteger__",{value:!0,enumerable:!1,configurable:!1});var a=4294967296,l=a*a/2,u=o.fromInt(1<<24),c=o.fromValue;e.int=c;var h=o.isInteger;e.isInt=h;var d=o.inSafeRange;e.inSafeRange=d;var f=o.toNumber;e.toNumber=f;var p=o.toString;e.toString=p,e.default=o},6483:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.fromVersion=void 0,e.fromVersion=function(t,e){void 0===e&&(e=function(){return{get userAgent(){}}});var n=e(),r=null!=n.userAgent?n.userAgent.split("(")[1].split(")")[0]:void 0,i=n.userAgent||void 0;return{product:"neo4j-javascript/".concat(t),platform:r,languageDetails:i}}},7790:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(6483),e)},1036:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},s=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.Bookmarks=void 0;var l=o(n(6021)),u=function(){function t(t){this._values=function(t){if(null==t||""===t)return[];if(l.isString(t))return[t];if(Array.isArray(t)){for(var e=new Set,n=h(t),r=0;r<n.length;r++){var i=n[r];if(void 0!==i&&null!==i){if(!l.isString(i))throw new TypeError("Bookmark value should be a string, given: '".concat(i,"'"));e.add(i)}}return a([],s(e),!1)}throw new TypeError("Bookmarks should either be a string or a string array, given: '".concat(t,"'"))}(t)}return t.empty=function(){return c},t.prototype.isEmpty=function(){return 0===this._values.length},t.prototype.values=function(){return this._values},t.prototype[Symbol.iterator]=function(){return this._values[Symbol.iterator]()},t.prototype.asBeginTransactionParameters=function(){var t;return this.isEmpty()?{}:((t={}).bookmarks=this._values,t)},t}();e.Bookmarks=u;var c=new u(null);function h(t){return t.reduce((function(t,e){return Array.isArray(e)?t.concat(h(e)):t.concat(e)}),[])}},6052:function(t,e,n){"use strict";var r=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_CONNECTION_HOLDER=e.ReadOnlyConnectionHolder=e.ConnectionHolder=void 0;var s=n(1421),a=n(6021),l=n(9708),u=n(1036),c=n(5549),h=function(){function t(t){var e=t.mode,n=t.database,r=void 0===n?"":n,i=t.bookmarks,o=t.connectionProvider,s=t.impersonatedUser,c=t.onDatabaseNameResolved,h=t.getConnectionAcquistionBookmarks,d=t.auth,f=t.log;this._mode=null!==e&&void 0!==e?e:l.ACCESS_MODE_WRITE,this._closed=!1,this._database=null!=r?(0,a.assertString)(r,"database"):"",this._bookmarks=null!==i&&void 0!==i?i:u.Bookmarks.empty(),this._connectionProvider=o,this._impersonatedUser=s,this._referenceCount=0,this._connectionPromise=Promise.resolve(null),this._onDatabaseNameResolved=c,this._auth=d,this._log=f,this._logError=this._logError.bind(this),this._getConnectionAcquistionBookmarks=null!==h&&void 0!==h?h:function(){return Promise.resolve(u.Bookmarks.empty())}}return t.prototype.mode=function(){return this._mode},t.prototype.database=function(){return this._database},t.prototype.setDatabase=function(t){this._database=t},t.prototype.bookmarks=function(){return this._bookmarks},t.prototype.connectionProvider=function(){return this._connectionProvider},t.prototype.referenceCount=function(){return this._referenceCount},t.prototype.initializeConnection=function(){return 0!==this._referenceCount||null==this._connectionProvider?(this._referenceCount++,!1):(this._connectionPromise=this._createConnectionPromise(this._connectionProvider),this._referenceCount++,!0)},t.prototype._createConnectionPromise=function(t){return i(this,void 0,void 0,(function(){var e,n,r;return o(this,(function(i){switch(i.label){case 0:return n=(e=t).acquireConnection,r={accessMode:this._mode,database:this._database},[4,this._getBookmarks()];case 1:return[4,n.apply(e,[(r.bookmarks=i.sent(),r.impersonatedUser=this._impersonatedUser,r.onDatabaseNameResolved=this._onDatabaseNameResolved,r.auth=this._auth,r)])];case 2:return[2,i.sent()]}}))}))},t.prototype._getBookmarks=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,this._getConnectionAcquistionBookmarks()];case 1:return[2,t.sent()]}}))}))},t.prototype.getConnection=function(){return this._connectionPromise},t.prototype.releaseConnection=function(){return 0===this._referenceCount?this._connectionPromise:(this._referenceCount--,0===this._referenceCount?this._releaseConnection():this._connectionPromise)},t.prototype.close=function(t){return this._closed=!0,0===this._referenceCount?this._connectionPromise:(this._referenceCount=0,this._releaseConnection(t))},t.prototype.log=function(){return this._log},t.prototype._releaseConnection=function(t){return this._connectionPromise=this._connectionPromise.then((function(e){return null!=e?e.isOpen()&&(e.hasOngoingObservableRequests()||!0===t)?e.resetAndFlush().catch(p).then((function(){return e.release().then((function(){return null}))})):e.release().then((function(){return null})):Promise.resolve(null)})).catch(this._logError),this._connectionPromise},t.prototype._logError=function(t){return this._log.isWarnEnabled()&&this._log.warn("ConnectionHolder got an error while releasing the connection. Error ".concat(t,". Stacktrace: ").concat(t.stack)),null},t}();e.ConnectionHolder=h;var d=function(t){function e(e){var n=t.call(this,{mode:e.mode(),database:e.database(),bookmarks:e.bookmarks(),getConnectionAcquistionBookmarks:e._getConnectionAcquistionBookmarks,connectionProvider:e.connectionProvider(),log:e.log()})||this;return n._connectionHolder=e,n}return r(e,t),e.prototype.initializeConnection=function(){return 0!==this._connectionHolder.referenceCount()},e.prototype.getConnection=function(){return this._connectionHolder.getConnection()},e.prototype.releaseConnection=function(){return this._connectionHolder.getConnection().catch((function(){return Promise.resolve(null)}))},e.prototype.close=function(){return this._connectionHolder.getConnection().catch((function(){return Promise.resolve(null)}))},e}(h);e.ReadOnlyConnectionHolder=d,e.default=d;var f=new(function(t){function e(){return t.call(this,{log:c.Logger.create({})})||this}return r(e,t),e.prototype.mode=function(){},e.prototype.database=function(){},e.prototype.initializeConnection=function(){return!0},e.prototype.getConnection=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,Promise.reject((0,s.newError)("This connection holder does not serve connections"))];case 1:return[2,t.sent()]}}))}))},e.prototype.releaseConnection=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}}))}))},e.prototype.close=function(){return i(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return[4,Promise.resolve(null)];case 1:return[2,t.sent()]}}))}))},e}(h));function p(t){return null}e.EMPTY_CONNECTION_HOLDER=f},9708:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TELEMETRY_APIS=e.BOLT_PROTOCOL_V5_6=e.BOLT_PROTOCOL_V5_5=e.BOLT_PROTOCOL_V5_4=e.BOLT_PROTOCOL_V5_3=e.BOLT_PROTOCOL_V5_2=e.BOLT_PROTOCOL_V5_1=e.BOLT_PROTOCOL_V5_0=e.BOLT_PROTOCOL_V4_4=e.BOLT_PROTOCOL_V4_3=e.BOLT_PROTOCOL_V4_2=e.BOLT_PROTOCOL_V4_1=e.BOLT_PROTOCOL_V4_0=e.BOLT_PROTOCOL_V3=e.BOLT_PROTOCOL_V2=e.BOLT_PROTOCOL_V1=e.DEFAULT_POOL_MAX_SIZE=e.DEFAULT_POOL_ACQUISITION_TIMEOUT=e.DEFAULT_CONNECTION_TIMEOUT_MILLIS=e.ACCESS_MODE_WRITE=e.ACCESS_MODE_READ=e.FETCH_ALL=void 0;e.FETCH_ALL=-1;e.DEFAULT_POOL_ACQUISITION_TIMEOUT=6e4;e.DEFAULT_POOL_MAX_SIZE=100;e.DEFAULT_CONNECTION_TIMEOUT_MILLIS=3e4;e.ACCESS_MODE_READ="READ";e.ACCESS_MODE_WRITE="WRITE";e.BOLT_PROTOCOL_V1=1;e.BOLT_PROTOCOL_V2=2;e.BOLT_PROTOCOL_V3=3;e.BOLT_PROTOCOL_V4_0=4;e.BOLT_PROTOCOL_V4_1=4.1;e.BOLT_PROTOCOL_V4_2=4.2;e.BOLT_PROTOCOL_V4_3=4.3;e.BOLT_PROTOCOL_V4_4=4.4;e.BOLT_PROTOCOL_V5_0=5;e.BOLT_PROTOCOL_V5_1=5.1;e.BOLT_PROTOCOL_V5_2=5.2;e.BOLT_PROTOCOL_V5_3=5.3;e.BOLT_PROTOCOL_V5_4=5.4;e.BOLT_PROTOCOL_V5_5=5.5;e.BOLT_PROTOCOL_V5_6=5.6;e.TELEMETRY_APIS={MANAGED_TRANSACTION:0,UNMANAGED_TRANSACTION:1,AUTO_COMMIT_TRANSACTION:2,EXECUTE_QUERY:3}},1397:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.pool=e.boltAgent=e.objectUtil=e.resolver=e.serverAddress=e.urlUtil=e.logger=e.transactionExecutor=e.txConfig=e.connectionHolder=e.constants=e.bookmarks=e.observer=e.temporalUtil=e.util=void 0;var s=o(n(6021));e.util=s;var a=o(n(8620));e.temporalUtil=a;var l=o(n(8890));e.observer=l;var u=o(n(1036));e.bookmarks=u;var c=o(n(9708));e.constants=c;var h=o(n(6052));e.connectionHolder=h;var d=o(n(6980));e.txConfig=d;var f=o(n(7371));e.transactionExecutor=f;var p=o(n(5549));e.logger=p;var m=o(n(8421));e.urlUtil=m;var g=o(n(4507));e.serverAddress=g;var _=o(n(8108));e.resolver=_;var y=o(n(4595));e.objectUtil=y;var v=o(n(7790));e.boltAgent=v;var b=o(n(4236));e.pool=b},5549:function(t,e,n){"use strict";var r,i=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=void 0;var o=n(1421),s="error",a="warn",l="info",u="debug",c=l,h=((r={})[s]=0,r[a]=1,r[l]=2,r[u]=3,r),d=function(){function t(t,e){this._level=t,this._loggerFunction=e}return t.create=function(e){if(null!=(null===e||void 0===e?void 0:e.logging)){var n=e.logging,r=function(t){if(null!=(null===t||void 0===t?void 0:t.level)){var e=t.level,n=h[e];if(null==n&&0!==n)throw(0,o.newError)("Illegal logging level: ".concat(e,". Supported levels are: ").concat(Object.keys(h).toString()));return e}return c}(n),i=function(t){var e,n;if(null!=(null===t||void 0===t?void 0:t.logger)){var r=t.logger;if(null!=r&&"function"===typeof r)return r}throw(0,o.newError)("Illegal logger function: ".concat(null!==(n=null===(e=null===t||void 0===t?void 0:t.logger)||void 0===e?void 0:e.toString())&&void 0!==n?n:"undefined"))}(n);return new t(r,i)}return this.noOp()},t.noOp=function(){return f},t.prototype.isErrorEnabled=function(){return p(this._level,s)},t.prototype.error=function(t){this.isErrorEnabled()&&this._loggerFunction(s,t)},t.prototype.isWarnEnabled=function(){return p(this._level,a)},t.prototype.warn=function(t){this.isWarnEnabled()&&this._loggerFunction(a,t)},t.prototype.isInfoEnabled=function(){return p(this._level,l)},t.prototype.info=function(t){this.isInfoEnabled()&&this._loggerFunction(l,t)},t.prototype.isDebugEnabled=function(){return p(this._level,u)},t.prototype.debug=function(t){this.isDebugEnabled()&&this._loggerFunction(u,t)},t}();e.Logger=d;var f=new(function(t){function e(){return t.call(this,l,(function(t,e){}))||this}return i(e,t),e.prototype.isErrorEnabled=function(){return!1},e.prototype.error=function(t){},e.prototype.isWarnEnabled=function(){return!1},e.prototype.warn=function(t){},e.prototype.isInfoEnabled=function(){return!1},e.prototype.info=function(t){},e.prototype.isDebugEnabled=function(){return!1},e.prototype.debug=function(t){},e}(d));function p(t,e){return h[t]>=h[e]}},4595:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBrokenObjectReason=e.isBrokenObject=e.createBrokenObject=void 0;var n="__isBrokenObject__",r="__reason__";e.createBrokenObject=function(t,e){void 0===e&&(e={});var i=function(){throw t};return new Proxy(e,{get:function(e,o){return o===n||(o===r?t:void("toJSON"!==o&&i()))},set:i,apply:i,construct:i,defineProperty:i,deleteProperty:i,getOwnPropertyDescriptor:i,getPrototypeOf:i,has:i,isExtensible:i,ownKeys:i,preventExtensions:i,setPrototypeOf:i})},e.isBrokenObject=function(t){return null!==t&&"object"===typeof t&&!0===t[n]},e.getBrokenObjectReason=function(t){return t[r]}},8890:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FailedObserver=e.CompletedObserver=void 0;var n=function(){function t(){}return t.prototype.subscribe=function(t){i(t,t.onKeys,[]),i(t,t.onCompleted,{})},t.prototype.cancel=function(){},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.prepareToHandleSingleResponse=function(){},t.prototype.markCompleted=function(){},t.prototype.onError=function(t){throw new Error("CompletedObserver not supposed to call onError",{cause:t})},t}();e.CompletedObserver=n;var r=function(){function t(t){var e=t.error,n=t.onError;this._error=e,this._beforeError=n,this._observers=[],this.onError(e)}return t.prototype.subscribe=function(t){i(t,t.onError,this._error),this._observers.push(t)},t.prototype.onError=function(t){i(this,this._beforeError,t),this._observers.forEach((function(e){return i(e,e.onError,t)}))},t.prototype.cancel=function(){},t.prototype.pause=function(){},t.prototype.resume=function(){},t.prototype.markCompleted=function(){},t.prototype.prepareToHandleSingleResponse=function(){},t}();function i(t,e,n){null!=e&&e.bind(t)(n)}e.FailedObserver=r},4236:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_MAX_SIZE=e.DEFAULT_ACQUISITION_TIMEOUT=e.PoolConfig=e.Pool=void 0;var a=o(n(4679));e.PoolConfig=a.default,Object.defineProperty(e,"DEFAULT_ACQUISITION_TIMEOUT",{enumerable:!0,get:function(){return a.DEFAULT_ACQUISITION_TIMEOUT}}),Object.defineProperty(e,"DEFAULT_MAX_SIZE",{enumerable:!0,get:function(){return a.DEFAULT_MAX_SIZE}});var l=s(n(2868));e.Pool=l.default,e.default=l.default},4679:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_ACQUISITION_TIMEOUT=e.DEFAULT_MAX_SIZE=void 0;var n=100;e.DEFAULT_MAX_SIZE=n;var r=6e4;e.DEFAULT_ACQUISITION_TIMEOUT=r;var i=function(){function t(t,e){this.maxSize=o(t,n),this.acquisitionTimeout=o(e,r)}return t.defaultConfig=function(){return new t(n,r)},t.fromDriverConfig=function(e){return new t(s(e.maxConnectionPoolSize)?e.maxConnectionPoolSize:n,s(e.connectionAcquisitionTimeout)?e.connectionAcquisitionTimeout:r)},t}();function o(t,e){return s(t)?t:e}function s(t){return 0===t||null!=t}e.default=i},2868:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(4679)),a=n(1421),l=n(5549),u=function(){function t(t){var e=t.create,n=void 0===e?function(t,e,n){return r(w,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,Promise.reject(new Error("Not implemented"))];case 1:return[2,t.sent()]}}))}))}:e,o=t.destroy,a=void 0===o?function(t){return r(w,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,Promise.resolve()];case 1:return[2,t.sent()]}}))}))}:o,u=t.validateOnAcquire,c=void 0===u?function(t,e){return!0}:u,h=t.validateOnRelease,d=void 0===h?function(t){return!0}:h,f=t.installIdleObserver,p=void 0===f?function(t,e){}:f,m=t.removeIdleObserver,g=void 0===m?function(t){}:m,_=t.config,y=void 0===_?s.default.defaultConfig():_,v=t.log,b=void 0===v?l.Logger.noOp():v,w=this;this._create=n,this._destroy=a,this._validateOnAcquire=c,this._validateOnRelease=d,this._installIdleObserver=p,this._removeIdleObserver=g,this._maxSize=y.maxSize,this._acquisitionTimeout=y.acquisitionTimeout,this._pools={},this._pendingCreates={},this._acquireRequests={},this._activeResourceCounts={},this._release=this._release.bind(this),this._log=b,this._closed=!1}return t.prototype.acquire=function(t,e,n){return r(this,void 0,void 0,(function(){var r,o,s=this;return i(this,(function(i){switch(i.label){case 0:return r=e.asKey(),o=this._acquireRequests,null==o[r]&&(o[r]=[]),[4,new Promise((function(i,l){var u=setTimeout((function(){var t=o[r];if(null!=t&&(o[r]=t.filter((function(t){return t!==c}))),c.isCompleted());else{var n=s.activeResourceCount(e),i=s.has(e)?s._pools[r].length:0;c.reject((0,a.newError)("Connection acquisition timed out in ".concat(s._acquisitionTimeout," ms. Pool status: Active conn count = ").concat(n,", Idle conn count = ").concat(i,".")))}}),s._acquisitionTimeout);"object"===typeof u&&u.unref();var c=new d(r,t,n,i,l,u,s._log);o[r].push(c),s._processPendingAcquireRequests(e)}))];case 1:return[2,i.sent()]}}))}))},t.prototype.purge=function(t){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this._purgeKey(t.asKey())];case 1:return[2,e.sent()]}}))}))},t.prototype.apply=function(t,e){var n=t.asKey();n in this._pools&&this._pools[n].apply(e)},t.prototype.close=function(){return r(this,void 0,void 0,(function(){var t=this;return i(this,(function(e){switch(e.label){case 0:return this._closed=!0,[4,Promise.all(Object.keys(this._pools).map((function(e){return r(t,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,this._purgeKey(e)];case 1:return[2,t.sent()]}}))}))}))).then()];case 1:return[2,e.sent()]}}))}))},t.prototype.keepAll=function(t){return r(this,void 0,void 0,(function(){var e,n,o,s=this;return i(this,(function(a){switch(a.label){case 0:return e=t.map((function(t){return t.asKey()})),n=Object.keys(this._pools),o=n.filter((function(t){return!e.includes(t)})),[4,Promise.all(o.map((function(t){return r(s,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,this._purgeKey(t)];case 1:return[2,e.sent()]}}))}))}))).then()];case 1:return[2,a.sent()]}}))}))},t.prototype.has=function(t){return t.asKey()in this._pools},t.prototype.activeResourceCount=function(t){var e;return null!==(e=this._activeResourceCounts[t.asKey()])&&void 0!==e?e:0},t.prototype._getOrInitializePoolFor=function(t){var e=this._pools[t];return null==e&&(e=new f,this._pools[t]=e,this._pendingCreates[t]=0),e},t.prototype._acquire=function(t,e,n){return r(this,void 0,void 0,(function(){var o,s,l,u,d,f,p,m=this;return i(this,(function(g){switch(g.label){case 0:if(this._closed)throw(0,a.newError)("Pool is closed, it is no more able to serve requests.");if(o=e.asKey(),s=this._getOrInitializePoolFor(o),n)return[3,9];g.label=1;case 1:if(!(s.length>0))return[3,9];if(null==(l=s.pop()))return[3,1];c(o,this._activeResourceCounts),null!=this._removeIdleObserver&&this._removeIdleObserver(l),u=!1,g.label=2;case 2:return g.trys.push([2,4,,5]),[4,this._validateOnAcquire(t,l)];case 3:return u=g.sent(),[3,5];case 4:return d=g.sent(),this._log.isErrorEnabled()&&this._log.error("Failure on validate ".concat(l,". This is a bug, please report it. Caused by: ").concat(d.message)),[3,5];case 5:return u?(this._log.isDebugEnabled()&&this._log.debug("".concat(l," acquired from the pool ").concat(o)),[2,{resource:l,pool:s}]):[3,6];case 6:return h(o,this._activeResourceCounts),s.removeInUse(l),[4,this._destroy(l)];case 7:g.sent(),g.label=8;case 8:return[3,1];case 9:if(this._maxSize>0&&this.activeResourceCount(e)+this._pendingCreates[o]>=this._maxSize)return[2,{resource:null,pool:s}];this._pendingCreates[o]=this._pendingCreates[o]+1,g.label=10;case 10:return g.trys.push([10,,14,15]),this.activeResourceCount(e)+s.length>=this._maxSize&&n?null==(p=s.pop())?[3,12]:(null!=this._removeIdleObserver&&this._removeIdleObserver(p),s.removeInUse(p),[4,this._destroy(p)]):[3,12];case 11:g.sent(),g.label=12;case 12:return[4,this._create(t,e,(function(t,e){return r(m,void 0,void 0,(function(){return i(this,(function(n){switch(n.label){case 0:return[4,this._release(t,e,s)];case 1:return[2,n.sent()]}}))}))}))];case 13:return f=g.sent(),s.pushInUse(f),c(o,this._activeResourceCounts),this._log.isDebugEnabled()&&this._log.debug("".concat(f," created for the pool ").concat(o)),[3,15];case 14:return this._pendingCreates[o]=this._pendingCreates[o]-1,[7];case 15:return[2,{resource:f,pool:s}]}}))}))},t.prototype._release=function(t,e,n){return r(this,void 0,void 0,(function(){var r,o=this;return i(this,(function(i){switch(i.label){case 0:r=t.asKey(),i.label=1;case 1:return i.trys.push([1,,9,10]),n.isActive()?[4,this._validateOnRelease(e)]:[3,6];case 2:return i.sent()?[3,4]:(this._log.isDebugEnabled()&&this._log.debug("".concat(e," destroyed and can't be released to the pool ").concat(r," because it is not functional")),n.removeInUse(e),[4,this._destroy(e)]);case 3:return i.sent(),[3,5];case 4:null!=this._installIdleObserver&&this._installIdleObserver(e,{onError:function(t){o._log.debug("Idle connection ".concat(e," destroyed because of error: ").concat(t));var n=o._pools[r];null!=n&&(o._pools[r]=n.filter((function(t){return t!==e})),n.removeInUse(e)),o._destroy(e).catch((function(){}))}}),n.push(e),this._log.isDebugEnabled()&&this._log.debug("".concat(e," released to the pool ").concat(r)),i.label=5;case 5:return[3,8];case 6:return this._log.isDebugEnabled()&&this._log.debug("".concat(e," destroyed and can't be released to the pool ").concat(r," because pool has been purged")),n.removeInUse(e),[4,this._destroy(e)];case 7:i.sent(),i.label=8;case 8:return[3,10];case 9:return h(r,this._activeResourceCounts),this._processPendingAcquireRequests(t),[7];case 10:return[2]}}))}))},t.prototype._purgeKey=function(t){return r(this,void 0,void 0,(function(){var e,n,r;return i(this,(function(i){switch(i.label){case 0:if(e=this._pools[t],n=[],null==e)return[3,2];for(;e.length>0;)null!=(r=e.pop())&&(null!=this._removeIdleObserver&&this._removeIdleObserver(r),n.push(this._destroy(r)));return e.close(),delete this._pools[t],[4,Promise.all(n)];case 1:i.sent(),i.label=2;case 2:return[2]}}))}))},t.prototype._processPendingAcquireRequests=function(t){var e=this,n=t.asKey(),r=this._acquireRequests[n];if(null!=r){var i=r.shift();null!=i?this._acquire(i.context,t,i.requireNew).catch((function(t){return i.reject(t),{resource:null,pool:null}})).then((function(r){var o=r.resource,s=r.pool;null!=o&&null!=s?i.isCompleted()?e._release(t,o,s).catch((function(t){e._log.isDebugEnabled()&&e._log.debug("".concat(o," could not be release back to the pool. Cause: ").concat(t))})):i.resolve(o):i.isCompleted()||(null==e._acquireRequests[n]&&(e._acquireRequests[n]=[]),e._acquireRequests[n].unshift(i))})).catch((function(t){return i.reject(t)})):delete this._acquireRequests[n]}},t}();function c(t,e){var n,r=null!==(n=e[t])&&void 0!==n?n:0;e[t]=r+1}function h(t,e){var n,r=(null!==(n=e[t])&&void 0!==n?n:0)-1;r>0?e[t]=r:delete e[t]}var d=function(){function t(t,e,n,r,i,o,s){this._key=t,this._context=e,this._resolve=r,this._reject=i,this._timeoutId=o,this._log=s,this._completed=!1,this._config=null!==n&&void 0!==n?n:{}}return Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"requireNew",{get:function(){var t;return null!==(t=this._config.requireNew)&&void 0!==t&&t},enumerable:!1,configurable:!0}),t.prototype.isCompleted=function(){return this._completed},t.prototype.resolve=function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._log.isDebugEnabled()&&this._log.debug("".concat(t," acquired from the pool ").concat(this._key)),this._resolve(t))},t.prototype.reject=function(t){this._completed||(this._completed=!0,clearTimeout(this._timeoutId),this._reject(t))},t}(),f=function(){function t(){this._active=!0,this._elements=[],this._elementsInUse=new Set}return t.prototype.isActive=function(){return this._active},t.prototype.close=function(){this._active=!1,this._elements=[],this._elementsInUse=new Set},t.prototype.filter=function(t){return this._elements=this._elements.filter(t),this},t.prototype.apply=function(t){this._elements.forEach(t),this._elementsInUse.forEach(t)},Object.defineProperty(t.prototype,"length",{get:function(){return this._elements.length},enumerable:!1,configurable:!0}),t.prototype.pop=function(){var t=this._elements.pop();return null!=t&&this._elementsInUse.add(t),t},t.prototype.push=function(t){return this._elementsInUse.delete(t),this._elements.push(t)},t.prototype.pushInUse=function(t){this._elementsInUse.add(t)},t.prototype.removeInUse=function(t){this._elementsInUse.delete(t)},t}();e.default=u},7691:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}};Object.defineProperty(e,"__esModule",{value:!0});var o=n(9708),s=function(){function t(t){this._createSession=t}return t.prototype.execute=function(t,e,n){return r(this,void 0,void 0,(function(){var s,a,l=this;return i(this,(function(u){switch(u.label){case 0:s=this._createSession({database:t.database,bookmarkManager:t.bookmarkManager,impersonatedUser:t.impersonatedUser,auth:t.auth}),a=function(t,e,n){"function"===typeof(null===t||void 0===t?void 0:t.addEventListener)&&t.addEventListener(e,n);return{uninstall:function(){"function"===typeof(null===t||void 0===t?void 0:t.removeEventListener)&&t.removeEventListener(e,n)}}}(t.signal,"abort",(function(){return r(l,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,s.close()];case 1:return[2,t.sent()]}}))}))})),s._configureTransactionExecutor(!0,o.TELEMETRY_APIS.EXECUTE_QUERY),u.label=1;case 1:return u.trys.push([1,,3,5]),[4,("READ"===t.routing?s.executeRead.bind(s):s.executeWrite.bind(s))((function(o){return r(l,void 0,void 0,(function(){var r;return i(this,(function(i){switch(i.label){case 0:return r=o.run(e,n),[4,t.resultTransformer(r)];case 1:return[2,i.sent()]}}))}))}),t.transactionConfig)];case 2:return[2,u.sent()];case 3:return a.uninstall(),[4,s.close()];case 4:return u.sent(),[7];case 5:return[2]}}))}))},t}();e.default=s},2247:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.resolve=function(){throw new Error("Abstract function")},t.prototype._resolveToItself=function(t){return Promise.resolve([t])},t}();e.default=n},9915:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4507);function i(t){return Promise.resolve([t])}var o=function(){function t(t){this._resolverFunction=null!==t&&void 0!==t?t:i}return t.prototype.resolve=function(t){var e=this;return new Promise((function(n){return n(e._resolverFunction(t.asHostPort()))})).then((function(t){if(!Array.isArray(t))throw new TypeError("Configured resolver function should either return an array of addresses or a Promise resolved with an array of addresses."+"Each address is '<host>:<port>'. Got: ".concat(t));return t.map((function(t){return r.ServerAddress.fromUrl(t)}))}))},t}();e.default=o},8108:function(t,e,n){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.ConfiguredCustomResolver=e.BaseHostNameResolver=void 0;var i=r(n(2247));e.BaseHostNameResolver=i.default;var o=r(n(9915));e.ConfiguredCustomResolver=o.default},4507:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.ServerAddress=void 0;var s=n(6021),a=o(n(8421)),l=function(){function t(t,e,n,r){this._host=(0,s.assertString)(t,"host"),this._resolved=null!=e?(0,s.assertString)(e,"resolved"):null,this._port=(0,s.assertNumber)(n,"port"),this._hostPort=r,this._stringValue=null!=e?"".concat(r,"(").concat(e,")"):"".concat(r)}return t.prototype.host=function(){return this._host},t.prototype.resolvedHost=function(){return null!=this._resolved?this._resolved:this._host},t.prototype.port=function(){return this._port},t.prototype.resolveWith=function(e){return new t(this._host,e,this._port,this._hostPort)},t.prototype.asHostPort=function(){return this._hostPort},t.prototype.asKey=function(){return this._hostPort},t.prototype.toString=function(){return this._stringValue},t.fromUrl=function(e){var n=a.parseDatabaseUrl(e);return new t(n.host,null,n.port,n.hostAndPort)},t}();e.ServerAddress=l},8620:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.floorMod=e.floorDiv=e.assertValidZoneId=e.assertValidNanosecond=e.assertValidSecond=e.assertValidMinute=e.assertValidHour=e.assertValidDay=e.assertValidMonth=e.assertValidYear=e.timeZoneOffsetInSeconds=e.totalNanoseconds=e.newDate=e.toStandardDate=e.isoStringToStandardDate=e.dateToIsoString=e.timeZoneOffsetToIsoString=e.timeToIsoString=e.durationToIsoString=e.dateToEpochDay=e.localDateTimeToEpochSecond=e.localTimeToNanoOfDay=e.normalizeNanosecondsForDuration=e.normalizeSecondsForDuration=e.SECONDS_PER_DAY=e.DAYS_PER_400_YEAR_CYCLE=e.DAYS_0000_TO_1970=e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE=e.NANOS_PER_MILLISECOND=e.NANOS_PER_SECOND=e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE=e.MINUTES_PER_HOUR=e.NANOSECOND_OF_SECOND_RANGE=e.SECOND_OF_MINUTE_RANGE=e.MINUTE_OF_HOUR_RANGE=e.HOUR_OF_DAY_RANGE=e.DAY_OF_MONTH_RANGE=e.MONTH_OF_YEAR_RANGE=e.YEAR_RANGE=void 0;var s=o(n(905)),a=n(1421),l=n(6021),u=function(){function t(t,e){this._minNumber=t,this._maxNumber=e,this._minInteger=(0,s.int)(t),this._maxInteger=(0,s.int)(e)}return t.prototype.contains=function(t){if((0,s.isInt)(t)&&t instanceof s.default)return t.greaterThanOrEqual(this._minInteger)&&t.lessThanOrEqual(this._maxInteger);if("bigint"===typeof t){var e=(0,s.int)(t);return e.greaterThanOrEqual(this._minInteger)&&e.lessThanOrEqual(this._maxInteger)}return t>=this._minNumber&&t<=this._maxNumber},t.prototype.toString=function(){return"[".concat(this._minNumber,", ").concat(this._maxNumber,"]")},t}();function c(t,n,r){t=(0,s.int)(t),n=(0,s.int)(n),r=(0,s.int)(r);var i=t.multiply(365);return i=(i=(i=t.greaterThanOrEqual(0)?i.add(t.add(3).div(4).subtract(t.add(99).div(100)).add(t.add(399).div(400))):i.subtract(t.div(-4).subtract(t.div(-100)).add(t.div(-400)))).add(n.multiply(367).subtract(362).div(12))).add(r.subtract(1)),n.greaterThan(2)&&(i=i.subtract(1),function(t){return t=(0,s.int)(t),!!t.modulo(4).equals(0)&&(!t.modulo(100).equals(0)||!!t.modulo(400).equals(0))}(t)||(i=i.subtract(1))),i.subtract(e.DAYS_0000_TO_1970)}e.YEAR_RANGE=new u(-999999999,999999999),e.MONTH_OF_YEAR_RANGE=new u(1,12),e.DAY_OF_MONTH_RANGE=new u(1,31),e.HOUR_OF_DAY_RANGE=new u(0,23),e.MINUTE_OF_HOUR_RANGE=new u(0,59),e.SECOND_OF_MINUTE_RANGE=new u(0,59),e.NANOSECOND_OF_SECOND_RANGE=new u(0,999999999),e.MINUTES_PER_HOUR=60,e.SECONDS_PER_MINUTE=60,e.SECONDS_PER_HOUR=e.SECONDS_PER_MINUTE*e.MINUTES_PER_HOUR,e.NANOS_PER_SECOND=1e9,e.NANOS_PER_MILLISECOND=1e6,e.NANOS_PER_MINUTE=e.NANOS_PER_SECOND*e.SECONDS_PER_MINUTE,e.NANOS_PER_HOUR=e.NANOS_PER_MINUTE*e.MINUTES_PER_HOUR,e.DAYS_0000_TO_1970=719528,e.DAYS_PER_400_YEAR_CYCLE=146097,e.SECONDS_PER_DAY=86400,e.normalizeSecondsForDuration=function(t,n){return(0,s.int)(t).add(p(n,e.NANOS_PER_SECOND))},e.normalizeNanosecondsForDuration=function(t){return m(t,e.NANOS_PER_SECOND)},e.localTimeToNanoOfDay=function(t,n,r,i){t=(0,s.int)(t),n=(0,s.int)(n),r=(0,s.int)(r),i=(0,s.int)(i);var o=t.multiply(e.NANOS_PER_HOUR);return(o=(o=o.add(n.multiply(e.NANOS_PER_MINUTE))).add(r.multiply(e.NANOS_PER_SECOND))).add(i)},e.localDateTimeToEpochSecond=function(t,n,r,i,o,a,l){var u=c(t,n,r),h=function(t,n,r){t=(0,s.int)(t),n=(0,s.int)(n),r=(0,s.int)(r);var i=t.multiply(e.SECONDS_PER_HOUR);return i=i.add(n.multiply(e.SECONDS_PER_MINUTE)),i.add(r)}(i,o,a);return u.multiply(e.SECONDS_PER_DAY).add(h)},e.dateToEpochDay=c,e.durationToIsoString=function(t,n,r,i){var o=_(t),a=_(n),l=function(t,n){var r,i;t=(0,s.int)(t),n=(0,s.int)(n);var o=t.isNegative(),a=n.greaterThan(0);r=o&&a?t.equals(-1)?"-0":t.add(1).toString():t.toString();a&&(i=g(o?n.negate().add(2*e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND):n.add(e.NANOS_PER_SECOND).modulo(e.NANOS_PER_SECOND)));return null!=i?r+i:r}(r,i);return"P".concat(o,"M").concat(a,"DT").concat(l,"S")},e.timeToIsoString=function(t,e,n,r){var i=_(t,2),o=_(e,2),s=_(n,2),a=g(r);return"".concat(i,":").concat(o,":").concat(s).concat(a)},e.timeZoneOffsetToIsoString=function(t){if((t=(0,s.int)(t)).equals(0))return"Z";var n=t.isNegative();n&&(t=t.multiply(-1));var r=n?"-":"+",i=_(t.div(e.SECONDS_PER_HOUR),2),o=_(t.div(e.SECONDS_PER_MINUTE).modulo(e.MINUTES_PER_HOUR),2),a=t.modulo(e.SECONDS_PER_MINUTE),l=a.equals(0)?null:_(a,2);return null!=l?"".concat(r).concat(i,":").concat(o,":").concat(l):"".concat(r).concat(i,":").concat(o)},e.dateToIsoString=function(t,e,n){var r=function(t){var e=(0,s.int)(t);if(e.isNegative()||e.greaterThan(9999))return _(e,6,{usePositiveSign:!0});return _(e,4)}(t),i=_(e,2),o=_(n,2);return"".concat(r,"-").concat(i,"-").concat(o)},e.isoStringToStandardDate=function(t){return new Date(t)},e.toStandardDate=function(t){return new Date(t)},e.newDate=function(t){return new Date(t)},e.totalNanoseconds=function(t,n){return function(t,e){if(t instanceof s.default)return t.add(e);if("bigint"===typeof t)return t+BigInt(e);return t+e}(n=null!==n&&void 0!==n?n:0,t.getMilliseconds()*e.NANOS_PER_MILLISECOND)},e.timeZoneOffsetInSeconds=function(t){var n=t.getSeconds()>=t.getUTCSeconds()?t.getSeconds()-t.getUTCSeconds():t.getSeconds()-t.getUTCSeconds()+60,r=t.getTimezoneOffset();return 0===r?0+n:-1*r*e.SECONDS_PER_MINUTE+n},e.assertValidYear=function(t){return f(t,e.YEAR_RANGE,"Year")},e.assertValidMonth=function(t){return f(t,e.MONTH_OF_YEAR_RANGE,"Month")},e.assertValidDay=function(t){return f(t,e.DAY_OF_MONTH_RANGE,"Day")},e.assertValidHour=function(t){return f(t,e.HOUR_OF_DAY_RANGE,"Hour")},e.assertValidMinute=function(t){return f(t,e.MINUTE_OF_HOUR_RANGE,"Minute")},e.assertValidSecond=function(t){return f(t,e.SECOND_OF_MINUTE_RANGE,"Second")},e.assertValidNanosecond=function(t){return f(t,e.NANOSECOND_OF_SECOND_RANGE,"Nanosecond")};var h=new Map,d=function(t,e){return(0,a.newError)("".concat(e,' is expected to be a valid ZoneId but was: "').concat(t,'"'))};function f(t,e,n){if((0,l.assertNumberOrInteger)(t,n),!e.contains(t))throw(0,a.newError)("".concat(n," is expected to be in range ").concat(e.toString()," but was: ").concat(t.toString()));return t}function p(t,e){t=(0,s.int)(t),e=(0,s.int)(e);var n=t.div(e);return t.isPositive()!==e.isPositive()&&n.multiply(e).notEquals(t)&&(n=n.subtract(1)),n}function m(t,e){return t=(0,s.int)(t),e=(0,s.int)(e),t.subtract(p(t,e).multiply(e))}function g(t){return(t=(0,s.int)(t)).equals(0)?"":"."+_(t,9)}function _(t,e,n){var r=(t=(0,s.int)(t)).isNegative();r&&(t=t.negate());var i=t.toString();if(null!=e)for(;i.length<e;)i="0"+i;return r?"-"+i:!0===(null===n||void 0===n?void 0:n.usePositiveSign)?"+"+i:i}e.assertValidZoneId=function(t,e){var n=h.get(e);if(!0!==n){if(!1===n)throw d(e,t);try{Intl.DateTimeFormat(void 0,{timeZone:e}),h.set(e,!0)}catch(r){throw h.set(e,!1),d(e,t)}}},e.floorDiv=p,e.floorMod=m},7371:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},s=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},a=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionExecutor=void 0;var l=n(1421),u=n(9708);function c(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,a([t,e],s(n),!1))}function h(t){return clearTimeout(t)}var d=function(){function t(t,e,n,r,i){void 0===i&&(i={setTimeout:c,clearTimeout:h}),this._maxRetryTimeMs=f(t,3e4),this._initialRetryDelayMs=f(e,1e3),this._multiplier=f(n,2),this._jitterFactor=f(r,.2),this._setTimeout=i.setTimeout,this._clearTimeout=i.clearTimeout,this._inFlightTimeoutIds=[],this.pipelineBegin=!1,this.telemetryApi=u.TELEMETRY_APIS.MANAGED_TRANSACTION,this._verifyAfterConstruction()}return t.prototype.execute=function(t,e,n){var r=this,i={apiTransactionConfig:{api:this.telemetryApi,onTelemetrySuccess:function(){i.apiTransactionConfig=void 0}}};return new Promise((function(o,s){r._executeTransactionInsidePromise(t,e,o,s,n,i).catch(s)})).catch((function(o){var s=Date.now(),a=r._initialRetryDelayMs;return r._retryTransactionPromise(t,e,o,s,a,n,i)}))},t.prototype.close=function(){var t=this;this._inFlightTimeoutIds.forEach((function(e){return t._clearTimeout(e)})),this._inFlightTimeoutIds=[]},t.prototype._retryTransactionPromise=function(t,e,n,r,i,o,s){var a=this;return Date.now()-r>this._maxRetryTimeMs||!(0,l.isRetriableError)(n)?Promise.reject(n):new Promise((function(n,r){var l=a._computeDelayWithJitter(i),u=a._setTimeout((function(){a._inFlightTimeoutIds=a._inFlightTimeoutIds.filter((function(t){return t!==u})),a._executeTransactionInsidePromise(t,e,n,r,o,s).catch(r)}),l);a._inFlightTimeoutIds.push(u)})).catch((function(n){var l=i*a._multiplier;return a._retryTransactionPromise(t,e,n,r,l,o,s)}))},t.prototype._executeTransactionInsidePromise=function(t,e,n,s,a,l){return i(this,void 0,void 0,(function(){var i,u,c,h,d,f,p=this;return o(this,(function(o){switch(o.label){case 0:return o.trys.push([0,4,,5]),u=t(null!=(null===l||void 0===l?void 0:l.apiTransactionConfig)?r({},null===l||void 0===l?void 0:l.apiTransactionConfig):void 0),this.pipelineBegin?(c=u,[3,3]):[3,1];case 1:return[4,u];case 2:c=o.sent(),o.label=3;case 3:return i=c,[3,5];case 4:return h=o.sent(),s(h),[2];case 5:return d=null!==a&&void 0!==a?a:function(t){return t},f=d(i),this._safeExecuteTransactionWork(f,e).then((function(t){return p._handleTransactionWorkSuccess(t,i,n,s)})).catch((function(t){return p._handleTransactionWorkFailure(t,i,s)})),[2]}}))}))},t.prototype._safeExecuteTransactionWork=function(t,e){try{var n=e(t);return Promise.resolve(n)}catch(r){return Promise.reject(r)}},t.prototype._handleTransactionWorkSuccess=function(t,e,n,r){e.isOpen()?e.commit().then((function(){n(t)})).catch((function(t){r(t)})):n(t)},t.prototype._handleTransactionWorkFailure=function(t,e,n){e.isOpen()?e.rollback().catch((function(t){})).then((function(){return n(t)})).catch(n):n(t)},t.prototype._computeDelayWithJitter=function(t){var e=t*this._jitterFactor,n=t-e,r=t+e;return Math.random()*(r-n)+n},t.prototype._verifyAfterConstruction=function(){if(this._maxRetryTimeMs<0)throw(0,l.newError)("Max retry time should be >= 0: "+this._maxRetryTimeMs.toString());if(this._initialRetryDelayMs<0)throw(0,l.newError)("Initial retry delay should >= 0: "+this._initialRetryDelayMs.toString());if(this._multiplier<1)throw(0,l.newError)("Multiplier should be >= 1.0: "+this._multiplier.toString());if(this._jitterFactor<0||this._jitterFactor>1)throw(0,l.newError)("Jitter factor should be in [0.0, 1.0]: "+this._jitterFactor.toFixed())},t}();function f(t,e){return null!=t?t:e}e.TransactionExecutor=d},6980:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.TxConfig=void 0;var s=o(n(6021)),a=n(1421),l=n(905),u=function(){function t(t,e){!function(t){null!=t&&s.assertObject(t,"Transaction config")}(t),this.timeout=function(t,e){if(s.isObject(t)&&null!=t.timeout){s.assertNumberOrInteger(t.timeout,"Transaction timeout"),function(t){return"number"===typeof t.timeout&&!Number.isInteger(t.timeout)}(t)&&!0===(null===e||void 0===e?void 0:e.isInfoEnabled())&&(null===e||void 0===e||e.info("Transaction timeout expected to be an integer, got: ".concat(t.timeout,". The value will be rounded up.")));var n=(0,l.int)(t.timeout,{ceilFloat:!0});if(n.isNegative())throw(0,a.newError)("Transaction timeout should not be negative");return n}return null}(t,e),this.metadata=function(t){if(s.isObject(t)&&null!=t.metadata){var e=t.metadata;if(s.assertObject(e,"config.metadata"),0!==Object.keys(e).length)return e}return null}(t)}return t.empty=function(){return c},t.prototype.isEmpty=function(){return Object.values(this).every((function(t){return null==t}))},t}();e.TxConfig=u;var c=new u({})},8421:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.Url=e.formatIPv6Address=e.formatIPv4Address=e.defaultPortForScheme=e.parseDatabaseUrl=void 0;var o=n(6021),s=7687,a=7474,l=7473,u=function(t,e,n,r,i){this.scheme=t,this.host=e,this.port=n,this.hostAndPort=r,this.query=i};function c(t,e,n){if(""===(t=(null!==t&&void 0!==t?t:"").trim()))throw new Error("Illegal empty ".concat(e," in URL query '").concat(n,"'"));return t}function h(t){var e="["===t.charAt(0),n="]"===t.charAt(t.length-1);if(e||n){if(e&&n)return t;throw new Error("Illegal IPv6 address ".concat(t))}return"[".concat(t,"]")}function d(t){return"http"===t?a:"https"===t?l:s}e.Url=u,e.parseDatabaseUrl=function(t){var e;(0,o.assertString)(t,"URL");var n=function(t){if(t=t.trim(),!t.includes("://"))return{schemeMissing:!0,url:"none://".concat(t)};return{schemeMissing:!1,url:t}}(t),s=function(t){function e(t,e){var n=t.indexOf(e);return n>=0?[t.substring(0,n),t[n],t.substring(n+1)]:[t,"",""]}function n(t,e){var n=t.lastIndexOf(e);return n>=0?[t.substring(0,n),t[n],t.substring(n+1)]:["","",t]}function o(t,n,r){var i=e(t,n),o=e(i[2],r);return[o[0],o[2]]}function s(t){var r,s={};"@"===(r=n(t,"@"))[1]&&(s.userInfo=decodeURIComponent(r[0]),t=r[2]);var a=i(o(t,"[","]"),2),l=a[0],u=a[1];return""!==l?(s.host=l,r=e(u,":")):(r=e(t,":"),s.host=r[0]),":"===r[1]&&(s.port=r[2]),s}var a,l={};":"===(a=e(t,":"))[1]&&(l.scheme=decodeURIComponent(a[0]),t=a[2]);"#"===(a=e(t,"#"))[1]&&(l.fragment=decodeURIComponent(a[2]),t=a[0]);"?"===(a=e(t,"?"))[1]&&(l.query=a[2],t=a[0]);t.startsWith("//")?(a=e(t.substr(2),"/"),(l=r(r({},l),s(a[0]))).path=a[1]+a[2]):l.path=t;return l}(n.url),a=n.schemeMissing?null:function(t){if(null!=t)return":"===(t=t.trim()).charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t;return null}(s.scheme),l=function(t){if(null==t)throw new Error("Unable to extract host from null or undefined URL");return t.trim()}(s.host),f=function(t){if(""===t||null==t)throw new Error("Illegal host ".concat(t));var e=t.includes(":");return e?h(t):t}(l),p=function(t,e){var n="string"===typeof t?parseInt(t,10):t;return null==n||isNaN(n)?d(e):n}(s.port,a),m="".concat(f,":").concat(p),g=function(t,e){var n=null!=t?function(t){t=(null!==t&&void 0!==t?t:"").trim(),"?"===(null===t||void 0===t?void 0:t.charAt(0))&&(t=t.substring(1,t.length));return t}(t):null,r={};null!=n&&n.split("&").forEach((function(t){var n=t.split("=");if(2!==n.length)throw new Error("Invalid parameters: '".concat(n.toString(),"' in URL '").concat(e,"'."));var i=c(n[0],"key",e),o=c(n[1],"value",e);if(void 0!==r[i])throw new Error("Duplicated query parameters with key '".concat(i,"' in URL '").concat(e,"'"));r[i]=o}));return r}(null!==(e=s.query)&&void 0!==e?e:function(t){if("string"!==typeof t)return null;var e=i(t.split("?"),2),n=e[1];return n}(s.resourceName),t);return new u(a,l,p,m,g)},e.formatIPv4Address=function(t,e){return"".concat(t,":").concat(e)},e.formatIPv6Address=function(t,e){var n=h(t);return"".concat(n,":").concat(e)},e.defaultPortForScheme=d},6021:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},s=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0}),e.ENCRYPTION_OFF=e.ENCRYPTION_ON=e.equals=e.validateQueryAndParameters=e.toNumber=e.assertValidDate=e.assertNumberOrInteger=e.assertNumber=e.assertString=e.assertObject=e.isString=e.isObject=e.isEmptyObjectOrNull=void 0;var a=o(n(905)),l=n(961);e.ENCRYPTION_ON="ENCRYPTION_ON";function u(t){return"object"===typeof t&&!Array.isArray(t)&&null!==t}function c(t,e){if(!h(t))throw new TypeError((0,l.stringify)(e)+" expected to be string but was: "+(0,l.stringify)(t));return t}function h(t){return"[object String]"===Object.prototype.toString.call(t)}e.ENCRYPTION_OFF="ENCRYPTION_OFF",e.isEmptyObjectOrNull=function(t){if(null===t)return!0;if(!u(t))return!1;for(var e in t)if(void 0!==t[e])return!1;return!0},e.isObject=u,e.validateQueryAndParameters=function(t,e,n){var r,i,o="",s=null!==e&&void 0!==e?e:{},a=null!==(r=null===n||void 0===n?void 0:n.skipAsserts)&&void 0!==r&&r;return"string"===typeof t?o=t:t instanceof String?o=t.toString():"object"===typeof t&&null!=t.text&&(o=t.text,s=null!==(i=t.parameters)&&void 0!==i?i:{}),a||(function(t){if(c(t,"Cypher query"),0===t.trim().length)throw new TypeError("Cypher query is expected to be a non-empty string.")}(o),function(t){if(!u(t)){var e=null!=t.constructor?" "+t.constructor.name:"";throw new TypeError("Query parameters are expected to either be undefined/null or an object, given:".concat(e," ").concat(JSON.stringify(t)))}}(s)),{validatedQuery:o,params:s}},e.assertObject=function(t,e){if(!u(t))throw new TypeError(e+" expected to be an object but was: "+(0,l.stringify)(t));return t},e.assertString=c,e.assertNumber=function(t,e){if("number"!==typeof t)throw new TypeError(e+" expected to be a number but was: "+(0,l.stringify)(t));return t},e.assertNumberOrInteger=function(t,e){if("number"!==typeof t&&"bigint"!==typeof t&&!(0,a.isInt)(t))throw new TypeError(e+" expected to be either a number or an Integer object but was: "+(0,l.stringify)(t));return t},e.assertValidDate=function(t,e){if("[object Date]"!==Object.prototype.toString.call(t))throw new TypeError(e+" expected to be a standard JavaScript Date but was: "+(0,l.stringify)(t));if(Number.isNaN(t.getTime()))throw new TypeError(e+" expected to be valid JavaScript Date but its time was NaN: "+(0,l.stringify)(t));return t},e.isString=h,e.equals=function t(e,n){var r,i;if(e===n)return!0;if(null===e||null===n)return!1;if("object"===typeof e&&"object"===typeof n){var o=Object.keys(e),a=Object.keys(n);if(o.length!==a.length)return!1;try{for(var l=s(o),u=l.next();!u.done;u=l.next()){var c=u.value;if(!t(e[c],n[c]))return!1}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return!0}return!1},e.toNumber=function(t){return t instanceof a.default?t.toNumber():"bigint"===typeof t?(0,a.int)(t).toNumber():t}},961:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stringify=void 0;var r=n(4595);e.stringify=function(t,e){return JSON.stringify(t,(function(t,n){return(0,r.isBrokenObject)(n)?{__isBrokenObject__:!0,__reason__:(0,r.getBrokenObjectReason)(n)}:"bigint"===typeof n?"".concat(n,"n"):!0!==(null===e||void 0===e?void 0:e.useCustomToString)||"object"!==typeof n||Array.isArray(n)||"function"!==typeof n.toString||n.toString===Object.prototype.toString?n:null===n||void 0===n?void 0:n.toString()}))}},9579:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationFilterMinimumSeverityLevel=void 0;var n={OFF:"OFF",WARNING:"WARNING",INFORMATION:"INFORMATION"};e.notificationFilterMinimumSeverityLevel=n,Object.freeze(n);var r={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",DEPRECATION:"DEPRECATION",GENERIC:"GENERIC",SCHEMA:"SCHEMA"};e.notificationFilterDisabledCategory=r,Object.freeze(r);var i=r;e.notificationFilterDisabledClassification=i;var o=function(){throw this.minimumSeverityLevel=void 0,this.disabledCategories=void 0,this.disabledClassifications=void 0,new Error("Not implemented")};e.default=o},6200:function(t,e,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&i(e,t,n);return o(e,t),e},a=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},l=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.buildNotificationsFromMetadata=e.buildGqlStatusObjectFromMetadata=e.polyfillNotification=e.polyfillGqlStatusObject=e.GqlStatusObject=e.Notification=e.notificationClassification=e.notificationCategory=e.notificationSeverityLevel=void 0;var u=s(n(961)),c=n(1397),h={WARNING:{gql_status:"01N42",status_description:"warn: unknown warning"},NO_DATA:{gql_status:"02N42",status_description:"note: no data - unknown subcondition"},INFORMATION:{gql_status:"03N42",status_description:"info: unknown notification"},ERROR:{gql_status:"50N42",status_description:"error: general processing exception - unknown error"}},d={WARNING:"WARNING",INFORMATION:"INFORMATION",UNKNOWN:"UNKNOWN"};e.notificationSeverityLevel=d,Object.freeze(d);var f=Object.values(d),p={HINT:"HINT",UNRECOGNIZED:"UNRECOGNIZED",UNSUPPORTED:"UNSUPPORTED",PERFORMANCE:"PERFORMANCE",DEPRECATION:"DEPRECATION",TOPOLOGY:"TOPOLOGY",SECURITY:"SECURITY",GENERIC:"GENERIC",SCHEMA:"SCHEMA",UNKNOWN:"UNKNOWN"};e.notificationCategory=p,Object.freeze(p);var m=Object.values(p),g=p;e.notificationClassification=g;var _=function(t){this.code=t.code,this.title=t.title,this.description=t.description,this.severity=t.severity,this.position=C(t.position),this.severityLevel=k(t.severity),this.rawSeverityLevel=t.severity,this.category=O(t.category),this.rawCategory=t.category};e.Notification=_;var y=function(){function t(t){var e;this.gqlStatus=t.gql_status,this.statusDescription=t.status_description,this.diagnosticRecord=null!==(e=t.diagnostic_record)&&void 0!==e?e:{},this.position=null!=this.diagnosticRecord._position?C(this.diagnosticRecord._position):void 0,this.severity=k(this.diagnosticRecord._severity),this.rawSeverity=this.diagnosticRecord._severity,this.classification=O(this.diagnosticRecord._classification),this.rawClassification=this.diagnosticRecord._classification,this.isNotification=null!=t.neo4j_code,Object.freeze(this)}return Object.defineProperty(t.prototype,"diagnosticRecordAsJsonString",{get:function(){return u.stringify(this.diagnosticRecord,{useCustomToString:!0})},enumerable:!1,configurable:!0}),t}();function v(t){var e,n,r;if(null!=t.neo4j_code)return new _({code:t.neo4j_code,title:t.title,description:t.description,severity:null===(e=t.diagnostic_record)||void 0===e?void 0:e._severity,category:null===(n=t.diagnostic_record)||void 0===n?void 0:n._classification,position:null===(r=t.diagnostic_record)||void 0===r?void 0:r._position})}function b(t){var e,n=t.severity===d.WARNING?h.WARNING:h.INFORMATION,i={gql_status:n.gql_status,status_description:null!==(e=t.description)&&void 0!==e?e:n.status_description,neo4j_code:t.code,title:t.title,diagnostic_record:r({},w)};return null!=t.severity&&(i.diagnostic_record._severity=t.severity),null!=t.category&&(i.diagnostic_record._classification=t.category),null!=t.position&&(i.diagnostic_record._position=t.position),new y(i)}e.GqlStatusObject=y,e.polyfillNotification=v,e.polyfillGqlStatusObject=b;var w={OPERATION:"",OPERATION_CODE:"0",CURRENT_SCHEMA:"/"};Object.freeze(w);var S={SUCCESS:new y({gql_status:"00000",status_description:"note: successful completion",diagnostic_record:w}),NO_DATA:new y({gql_status:"02000",status_description:"note: no data",diagnostic_record:w}),NO_DATA_UNKNOWN_SUBCONDITION:new y(r(r({},h.NO_DATA),{diagnostic_record:w})),OMITTED_RESULT:new y({gql_status:"00001",status_description:"note: successful completion - omitted result",diagnostic_record:w})};Object.freeze(S),e.buildGqlStatusObjectFromMetadata=function(t){var e,n;if(null!=t.statuses)return t.statuses.map((function(t){return new y(t)}));var r,i=!0===(null===(r=t.stream_summary)||void 0===r?void 0:r.have_records_streamed)?S.SUCCESS:!1===(null===r||void 0===r?void 0:r.has_keys)?S.OMITTED_RESULT:!0===(null===r||void 0===r?void 0:r.pulled)?S.NO_DATA:S.NO_DATA_UNKNOWN_SUBCONDITION;return l([i],a(null!==(n=null===(e=t.notifications)||void 0===e?void 0:e.map(b))&&void 0!==n?n:[]),!1).sort((function(t,e){return E(t)-E(e)}))};var x=Object.freeze({"02":0,"01":1,"00":2});function E(t){var e,n,r=null===(e=t.gqlStatus)||void 0===e?void 0:e.slice(0,2);return null!==(n=x[r])&&void 0!==n?n:9999}function C(t){return null==t?{}:{offset:c.util.toNumber(t.offset),line:c.util.toNumber(t.line),column:c.util.toNumber(t.column)}}function k(t){return f.includes(t)?t:d.UNKNOWN}function O(t){return m.includes(t)?t:g.UNKNOWN}e.buildNotificationsFromMetadata=function(t){return null!=t.notifications?t.notifications.map((function(t){return new _(t)})):null!=t.statuses?t.statuses.map(v).filter((function(t){return null!=t})):[]},e.default=_},7586:function(t,e,n){"use strict";var r=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},i=this&&this.__values||function(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(e,"__esModule",{value:!0});var s=n(1421);var a=function(){function t(t,e,n){this.keys=t,this.length=t.length,this._fields=e,this._fieldLookup=null!==n&&void 0!==n?n:function(t){var e={};return t.forEach((function(t,n){e[t]=n})),e}(t)}return t.prototype.forEach=function(t){var e,n;try{for(var r=i(this.entries()),s=r.next();!s.done;s=r.next()){var a=o(s.value,2),l=a[0];t(a[1],l,this)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.map=function(t){var e,n,r=[];try{for(var s=i(this.entries()),a=s.next();!a.done;a=s.next()){var l=o(a.value,2),u=l[0],c=l[1];r.push(t(c,u,this))}}catch(h){e={error:h}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return r},t.prototype.entries=function(){var t;return r(this,(function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,[this.keys[t],this._fields[t]]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}}))},t.prototype.values=function(){var t;return r(this,(function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}}))},t.prototype[Symbol.iterator]=function(){var t;return r(this,(function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<this.keys.length?[4,this._fields[t]]:[3,4];case 2:e.sent(),e.label=3;case 3:return t++,[3,1];case 4:return[2]}}))},t.prototype.toObject=function(){var t,e,n={};try{for(var r=i(this.entries()),s=r.next();!s.done;s=r.next()){var a=o(s.value,2),l=a[0],u=a[1];n[l]=u}}catch(c){t={error:c}}finally{try{s&&!s.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.get=function(t){var e;if("number"!==typeof t){if(void 0===(e=this._fieldLookup[t]))throw(0,s.newError)("This record has no field with key '".concat(t.toString(),"', available keys are: [")+this.keys.toString()+"].")}else e=t;if(e>this._fields.length-1||e<0)throw(0,s.newError)("This record has no field with index '"+e.toString()+"'. Remember that indexes start at `0`, and make sure your query returns records in the shape you meant it to.");return this._fields[e]},t.prototype.has=function(t){return"number"===typeof t?t>=0&&t<this._fields.length:void 0!==this._fieldLookup[t]},t}();e.default=a},2387:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n){this.keys=t,this.records=e,this.summary=n};e.default=n},167:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Stats=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.ServerInfo=e.queryType=void 0;var r=n(1397),i=n(6200),o=function(){function t(t,e,n,r){var o,l,h;this.query={text:t,parameters:e},this.queryType=n.type,this.counters=new u(null!==(o=n.stats)&&void 0!==o?o:{}),this.updateStatistics=this.counters,this.plan=(null!=n.plan||null!=n.profile)&&new s(null!==(l=n.plan)&&void 0!==l?l:n.profile),this.profile=null!=n.profile&&new a(n.profile),this.notifications=(0,i.buildNotificationsFromMetadata)(n),this.gqlStatusObjects=(0,i.buildGqlStatusObjectFromMetadata)(n),this.server=new c(n.server,r),this.resultConsumedAfter=n.result_consumed_after,this.resultAvailableAfter=n.result_available_after,this.database={name:null!==(h=n.db)&&void 0!==h?h:null}}return t.prototype.hasPlan=function(){return this.plan instanceof s},t.prototype.hasProfile=function(){return this.profile instanceof a},t}(),s=function t(e){this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.children=null!=e.children?e.children.map((function(e){return new t(e)})):[]};e.Plan=s;var a=function(){function t(e){this.operatorType=e.operatorType,this.identifiers=e.identifiers,this.arguments=e.args,this.dbHits=h("dbHits",e),this.rows=h("rows",e),this.pageCacheMisses=h("pageCacheMisses",e),this.pageCacheHits=h("pageCacheHits",e),this.pageCacheHitRatio=h("pageCacheHitRatio",e),this.time=h("time",e),this.children=null!=e.children?e.children.map((function(e){return new t(e)})):[]}return t.prototype.hasPageCacheStats=function(){return this.pageCacheMisses>0||this.pageCacheHits>0||this.pageCacheHitRatio>0},t}();e.ProfiledPlan=a;var l=function(){this.nodesCreated=0,this.nodesDeleted=0,this.relationshipsCreated=0,this.relationshipsDeleted=0,this.propertiesSet=0,this.labelsAdded=0,this.labelsRemoved=0,this.indexesAdded=0,this.indexesRemoved=0,this.constraintsAdded=0,this.constraintsRemoved=0};e.Stats=l;var u=function(){function t(t){var e=this;this._stats={nodesCreated:0,nodesDeleted:0,relationshipsCreated:0,relationshipsDeleted:0,propertiesSet:0,labelsAdded:0,labelsRemoved:0,indexesAdded:0,indexesRemoved:0,constraintsAdded:0,constraintsRemoved:0},this._systemUpdates=0,Object.keys(t).forEach((function(n){var i=n.replace(/(-\w)/g,(function(t){return t[1].toUpperCase()}));i in e._stats?e._stats[i]=r.util.toNumber(t[n]):"systemUpdates"===i?e._systemUpdates=r.util.toNumber(t[n]):"containsSystemUpdates"===i?e._containsSystemUpdates=t[n]:"containsUpdates"===i&&(e._containsUpdates=t[n])})),this._stats=Object.freeze(this._stats)}return t.prototype.containsUpdates=function(){var t=this;return void 0!==this._containsUpdates?this._containsUpdates:Object.keys(this._stats).reduce((function(e,n){return e+t._stats[n]}),0)>0},t.prototype.updates=function(){return this._stats},t.prototype.containsSystemUpdates=function(){return void 0!==this._containsSystemUpdates?this._containsSystemUpdates:this._systemUpdates>0},t.prototype.systemUpdates=function(){return this._systemUpdates},t}();e.QueryStatistics=u;var c=function(t,e){null!=t&&(this.address=t.address,this.agent=t.version),this.protocolVersion=e};function h(t,e,n){if(void 0===n&&(n=0),!1!==e&&t in e){var i=e[t];return r.util.toNumber(i)}return n}e.ServerInfo=c;e.queryType={READ_ONLY:"r",READ_WRITE:"rw",WRITE_ONLY:"w",SCHEMA_WRITE:"s"},e.default=o},4807:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=o(n(2387)),a=n(1421),l=new(function(){function t(){}return t.prototype.eagerResultTransformer=function(){return u},t.prototype.eager=function(){return u},t.prototype.mappedResultTransformer=function(t){return c(t)},t.prototype.mapped=function(t){return c(t)},t.prototype.first=function(){return h},t.prototype.summary=function(){return d},t}());function u(t){return r(this,void 0,void 0,(function(){var e,n,r,o;return i(this,(function(i){switch(i.label){case 0:return[4,t];case 1:return e=i.sent(),n=e.summary,r=e.records,[4,t.keys()];case 2:return o=i.sent(),[2,new s.default(o,r,n)]}}))}))}function c(t){var e=this;if(null==t||null==t.collect&&null==t.map)throw(0,a.newError)("Requires a map or/and a collect functions.");return function(n){return r(e,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e,r){var i={records:[],keys:[]};n.subscribe({onKeys:function(t){i.keys=t},onNext:function(e){if(null!=t.map){var n=t.map(e);void 0!==n&&i.records.push(n)}else i.records.push(e)},onCompleted:function(n){if(null!=t.collect)e(t.collect(i.records,n,i.keys));else{var r={records:i.records,summary:n,keys:i.keys};e(r)}},onError:function(t){r(t)}})}))];case 1:return[2,e.sent()]}}))}))}}function h(t){return r(this,void 0,void 0,(function(){var e,n,r,o;return i(this,(function(i){switch(i.label){case 0:return[4,(e=t[Symbol.asyncIterator]()).next()];case 1:n=i.sent(),r=n.value,o=n.done,i.label=2;case 2:return i.trys.push([2,,3,6]),!0===o?[2,void 0]:[2,r];case 3:return null==e.return?[3,5]:[4,e.return()];case 4:i.sent(),i.label=5;case 5:return[7];case 6:return[2]}}))}))}function d(t){return r(this,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,t.summary()];case 1:return[2,e.sent()]}}))}))}Object.freeze(l),e.default=l},8958:function(t,e,n){"use strict";var r,i=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},o=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=s(n(167)),l=n(1397),u=n(1421),c=l.connectionHolder.EMPTY_CONNECTION_HOLDER,h=function(t){console.log("Uncaught error when processing result: "+t)},d=function(t){},f=function(t){},p=function(){function t(t,e,n,i,o){void 0===o&&(o={high:Number.MAX_VALUE,low:Number.MAX_VALUE}),this[r]="Result",this._stack=function(){var t=new Error("");if(null!=t.stack)return t.stack.replace(/^Error(\n\r)*/,"");return null}(),this._streamObserverPromise=t,this._p=null,this._query=e,this._parameters=null!==n&&void 0!==n?n:{},this._connectionHolder=null!==i&&void 0!==i?i:c,this._keys=null,this._summary=null,this._error=null,this._watermarks=o}return t.prototype.keys=function(){var t=this;return null!==this._keys?Promise.resolve(this._keys):null!==this._error?Promise.reject(this._error):new Promise((function(e,n){t._streamObserverPromise.then((function(r){return r.subscribe(t._decorateObserver({onKeys:function(t){return e(t)},onError:function(t){return n(t)}}))})).catch(n)}))},t.prototype.summary=function(){var t=this;return null!==this._summary?Promise.resolve(this._summary):null!==this._error?Promise.reject(this._error):new Promise((function(e,n){t._streamObserverPromise.then((function(r){r.cancel(),r.subscribe(t._decorateObserver({onCompleted:function(t){return e(t)},onError:function(t){return n(t)}}))})).catch(n)}))},t.prototype._getOrCreatePromise=function(){var t=this;return null==this._p&&(this._p=new Promise((function(e,n){var r=[],i={onNext:function(t){r.push(t)},onCompleted:function(t){e({records:r,summary:t})},onError:function(t){n(t)}};t.subscribe(i)}))),this._p},t.prototype[Symbol.asyncIterator]=function(){var t=this;if(!this.isOpen()){var e=(0,u.newError)("Result is already consumed");return{next:function(){return Promise.reject(e)},peek:function(){return Promise.reject(e)}}}var n={paused:!0,firstRun:!0,finished:!1},r=function(){var e,r;if(null!=n.streaming){var i=null!==(r=null===(e=n.queuedObserver)||void 0===e?void 0:e.size)&&void 0!==r?r:0,o=i>=t._watermarks.high,s=i<=t._watermarks.low;o&&!n.paused?(n.paused=!0,n.streaming.pause()):(s&&n.paused||n.firstRun&&!o)&&(n.firstRun=!1,n.paused=!1,n.streaming.resume())}},s=function(){return i(t,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return void 0!==n.queuedObserver?[3,2]:(n.queuedObserver=this._createQueuedResultObserver(r),t=n,[4,this._subscribe(n.queuedObserver,!0).catch((function(){}))]);case 1:t.streaming=e.sent(),r(),e.label=2;case 2:return[2,n.queuedObserver]}}))}))},a=function(t){if(void 0===t)throw(0,u.newError)("InvalidState: Result stream finished without Summary",u.PROTOCOL_ERROR);return!0};return{next:function(){return i(t,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,s()];case 1:return[4,e.sent().dequeue()];case 2:return!0===(t=e.sent()).done&&(n.finished=t.done,n.summary=t.value),[2,t]}}))}))},return:function(e){return i(t,void 0,void 0,(function(){var t,r;return o(this,(function(i){switch(i.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:null!==e&&void 0!==e?e:n.summary}]:(null===(r=n.streaming)||void 0===r||r.cancel(),[4,s()]);case 1:return[4,i.sent().dequeueUntilDone()];case 2:return t=i.sent(),n.finished=!0,t.value=null!==e&&void 0!==e?e:t.value,n.summary=t.value,[2,t]}}))}))},peek:function(){return i(t,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return n.finished&&a(n.summary)?[2,{done:!0,value:n.summary}]:[4,s()];case 1:return[4,t.sent().head()];case 2:return[2,t.sent()]}}))}))}}},t.prototype.then=function(t,e){return this._getOrCreatePromise().then(t,e)},t.prototype.catch=function(t){return this._getOrCreatePromise().catch(t)},t.prototype.finally=function(t){return this._getOrCreatePromise().finally(t)},t.prototype.subscribe=function(t){this._subscribe(t).catch((function(){}))},t.prototype.isOpen=function(){return null===this._summary&&null===this._error},t.prototype._subscribe=function(t,e){void 0===e&&(e=!1);var n=this._decorateObserver(t);return this._streamObserverPromise.then((function(t){return e&&t.pause(),t.subscribe(n),t})).catch((function(t){return null!=n.onError&&n.onError(t),Promise.reject(t)}))},t.prototype._decorateObserver=function(t){var e,n,r,i=this,o=null!==(e=t.onCompleted)&&void 0!==e?e:d,s=null!==(n=t.onError)&&void 0!==n?n:h,a=null!==(r=t.onKeys)&&void 0!==r?r:f;return{onNext:null!=t.onNext?t.onNext.bind(t):void 0,onKeys:function(e){return i._keys=e,a.call(t,e)},onCompleted:function(e){i._releaseConnectionAndGetSummary(e).then((function(e){return null!==i._summary?o.call(t,i._summary):(i._summary=e,o.call(t,e))})).catch(s)},onError:function(e){i._connectionHolder.releaseConnection().then((function(){!function(t,e){null!=e&&(t.stack=t.toString()+"\n"+e)}(e,i._stack),i._error=e,s.call(t,e)})).catch(s)}}},t.prototype._cancel=function(){null===this._summary&&null===this._error&&this._streamObserverPromise.then((function(t){return t.cancel()})).catch((function(){}))},t.prototype._releaseConnectionAndGetSummary=function(t){var e=l.util.validateQueryAndParameters(this._query,this._parameters,{skipAsserts:!0}),n=e.validatedQuery,r=e.params,i=this._connectionHolder;return i.getConnection().then((function(t){return i.releaseConnection().then((function(){return null===t||void 0===t?void 0:t.getProtocolVersion()}))}),(function(t){})).then((function(e){return new a.default(n,r,t,e)}))},t.prototype._createQueuedResultObserver=function(t){var e=this;function n(){var t={};return t.promise=new Promise((function(e,n){t.resolve=e,t.reject=n})),t}function r(t){return t instanceof Error}function s(){var e;return i(this,void 0,void 0,(function(){var i;return o(this,(function(o){switch(o.label){case 0:if(a.length>0){if(i=null!==(e=a.shift())&&void 0!==e?e:(0,u.newError)("Unexpected empty buffer",u.PROTOCOL_ERROR),t(),r(i))throw i;return[2,i]}return l.resolvable=n(),[4,l.resolvable.promise];case 1:return[2,o.sent()]}}))}))}var a=[],l={resolvable:null},c={onNext:function(t){c._push({done:!1,value:t})},onCompleted:function(t){c._push({done:!0,value:t})},onError:function(t){c._push(t)},_push:function(e){if(null!==l.resolvable){var n=l.resolvable;l.resolvable=null,r(e)?n.reject(e):n.resolve(e)}else a.push(e),t()},dequeue:s,dequeueUntilDone:function(){return i(e,void 0,void 0,(function(){var t;return o(this,(function(e){switch(e.label){case 0:return[4,s()];case 1:return!0===(t=e.sent()).done?[2,t]:[3,0];case 2:return[2]}}))}))},head:function(){return i(e,void 0,void 0,(function(){var e,i;return o(this,(function(o){switch(o.label){case 0:if(a.length>0){if(r(e=a[0]))throw e;return[2,e]}l.resolvable=n(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,l.resolvable.promise];case 2:return e=o.sent(),a.unshift(e),[2,e];case 3:throw i=o.sent(),a.unshift(i),i;case 4:return t(),[7];case 5:return[2]}}))}))},get size(){return a.length}};return c},t}();r=Symbol.toStringTag,e.default=p},9519:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},o=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s},s=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))},a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var l=n(8890),u=n(6021),c=n(9708),h=n(1421),d=a(n(8958)),f=n(6052),p=n(7371),m=n(1036),g=n(6980),_=a(n(9919)),y=a(n(5039)),v=function(){function t(t){var e=t.mode,n=t.connectionProvider,r=t.bookmarks,i=t.database,o=t.config,s=t.reactive,a=t.fetchSize,l=t.impersonatedUser,u=t.bookmarkManager,h=t.notificationFilter,d=t.auth,g=t.log;this._mode=e,this._database=i,this._reactive=s,this._fetchSize=a,this._onDatabaseNameResolved=this._onDatabaseNameResolved.bind(this),this._getConnectionAcquistionBookmarks=this._getConnectionAcquistionBookmarks.bind(this),this._readConnectionHolder=new f.ConnectionHolder({mode:c.ACCESS_MODE_READ,auth:d,database:i,bookmarks:r,connectionProvider:n,impersonatedUser:l,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:g}),this._writeConnectionHolder=new f.ConnectionHolder({mode:c.ACCESS_MODE_WRITE,auth:d,database:i,bookmarks:r,connectionProvider:n,impersonatedUser:l,onDatabaseNameResolved:this._onDatabaseNameResolved,getConnectionAcquistionBookmarks:this._getConnectionAcquistionBookmarks,log:g}),this._open=!0,this._hasTx=!1,this._impersonatedUser=l,this._lastBookmarks=null!==r&&void 0!==r?r:m.Bookmarks.empty(),this._configuredBookmarks=this._lastBookmarks,this._transactionExecutor=function(t){var e,n=null!==(e=null===t||void 0===t?void 0:t.maxTransactionRetryTime)&&void 0!==e?e:null;return new p.TransactionExecutor(n)}(o),this._databaseNameResolved=""!==this._database;var _=this._calculateWatermaks();this._lowRecordWatermark=_.low,this._highRecordWatermark=_.high,this._results=[],this._bookmarkManager=u,this._notificationFilter=h,this._log=g}return t.prototype.run=function(t,e,n){var o=this,s=(0,u.validateQueryAndParameters)(t,e),a=s.validatedQuery,l=s.params,h=null!=n?new g.TxConfig(n,this._log):g.TxConfig.empty(),d=this._run(a,l,(function(t){return r(o,void 0,void 0,(function(){var e,n=this;return i(this,(function(r){switch(r.label){case 0:return[4,this._bookmarks()];case 1:return e=r.sent(),this._assertSessionIsOpen(),[2,t.run(a,l,{bookmarks:e,txConfig:h,mode:this._mode,database:this._database,apiTelemetryConfig:{api:c.TELEMETRY_APIS.AUTO_COMMIT_TRANSACTION},impersonatedUser:this._impersonatedUser,afterComplete:function(t){return n._onCompleteCallback(t,e)},reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter})]}}))}))}));return this._results.push(d),d},t.prototype._run=function(t,e,n){var r=this._acquireAndConsumeConnection(n),i=r.connectionHolder,o=r.resultPromise.catch((function(t){return Promise.resolve(new l.FailedObserver({error:t}))})),s={high:this._highRecordWatermark,low:this._lowRecordWatermark};return new d.default(o,t,e,i,s)},t.prototype._acquireConnection=function(t){var e=this,n=this._acquireAndConsumeConnection(t),o=n.connectionHolder;return n.resultPromise.then((function(t){return r(e,void 0,void 0,(function(){return i(this,(function(e){switch(e.label){case 0:return[4,o.releaseConnection()];case 1:return e.sent(),[2,t]}}))}))}))},t.prototype._acquireAndConsumeConnection=function(t){var e,n=this._connectionHolderWithMode(this._mode);return e=this._open?!this._hasTx&&n.initializeConnection()?n.getConnection().then((function(e){return t(e)})):Promise.reject((0,h.newError)("Queries cannot be run directly on a session with an open transaction; either run from within the transaction or use a different session.")):Promise.reject((0,h.newError)("Cannot run query in a closed session.")),{connectionHolder:n,resultPromise:e}},t.prototype.beginTransaction=function(t){var e=t,n=g.TxConfig.empty();return null!=e&&(n=new g.TxConfig(e,this._log)),this._beginTransaction(this._mode,n,{api:c.TELEMETRY_APIS.UNMANAGED_TRANSACTION})},t.prototype._beginTransaction=function(e,n,r){var i=this;if(!this._open)throw(0,h.newError)("Cannot begin a transaction on a closed session.");if(this._hasTx)throw(0,h.newError)("You cannot begin a transaction on a session with an open transaction; either run from within the transaction or use a different session.");var o=t._validateSessionMode(e),s=this._connectionHolderWithMode(o);s.initializeConnection(),this._hasTx=!0;var a=new _.default({connectionHolder:s,impersonatedUser:this._impersonatedUser,onClose:this._transactionClosed.bind(this),onBookmarks:function(t,e,n){return i._updateBookmarks(t,e,n)},onConnection:this._assertSessionIsOpen.bind(this),reactive:this._reactive,fetchSize:this._fetchSize,lowRecordWatermark:this._lowRecordWatermark,highRecordWatermark:this._highRecordWatermark,notificationFilter:this._notificationFilter,apiTelemetryConfig:r});return a._begin((function(){return i._bookmarks()}),n),a},t.prototype._assertSessionIsOpen=function(){if(!this._open)throw(0,h.newError)("You cannot run more transactions on a closed session.")},t.prototype._transactionClosed=function(){this._hasTx=!1},t.prototype.lastBookmark=function(){return this.lastBookmarks()},t.prototype.lastBookmarks=function(){return this._lastBookmarks.values()},t.prototype._bookmarks=function(){var t;return r(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return[4,null===(t=this._bookmarkManager)||void 0===t?void 0:t.getBookmarks()];case 1:return void 0===(e=n.sent())?[2,this._lastBookmarks]:[2,new m.Bookmarks(s(s([],o(e),!1),o(this._configuredBookmarks),!1))]}}))}))},t.prototype.readTransaction=function(t,e){var n=new g.TxConfig(e,this._log);return this._runTransaction(c.ACCESS_MODE_READ,n,t)},t.prototype.writeTransaction=function(t,e){var n=new g.TxConfig(e,this._log);return this._runTransaction(c.ACCESS_MODE_WRITE,n,t)},t.prototype._runTransaction=function(t,e,n){var r=this;return this._transactionExecutor.execute((function(n){return r._beginTransaction(t,e,n)}),n)},t.prototype.executeRead=function(t,e){var n=new g.TxConfig(e,this._log);return this._executeInTransaction(c.ACCESS_MODE_READ,n,t)},t.prototype.executeWrite=function(t,e){var n=new g.TxConfig(e,this._log);return this._executeInTransaction(c.ACCESS_MODE_WRITE,n,t)},t.prototype._executeInTransaction=function(t,e,n){var r=this;return this._transactionExecutor.execute((function(n){return r._beginTransaction(t,e,n)}),n,y.default.fromTransaction)},t.prototype._onDatabaseNameResolved=function(t){if(!this._databaseNameResolved){var e=null!==t&&void 0!==t?t:"";this._database=e,this._readConnectionHolder.setDatabase(e),this._writeConnectionHolder.setDatabase(e),this._databaseNameResolved=!0}},t.prototype._getConnectionAcquistionBookmarks=function(){var t;return r(this,void 0,void 0,(function(){var e;return i(this,(function(n){switch(n.label){case 0:return[4,null===(t=this._bookmarkManager)||void 0===t?void 0:t.getBookmarks()];case 1:return void 0===(e=n.sent())?[2,this._lastBookmarks]:[2,new m.Bookmarks(s(s([],o(this._configuredBookmarks),!1),o(e),!1))]}}))}))},t.prototype._updateBookmarks=function(t,e,n){var r,i,o;null==t||t.isEmpty()||(null===(r=this._bookmarkManager)||void 0===r||r.updateBookmarks(null!==(i=null===e||void 0===e?void 0:e.values())&&void 0!==i?i:[],null!==(o=null===t||void 0===t?void 0:t.values())&&void 0!==o?o:[]).catch((function(){})),this._lastBookmarks=t,this._configuredBookmarks=m.Bookmarks.empty())},t.prototype.close=function(){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this._open?(this._open=!1,this._results.forEach((function(t){return t._cancel()})),this._transactionExecutor.close(),[4,this._readConnectionHolder.close(this._hasTx)]):[3,3];case 1:return t.sent(),[4,this._writeConnectionHolder.close(this._hasTx)];case 2:t.sent(),t.label=3;case 3:return[2]}}))}))},t.prototype[Symbol.asyncDispose]=function(){return this.close()},t.prototype._connectionHolderWithMode=function(t){if(t===c.ACCESS_MODE_READ)return this._readConnectionHolder;if(t===c.ACCESS_MODE_WRITE)return this._writeConnectionHolder;throw(0,h.newError)("Unknown access mode: "+t)},t.prototype._onCompleteCallback=function(t,e){this._updateBookmarks(new m.Bookmarks(t.bookmark),e,t.db)},t.prototype._calculateWatermaks=function(){return this._fetchSize===c.FETCH_ALL?{low:Number.MAX_VALUE,high:Number.MAX_VALUE}:{low:.3*this._fetchSize,high:.7*this._fetchSize}},t.prototype._configureTransactionExecutor=function(t,e){this._transactionExecutor.pipelineBegin=t,this._transactionExecutor.telemetryApi=e},t._validateSessionMode=function(t){var e=null!==t&&void 0!==t?t:c.ACCESS_MODE_WRITE;if(e!==c.ACCESS_MODE_READ&&e!==c.ACCESS_MODE_WRITE)throw(0,h.newError)("Illegal session mode "+e);return e},t}();e.default=v},5687:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isPoint=e.Point=void 0;var r=n(6021),i="__isPoint__",o=function(){function t(t,e,n,i){this.srid=(0,r.assertNumberOrInteger)(t,"SRID"),this.x=(0,r.assertNumber)(e,"X coordinate"),this.y=(0,r.assertNumber)(n,"Y coordinate"),this.z=null===i||void 0===i?i:(0,r.assertNumber)(i,"Z coordinate"),Object.freeze(this)}return t.prototype.toString=function(){return null==this.z||isNaN(this.z)?"Point{srid=".concat(s(this.srid),", x=").concat(s(this.x),", y=").concat(s(this.y),"}"):"Point{srid=".concat(s(this.srid),", x=").concat(s(this.x),", y=").concat(s(this.y),", z=").concat(s(this.z),"}")},t}();function s(t){return Number.isInteger(t)?t.toString()+".0":t.toString()}e.Point=o,Object.defineProperty(o.prototype,i,{value:!0,enumerable:!1,configurable:!1,writable:!1}),e.isPoint=function(t){return null!=t&&!0===t[i]}},9381:function(t,e,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.prototype.hasOwnProperty.call(t,n)&&r(e,t,n);return i(e,t),e},s=this&&this.__read||function(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s};Object.defineProperty(e,"__esModule",{value:!0}),e.isDateTime=e.DateTime=e.isLocalDateTime=e.LocalDateTime=e.isDate=e.Date=e.isTime=e.Time=e.isLocalTime=e.LocalTime=e.isDuration=e.Duration=void 0;var a=o(n(8620)),l=n(6021),u=n(1421),c=o(n(905)),h={value:!0,enumerable:!1,configurable:!1,writable:!1},d="__isDuration__",f="__isLocalTime__",p="__isTime__",m="__isDate__",g="__isLocalDateTime__",_="__isDateTime__",y=function(){function t(t,e,n,r){this.months=(0,l.assertNumberOrInteger)(t,"Months"),this.days=(0,l.assertNumberOrInteger)(e,"Days"),(0,l.assertNumberOrInteger)(n,"Seconds"),(0,l.assertNumberOrInteger)(r,"Nanoseconds"),this.seconds=a.normalizeSecondsForDuration(n,r),this.nanoseconds=a.normalizeNanosecondsForDuration(r),Object.freeze(this)}return t.prototype.toString=function(){return a.durationToIsoString(this.months,this.days,this.seconds,this.nanoseconds)},t}();e.Duration=y,Object.defineProperty(y.prototype,d,h),e.isDuration=function(t){return E(t,d)};var v=function(){function t(t,e,n,r){this.hour=a.assertValidHour(t),this.minute=a.assertValidMinute(e),this.second=a.assertValidSecond(n),this.nanosecond=a.assertValidNanosecond(r),Object.freeze(this)}return t.fromStandardDate=function(e,n){k(e,n);var r=a.totalNanoseconds(e,n);return new t(e.getHours(),e.getMinutes(),e.getSeconds(),r instanceof c.default?r.toInt():"bigint"===typeof r?(0,c.int)(r).toInt():r)},t.prototype.toString=function(){return a.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)},t}();e.LocalTime=v,Object.defineProperty(v.prototype,f,h),e.isLocalTime=function(t){return E(t,f)};var b=function(){function t(t,e,n,r,i){this.hour=a.assertValidHour(t),this.minute=a.assertValidMinute(e),this.second=a.assertValidSecond(n),this.nanosecond=a.assertValidNanosecond(r),this.timeZoneOffsetSeconds=(0,l.assertNumberOrInteger)(i,"Time zone offset in seconds"),Object.freeze(this)}return t.fromStandardDate=function(e,n){return k(e,n),new t(e.getHours(),e.getMinutes(),e.getSeconds(),(0,c.toNumber)(a.totalNanoseconds(e,n)),a.timeZoneOffsetInSeconds(e))},t.prototype.toString=function(){return a.timeToIsoString(this.hour,this.minute,this.second,this.nanosecond)+a.timeZoneOffsetToIsoString(this.timeZoneOffsetSeconds)},t}();e.Time=b,Object.defineProperty(b.prototype,p,h),e.isTime=function(t){return E(t,p)};var w=function(){function t(t,e,n){this.year=a.assertValidYear(t),this.month=a.assertValidMonth(e),this.day=a.assertValidDay(n),Object.freeze(this)}return t.fromStandardDate=function(e){return k(e),new t(e.getFullYear(),e.getMonth()+1,e.getDate())},t.prototype.toStandardDate=function(){return a.isoStringToStandardDate(this.toString())},t.prototype.toString=function(){return a.dateToIsoString(this.year,this.month,this.day)},t}();e.Date=w,Object.defineProperty(w.prototype,m,h),e.isDate=function(t){return E(t,m)};var S=function(){function t(t,e,n,r,i,o,s){this.year=a.assertValidYear(t),this.month=a.assertValidMonth(e),this.day=a.assertValidDay(n),this.hour=a.assertValidHour(r),this.minute=a.assertValidMinute(i),this.second=a.assertValidSecond(o),this.nanosecond=a.assertValidNanosecond(s),Object.freeze(this)}return t.fromStandardDate=function(e,n){return k(e,n),new t(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),(0,c.toNumber)(a.totalNanoseconds(e,n)))},t.prototype.toStandardDate=function(){return a.isoStringToStandardDate(this.toString())},t.prototype.toString=function(){return C(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)},t}();e.LocalDateTime=S,Object.defineProperty(S.prototype,g,h),e.isLocalDateTime=function(t){return E(t,g)};var x=function(){function t(t,e,n,r,i,o,c,h,d){this.year=a.assertValidYear(t),this.month=a.assertValidMonth(e),this.day=a.assertValidDay(n),this.hour=a.assertValidHour(r),this.minute=a.assertValidMinute(i),this.second=a.assertValidSecond(o),this.nanosecond=a.assertValidNanosecond(c);var f=s(function(t,e){var n=null!==t&&void 0!==t,r=null!==e&&void 0!==e&&""!==e;if(!n&&!r)throw(0,u.newError)("Unable to create DateTime without either time zone offset or id. Please specify either of them. Given offset: ".concat(t," and id: ").concat(e));var i=[void 0,void 0];n&&((0,l.assertNumberOrInteger)(t,"Time zone offset in seconds"),i[0]=t);r&&((0,l.assertString)(e,"Time zone ID"),a.assertValidZoneId("Time zone ID",e),i[1]=e);return i}(h,d),2),p=f[0],m=f[1];this.timeZoneOffsetSeconds=p,this.timeZoneId=null!==m&&void 0!==m?m:void 0,Object.freeze(this)}return t.fromStandardDate=function(e,n){return k(e,n),new t(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),(0,c.toNumber)(a.totalNanoseconds(e,n)),a.timeZoneOffsetInSeconds(e),null)},t.prototype.toStandardDate=function(){return a.toStandardDate(this._toUTC())},t.prototype.toString=function(){var t;return C(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond)+(null!=this.timeZoneOffsetSeconds?a.timeZoneOffsetToIsoString(null!==(t=this.timeZoneOffsetSeconds)&&void 0!==t?t:0):"")+(null!=this.timeZoneId?"[".concat(this.timeZoneId,"]"):"")},t.prototype._toUTC=function(){var t;if(void 0===this.timeZoneOffsetSeconds)throw new Error("Requires DateTime created with time zone offset");var e=a.localDateTimeToEpochSecond(this.year,this.month,this.day,this.hour,this.minute,this.second,this.nanosecond).subtract(null!==(t=this.timeZoneOffsetSeconds)&&void 0!==t?t:0);return(0,c.int)(e).multiply(1e3).add((0,c.int)(this.nanosecond).div(1e6)).toNumber()},t}();function E(t,e){return null!=t&&!0===t[e]}function C(t,e,n,r,i,o,s){return a.dateToIsoString(t,e,n)+"T"+a.timeToIsoString(r,i,o,s)}function k(t,e){(0,l.assertValidDate)(t,"Standard date"),null!==e&&void 0!==e&&(0,l.assertNumberOrInteger)(e,"Nanosecond")}e.DateTime=x,Object.defineProperty(x.prototype,_,h),e.isDateTime=function(t){return E(t,_)}},5039:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){var e=t.run;this._run=e}return t.fromTransaction=function(e){return new t({run:e.run.bind(e)})},t.prototype.run=function(t,e){return this._run(t,e)},t}();e.default=n},9919:function(t,e,n){"use strict";var r,i=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),o=this&&this.__assign||function(){return o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},o.apply(this,arguments)},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(e){var n=e.connectionHolder,i=e.onClose,o=e.onBookmarks,s=e.onConnection,a=e.reactive,l=e.fetchSize,u=e.impersonatedUser,c=e.highRecordWatermark,h=e.lowRecordWatermark,d=e.notificationFilter,f=e.apiTelemetryConfig,p=t.call(this,{connectionHolder:n,onClose:i,onBookmarks:o,onConnection:s,reactive:a,fetchSize:l,impersonatedUser:u,highRecordWatermark:c,lowRecordWatermark:h,notificationFilter:d,apiTelemetryConfig:f})||this;return p[r]="TransactionPromise",p}return i(e,t),e.prototype.then=function(t,e){return this._getOrCreateBeginPromise().then(t,e)},e.prototype.catch=function(t){return this._getOrCreateBeginPromise().catch(t)},e.prototype.finally=function(t){return this._getOrCreateBeginPromise().finally(t)},e.prototype._getOrCreateBeginPromise=function(){var t=this;return null==this._beginPromise&&(this._beginPromise=new Promise((function(e,n){t._resolve=e,t._reject=n,null!=t._beginError&&n(t._beginError),null!=t._beginMetadata&&e(t._toTransaction())}))),this._beginPromise},e.prototype._toTransaction=function(){return o(o({},this),{run:t.prototype.run.bind(this),commit:t.prototype.commit.bind(this),rollback:t.prototype.rollback.bind(this),close:t.prototype.close.bind(this),isOpen:t.prototype.isOpen.bind(this),_begin:this._begin.bind(this)})},e.prototype._begin=function(e,n){return t.prototype._begin.call(this,e,n,{onError:this._onBeginError.bind(this),onComplete:this._onBeginMetadata.bind(this)})},e.prototype._onBeginError=function(t){this._beginError=t,null!=this._reject&&this._reject(t)},e.prototype._onBeginMetadata=function(t){this._beginMetadata=null!==t&&void 0!==t?t:{},null!=this._resolve&&this._resolve(this._toTransaction())},e}(s(n(2019)).default);r=Symbol.toStringTag,e.default=a},2019:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var s=n(6021),a=n(6052),l=n(1036),u=n(6980),c=n(8890),h=n(1421),d=o(n(8958)),f=function(){function t(t){var e=t.connectionHolder,n=t.onClose,r=t.onBookmarks,i=t.onConnection,o=t.reactive,s=t.fetchSize,a=t.impersonatedUser,u=t.highRecordWatermark,c=t.lowRecordWatermark,h=t.notificationFilter,d=t.apiTelemetryConfig,f=this;this._connectionHolder=e,this._reactive=o,this._state=p.ACTIVE,this._onClose=n,this._onBookmarks=r,this._onConnection=i,this._onError=this._onErrorCallback.bind(this),this._fetchSize=s,this._onComplete=this._onCompleteCallback.bind(this),this._results=[],this._impersonatedUser=a,this._lowRecordWatermak=c,this._highRecordWatermark=u,this._bookmarks=l.Bookmarks.empty(),this._notificationFilter=h,this._apiTelemetryConfig=d,this._acceptActive=function(){},this._activePromise=new Promise((function(t,e){f._acceptActive=t}))}return t.prototype._begin=function(t,e,n){var o=this;this._connectionHolder.getConnection().then((function(s){return r(o,void 0,void 0,(function(){var r,o=this;return i(this,(function(i){switch(i.label){case 0:return this._onConnection(),null==s?[3,2]:(r=this,[4,t()]);case 1:return r._bookmarks=i.sent(),[2,s.beginTransaction({bookmarks:this._bookmarks,txConfig:e,mode:this._connectionHolder.mode(),database:this._connectionHolder.database(),impersonatedUser:this._impersonatedUser,notificationFilter:this._notificationFilter,apiTelemetryConfig:this._apiTelemetryConfig,beforeError:function(t){null!=n&&n.onError(t),o._onError(t).catch((function(){}))},afterComplete:function(t){null!=n&&n.onComplete(t),o._onComplete(t)}})];case 2:throw(0,h.newError)("No connection available")}}))}))})).catch((function(t){null!=n&&n.onError(t),o._onError(t).catch((function(){}))})).finally((function(){return o._acceptActive()}))},t.prototype.run=function(t,e){var n=(0,s.validateQueryAndParameters)(t,e),r=n.validatedQuery,i=n.params,o=this._state.run(r,i,{connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,reactive:this._reactive,fetchSize:this._fetchSize,highRecordWatermark:this._highRecordWatermark,lowRecordWatermark:this._lowRecordWatermak,preparationJob:this._activePromise});return this._results.push(o),o},t.prototype.commit=function(){var t=this,e=this._state.commit({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:function(e){return t._onCompleteCallback(e,t._bookmarks)},onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=e.state,this._onClose(),new Promise((function(t,n){e.result.subscribe({onCompleted:function(){return t()},onError:function(t){return n(t)}})}))},t.prototype.rollback=function(){var t=this._state.rollback({connectionHolder:this._connectionHolder,onError:this._onError,onComplete:this._onComplete,onConnection:this._onConnection,pendingResults:this._results,preparationJob:this._activePromise});return this._state=t.state,this._onClose(),new Promise((function(e,n){t.result.subscribe({onCompleted:function(){return e()},onError:function(t){return n(t)}})}))},t.prototype.isOpen=function(){return this._state===p.ACTIVE},t.prototype.close=function(){return r(this,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return this.isOpen()?[4,this.rollback()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype[Symbol.asyncDispose]=function(){return this.close()},t.prototype._onErrorCallback=function(t){return this._state===p.FAILED?Promise.resolve(null):(this._state=p.FAILED,this._onClose(),this._results.forEach((function(e){e.isOpen()&&e._streamObserverPromise.then((function(e){return e.onError(t)})).catch((function(t){}))})),this._connectionHolder.releaseConnection())},t.prototype._onCompleteCallback=function(t,e){this._onBookmarks(new l.Bookmarks(null===t||void 0===t?void 0:t.bookmark),null!==e&&void 0!==e?e:l.Bookmarks.empty(),null===t||void 0===t?void 0:t.db)},t}(),p={ACTIVE:{commit:function(t){return{result:m(!0,t.connectionHolder,t.onError,t.onComplete,t.onConnection,t.pendingResults,t.preparationJob),state:p.SUCCEEDED}},rollback:function(t){return{result:m(!1,t.connectionHolder,t.onError,t.onComplete,t.onConnection,t.pendingResults,t.preparationJob),state:p.ROLLED_BACK}},run:function(t,e,n){var r=n.connectionHolder,i=n.onError,o=n.onComplete,s=n.onConnection,a=n.reactive,d=n.fetchSize,f=n.highRecordWatermark,p=n.lowRecordWatermark,m=n.preparationJob,_=null!==m&&void 0!==m?m:Promise.resolve();return g(r.getConnection().then((function(t){return _.then((function(){return t}))})).then((function(n){if(s(),null!=n)return n.run(t,e,{bookmarks:l.Bookmarks.empty(),txConfig:u.TxConfig.empty(),beforeError:i,afterComplete:o,reactive:a,fetchSize:d,highRecordWatermark:f,lowRecordWatermark:p});throw(0,h.newError)("No connection available")})).catch((function(t){return new c.FailedObserver({error:t,onError:i})})),t,e,r,f,p)}},FAILED:{commit:function(t){var e=t.connectionHolder,n=t.onError;t.onComplete;return{result:g(new c.FailedObserver({error:(0,h.newError)("Cannot commit this transaction, because it has been rolled back either because of an error or explicit termination."),onError:n}),"COMMIT",{},e,0,0),state:p.FAILED}},rollback:function(t){var e=t.connectionHolder;t.onError,t.onComplete;return{result:g(new c.CompletedObserver,"ROLLBACK",{},e,0,0),state:p.FAILED}},run:function(t,e,n){var r=n.connectionHolder,i=n.onError;n.onComplete;return g(new c.FailedObserver({error:(0,h.newError)("Cannot run query in this transaction, because it has been rolled back either because of an error or explicit termination."),onError:i}),t,e,r,0,0)}},SUCCEEDED:{commit:function(t){var e=t.connectionHolder,n=t.onError;t.onComplete;return{result:g(new c.FailedObserver({error:(0,h.newError)("Cannot commit this transaction, because it has already been committed."),onError:n}),"COMMIT",{},a.EMPTY_CONNECTION_HOLDER,0,0),state:p.SUCCEEDED,connectionHolder:e}},rollback:function(t){var e=t.connectionHolder,n=t.onError;t.onComplete;return{result:g(new c.FailedObserver({error:(0,h.newError)("Cannot rollback this transaction, because it has already been committed."),onError:n}),"ROLLBACK",{},a.EMPTY_CONNECTION_HOLDER,0,0),state:p.SUCCEEDED,connectionHolder:e}},run:function(t,e,n){var r=n.connectionHolder,i=n.onError;n.onComplete;return g(new c.FailedObserver({error:(0,h.newError)("Cannot run query in this transaction, because it has already been committed."),onError:i}),t,e,r,0,0)}},ROLLED_BACK:{commit:function(t){var e=t.connectionHolder,n=t.onError;t.onComplete;return{result:g(new c.FailedObserver({error:(0,h.newError)("Cannot commit this transaction, because it has already been rolled back."),onError:n}),"COMMIT",{},e,0,0),state:p.ROLLED_BACK}},rollback:function(t){var e=t.connectionHolder;t.onError,t.onComplete;return{result:g(new c.FailedObserver({error:(0,h.newError)("Cannot rollback this transaction, because it has already been rolled back.")}),"ROLLBACK",{},e,0,0),state:p.ROLLED_BACK}},run:function(t,e,n){var r=n.connectionHolder,i=n.onError;n.onComplete;return g(new c.FailedObserver({error:(0,h.newError)("Cannot run query in this transaction, because it has already been rolled back."),onError:i}),t,e,r,0,0)}}};function m(t,e,n,r,i,o,s){var a=null!==s&&void 0!==s?s:Promise.resolve(),l=e.getConnection().then((function(t){return a.then((function(){return t}))})).then((function(e){return i(),o.forEach((function(t){return t._cancel()})),Promise.all(o.map((function(t){return t.summary()}))).then((function(i){if(null!=e)return t?e.commitTransaction({beforeError:n,afterComplete:r}):e.rollbackTransaction({beforeError:n,afterComplete:r});throw(0,h.newError)("No connection available")}))})).catch((function(t){return new c.FailedObserver({error:t,onError:n})}));return new d.default(l,t?"COMMIT":"ROLLBACK",{},e,{high:Number.MAX_VALUE,low:Number.MAX_VALUE})}function g(t,e,n,r,i,o){return void 0===r&&(r=a.EMPTY_CONNECTION_HOLDER),new d.default(Promise.resolve(t),e,n,new a.ReadOnlyConnectionHolder(null!==r&&void 0!==r?r:a.EMPTY_CONNECTION_HOLDER),{low:o,high:i})}e.default=f},4774:function(t,e){"use strict";var n=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.InternalConfig=e.Config=void 0;var r=function(){this.encrypted=void 0,this.trust=void 0,this.trustedCertificates=[],this.maxConnectionPoolSize=100,this.maxConnectionLifetime=36e5,this.connectionAcquisitionTimeout=6e4,this.maxTransactionRetryTime=3e4,this.connectionLivenessCheckTimeout=void 0,this.connectionTimeout=3e4,this.disableLosslessIntegers=!1,this.useBigInt=!1,this.logging=void 0,this.resolver=void 0,this.notificationFilter=void 0,this.userAgent=void 0,this.telemetryDisabled=!1,this.clientCertificate=void 0};e.Config=r;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(r);e.InternalConfig=i},2636:function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))},i=this&&this.__generator||function(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,r=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){s.label=a[1];break}if(6===a[0]&&s.label<i[1]){s.label=i[1],i=a;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(a);break}i[2]&&s.ops.pop(),s.trys.pop();continue}a=e.call(t,s)}catch(l){a=[6,l],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionPromise=e.ManagedTransaction=e.Transaction=e.Session=e.ServerInfo=e.GqlStatusObject=e.Notification=e.QueryStatistics=e.ProfiledPlan=e.Plan=e.Integer=e.Path=e.PathSegment=e.UnboundRelationship=e.Relationship=e.Node=e.ResultSummary=e.Record=e.EagerResult=e.Result=e.Driver=e.temporal=e.spatial=e.graph=e.error=e.routing=e.session=e.types=e.logging=e.auth=e.isRetriableError=e.Neo4jError=e.integer=e.isUnboundRelationship=e.isRelationship=e.isPathSegment=e.isPath=e.isNode=e.isDateTime=e.isLocalDateTime=e.isDate=e.isTime=e.isLocalTime=e.isDuration=e.isPoint=e.isInt=e.int=e.hasReachableServer=e.driver=e.authTokenManagers=void 0,e.clientCertificateProviders=e.notificationFilterMinimumSeverityLevel=e.notificationFilterDisabledClassification=e.notificationFilterDisabledCategory=e.notificationSeverityLevel=e.notificationClassification=e.notificationCategory=e.resultTransformers=e.bookmarkManager=e.Connection=e.ConnectionProvider=e.DateTime=e.LocalDateTime=e.Date=e.Time=e.LocalTime=e.Duration=e.Point=void 0;var s=o(n(6240)),a=n(4229);Object.defineProperty(e,"logging",{enumerable:!0,get:function(){return a.logging}});var l=n(5359);Object.defineProperty(e,"auth",{enumerable:!0,get:function(){return l.auth}}),Object.defineProperty(e,"authTokenManagers",{enumerable:!0,get:function(){return l.authTokenManagers}}),Object.defineProperty(e,"bookmarkManager",{enumerable:!0,get:function(){return l.bookmarkManager}}),Object.defineProperty(e,"Connection",{enumerable:!0,get:function(){return l.Connection}}),Object.defineProperty(e,"ConnectionProvider",{enumerable:!0,get:function(){return l.ConnectionProvider}}),Object.defineProperty(e,"Date",{enumerable:!0,get:function(){return l.Date}}),Object.defineProperty(e,"DateTime",{enumerable:!0,get:function(){return l.DateTime}}),Object.defineProperty(e,"Driver",{enumerable:!0,get:function(){return l.Driver}}),Object.defineProperty(e,"Duration",{enumerable:!0,get:function(){return l.Duration}}),Object.defineProperty(e,"EagerResult",{enumerable:!0,get:function(){return l.EagerResult}}),Object.defineProperty(e,"error",{enumerable:!0,get:function(){return l.error}}),Object.defineProperty(e,"int",{enumerable:!0,get:function(){return l.int}}),Object.defineProperty(e,"Integer",{enumerable:!0,get:function(){return l.Integer}}),Object.defineProperty(e,"isDate",{enumerable:!0,get:function(){return l.isDate}}),Object.defineProperty(e,"isDateTime",{enumerable:!0,get:function(){return l.isDateTime}}),Object.defineProperty(e,"isDuration",{enumerable:!0,get:function(){return l.isDuration}}),Object.defineProperty(e,"isInt",{enumerable:!0,get:function(){return l.isInt}}),Object.defineProperty(e,"isLocalDateTime",{enumerable:!0,get:function(){return l.isLocalDateTime}}),Object.defineProperty(e,"isLocalTime",{enumerable:!0,get:function(){return l.isLocalTime}}),Object.defineProperty(e,"isNode",{enumerable:!0,get:function(){return l.isNode}}),Object.defineProperty(e,"isPath",{enumerable:!0,get:function(){return l.isPath}}),Object.defineProperty(e,"isPathSegment",{enumerable:!0,get:function(){return l.isPathSegment}}),Object.defineProperty(e,"isPoint",{enumerable:!0,get:function(){return l.isPoint}}),Object.defineProperty(e,"isRelationship",{enumerable:!0,get:function(){return l.isRelationship}}),Object.defineProperty(e,"isRetriableError",{enumerable:!0,get:function(){return l.isRetriableError}}),Object.defineProperty(e,"isTime",{enumerable:!0,get:function(){return l.isTime}}),Object.defineProperty(e,"isUnboundRelationship",{enumerable:!0,get:function(){return l.isUnboundRelationship}}),Object.defineProperty(e,"LocalDateTime",{enumerable:!0,get:function(){return l.LocalDateTime}}),Object.defineProperty(e,"LocalTime",{enumerable:!0,get:function(){return l.LocalTime}}),Object.defineProperty(e,"ManagedTransaction",{enumerable:!0,get:function(){return l.ManagedTransaction}}),Object.defineProperty(e,"Neo4jError",{enumerable:!0,get:function(){return l.Neo4jError}}),Object.defineProperty(e,"Node",{enumerable:!0,get:function(){return l.Node}}),Object.defineProperty(e,"Notification",{enumerable:!0,get:function(){return l.Notification}}),Object.defineProperty(e,"GqlStatusObject",{enumerable:!0,get:function(){return l.GqlStatusObject}}),Object.defineProperty(e,"notificationCategory",{enumerable:!0,get:function(){return l.notificationCategory}}),Object.defineProperty(e,"notificationClassification",{enumerable:!0,get:function(){return l.notificationClassification}}),Object.defineProperty(e,"notificationFilterDisabledCategory",{enumerable:!0,get:function(){return l.notificationFilterDisabledCategory}}),Object.defineProperty(e,"notificationFilterDisabledClassification",{enumerable:!0,get:function(){return l.notificationFilterDisabledClassification}}),Object.defineProperty(e,"notificationFilterMinimumSeverityLevel",{enumerable:!0,get:function(){return l.notificationFilterMinimumSeverityLevel}}),Object.defineProperty(e,"notificationSeverityLevel",{enumerable:!0,get:function(){return l.notificationSeverityLevel}}),Object.defineProperty(e,"Path",{enumerable:!0,get:function(){return l.Path}}),Object.defineProperty(e,"PathSegment",{enumerable:!0,get:function(){return l.PathSegment}}),Object.defineProperty(e,"Plan",{enumerable:!0,get:function(){return l.Plan}}),Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return l.Point}}),Object.defineProperty(e,"ProfiledPlan",{enumerable:!0,get:function(){return l.ProfiledPlan}}),Object.defineProperty(e,"QueryStatistics",{enumerable:!0,get:function(){return l.QueryStatistics}}),Object.defineProperty(e,"Record",{enumerable:!0,get:function(){return l.Record}}),Object.defineProperty(e,"Relationship",{enumerable:!0,get:function(){return l.Relationship}}),Object.defineProperty(e,"Result",{enumerable:!0,get:function(){return l.Result}}),Object.defineProperty(e,"ResultSummary",{enumerable:!0,get:function(){return l.ResultSummary}}),Object.defineProperty(e,"resultTransformers",{enumerable:!0,get:function(){return l.resultTransformers}}),Object.defineProperty(e,"routing",{enumerable:!0,get:function(){return l.routing}}),Object.defineProperty(e,"ServerInfo",{enumerable:!0,get:function(){return l.ServerInfo}}),Object.defineProperty(e,"Session",{enumerable:!0,get:function(){return l.Session}}),Object.defineProperty(e,"Time",{enumerable:!0,get:function(){return l.Time}}),Object.defineProperty(e,"Transaction",{enumerable:!0,get:function(){return l.Transaction}}),Object.defineProperty(e,"TransactionPromise",{enumerable:!0,get:function(){return l.TransactionPromise}}),Object.defineProperty(e,"UnboundRelationship",{enumerable:!0,get:function(){return l.UnboundRelationship}}),Object.defineProperty(e,"clientCertificateProviders",{enumerable:!0,get:function(){return l.clientCertificateProviders}});var u=n(1666),c=l.driver.READ,h=l.driver.WRITE,d=l.internal.util,f=d.ENCRYPTION_ON,p=d.assertString,m=d.isEmptyObjectOrNull,g=l.internal.serverAddress.ServerAddress,_=l.internal.urlUtil,y="neo4j-javascript/"+s.default;function v(t,e,n){var r,i;void 0===n&&(n={}),p(t,"Bolt URL");var o,a=_.parseDatabaseUrl(t),c=n,h=!1,d=!1;switch(a.scheme){case"bolt":break;case"bolt+s":d=!0,o="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES";break;case"bolt+ssc":d=!0,o="TRUST_ALL_CERTIFICATES";break;case"neo4j":h=!0;break;case"neo4j+s":d=!0,o="TRUST_SYSTEM_CA_SIGNED_CERTIFICATES",h=!0;break;case"neo4j+ssc":d=!0,o="TRUST_ALL_CERTIFICATES",h=!0;break;default:throw new Error("Unknown scheme: ".concat(null!==(r=a.scheme)&&void 0!==r?r:"null"))}if(d){if("encrypted"in c||"trust"in c)throw new Error("Encryption/trust can only be configured either through URL or config, not both");c.encrypted=f,c.trust=o,c.clientCertificate=(0,l.resolveCertificateProvider)(n.clientCertificate)}var v=function(t){var e;if(function(t){if("object"===typeof t&&null!=t&&"getToken"in t&&"handleSecurityException"in t){var e=t;return"function"===typeof e.getToken&&"function"===typeof e.handleSecurityException}return!1}(t))return t;var n=t;return(n=null!==n&&void 0!==n?n:{}).scheme=null!==(e=n.scheme)&&void 0!==e?e:"none",(0,l.staticAuthTokenManager)({authToken:n})}(e);c.userAgent=null!==(i=c.userAgent)&&void 0!==i?i:y,c.boltAgent=l.internal.boltAgent.fromVersion(s.default);var b=g.fromUrl(a.hostAndPort),w={address:b,typename:h?"Routing":"Direct",routing:h};return new l.Driver(w,c,function(){if(h)return function(t,e,n,r){return new u.RoutingConnectionProvider({id:t,config:e,log:n,hostNameResolver:r,authTokenManager:v,address:b,userAgent:e.userAgent,boltAgent:e.boltAgent,routingContext:a.query})};if(!m(a.query))throw new Error("Parameters are not supported with none routed scheme. Given URL: '".concat(t,"'"));return function(t,e,n){return new u.DirectConnectionProvider({id:t,config:e,log:n,authTokenManager:v,address:b,userAgent:e.userAgent,boltAgent:e.boltAgent})}}())}function b(t,e){return r(this,void 0,void 0,(function(){var n;return i(this,(function(r){switch(r.label){case 0:n=v(t,{scheme:"none",principal:"",credentials:""},e),r.label=1;case 1:return r.trys.push([1,,3,5]),[4,n.getNegotiatedProtocolVersion()];case 2:return r.sent(),[2,!0];case 3:return[4,n.close()];case 4:return r.sent(),[7];case 5:return[2]}}))}))}e.driver=v,e.hasReachableServer=b;var w={Node:l.Node,Relationship:l.Relationship,UnboundRelationship:l.UnboundRelationship,PathSegment:l.PathSegment,Path:l.Path,Result:l.Result,EagerResult:l.EagerResult,ResultSummary:l.ResultSummary,Record:l.Record,Point:l.Point,Date:l.Date,DateTime:l.DateTime,Duration:l.Duration,LocalDateTime:l.LocalDateTime,LocalTime:l.LocalTime,Time:l.Time,Integer:l.Integer};e.types=w;var S={READ:c,WRITE:h};e.session=S;var x={toNumber:l.toNumber,toString:l.toString,inSafeRange:l.inSafeRange};e.integer=x;var E={isPoint:l.isPoint};e.spatial=E;var C={isDuration:l.isDuration,isLocalTime:l.isLocalTime,isTime:l.isTime,isDate:l.isDate,isLocalDateTime:l.isLocalDateTime,isDateTime:l.isDateTime};e.temporal=C;var k={isNode:l.isNode,isPath:l.isPath,isPathSegment:l.isPathSegment,isRelationship:l.isRelationship,isUnboundRelationship:l.isUnboundRelationship};e.graph=k;var O={authTokenManagers:l.authTokenManagers,driver:v,hasReachableServer:b,int:l.int,isInt:l.isInt,isPoint:l.isPoint,isDuration:l.isDuration,isLocalTime:l.isLocalTime,isTime:l.isTime,isDate:l.isDate,isLocalDateTime:l.isLocalDateTime,isDateTime:l.isDateTime,isNode:l.isNode,isPath:l.isPath,isPathSegment:l.isPathSegment,isRelationship:l.isRelationship,isUnboundRelationship:l.isUnboundRelationship,integer:x,Neo4jError:l.Neo4jError,isRetriableError:l.isRetriableError,auth:l.auth,logging:a.logging,types:w,session:S,routing:l.routing,error:l.error,graph:k,spatial:E,temporal:C,Driver:l.Driver,Result:l.Result,EagerResult:l.EagerResult,Record:l.Record,ResultSummary:l.ResultSummary,Node:l.Node,Relationship:l.Relationship,UnboundRelationship:l.UnboundRelationship,PathSegment:l.PathSegment,Path:l.Path,Integer:l.Integer,Plan:l.Plan,ProfiledPlan:l.ProfiledPlan,QueryStatistics:l.QueryStatistics,Notification:l.Notification,GqlStatusObject:l.GqlStatusObject,ServerInfo:l.ServerInfo,Session:l.Session,Transaction:l.Transaction,ManagedTransaction:l.ManagedTransaction,TransactionPromise:l.TransactionPromise,Point:l.Point,Duration:l.Duration,LocalTime:l.LocalTime,Time:l.Time,Date:l.Date,LocalDateTime:l.LocalDateTime,DateTime:l.DateTime,ConnectionProvider:l.ConnectionProvider,Connection:l.Connection,bookmarkManager:l.bookmarkManager,resultTransformers:l.resultTransformers,notificationCategory:l.notificationCategory,notificationClassification:l.notificationClassification,notificationSeverityLevel:l.notificationSeverityLevel,notificationFilterDisabledCategory:l.notificationFilterDisabledCategory,notificationFilterDisabledClassification:l.notificationFilterDisabledClassification,notificationFilterMinimumSeverityLevel:l.notificationFilterMinimumSeverityLevel,clientCertificateProviders:l.clientCertificateProviders};e.default=O},4229:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logging=void 0,e.logging={console:function(t){return{level:t,logger:function(t,e){return console.log("".concat(Date.now()," ").concat(t.toUpperCase()," ").concat(e))}}}}},6240:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="5.24.1"},2730:(t,e,n)=>{"use strict";var r=n(5043),i=n(8853);function o(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,a={};function l(t,e){u(t,e),u(t+"Capture",e)}function u(t,e){for(a[t]=e,t=0;t<e.length;t++)s.add(e[t])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(t,e,n,r,i,o,s){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){g[t]=new m(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];g[e]=new m(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){g[t]=new m(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){g[t]=new m(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){g[t]=new m(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){g[t]=new m(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){g[t]=new m(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){g[t]=new m(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){g[t]=new m(t,5,!1,t.toLowerCase(),null,!1,!1)}));var _=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function v(t,e,n,r){var i=g.hasOwnProperty(e)?g[e]:null;(null!==i?0!==i.type:r||!(2<e.length)||"o"!==e[0]&&"O"!==e[0]||"n"!==e[1]&&"N"!==e[1])&&(function(t,e,n,r){if(null===e||"undefined"===typeof e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!h.call(p,t)||!h.call(f,t)&&(d.test(t)?p[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(_,y);g[e]=new m(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(_,y);g[e]=new m(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(_,y);g[e]=new m(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){g[t]=new m(t,1,!1,t.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),S=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),O=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var j=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function A(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=R&&t[R]||t["@@iterator"])?t:null}var D,L=Object.assign;function U(t){if(void 0===D)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);D=e&&e[1]||""}return"\n"+D+t}var z=!1;function B(t,e){if(!t||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(1!==s||1!==a)do{if(s--,0>--a||i[s]!==o[a]){var l="\n"+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}}while(1<=s&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?U(t):""}function F(t){switch(t.tag){case 5:return U(t.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return t=B(t.type,!1);case 11:return t=B(t.type.render,!1);case 1:return t=B(t.type,!0);default:return""}}function q(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case x:return"Fragment";case S:return"Portal";case C:return"Profiler";case E:return"StrictMode";case N:return"Suspense";case I:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case O:return(t.displayName||"Context")+".Consumer";case k:return(t._context.displayName||"Context")+".Provider";case T:var e=t.render;return(t=t.displayName)||(t=""!==(t=e.displayName||e.name||"")?"ForwardRef("+t+")":"ForwardRef"),t;case P:return null!==(e=t.displayName||null)?e:q(t.type)||"Memo";case M:e=t._payload,t=t._init;try{return q(t(e))}catch(n){}}return null}function H(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=(t=e.render).displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return q(e);case 8:return e===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e}return null}function W(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":case"object":return t;default:return""}}function V(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function Z(t){t._valueTracker||(t._valueTracker=function(t){var e=V(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function G(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=V(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function Y(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function $(t,e){var n=e.checked;return L({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function K(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=W(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function X(t,e){null!=(e=e.checked)&&v(t,"checked",e,!1)}function Q(t,e){X(t,e);var n=W(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?tt(t,e.type,n):e.hasOwnProperty("defaultValue")&&tt(t,e.type,W(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function J(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function tt(t,e,n){"number"===e&&Y(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var et=Array.isArray;function nt(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+W(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function rt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(o(91));return L({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function it(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(o(92));if(et(n)){if(1<n.length)throw Error(o(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:W(n)}}function ot(t,e){var n=W(e.value),r=W(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function st(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function at(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?at(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var ut,ct,ht=(ct=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((ut=ut||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ut.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return ct(t,e)}))}:ct);function dt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pt=["Webkit","ms","Moz","O"];function mt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||ft.hasOwnProperty(t)&&ft[t]?(""+e).trim():e+"px"}function gt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=mt(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(ft).forEach((function(t){pt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ft[e]=ft[t]}))}));var _t=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function yt(t,e){if(e){if(_t[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(o(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(o(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(o(62))}}function vt(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function wt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var St=null,xt=null,Et=null;function Ct(t){if(t=vi(t)){if("function"!==typeof St)throw Error(o(280));var e=t.stateNode;e&&(e=wi(e),St(t.stateNode,t.type,e))}}function kt(t){xt?Et?Et.push(t):Et=[t]:xt=t}function Ot(){if(xt){var t=xt,e=Et;if(Et=xt=null,Ct(t),e)for(t=0;t<e.length;t++)Ct(e[t])}}function Tt(t,e){return t(e)}function Nt(){}var It=!1;function Pt(t,e,n){if(It)return t(e,n);It=!0;try{return Tt(t,e,n)}finally{It=!1,(null!==xt||null!==Et)&&(Nt(),Ot())}}function Mt(t,e){var n=t.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(o(231,e,typeof n));return n}var jt=!1;if(c)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){jt=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch(ct){jt=!1}function At(t,e,n,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Dt=!1,Lt=null,Ut=!1,zt=null,Bt={onError:function(t){Dt=!0,Lt=t}};function Ft(t,e,n,r,i,o,s,a,l){Dt=!1,Lt=null,At.apply(Bt,arguments)}function qt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(4098&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Ht(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function Wt(t){if(qt(t)!==t)throw Error(o(188))}function Vt(t){return null!==(t=function(t){var e=t.alternate;if(!e){if(null===(e=qt(t)))throw Error(o(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var s=i.alternate;if(null===s){if(null!==(r=i.return)){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Wt(i),t;if(s===r)return Wt(i),e;s=s.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=s;else{for(var a=!1,l=i.child;l;){if(l===n){a=!0,n=i,r=s;break}if(l===r){a=!0,r=i,n=s;break}l=l.sibling}if(!a){for(l=s.child;l;){if(l===n){a=!0,n=s,r=i;break}if(l===r){a=!0,r=s,n=i;break}l=l.sibling}if(!a)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?t:e}(t))?Zt(t):null}function Zt(t){if(5===t.tag||6===t.tag)return t;for(t=t.child;null!==t;){var e=Zt(t);if(null!==e)return e;t=t.sibling}return null}var Gt=i.unstable_scheduleCallback,Yt=i.unstable_cancelCallback,$t=i.unstable_shouldYield,Kt=i.unstable_requestPaint,Xt=i.unstable_now,Qt=i.unstable_getCurrentPriorityLevel,Jt=i.unstable_ImmediatePriority,te=i.unstable_UserBlockingPriority,ee=i.unstable_NormalPriority,ne=i.unstable_LowPriority,re=i.unstable_IdlePriority,ie=null,oe=null;var se=Math.clz32?Math.clz32:function(t){return t>>>=0,0===t?32:31-(ae(t)/le|0)|0},ae=Math.log,le=Math.LN2;var ue=64,ce=4194304;function he(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&t;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&t;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function de(t,e){var n=t.pendingLanes;if(0===n)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=268435455&n;if(0!==s){var a=s&~i;0!==a?r=he(a):0!==(o&=s)&&(r=he(o))}else 0!==(s=n&~i)?r=he(s):0!==o&&(r=he(o));if(0===r)return 0;if(0!==e&&e!==r&&0===(e&i)&&((i=r&-r)>=(o=e&-e)||16===i&&0!==(4194240&o)))return e;if(0!==(4&r)&&(r|=16&n),0!==(e=t.entangledLanes))for(t=t.entanglements,e&=r;0<e;)i=1<<(n=31-se(e)),r|=t[n],e&=~i;return r}function fe(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;default:return-1}}function pe(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function me(){var t=ue;return 0===(4194240&(ue<<=1))&&(ue=64),t}function ge(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _e(t,e,n){t.pendingLanes|=e,536870912!==e&&(t.suspendedLanes=0,t.pingedLanes=0),(t=t.eventTimes)[e=31-se(e)]=n}function ye(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-se(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ve=0;function be(t){return 1<(t&=-t)?4<t?0!==(268435455&t)?16:536870912:4:1}var we,Se,xe,Ee,Ce,ke=!1,Oe=[],Te=null,Ne=null,Ie=null,Pe=new Map,Me=new Map,je=[],Re="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ae(t,e){switch(t){case"focusin":case"focusout":Te=null;break;case"dragenter":case"dragleave":Ne=null;break;case"mouseover":case"mouseout":Ie=null;break;case"pointerover":case"pointerout":Pe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Me.delete(e.pointerId)}}function De(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==e&&(null!==(e=vi(e))&&Se(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,null!==i&&-1===e.indexOf(i)&&e.push(i),t)}function Le(t){var e=yi(t.target);if(null!==e){var n=qt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Ht(n)))return t.blockedOn=e,void Ce(t.priority,(function(){xe(n)}))}else if(3===e&&n.stateNode.current.memoizedState.isDehydrated)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Ue(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=$e(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=vi(n))&&Se(e),t.blockedOn=n,!1;var r=new(n=t.nativeEvent).constructor(n.type,n);bt=r,n.target.dispatchEvent(r),bt=null,e.shift()}return!0}function ze(t,e,n){Ue(t)&&n.delete(e)}function Be(){ke=!1,null!==Te&&Ue(Te)&&(Te=null),null!==Ne&&Ue(Ne)&&(Ne=null),null!==Ie&&Ue(Ie)&&(Ie=null),Pe.forEach(ze),Me.forEach(ze)}function Fe(t,e){t.blockedOn===e&&(t.blockedOn=null,ke||(ke=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Be)))}function qe(t){function e(e){return Fe(e,t)}if(0<Oe.length){Fe(Oe[0],t);for(var n=1;n<Oe.length;n++){var r=Oe[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==Te&&Fe(Te,t),null!==Ne&&Fe(Ne,t),null!==Ie&&Fe(Ie,t),Pe.forEach(e),Me.forEach(e),n=0;n<je.length;n++)(r=je[n]).blockedOn===t&&(r.blockedOn=null);for(;0<je.length&&null===(n=je[0]).blockedOn;)Le(n),null===n.blockedOn&&je.shift()}var He=b.ReactCurrentBatchConfig,We=!0;function Ve(t,e,n,r){var i=ve,o=He.transition;He.transition=null;try{ve=1,Ge(t,e,n,r)}finally{ve=i,He.transition=o}}function Ze(t,e,n,r){var i=ve,o=He.transition;He.transition=null;try{ve=4,Ge(t,e,n,r)}finally{ve=i,He.transition=o}}function Ge(t,e,n,r){if(We){var i=$e(t,e,n,r);if(null===i)Wr(t,e,r,Ye,n),Ae(t,r);else if(function(t,e,n,r,i){switch(e){case"focusin":return Te=De(Te,t,e,n,r,i),!0;case"dragenter":return Ne=De(Ne,t,e,n,r,i),!0;case"mouseover":return Ie=De(Ie,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pe.set(o,De(Pe.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Me.set(o,De(Me.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r))r.stopPropagation();else if(Ae(t,r),4&e&&-1<Re.indexOf(t)){for(;null!==i;){var o=vi(i);if(null!==o&&we(o),null===(o=$e(t,e,n,r))&&Wr(t,e,r,Ye,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(t,e,r,null,n)}}var Ye=null;function $e(t,e,n,r){if(Ye=null,null!==(t=yi(t=wt(r))))if(null===(e=qt(t)))t=null;else if(13===(n=e.tag)){if(null!==(t=Ht(e)))return t;t=null}else if(3===n){if(e.stateNode.current.memoizedState.isDehydrated)return 3===e.tag?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ye=t,null}function Ke(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qt()){case Jt:return 1;case te:return 4;case ee:case ne:return 16;case re:return 536870912;default:return 16}default:return 16}}var Xe=null,Qe=null,Je=null;function tn(){if(Je)return Je;var t,e,n=Qe,r=n.length,i="value"in Xe?Xe.value:Xe.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var s=r-t;for(e=1;e<=s&&n[r-e]===i[o-e];e++);return Je=i.slice(t,1<e?1-e:void 0)}function en(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function nn(){return!0}function rn(){return!1}function on(t){function e(e,n,r,i,o){for(var s in this._reactName=e,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(s)&&(e=t[s],this[s]=e?e(i):i[s]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),e}var sn,an,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=on(un),hn=L({},un,{view:0,detail:0}),dn=on(hn),fn=L({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ln&&(ln&&"mousemove"===t.type?(sn=t.screenX-ln.screenX,an=t.screenY-ln.screenY):an=sn=0,ln=t),sn)},movementY:function(t){return"movementY"in t?t.movementY:an}}),pn=on(fn),mn=on(L({},fn,{dataTransfer:0})),gn=on(L({},hn,{relatedTarget:0})),_n=on(L({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},un,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vn=on(yn),bn=on(L({},un,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=xn[t])&&!!e[t]}function Cn(){return En}var kn=L({},hn,{key:function(t){if(t.key){var e=wn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=en(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Sn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(t){return"keypress"===t.type?en(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?en(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),On=on(kn),Tn=on(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=on(L({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),In=on(L({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=L({},fn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=on(Pn),jn=[9,13,27,32],Rn=c&&"CompositionEvent"in window,An=null;c&&"documentMode"in document&&(An=document.documentMode);var Dn=c&&"TextEvent"in window&&!An,Ln=c&&(!Rn||An&&8<An&&11>=An),Un=String.fromCharCode(32),zn=!1;function Bn(t,e){switch(t){case"keyup":return-1!==jn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var qn=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Hn[t.type]:"textarea"===e}function Vn(t,e,n,r){kt(r),0<(e=Zr(e,"onChange")).length&&(n=new cn("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zn=null,Gn=null;function Yn(t){Ur(t,0)}function $n(t){if(G(bi(t)))return t}function Kn(t,e){if("change"===t)return e}var Xn=!1;if(c){var Qn;if(c){var Jn="oninput"in document;if(!Jn){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),Jn="function"===typeof tr.oninput}Qn=Jn}else Qn=!1;Xn=Qn&&(!document.documentMode||9<document.documentMode)}function er(){Zn&&(Zn.detachEvent("onpropertychange",nr),Gn=Zn=null)}function nr(t){if("value"===t.propertyName&&$n(Gn)){var e=[];Vn(e,Gn,t,wt(t)),Pt(Yn,e)}}function rr(t,e,n){"focusin"===t?(er(),Gn=n,(Zn=e).attachEvent("onpropertychange",nr)):"focusout"===t&&er()}function ir(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return $n(Gn)}function or(t,e){if("click"===t)return $n(e)}function sr(t,e){if("input"===t||"change"===t)return $n(e)}var ar="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e};function lr(t,e){if(ar(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(e,i)||!ar(t[i],e[i]))return!1}return!0}function ur(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cr(t,e){var n,r=ur(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=ur(r)}}function hr(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hr(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function dr(){for(var t=window,e=Y();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(r){n=!1}if(!n)break;e=Y((t=e.contentWindow).document)}return e}function fr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}function pr(t){var e=dr(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(e=r.start,void 0===(t=r.end)&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if((t=(e=n.ownerDocument||document)&&e.defaultView||window).getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=cr(n,o);var s=cr(n,r);i&&s&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&((e=e.createRange()).setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}for(e=[],t=n;t=t.parentNode;)1===t.nodeType&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<e.length;n++)(t=e[n]).element.scrollLeft=t.left,t.element.scrollTop=t.top}}var mr=c&&"documentMode"in document&&11>=document.documentMode,gr=null,_r=null,yr=null,vr=!1;function br(t,e,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Zr(_r,"onSelect")).length&&(e=new cn("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gr)))}function wr(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Sr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Er={};function Cr(t){if(xr[t])return xr[t];if(!Sr[t])return t;var e,n=Sr[t];for(e in n)if(n.hasOwnProperty(e)&&e in Er)return xr[t]=n[e];return t}c&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var kr=Cr("animationend"),Or=Cr("animationiteration"),Tr=Cr("animationstart"),Nr=Cr("transitionend"),Ir=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,e){Ir.set(t,e),l(e,[t])}for(var jr=0;jr<Pr.length;jr++){var Rr=Pr[jr];Mr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Mr(kr,"onAnimationEnd"),Mr(Or,"onAnimationIteration"),Mr(Tr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Nr,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ar="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ar));function Lr(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,r,i,s,a,l,u){if(Ft.apply(this,arguments),Dt){if(!Dt)throw Error(o(198));var c=Lt;Dt=!1,Lt=null,Ut||(Ut=!0,zt=c)}}(r,e,void 0,t),t.currentTarget=null}function Ur(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;t:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break t;Lr(i,a,u),o=l}else for(s=0;s<r.length;s++){if(l=(a=r[s]).instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break t;Lr(i,a,u),o=l}}}if(Ut)throw t=zt,Ut=!1,zt=null,t}function zr(t,e){var n=e[mi];void 0===n&&(n=e[mi]=new Set);var r=t+"__bubble";n.has(r)||(Hr(e,t,2,!1),n.add(r))}function Br(t,e,n){var r=0;e&&(r|=4),Hr(n,t,r,e)}var Fr="_reactListening"+Math.random().toString(36).slice(2);function qr(t){if(!t[Fr]){t[Fr]=!0,s.forEach((function(e){"selectionchange"!==e&&(Dr.has(e)||Br(e,!1,t),Br(e,!0,t))}));var e=9===t.nodeType?t:t.ownerDocument;null===e||e[Fr]||(e[Fr]=!0,Br("selectionchange",!1,e))}}function Hr(t,e,n,r){switch(Ke(e)){case 1:var i=Ve;break;case 4:i=Ze;break;default:i=Ge}n=i.bind(null,e,n,t),i=void 0,!jt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(i=!0),r?void 0!==i?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):void 0!==i?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Wr(t,e,n,r,i){var o=r;if(0===(1&e)&&0===(2&e)&&null!==r)t:for(;;){if(null===r)return;var s=r.tag;if(3===s||4===s){var a=r.stateNode.containerInfo;if(a===i||8===a.nodeType&&a.parentNode===i)break;if(4===s)for(s=r.return;null!==s;){var l=s.tag;if((3===l||4===l)&&((l=s.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;s=s.return}for(;null!==a;){if(null===(s=yi(a)))return;if(5===(l=s.tag)||6===l){r=o=s;continue t}a=a.parentNode}}r=r.return}Pt((function(){var r=o,i=wt(n),s=[];t:{var a=Ir.get(t);if(void 0!==a){var l=cn,u=t;switch(t){case"keypress":if(0===en(n))break t;case"keydown":case"keyup":l=On;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Nn;break;case kr:case Or:case Tr:l=_n;break;case Nr:l=In;break;case"scroll":l=dn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var c=0!==(4&e),h=!c&&"scroll"===t,d=c?null!==a?a+"Capture":null:a;c=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Mt(p,d))&&c.push(Vr(p,m,f)))),h)break;p=p.return}0<c.length&&(a=new l(a,u,null,n,i),s.push({event:a,listeners:c}))}}if(0===(7&e)){if(l="mouseout"===t||"pointerout"===t,(!(a="mouseover"===t||"pointerover"===t)||n===bt||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[pi])&&(l||a)&&(a=i.window===i?i:(a=i.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(h=qt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==t&&"pointerover"!==t||(c=Tn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:bi(l),f=null==u?a:bi(u),(a=new c(m,p+"leave",l,n,i)).target=h,a.relatedTarget=f,m=null,yi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,m=c),h=m,l&&u)t:{for(d=u,p=0,f=c=l;f;f=Gr(f))p++;for(f=0,m=d;m;m=Gr(m))f++;for(;0<p-f;)c=Gr(c),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break t;c=Gr(c),d=Gr(d)}c=null}else c=null;null!==l&&Yr(s,a,l,c,!1),null!==u&&null!==h&&Yr(s,h,u,c,!0)}if("select"===(l=(a=r?bi(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Kn;else if(Wn(a))if(Xn)g=sr;else{g=ir;var _=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=or);switch(g&&(g=g(t,r))?Vn(s,g,n,i):(_&&_(t,a,r),"focusout"===t&&(_=a._wrapperState)&&_.controlled&&"number"===a.type&&tt(a,"number",a.value)),_=r?bi(r):window,t){case"focusin":(Wn(_)||"true"===_.contentEditable)&&(gr=_,_r=r,yr=null);break;case"focusout":yr=_r=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(s,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":br(s,n,i)}var y;if(Rn)t:{switch(t){case"compositionstart":var v="onCompositionStart";break t;case"compositionend":v="onCompositionEnd";break t;case"compositionupdate":v="onCompositionUpdate";break t}v=void 0}else qn?Bn(t,n)&&(v="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(v="onCompositionStart");v&&(Ln&&"ko"!==n.locale&&(qn||"onCompositionStart"!==v?"onCompositionEnd"===v&&qn&&(y=tn()):(Qe="value"in(Xe=i)?Xe.value:Xe.textContent,qn=!0)),0<(_=Zr(r,v)).length&&(v=new bn(v,t,null,n,i),s.push({event:v,listeners:_}),y?v.data=y:null!==(y=Fn(n))&&(v.data=y))),(y=Dn?function(t,e){switch(t){case"compositionend":return Fn(e);case"keypress":return 32!==e.which?null:(zn=!0,Un);case"textInput":return(t=e.data)===Un&&zn?null:t;default:return null}}(t,n):function(t,e){if(qn)return"compositionend"===t||!Rn&&Bn(t,e)?(t=tn(),Je=Qe=Xe=null,qn=!1,t):null;switch(t){case"paste":default:return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ln&&"ko"!==e.locale?null:e.data}}(t,n))&&(0<(r=Zr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),s.push({event:i,listeners:r}),i.data=y))}Ur(s,e)}))}function Vr(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zr(t,e){for(var n=e+"Capture",r=[];null!==t;){var i=t,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Mt(t,n))&&r.unshift(Vr(t,o,i)),null!=(o=Mt(t,e))&&r.push(Vr(t,o,i))),t=t.return}return r}function Gr(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Yr(t,e,n,r,i){for(var o=e._reactName,s=[];null!==n&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==u&&(a=u,i?null!=(l=Mt(n,o))&&s.unshift(Vr(n,l,a)):i||null!=(l=Mt(n,o))&&s.push(Vr(n,l,a))),n=n.return}0!==s.length&&t.push({event:e,listeners:s})}var $r=/\r\n?/g,Kr=/\u0000|\uFFFD/g;function Xr(t){return("string"===typeof t?t:""+t).replace($r,"\n").replace(Kr,"")}function Qr(t,e,n){if(e=Xr(e),Xr(t)!==e&&n)throw Error(o(425))}function Jr(){}var ti=null,ei=null;function ni(t,e){return"textarea"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(t){return oi.resolve(null).then(t).catch(ai)}:ri;function ai(t){setTimeout((function(){throw t}))}function li(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return t.removeChild(i),void qe(e);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);qe(e)}function ui(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break;if(8===e){if("$"===(e=t.data)||"$!"===e||"$?"===e)break;if("/$"===e)return null}}return t}function ci(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,_i="__reactHandles$"+hi;function yi(t){var e=t[di];if(e)return e;for(var n=t.parentNode;n;){if(e=n[pi]||n[di]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=ci(t);null!==t;){if(n=t[di])return n;t=ci(t)}return e}n=(t=n).parentNode}return null}function vi(t){return!(t=t[di]||t[pi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function bi(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(o(33))}function wi(t){return t[fi]||null}var Si=[],xi=-1;function Ei(t){return{current:t}}function Ci(t){0>xi||(t.current=Si[xi],Si[xi]=null,xi--)}function ki(t,e){xi++,Si[xi]=t.current,t.current=e}var Oi={},Ti=Ei(Oi),Ni=Ei(!1),Ii=Oi;function Pi(t,e){var n=t.type.contextTypes;if(!n)return Oi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Mi(t){return null!==(t=t.childContextTypes)&&void 0!==t}function ji(){Ci(Ni),Ci(Ti)}function Ri(t,e,n){if(Ti.current!==Oi)throw Error(o(168));ki(Ti,e),ki(Ni,n)}function Ai(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(o(108,H(t)||"Unknown",i));return L({},n,r)}function Di(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Oi,Ii=Ti.current,ki(Ti,t),ki(Ni,Ni.current),!0}function Li(t,e,n){var r=t.stateNode;if(!r)throw Error(o(169));n?(t=Ai(t,e,Ii),r.__reactInternalMemoizedMergedChildContext=t,Ci(Ni),Ci(Ti),ki(Ti,t)):Ci(Ni),ki(Ni,n)}var Ui=null,zi=!1,Bi=!1;function Fi(t){null===Ui?Ui=[t]:Ui.push(t)}function qi(){if(!Bi&&null!==Ui){Bi=!0;var t=0,e=ve;try{var n=Ui;for(ve=1;t<n.length;t++){var r=n[t];do{r=r(!0)}while(null!==r)}Ui=null,zi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(t+1)),Gt(Jt,qi),i}finally{ve=e,Bi=!1}}return null}var Hi=[],Wi=0,Vi=null,Zi=0,Gi=[],Yi=0,$i=null,Ki=1,Xi="";function Qi(t,e){Hi[Wi++]=Zi,Hi[Wi++]=Vi,Vi=t,Zi=e}function Ji(t,e,n){Gi[Yi++]=Ki,Gi[Yi++]=Xi,Gi[Yi++]=$i,$i=t;var r=Ki;t=Xi;var i=32-se(r)-1;r&=~(1<<i),n+=1;var o=32-se(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Ki=1<<32-se(e)+i|n<<i|r,Xi=o+t}else Ki=1<<o|n<<i|r,Xi=t}function to(t){null!==t.return&&(Qi(t,1),Ji(t,1,0))}function eo(t){for(;t===Vi;)Vi=Hi[--Wi],Hi[Wi]=null,Zi=Hi[--Wi],Hi[Wi]=null;for(;t===$i;)$i=Gi[--Yi],Gi[Yi]=null,Xi=Gi[--Yi],Gi[Yi]=null,Ki=Gi[--Yi],Gi[Yi]=null}var no=null,ro=null,io=!1,oo=null;function so(t,e){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,null===(e=t.deletions)?(t.deletions=[n],t.flags|=16):e.push(n)}function ao(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,no=t,ro=ui(e.firstChild),!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,no=t,ro=null,!0);case 13:return null!==(e=8!==e.nodeType?null:e)&&(n=null!==$i?{id:Ki,overflow:Xi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=e,n.return=t,t.child=n,no=t,ro=null,!0);default:return!1}}function lo(t){return 0!==(1&t.mode)&&0===(128&t.flags)}function uo(t){if(io){var e=ro;if(e){var n=e;if(!ao(t,e)){if(lo(t))throw Error(o(418));e=ui(n.nextSibling);var r=no;e&&ao(t,e)?so(r,n):(t.flags=-4097&t.flags|2,io=!1,no=t)}}else{if(lo(t))throw Error(o(418));t.flags=-4097&t.flags|2,io=!1,no=t}}}function co(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;no=t}function ho(t){if(t!==no)return!1;if(!io)return co(t),io=!0,!1;var e;if((e=3!==t.tag)&&!(e=5!==t.tag)&&(e="head"!==(e=t.type)&&"body"!==e&&!ni(t.type,t.memoizedProps)),e&&(e=ro)){if(lo(t))throw fo(),Error(o(418));for(;e;)so(t,e),e=ui(e.nextSibling)}if(co(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(o(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){ro=ui(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}ro=null}}else ro=no?ui(t.stateNode.nextSibling):null;return!0}function fo(){for(var t=ro;t;)t=ui(t.nextSibling)}function po(){ro=no=null,io=!1}function mo(t){null===oo?oo=[t]:oo.push(t)}var go=b.ReactCurrentBatchConfig;function _o(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,t));var i=r,s=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===s?e.ref:(e=function(t){var e=i.refs;null===t?delete e[s]:e[s]=t},e._stringRef=s,e)}if("string"!==typeof t)throw Error(o(284));if(!n._owner)throw Error(o(290,t))}return t}function yo(t,e){throw t=Object.prototype.toString.call(e),Error(o(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function vo(t){return(0,t._init)(t._payload)}function bo(t){function e(e,n){if(t){var r=e.deletions;null===r?(e.deletions=[n],e.flags|=16):r.push(n)}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=ju(t,e)).index=0,t.sibling=null,t}function s(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.flags|=2,n):r:(e.flags|=2,n):(e.flags|=1048576,n)}function a(e){return t&&null===e.alternate&&(e.flags|=2),e}function l(t,e,n,r){return null===e||6!==e.tag?((e=Lu(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function u(t,e,n,r){var o=n.type;return o===x?h(t,e,n.props.children,r,n.key):null!==e&&(e.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===M&&vo(o)===e.type)?((r=i(e,n.props)).ref=_o(t,e,n),r.return=t,r):((r=Ru(n.type,n.key,n.props,null,t.mode,r)).ref=_o(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Uu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Au(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e&&""!==e||"number"===typeof e)return(e=Lu(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Ru(e.type,e.key,e.props,null,t.mode,n)).ref=_o(t,null,e),n.return=t,n;case S:return(e=Uu(e,t.mode,n)).return=t,e;case M:return d(t,(0,e._init)(e._payload),n)}if(et(e)||A(e))return(e=Au(e,t.mode,n,null)).return=t,e;yo(t,e)}return null}function f(t,e,n,r){var i=null!==e?e.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(t,e,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?u(t,e,n,r):null;case S:return n.key===i?c(t,e,n,r):null;case M:return f(t,e,(i=n._init)(n._payload),r)}if(et(n)||A(n))return null!==i?null:h(t,e,n,r,null);yo(t,n)}return null}function p(t,e,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(e,t=t.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return u(e,t=t.get(null===r.key?n:r.key)||null,r,i);case S:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i);case M:return p(t,e,n,(0,r._init)(r._payload),i)}if(et(r)||A(r))return h(e,t=t.get(n)||null,r,i,null);yo(e,r)}return null}function m(i,o,a,l){for(var u=null,c=null,h=o,m=o=0,g=null;null!==h&&m<a.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var _=f(i,h,a[m],l);if(null===_){null===h&&(h=g);break}t&&h&&null===_.alternate&&e(i,h),o=s(_,o,m),null===c?u=_:c.sibling=_,c=_,h=g}if(m===a.length)return n(i,h),io&&Qi(i,m),u;if(null===h){for(;m<a.length;m++)null!==(h=d(i,a[m],l))&&(o=s(h,o,m),null===c?u=h:c.sibling=h,c=h);return io&&Qi(i,m),u}for(h=r(i,h);m<a.length;m++)null!==(g=p(h,i,m,a[m],l))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=s(g,o,m),null===c?u=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(i,t)})),io&&Qi(i,m),u}function g(i,a,l,u){var c=A(l);if("function"!==typeof c)throw Error(o(150));if(null==(l=c.call(l)))throw Error(o(151));for(var h=c=null,m=a,g=a=0,_=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(_=m,m=null):_=m.sibling;var v=f(i,m,y.value,u);if(null===v){null===m&&(m=_);break}t&&m&&null===v.alternate&&e(i,m),a=s(v,a,g),null===h?c=v:h.sibling=v,h=v,m=_}if(y.done)return n(i,m),io&&Qi(i,g),c;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,u))&&(a=s(y,a,g),null===h?c=y:h.sibling=y,h=y);return io&&Qi(i,g),c}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,u))&&(t&&null!==y.alternate&&m.delete(null===y.key?g:y.key),a=s(y,a,g),null===h?c=y:h.sibling=y,h=y);return t&&m.forEach((function(t){return e(i,t)})),io&&Qi(i,g),c}return function t(r,o,s,l){if("object"===typeof s&&null!==s&&s.type===x&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case w:t:{for(var u=s.key,c=o;null!==c;){if(c.key===u){if((u=s.type)===x){if(7===c.tag){n(r,c.sibling),(o=i(c,s.props.children)).return=r,r=o;break t}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===M&&vo(u)===c.type){n(r,c.sibling),(o=i(c,s.props)).ref=_o(r,c,s),o.return=r,r=o;break t}n(r,c);break}e(r,c),c=c.sibling}s.type===x?((o=Au(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Ru(s.type,s.key,s.props,null,r.mode,l)).ref=_o(r,o,s),l.return=r,r=l)}return a(r);case S:t:{for(c=s.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break t}n(r,o);break}e(r,o),o=o.sibling}(o=Uu(s,r.mode,l)).return=r,r=o}return a(r);case M:return t(r,o,(c=s._init)(s._payload),l)}if(et(s))return m(r,o,s,l);if(A(s))return g(r,o,s,l);yo(r,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Lu(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var wo=bo(!0),So=bo(!1),xo=Ei(null),Eo=null,Co=null,ko=null;function Oo(){ko=Co=Eo=null}function To(t){var e=xo.current;Ci(xo),t._currentValue=e}function No(t,e,n){for(;null!==t;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,null!==r&&(r.childLanes|=e)):null!==r&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Io(t,e){Eo=t,ko=Co=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(va=!0),t.firstContext=null)}function Po(t){var e=t._currentValue;if(ko!==t)if(t={context:t,memoizedValue:e,next:null},null===Co){if(null===Eo)throw Error(o(308));Co=t,Eo.dependencies={lanes:0,firstContext:t}}else Co=Co.next=t;return e}var Mo=null;function jo(t){null===Mo?Mo=[t]:Mo.push(t)}function Ro(t,e,n,r){var i=e.interleaved;return null===i?(n.next=n,jo(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ao(t,r)}function Ao(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}var Do=!1;function Lo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uo(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bo(t,e,n){var r=t.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ao(t,n)}return null===(i=r.interleaved)?(e.next=e,jo(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ao(t,n)}function Fo(t,e,n){if(null!==(e=e.updateQueue)&&(e=e.shared,0!==(4194240&n))){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ye(t,n)}}function qo(t,e){var n=t.updateQueue,r=t.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=s:o=o.next=s,n=n.next}while(null!==n);null===o?i=o=e:o=o.next=e}else i=o=e;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ho(t,e,n,r){var i=t.updateQueue;Do=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(null!==a){i.shared.pending=null;var l=a,u=l.next;l.next=null,null===s?o=u:s.next=u,s=l;var c=t.alternate;null!==c&&((a=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===a?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(s=0,c=u=l=null,a=o;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=t,m=a;switch(d=e,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break t}h=p;break t;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break t;h=L({},h,d);break t;case 2:Do=!0}}null!==a.callback&&0!==a.lane&&(t.flags|=64,null===(d=i.effects)?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,s|=d;if(null===(a=a.next)){if(null===(a=i.shared.pending))break;a=(d=a).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(e=i.shared.interleaved)){i=e;do{s|=i.lane,i=i.next}while(i!==e)}else null===o&&(i.shared.lanes=0);Dl|=s,t.lanes=s,t.memoizedState=h}}function Wo(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Vo={},Zo=Ei(Vo),Go=Ei(Vo),Yo=Ei(Vo);function $o(t){if(t===Vo)throw Error(o(174));return t}function Ko(t,e){switch(ki(Yo,e),ki(Go,t),ki(Zo,Vo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lt(null,"");break;default:e=lt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}Ci(Zo),ki(Zo,e)}function Xo(){Ci(Zo),Ci(Go),Ci(Yo)}function Qo(t){$o(Yo.current);var e=$o(Zo.current),n=lt(e,t.type);e!==n&&(ki(Go,t),ki(Zo,n))}function Jo(t){Go.current===t&&(Ci(Zo),Ci(Go))}var ts=Ei(0);function es(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(128&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ns=[];function rs(){for(var t=0;t<ns.length;t++)ns[t]._workInProgressVersionPrimary=null;ns.length=0}var is=b.ReactCurrentDispatcher,os=b.ReactCurrentBatchConfig,ss=0,as=null,ls=null,us=null,cs=!1,hs=!1,ds=0,fs=0;function ps(){throw Error(o(321))}function ms(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ar(t[n],e[n]))return!1;return!0}function gs(t,e,n,r,i,s){if(ss=s,as=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,is.current=null===t||null===t.memoizedState?Js:ta,t=n(r,i),hs){s=0;do{if(hs=!1,ds=0,25<=s)throw Error(o(301));s+=1,us=ls=null,e.updateQueue=null,is.current=ea,t=n(r,i)}while(hs)}if(is.current=Qs,e=null!==ls&&null!==ls.next,ss=0,us=ls=as=null,cs=!1,e)throw Error(o(300));return t}function _s(){var t=0!==ds;return ds=0,t}function ys(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===us?as.memoizedState=us=t:us=us.next=t,us}function vs(){if(null===ls){var t=as.alternate;t=null!==t?t.memoizedState:null}else t=ls.next;var e=null===us?as.memoizedState:us.next;if(null!==e)us=e,ls=t;else{if(null===t)throw Error(o(310));t={memoizedState:(ls=t).memoizedState,baseState:ls.baseState,baseQueue:ls.baseQueue,queue:ls.queue,next:null},null===us?as.memoizedState=us=t:us=us.next=t}return us}function bs(t,e){return"function"===typeof e?e(t):e}function ws(t){var e=vs(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=ls,i=r.baseQueue,s=n.pending;if(null!==s){if(null!==i){var a=i.next;i.next=s.next,s.next=a}r.baseQueue=i=s,n.pending=null}if(null!==i){s=i.next,r=r.baseState;var l=a=null,u=null,c=s;do{var h=c.lane;if((ss&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,a=r):u=u.next=d,as.lanes|=h,Dl|=h}c=c.next}while(null!==c&&c!==s);null===u?a=r:u.next=l,ar(r,e.memoizedState)||(va=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=u,n.lastRenderedState=r}if(null!==(t=n.interleaved)){i=t;do{s=i.lane,as.lanes|=s,Dl|=s,i=i.next}while(i!==t)}else null===i&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ss(t){var e=vs(),n=e.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{s=t(s,a.action),a=a.next}while(a!==i);ar(s,e.memoizedState)||(va=!0),e.memoizedState=s,null===e.baseQueue&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function xs(){}function Es(t,e){var n=as,r=vs(),i=e(),s=!ar(r.memoizedState,i);if(s&&(r.memoizedState=i,va=!0),r=r.queue,Ds(Os.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||null!==us&&1&us.memoizedState.tag){if(n.flags|=2048,Ps(9,ks.bind(null,n,r,i,e),void 0,null),null===Nl)throw Error(o(349));0!==(30&ss)||Cs(n,e,i)}return i}function Cs(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},null===(e=as.updateQueue)?(e={lastEffect:null,stores:null},as.updateQueue=e,e.stores=[t]):null===(n=e.stores)?e.stores=[t]:n.push(t)}function ks(t,e,n,r){e.value=n,e.getSnapshot=r,Ts(e)&&Ns(t)}function Os(t,e,n){return n((function(){Ts(e)&&Ns(t)}))}function Ts(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ar(t,n)}catch(r){return!0}}function Ns(t){var e=Ao(t,1);null!==e&&nu(e,t,1,-1)}function Is(t){var e=ys();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:t},e.queue=t,t=t.dispatch=Ys.bind(null,as,t),[e.memoizedState,t]}function Ps(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=as.updateQueue)?(e={lastEffect:null,stores:null},as.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Ms(){return vs().memoizedState}function js(t,e,n,r){var i=ys();as.flags|=t,i.memoizedState=Ps(1|e,n,void 0,void 0===r?null:r)}function Rs(t,e,n,r){var i=vs();r=void 0===r?null:r;var o=void 0;if(null!==ls){var s=ls.memoizedState;if(o=s.destroy,null!==r&&ms(r,s.deps))return void(i.memoizedState=Ps(e,n,o,r))}as.flags|=t,i.memoizedState=Ps(1|e,n,o,r)}function As(t,e){return js(8390656,8,t,e)}function Ds(t,e){return Rs(2048,8,t,e)}function Ls(t,e){return Rs(4,2,t,e)}function Us(t,e){return Rs(4,4,t,e)}function zs(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Bs(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,Rs(4,4,zs.bind(null,e,t),n)}function Fs(){}function qs(t,e){var n=vs();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ms(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Hs(t,e){var n=vs();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&ms(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ws(t,e,n){return 0===(21&ss)?(t.baseState&&(t.baseState=!1,va=!0),t.memoizedState=n):(ar(n,e)||(n=me(),as.lanes|=n,Dl|=n,t.baseState=!0),e)}function Vs(t,e){var n=ve;ve=0!==n&&4>n?n:4,t(!0);var r=os.transition;os.transition={};try{t(!1),e()}finally{ve=n,os.transition=r}}function Zs(){return vs().memoizedState}function Gs(t,e,n){var r=eu(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},$s(t))Ks(e,n);else if(null!==(n=Ro(t,e,n,r))){nu(n,t,r,tu()),Xs(n,e,r)}}function Ys(t,e,n){var r=eu(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if($s(t))Ks(e,i);else{var o=t.alternate;if(0===t.lanes&&(null===o||0===o.lanes)&&null!==(o=e.lastRenderedReducer))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,ar(a,s)){var l=e.interleaved;return null===l?(i.next=i,jo(e)):(i.next=l.next,l.next=i),void(e.interleaved=i)}}catch(u){}null!==(n=Ro(t,e,i,r))&&(nu(n,t,r,i=tu()),Xs(n,e,r))}}function $s(t){var e=t.alternate;return t===as||null!==e&&e===as}function Ks(t,e){hs=cs=!0;var n=t.pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xs(t,e,n){if(0!==(4194240&n)){var r=e.lanes;n|=r&=t.pendingLanes,e.lanes=n,ye(t,n)}}var Qs={readContext:Po,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Js={readContext:Po,useCallback:function(t,e){return ys().memoizedState=[t,void 0===e?null:e],t},useContext:Po,useEffect:As,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,js(4194308,4,zs.bind(null,e,t),n)},useLayoutEffect:function(t,e){return js(4194308,4,t,e)},useInsertionEffect:function(t,e){return js(4,2,t,e)},useMemo:function(t,e){var n=ys();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ys();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Gs.bind(null,as,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},ys().memoizedState=t},useState:Is,useDebugValue:Fs,useDeferredValue:function(t){return ys().memoizedState=t},useTransition:function(){var t=Is(!1),e=t[0];return t=Vs.bind(null,t[1]),ys().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=as,i=ys();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=e(),null===Nl)throw Error(o(349));0!==(30&ss)||Cs(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,As(Os.bind(null,r,s,t),[t]),r.flags|=2048,Ps(9,ks.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=ys(),e=Nl.identifierPrefix;if(io){var n=Xi;e=":"+e+"R"+(n=(Ki&~(1<<32-se(Ki)-1)).toString(32)+n),0<(n=ds++)&&(e+="H"+n.toString(32)),e+=":"}else e=":"+e+"r"+(n=fs++).toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ta={readContext:Po,useCallback:qs,useContext:Po,useEffect:Ds,useImperativeHandle:Bs,useInsertionEffect:Ls,useLayoutEffect:Us,useMemo:Hs,useReducer:ws,useRef:Ms,useState:function(){return ws(bs)},useDebugValue:Fs,useDeferredValue:function(t){return Ws(vs(),ls.memoizedState,t)},useTransition:function(){return[ws(bs)[0],vs().memoizedState]},useMutableSource:xs,useSyncExternalStore:Es,useId:Zs,unstable_isNewReconciler:!1},ea={readContext:Po,useCallback:qs,useContext:Po,useEffect:Ds,useImperativeHandle:Bs,useInsertionEffect:Ls,useLayoutEffect:Us,useMemo:Hs,useReducer:Ss,useRef:Ms,useState:function(){return Ss(bs)},useDebugValue:Fs,useDeferredValue:function(t){var e=vs();return null===ls?e.memoizedState=t:Ws(e,ls.memoizedState,t)},useTransition:function(){return[Ss(bs)[0],vs().memoizedState]},useMutableSource:xs,useSyncExternalStore:Es,useId:Zs,unstable_isNewReconciler:!1};function na(t,e){if(t&&t.defaultProps){for(var n in e=L({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}function ra(t,e,n,r){n=null===(n=n(r,e=t.memoizedState))||void 0===n?e:L({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var ia={isMounted:function(t){return!!(t=t._reactInternals)&&qt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=tu(),i=eu(t),o=zo(r,i);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Bo(t,o,i))&&(nu(e,t,i,r),Fo(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=tu(),i=eu(t),o=zo(r,i);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),null!==(e=Bo(t,o,i))&&(nu(e,t,i,r),Fo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=tu(),r=eu(t),i=zo(n,r);i.tag=2,void 0!==e&&null!==e&&(i.callback=e),null!==(e=Bo(t,i,r))&&(nu(e,t,r,n),Fo(e,t,r))}};function oa(t,e,n,r,i,o,s){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,s):!e.prototype||!e.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function sa(t,e,n){var r=!1,i=Oi,o=e.contextType;return"object"===typeof o&&null!==o?o=Po(o):(i=Mi(e)?Ii:Ti.current,o=(r=null!==(r=e.contextTypes)&&void 0!==r)?Pi(t,i):Oi),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=ia,t.stateNode=e,e._reactInternals=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function aa(t,e,n,r){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ia.enqueueReplaceState(e,e.state,null)}function la(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Lo(t);var o=e.contextType;"object"===typeof o&&null!==o?i.context=Po(o):(o=Mi(e)?Ii:Ti.current,i.context=Pi(t,o)),i.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(ra(t,e,o,n),i.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(e=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&ia.enqueueReplaceState(i,i.state,null),Ho(t,n,i,r),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308)}function ua(t,e){try{var n="",r=e;do{n+=F(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function ca(t,e,n){return{value:t,source:null,stack:null!=n?n:null,digest:null!=e?e:null}}function ha(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(t,e,n){(n=zo(-1,n)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wl||(Wl=!0,Vl=r),ha(0,e)},n}function pa(t,e,n){(n=zo(-1,n)).tag=3;var r=t.type.getDerivedStateFromError;if("function"===typeof r){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){ha(0,e)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){ha(0,e),"function"!==typeof r&&(null===Zl?Zl=new Set([this]):Zl.add(this));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}function ma(t,e,n){var r=t.pingCache;if(null===r){r=t.pingCache=new da;var i=new Set;r.set(e,i)}else void 0===(i=r.get(e))&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Cu.bind(null,t,e,n),e.then(t,t))}function ga(t){do{var e;if((e=13===t.tag)&&(e=null===(e=t.memoizedState)||null!==e.dehydrated),e)return t;t=t.return}while(null!==t);return null}function _a(t,e,n,r,i){return 0===(1&t.mode)?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((e=zo(-1,1)).tag=2,Bo(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=i,t)}var ya=b.ReactCurrentOwner,va=!1;function ba(t,e,n,r){e.child=null===t?So(e,null,n,r):wo(e,t.child,n,r)}function wa(t,e,n,r,i){n=n.render;var o=e.ref;return Io(e,i),r=gs(t,e,n,r,o,i),n=_s(),null===t||va?(io&&n&&to(e),e.flags|=1,ba(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wa(t,e,i))}function Sa(t,e,n,r,i){if(null===t){var o=n.type;return"function"!==typeof o||Mu(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ru(n.type,null,r,e,e.mode,i)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=o,xa(t,e,o,r,i))}if(o=t.child,0===(t.lanes&i)){var s=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(s,r)&&t.ref===e.ref)return Wa(t,e,i)}return e.flags|=1,(t=ju(o,r)).ref=e.ref,t.return=e,e.child=t}function xa(t,e,n,r,i){if(null!==t){var o=t.memoizedProps;if(lr(o,r)&&t.ref===e.ref){if(va=!1,e.pendingProps=r=o,0===(t.lanes&i))return e.lanes=t.lanes,Wa(t,e,i);0!==(131072&t.flags)&&(va=!0)}}return ka(t,e,n,r,i)}function Ea(t,e,n){var r=e.pendingProps,i=r.children,o=null!==t?t.memoizedState:null;if("hidden"===r.mode)if(0===(1&e.mode))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(jl,Ml),Ml|=n;else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ki(jl,Ml),Ml|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,ki(jl,Ml),Ml|=r}else null!==o?(r=o.baseLanes|n,e.memoizedState=null):r=n,ki(jl,Ml),Ml|=r;return ba(t,e,i,n),e.child}function Ca(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ka(t,e,n,r,i){var o=Mi(n)?Ii:Ti.current;return o=Pi(e,o),Io(e,i),n=gs(t,e,n,r,o,i),r=_s(),null===t||va?(io&&r&&to(e),e.flags|=1,ba(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Wa(t,e,i))}function Oa(t,e,n,r,i){if(Mi(n)){var o=!0;Di(e)}else o=!1;if(Io(e,i),null===e.stateNode)Ha(t,e),sa(e,n,r),la(e,n,r,i),r=!0;else if(null===t){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=n.contextType;"object"===typeof u&&null!==u?u=Po(u):u=Pi(e,u=Mi(n)?Ii:Ti.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==r||l!==u)&&aa(e,s,r,u),Do=!1;var d=e.memoizedState;s.state=d,Ho(e,r,s,i),l=e.memoizedState,a!==r||d!==l||Ni.current||Do?("function"===typeof c&&(ra(e,n,c,r),l=e.memoizedState),(a=Do||oa(e,n,a,r,d,l,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(e.flags|=4194308)):("function"===typeof s.componentDidMount&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):("function"===typeof s.componentDidMount&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Uo(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:na(e.type,a),s.props=u,h=e.pendingProps,d=s.context,"object"===typeof(l=n.contextType)&&null!==l?l=Po(l):l=Pi(e,l=Mi(n)?Ii:Ti.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(a!==h||d!==l)&&aa(e,s,r,l),Do=!1,d=e.memoizedState,s.state=d,Ho(e,r,s,i);var p=e.memoizedState;a!==h||d!==p||Ni.current||Do?("function"===typeof f&&(ra(e,n,f,r),p=e.memoizedState),(u=Do||oa(e,n,u,r,d,p,l)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(r,p,l),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof s.componentDidUpdate&&(e.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(e.flags|=1024)):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,r=u):("function"!==typeof s.componentDidUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),r=!1)}return Ta(t,e,n,r,o,i)}function Ta(t,e,n,r,i,o){Ca(t,e);var s=0!==(128&e.flags);if(!r&&!s)return i&&Li(e,n,!1),Wa(t,e,o);r=e.stateNode,ya.current=e;var a=s&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return e.flags|=1,null!==t&&s?(e.child=wo(e,t.child,null,o),e.child=wo(e,null,a,o)):ba(t,e,a,o),e.memoizedState=r.state,i&&Li(e,n,!0),e.child}function Na(t){var e=t.stateNode;e.pendingContext?Ri(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Ri(0,e.context,!1),Ko(t,e.containerInfo)}function Ia(t,e,n,r,i){return po(),mo(i),e.flags|=256,ba(t,e,n,r),e.child}var Pa,Ma,ja,Ra,Aa={dehydrated:null,treeContext:null,retryLane:0};function Da(t){return{baseLanes:t,cachePool:null,transitions:null}}function La(t,e,n){var r,i=e.pendingProps,s=ts.current,a=!1,l=0!==(128&e.flags);if((r=l)||(r=(null===t||null!==t.memoizedState)&&0!==(2&s)),r?(a=!0,e.flags&=-129):null!==t&&null===t.memoizedState||(s|=1),ki(ts,1&s),null===t)return uo(e),null!==(t=e.memoizedState)&&null!==(t=t.dehydrated)?(0===(1&e.mode)?e.lanes=1:"$!"===t.data?e.lanes=8:e.lanes=1073741824,null):(l=i.children,t=i.fallback,a?(i=e.mode,a=e.child,l={mode:"hidden",children:l},0===(1&i)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Du(l,i,0,null),t=Au(t,i,n,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Da(n),e.memoizedState=Aa,t):Ua(e,l));if(null!==(s=t.memoizedState)&&null!==(r=s.dehydrated))return function(t,e,n,r,i,s,a){if(n)return 256&e.flags?(e.flags&=-257,za(t,e,a,r=ca(Error(o(422))))):null!==e.memoizedState?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Du({mode:"visible",children:r.children},i,0,null),(s=Au(s,i,a,null)).flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,0!==(1&e.mode)&&wo(e,t.child,null,a),e.child.memoizedState=Da(a),e.memoizedState=Aa,s);if(0===(1&e.mode))return za(t,e,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,za(t,e,a,r=ca(s=Error(o(419)),r,void 0))}if(l=0!==(a&t.childLanes),va||l){if(null!==(r=Nl)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|a))?0:i)&&i!==s.retryLane&&(s.retryLane=i,Ao(t,i),nu(r,t,i,-1))}return mu(),za(t,e,a,r=ca(Error(o(421))))}return"$?"===i.data?(e.flags|=128,e.child=t.child,e=Ou.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ro=ui(i.nextSibling),no=e,io=!0,oo=null,null!==t&&(Gi[Yi++]=Ki,Gi[Yi++]=Xi,Gi[Yi++]=$i,Ki=t.id,Xi=t.overflow,$i=e),e=Ua(e,r.children),e.flags|=4096,e)}(t,e,l,i,r,s,n);if(a){a=i.fallback,l=e.mode,r=(s=t.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&e.child!==s?((i=e.child).childLanes=0,i.pendingProps=u,e.deletions=null):(i=ju(s,u)).subtreeFlags=14680064&s.subtreeFlags,null!==r?a=ju(r,a):(a=Au(a,l,n,null)).flags|=2,a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,l=null===(l=t.child.memoizedState)?Da(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=t.childLanes&~n,e.memoizedState=Aa,i}return t=(a=t.child).sibling,i=ju(a,{mode:"visible",children:i.children}),0===(1&e.mode)&&(i.lanes=n),i.return=e,i.sibling=null,null!==t&&(null===(n=e.deletions)?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Ua(t,e){return(e=Du({mode:"visible",children:e},t.mode,0,null)).return=t,t.child=e}function za(t,e,n,r){return null!==r&&mo(r),wo(e,t.child,null,n),(t=Ua(e,e.pendingProps.children)).flags|=2,e.memoizedState=null,t}function Ba(t,e,n){t.lanes|=e;var r=t.alternate;null!==r&&(r.lanes|=e),No(t.return,e,n)}function Fa(t,e,n,r,i){var o=t.memoizedState;null===o?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qa(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(ba(t,e,r.children,n),0!==(2&(r=ts.current)))r=1&r|2,e.flags|=128;else{if(null!==t&&0!==(128&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ba(t,n,e);else if(19===t.tag)Ba(t,n,e);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ki(ts,r),0===(1&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===es(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Fa(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===es(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Fa(e,!0,n,null,o);break;case"together":Fa(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ha(t,e){0===(1&e.mode)&&null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wa(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Dl|=e.lanes,0===(n&e.childLanes))return null;if(null!==t&&e.child!==t.child)throw Error(o(153));if(null!==e.child){for(n=ju(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=ju(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Va(t,e){if(!io)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Za(t){var e=null!==t.alternate&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=t,i=i.sibling;else for(i=t.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ga(t,e,n){var r=e.pendingProps;switch(eo(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Za(e),null;case 1:case 17:return Mi(e.type)&&ji(),Za(e),null;case 3:return r=e.stateNode,Xo(),Ci(Ni),Ci(Ti),rs(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==t&&null!==t.child||(ho(e)?e.flags|=4:null===t||t.memoizedState.isDehydrated&&0===(256&e.flags)||(e.flags|=1024,null!==oo&&(su(oo),oo=null))),Ma(t,e),Za(e),null;case 5:Jo(e);var i=$o(Yo.current);if(n=e.type,null!==t&&null!=e.stateNode)ja(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(null===e.stateNode)throw Error(o(166));return Za(e),null}if(t=$o(Zo.current),ho(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[di]=e,r[fi]=s,t=0!==(1&e.mode),n){case"dialog":zr("cancel",r),zr("close",r);break;case"iframe":case"object":case"embed":zr("load",r);break;case"video":case"audio":for(i=0;i<Ar.length;i++)zr(Ar[i],r);break;case"source":zr("error",r);break;case"img":case"image":case"link":zr("error",r),zr("load",r);break;case"details":zr("toggle",r);break;case"input":K(r,s),zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},zr("invalid",r);break;case"textarea":it(r,s),zr("invalid",r)}for(var l in yt(n,s),i=null,s)if(s.hasOwnProperty(l)){var u=s[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,u,t),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==s.suppressHydrationWarning&&Qr(r.textContent,u,t),i=["children",""+u]):a.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&zr("scroll",r)}switch(n){case"input":Z(r),J(r,s,!0);break;case"textarea":Z(r),st(r);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(r.onclick=Jr)}r=i,e.updateQueue=r,null!==r&&(e.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===t&&(t=at(n)),"http://www.w3.org/1999/xhtml"===t?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof r.is?t=l.createElement(n,{is:r.is}):(t=l.createElement(n),"select"===n&&(l=t,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):t=l.createElementNS(t,n),t[di]=e,t[fi]=r,Pa(t,e,!1,!1),e.stateNode=t;t:{switch(l=vt(n,r),n){case"dialog":zr("cancel",t),zr("close",t),i=r;break;case"iframe":case"object":case"embed":zr("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ar.length;i++)zr(Ar[i],t);i=r;break;case"source":zr("error",t),i=r;break;case"img":case"image":case"link":zr("error",t),zr("load",t),i=r;break;case"details":zr("toggle",t),i=r;break;case"input":K(t,r),i=$(t,r),zr("invalid",t);break;case"option":default:i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),zr("invalid",t);break;case"textarea":it(t,r),i=rt(t,r),zr("invalid",t)}for(s in yt(n,i),u=i)if(u.hasOwnProperty(s)){var c=u[s];"style"===s?gt(t,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&ht(t,c):"children"===s?"string"===typeof c?("textarea"!==n||""!==c)&&dt(t,c):"number"===typeof c&&dt(t,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(a.hasOwnProperty(s)?null!=c&&"onScroll"===s&&zr("scroll",t):null!=c&&v(t,s,c,l))}switch(n){case"input":Z(t),J(t,r,!1);break;case"textarea":Z(t),st(t);break;case"option":null!=r.value&&t.setAttribute("value",""+W(r.value));break;case"select":t.multiple=!!r.multiple,null!=(s=r.value)?nt(t,!!r.multiple,s,!1):null!=r.defaultValue&&nt(t,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(t.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break t;case"img":r=!0;break t;default:r=!1}}r&&(e.flags|=4)}null!==e.ref&&(e.flags|=512,e.flags|=2097152)}return Za(e),null;case 6:if(t&&null!=e.stateNode)Ra(t,e,t.memoizedProps,r);else{if("string"!==typeof r&&null===e.stateNode)throw Error(o(166));if(n=$o(Yo.current),$o(Zo.current),ho(e)){if(r=e.stateNode,n=e.memoizedProps,r[di]=e,(s=r.nodeValue!==n)&&null!==(t=no))switch(t.tag){case 3:Qr(r.nodeValue,n,0!==(1&t.mode));break;case 5:!0!==t.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&t.mode))}s&&(e.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=e,e.stateNode=r}return Za(e),null;case 13:if(Ci(ts),r=e.memoizedState,null===t||null!==t.memoizedState&&null!==t.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&e.mode)&&0===(128&e.flags))fo(),po(),e.flags|=98560,s=!1;else if(s=ho(e),null!==r&&null!==r.dehydrated){if(null===t){if(!s)throw Error(o(318));if(!(s=null!==(s=e.memoizedState)?s.dehydrated:null))throw Error(o(317));s[di]=e}else po(),0===(128&e.flags)&&(e.memoizedState=null),e.flags|=4;Za(e),s=!1}else null!==oo&&(su(oo),oo=null),s=!0;if(!s)return 65536&e.flags?e:null}return 0!==(128&e.flags)?(e.lanes=n,e):((r=null!==r)!==(null!==t&&null!==t.memoizedState)&&r&&(e.child.flags|=8192,0!==(1&e.mode)&&(null===t||0!==(1&ts.current)?0===Rl&&(Rl=3):mu())),null!==e.updateQueue&&(e.flags|=4),Za(e),null);case 4:return Xo(),Ma(t,e),null===t&&qr(e.stateNode.containerInfo),Za(e),null;case 10:return To(e.type._context),Za(e),null;case 19:if(Ci(ts),null===(s=e.memoizedState))return Za(e),null;if(r=0!==(128&e.flags),null===(l=s.rendering))if(r)Va(s,!1);else{if(0!==Rl||null!==t&&0!==(128&t.flags))for(t=e.child;null!==t;){if(null!==(l=es(t))){for(e.flags|=128,Va(s,!1),null!==(r=l.updateQueue)&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;null!==n;)t=r,(s=n).flags&=14680066,null===(l=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ki(ts,1&ts.current|2),e.child}t=t.sibling}null!==s.tail&&Xt()>ql&&(e.flags|=128,r=!0,Va(s,!1),e.lanes=4194304)}else{if(!r)if(null!==(t=es(l))){if(e.flags|=128,r=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),Va(s,!0),null===s.tail&&"hidden"===s.tailMode&&!l.alternate&&!io)return Za(e),null}else 2*Xt()-s.renderingStartTime>ql&&1073741824!==n&&(e.flags|=128,r=!0,Va(s,!1),e.lanes=4194304);s.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=s.last)?n.sibling=l:e.child=l,s.last=l)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Xt(),e.sibling=null,n=ts.current,ki(ts,r?1&n|2:1&n),e):(Za(e),null);case 22:case 23:return hu(),r=null!==e.memoizedState,null!==t&&null!==t.memoizedState!==r&&(e.flags|=8192),r&&0!==(1&e.mode)?0!==(1073741824&Ml)&&(Za(e),6&e.subtreeFlags&&(e.flags|=8192)):Za(e),null;case 24:case 25:return null}throw Error(o(156,e.tag))}function Ya(t,e){switch(eo(e),e.tag){case 1:return Mi(e.type)&&ji(),65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 3:return Xo(),Ci(Ni),Ci(Ti),rs(),0!==(65536&(t=e.flags))&&0===(128&t)?(e.flags=-65537&t|128,e):null;case 5:return Jo(e),null;case 13:if(Ci(ts),null!==(t=e.memoizedState)&&null!==t.dehydrated){if(null===e.alternate)throw Error(o(340));po()}return 65536&(t=e.flags)?(e.flags=-65537&t|128,e):null;case 19:return Ci(ts),null;case 4:return Xo(),null;case 10:return To(e.type._context),null;case 22:case 23:return hu(),null;default:return null}}Pa=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ma=function(){},ja=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,$o(Zo.current);var o,s=null;switch(n){case"input":i=$(t,i),r=$(t,r),s=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),s=[];break;case"textarea":i=rt(t,i),r=rt(t,r),s=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(t.onclick=Jr)}for(c in yt(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(s=s||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(s=s||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&zr("scroll",t),s||l===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}},Ra=function(t,e,n,r){n!==r&&(e.flags|=4)};var $a=!1,Ka=!1,Xa="function"===typeof WeakSet?WeakSet:Set,Qa=null;function Ja(t,e){var n=t.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Eu(t,e,r)}else n.current=null}function tl(t,e,n){try{n()}catch(r){Eu(t,e,r)}}var el=!1;function nl(t,e,n){var r=e.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(e,n,o)}i=i.next}while(i!==r)}}function rl(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function il(t){var e=t.ref;if(null!==e){var n=t.stateNode;t.tag,t=n,"function"===typeof e?e(t):e.current=t}}function ol(t){var e=t.alternate;null!==e&&(t.alternate=null,ol(e)),t.child=null,t.deletions=null,t.sibling=null,5===t.tag&&(null!==(e=t.stateNode)&&(delete e[di],delete e[fi],delete e[mi],delete e[gi],delete e[_i])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function sl(t){return 5===t.tag||3===t.tag||4===t.tag}function al(t){t:for(;;){for(;null===t.sibling;){if(null===t.return||sl(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;5!==t.tag&&6!==t.tag&&18!==t.tag;){if(2&t.flags)continue t;if(null===t.child||4===t.tag)continue t;t.child.return=t,t=t.child}if(!(2&t.flags))return t.stateNode}}function ll(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Jr));else if(4!==r&&null!==(t=t.child))for(ll(t,e,n),t=t.sibling;null!==t;)ll(t,e,n),t=t.sibling}function ul(t,e,n){var r=t.tag;if(5===r||6===r)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(ul(t,e,n),t=t.sibling;null!==t;)ul(t,e,n),t=t.sibling}var cl=null,hl=!1;function dl(t,e,n){for(n=n.child;null!==n;)fl(t,e,n),n=n.sibling}function fl(t,e,n){if(oe&&"function"===typeof oe.onCommitFiberUnmount)try{oe.onCommitFiberUnmount(ie,n)}catch(a){}switch(n.tag){case 5:Ka||Ja(n,e);case 6:var r=cl,i=hl;cl=null,dl(t,e,n),hl=i,null!==(cl=r)&&(hl?(t=cl,n=n.stateNode,8===t.nodeType?t.parentNode.removeChild(n):t.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(t=cl,n=n.stateNode,8===t.nodeType?li(t.parentNode,n):1===t.nodeType&&li(t,n),qe(t)):li(cl,n.stateNode));break;case 4:r=cl,i=hl,cl=n.stateNode.containerInfo,hl=!0,dl(t,e,n),cl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Ka&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,void 0!==s&&(0!==(2&o)||0!==(4&o))&&tl(n,e,s),i=i.next}while(i!==r)}dl(t,e,n);break;case 1:if(!Ka&&(Ja(n,e),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Eu(n,e,a)}dl(t,e,n);break;case 21:dl(t,e,n);break;case 22:1&n.mode?(Ka=(r=Ka)||null!==n.memoizedState,dl(t,e,n),Ka=r):dl(t,e,n);break;default:dl(t,e,n)}}function pl(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Xa),e.forEach((function(e){var r=Tu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}function ml(t,e){var n=e.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,a=e,l=a;t:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break t;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break t}l=l.return}if(null===cl)throw Error(o(160));fl(s,a,i),cl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Eu(i,e,c)}}if(12854&e.subtreeFlags)for(e=e.child;null!==e;)gl(e,t),e=e.sibling}function gl(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ml(e,t),_l(t),4&r){try{nl(3,t,t.return),rl(3,t)}catch(g){Eu(t,t.return,g)}try{nl(5,t,t.return)}catch(g){Eu(t,t.return,g)}}break;case 1:ml(e,t),_l(t),512&r&&null!==n&&Ja(n,n.return);break;case 5:if(ml(e,t),_l(t),512&r&&null!==n&&Ja(n,n.return),32&t.flags){var i=t.stateNode;try{dt(i,"")}catch(g){Eu(t,t.return,g)}}if(4&r&&null!=(i=t.stateNode)){var s=t.memoizedProps,a=null!==n?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,null!==u)try{"input"===l&&"radio"===s.type&&null!=s.name&&X(i,s),vt(l,a);var c=vt(l,s);for(a=0;a<u.length;a+=2){var h=u[a],d=u[a+1];"style"===h?gt(i,d):"dangerouslySetInnerHTML"===h?ht(i,d):"children"===h?dt(i,d):v(i,h,d,c)}switch(l){case"input":Q(i,s);break;case"textarea":ot(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;null!=p?nt(i,!!s.multiple,p,!1):f!==!!s.multiple&&(null!=s.defaultValue?nt(i,!!s.multiple,s.defaultValue,!0):nt(i,!!s.multiple,s.multiple?[]:"",!1))}i[fi]=s}catch(g){Eu(t,t.return,g)}}break;case 6:if(ml(e,t),_l(t),4&r){if(null===t.stateNode)throw Error(o(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(g){Eu(t,t.return,g)}}break;case 3:if(ml(e,t),_l(t),4&r&&null!==n&&n.memoizedState.isDehydrated)try{qe(e.containerInfo)}catch(g){Eu(t,t.return,g)}break;case 4:default:ml(e,t),_l(t);break;case 13:ml(e,t),_l(t),8192&(i=t.child).flags&&(s=null!==i.memoizedState,i.stateNode.isHidden=s,!s||null!==i.alternate&&null!==i.alternate.memoizedState||(Fl=Xt())),4&r&&pl(t);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&t.mode?(Ka=(c=Ka)||h,ml(e,t),Ka=c):ml(e,t),_l(t),8192&r){if(c=null!==t.memoizedState,(t.stateNode.isHidden=c)&&!h&&0!==(1&t.mode))for(Qa=t,h=t.child;null!==h;){for(d=Qa=h;null!==Qa;){switch(p=(f=Qa).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Ja(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(g){Eu(r,n,g)}}break;case 5:Ja(f,f.return);break;case 22:if(null!==f.memoizedState){wl(d);continue}}null!==p?(p.return=f,Qa=p):wl(d)}h=h.sibling}t:for(h=null,d=t;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(s=i.style).setProperty?s.setProperty("display","none","important"):s.display="none":(l=d.stateNode,a=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=mt("display",a))}catch(g){Eu(t,t.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){Eu(t,t.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===t)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===t)break t;for(;null===d.sibling;){if(null===d.return||d.return===t)break t;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(e,t),_l(t),4&r&&pl(t);case 21:}}function _l(t){var e=t.flags;if(2&e){try{t:{for(var n=t.return;null!==n;){if(sl(n)){var r=n;break t}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(dt(i,""),r.flags&=-33),ul(t,al(t),i);break;case 3:case 4:var s=r.stateNode.containerInfo;ll(t,al(t),s);break;default:throw Error(o(161))}}catch(a){Eu(t,t.return,a)}t.flags&=-3}4096&e&&(t.flags&=-4097)}function yl(t,e,n){Qa=t,vl(t,e,n)}function vl(t,e,n){for(var r=0!==(1&t.mode);null!==Qa;){var i=Qa,o=i.child;if(22===i.tag&&r){var s=null!==i.memoizedState||$a;if(!s){var a=i.alternate,l=null!==a&&null!==a.memoizedState||Ka;a=$a;var u=Ka;if($a=s,(Ka=l)&&!u)for(Qa=i;null!==Qa;)l=(s=Qa).child,22===s.tag&&null!==s.memoizedState?Sl(i):null!==l?(l.return=s,Qa=l):Sl(i);for(;null!==o;)Qa=o,vl(o,e,n),o=o.sibling;Qa=i,$a=a,Ka=u}bl(t)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Qa=o):bl(t)}}function bl(t){for(;null!==Qa;){var e=Qa;if(0!==(8772&e.flags)){var n=e.alternate;try{if(0!==(8772&e.flags))switch(e.tag){case 0:case 11:case 15:Ka||rl(5,e);break;case 1:var r=e.stateNode;if(4&e.flags&&!Ka)if(null===n)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:na(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;null!==s&&Wo(e,s,r);break;case 3:var a=e.updateQueue;if(null!==a){if(n=null,null!==e.child)switch(e.child.tag){case 5:case 1:n=e.child.stateNode}Wo(e,a,n)}break;case 5:var l=e.stateNode;if(null===n&&4&e.flags){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===e.memoizedState){var c=e.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&qe(d)}}}break;default:throw Error(o(163))}Ka||512&e.flags&&il(e)}catch(f){Eu(e,e.return,f)}}if(e===t){Qa=null;break}if(null!==(n=e.sibling)){n.return=e.return,Qa=n;break}Qa=e.return}}function wl(t){for(;null!==Qa;){var e=Qa;if(e===t){Qa=null;break}var n=e.sibling;if(null!==n){n.return=e.return,Qa=n;break}Qa=e.return}}function Sl(t){for(;null!==Qa;){var e=Qa;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{rl(4,e)}catch(l){Eu(e,n,l)}break;case 1:var r=e.stateNode;if("function"===typeof r.componentDidMount){var i=e.return;try{r.componentDidMount()}catch(l){Eu(e,i,l)}}var o=e.return;try{il(e)}catch(l){Eu(e,o,l)}break;case 5:var s=e.return;try{il(e)}catch(l){Eu(e,s,l)}}}catch(l){Eu(e,e.return,l)}if(e===t){Qa=null;break}var a=e.sibling;if(null!==a){a.return=e.return,Qa=a;break}Qa=e.return}}var xl,El=Math.ceil,Cl=b.ReactCurrentDispatcher,kl=b.ReactCurrentOwner,Ol=b.ReactCurrentBatchConfig,Tl=0,Nl=null,Il=null,Pl=0,Ml=0,jl=Ei(0),Rl=0,Al=null,Dl=0,Ll=0,Ul=0,zl=null,Bl=null,Fl=0,ql=1/0,Hl=null,Wl=!1,Vl=null,Zl=null,Gl=!1,Yl=null,$l=0,Kl=0,Xl=null,Ql=-1,Jl=0;function tu(){return 0!==(6&Tl)?Xt():-1!==Ql?Ql:Ql=Xt()}function eu(t){return 0===(1&t.mode)?1:0!==(2&Tl)&&0!==Pl?Pl&-Pl:null!==go.transition?(0===Jl&&(Jl=me()),Jl):0!==(t=ve)?t:t=void 0===(t=window.event)?16:Ke(t.type)}function nu(t,e,n,r){if(50<Kl)throw Kl=0,Xl=null,Error(o(185));_e(t,n,r),0!==(2&Tl)&&t===Nl||(t===Nl&&(0===(2&Tl)&&(Ll|=n),4===Rl&&au(t,Pl)),ru(t,r),1===n&&0===Tl&&0===(1&e.mode)&&(ql=Xt()+500,zi&&qi()))}function ru(t,e){var n=t.callbackNode;!function(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-se(o),a=1<<s,l=i[s];-1===l?0!==(a&n)&&0===(a&r)||(i[s]=fe(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}(t,e);var r=de(t,t===Nl?Pl:0);if(0===r)null!==n&&Yt(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(null!=n&&Yt(n),1===e)0===t.tag?function(t){zi=!0,Fi(t)}(lu.bind(null,t)):Fi(lu.bind(null,t)),si((function(){0===(6&Tl)&&qi()})),n=null;else{switch(be(r)){case 1:n=Jt;break;case 4:n=te;break;case 16:default:n=ee;break;case 536870912:n=re}n=Nu(n,iu.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iu(t,e){if(Ql=-1,Jl=0,0!==(6&Tl))throw Error(o(327));var n=t.callbackNode;if(Su()&&t.callbackNode!==n)return null;var r=de(t,t===Nl?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&t.expiredLanes)||e)e=gu(t,r);else{e=r;var i=Tl;Tl|=2;var s=pu();for(Nl===t&&Pl===e||(Hl=null,ql=Xt()+500,du(t,e));;)try{yu();break}catch(l){fu(t,l)}Oo(),Cl.current=s,Tl=i,null!==Il?e=0:(Nl=null,Pl=0,e=Rl)}if(0!==e){if(2===e&&(0!==(i=pe(t))&&(r=i,e=ou(t,i))),1===e)throw n=Al,du(t,0),au(t,r),ru(t,Xt()),n;if(6===e)au(t,r);else{if(i=t.current.alternate,0===(30&r)&&!function(t){for(var e=t;;){if(16384&e.flags){var n=e.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!ar(o(),i))return!1}catch(a){return!1}}}if(n=e.child,16384&e.subtreeFlags&&null!==n)n.return=e,e=n;else{if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}(i)&&(2===(e=gu(t,r))&&(0!==(s=pe(t))&&(r=s,e=ou(t,s))),1===e))throw n=Al,du(t,0),au(t,r),ru(t,Xt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(o(345));case 2:case 5:wu(t,Bl,Hl);break;case 3:if(au(t,r),(130023424&r)===r&&10<(e=Fl+500-Xt())){if(0!==de(t,0))break;if(((i=t.suspendedLanes)&r)!==r){tu(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=ri(wu.bind(null,t,Bl,Hl),e);break}wu(t,Bl,Hl);break;case 4:if(au(t,r),(4194240&r)===r)break;for(e=t.eventTimes,i=-1;0<r;){var a=31-se(r);s=1<<a,(a=e[a])>i&&(i=a),r&=~s}if(r=i,10<(r=(120>(r=Xt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){t.timeoutHandle=ri(wu.bind(null,t,Bl,Hl),r);break}wu(t,Bl,Hl);break;default:throw Error(o(329))}}}return ru(t,Xt()),t.callbackNode===n?iu.bind(null,t):null}function ou(t,e){var n=zl;return t.current.memoizedState.isDehydrated&&(du(t,e).flags|=256),2!==(t=gu(t,e))&&(e=Bl,Bl=n,null!==e&&su(e)),t}function su(t){null===Bl?Bl=t:Bl.push.apply(Bl,t)}function au(t,e){for(e&=~Ul,e&=~Ll,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-se(e),r=1<<n;t[n]=-1,e&=~r}}function lu(t){if(0!==(6&Tl))throw Error(o(327));Su();var e=de(t,0);if(0===(1&e))return ru(t,Xt()),null;var n=gu(t,e);if(0!==t.tag&&2===n){var r=pe(t);0!==r&&(e=r,n=ou(t,r))}if(1===n)throw n=Al,du(t,0),au(t,e),ru(t,Xt()),n;if(6===n)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wu(t,Bl,Hl),ru(t,Xt()),null}function uu(t,e){var n=Tl;Tl|=1;try{return t(e)}finally{0===(Tl=n)&&(ql=Xt()+500,zi&&qi())}}function cu(t){null!==Yl&&0===Yl.tag&&0===(6&Tl)&&Su();var e=Tl;Tl|=1;var n=Ol.transition,r=ve;try{if(Ol.transition=null,ve=1,t)return t()}finally{ve=r,Ol.transition=n,0===(6&(Tl=e))&&qi()}}function hu(){Ml=jl.current,Ci(jl)}function du(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,ii(n)),null!==Il)for(n=Il.return;null!==n;){var r=n;switch(eo(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&ji();break;case 3:Xo(),Ci(Ni),Ci(Ti),rs();break;case 5:Jo(r);break;case 4:Xo();break;case 13:case 19:Ci(ts);break;case 10:To(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Nl=t,Il=t=ju(t.current,null),Pl=Ml=e,Rl=0,Al=null,Ul=Ll=Dl=0,Bl=zl=null,null!==Mo){for(e=0;e<Mo.length;e++)if(null!==(r=(n=Mo[e]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var s=o.next;o.next=i,r.next=s}n.pending=r}Mo=null}return t}function fu(t,e){for(;;){var n=Il;try{if(Oo(),is.current=Qs,cs){for(var r=as.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}cs=!1}if(ss=0,us=ls=as=null,hs=!1,ds=0,kl.current=null,null===n||null===n.return){Rl=1,Al=e,Il=null;break}t:{var s=t,a=n.return,l=n,u=e;if(e=Pl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ga(a);if(null!==p){p.flags&=-257,_a(p,a,l,0,e),1&p.mode&&ma(s,c,e),u=c;var m=(e=p).updateQueue;if(null===m){var g=new Set;g.add(u),e.updateQueue=g}else m.add(u);break t}if(0===(1&e)){ma(s,c,e),mu();break t}u=Error(o(426))}else if(io&&1&l.mode){var _=ga(a);if(null!==_){0===(65536&_.flags)&&(_.flags|=256),_a(_,a,l,0,e),mo(ua(u,l));break t}}s=u=ua(u,l),4!==Rl&&(Rl=2),null===zl?zl=[s]:zl.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e,qo(s,fa(0,u,e));break t;case 1:l=u;var y=s.type,v=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Zl||!Zl.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e,qo(s,pa(s,l,e));break t}}s=s.return}while(null!==s)}bu(n)}catch(b){e=b,Il===n&&null!==n&&(Il=n=n.return);continue}break}}function pu(){var t=Cl.current;return Cl.current=Qs,null===t?Qs:t}function mu(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Nl||0===(268435455&Dl)&&0===(268435455&Ll)||au(Nl,Pl)}function gu(t,e){var n=Tl;Tl|=2;var r=pu();for(Nl===t&&Pl===e||(Hl=null,du(t,e));;)try{_u();break}catch(i){fu(t,i)}if(Oo(),Tl=n,Cl.current=r,null!==Il)throw Error(o(261));return Nl=null,Pl=0,Rl}function _u(){for(;null!==Il;)vu(Il)}function yu(){for(;null!==Il&&!$t();)vu(Il)}function vu(t){var e=xl(t.alternate,t,Ml);t.memoizedProps=t.pendingProps,null===e?bu(t):Il=e,kl.current=null}function bu(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(32768&e.flags)){if(null!==(n=Ga(n,e,Ml)))return void(Il=n)}else{if(null!==(n=Ya(n,e)))return n.flags&=32767,void(Il=n);if(null===t)return Rl=6,void(Il=null);t.flags|=32768,t.subtreeFlags=0,t.deletions=null}if(null!==(e=e.sibling))return void(Il=e);Il=e=t}while(null!==e);0===Rl&&(Rl=5)}function wu(t,e,n){var r=ve,i=Ol.transition;try{Ol.transition=null,ve=1,function(t,e,n,r){do{Su()}while(null!==Yl);if(0!==(6&Tl))throw Error(o(327));n=t.finishedWork;var i=t.finishedLanes;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(function(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-se(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}(t,s),t===Nl&&(Il=Nl=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Nu(ee,(function(){return Su(),null}))),s=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||s){s=Ol.transition,Ol.transition=null;var a=ve;ve=1;var l=Tl;Tl|=4,kl.current=null,function(t,e){if(ti=We,fr(t=dr())){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else t:{var r=(n=(n=t.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch(w){n=null;break t}var a=0,l=-1,u=-1,c=0,h=0,d=t,f=null;e:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=a+i),d!==s||0!==r&&3!==d.nodeType||(u=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===t)break e;if(f===n&&++c===i&&(l=a),f===s&&++h===r&&(u=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ei={focusedElem:t,selectionRange:n},We=!1,Qa=e;null!==Qa;)if(t=(e=Qa).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,Qa=t;else for(;null!==Qa;){e=Qa;try{var m=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,_=m.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:na(e.type,g),_);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(o(163))}}catch(w){Eu(e,e.return,w)}if(null!==(t=e.sibling)){t.return=e.return,Qa=t;break}Qa=e.return}m=el,el=!1}(t,n),gl(n,t),pr(ei),We=!!ti,ei=ti=null,t.current=n,yl(n,t,i),Kt(),Tl=l,ve=a,Ol.transition=s}else t.current=n;if(Gl&&(Gl=!1,Yl=t,$l=i),s=t.pendingLanes,0===s&&(Zl=null),function(t){if(oe&&"function"===typeof oe.onCommitFiberRoot)try{oe.onCommitFiberRoot(ie,t,void 0,128===(128&t.current.flags))}catch(e){}}(n.stateNode),ru(t,Xt()),null!==e)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,t=Vl,Vl=null,t;0!==(1&$l)&&0!==t.tag&&Su(),s=t.pendingLanes,0!==(1&s)?t===Xl?Kl++:(Kl=0,Xl=t):Kl=0,qi()}(t,e,n,r)}finally{Ol.transition=i,ve=r}return null}function Su(){if(null!==Yl){var t=be($l),e=Ol.transition,n=ve;try{if(Ol.transition=null,ve=16>t?16:t,null===Yl)var r=!1;else{if(t=Yl,Yl=null,$l=0,0!==(6&Tl))throw Error(o(331));var i=Tl;for(Tl|=4,Qa=t.current;null!==Qa;){var s=Qa,a=s.child;if(0!==(16&Qa.flags)){var l=s.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qa=c;null!==Qa;){var h=Qa;switch(h.tag){case 0:case 11:case 15:nl(8,h,s)}var d=h.child;if(null!==d)d.return=h,Qa=d;else for(;null!==Qa;){var f=(h=Qa).sibling,p=h.return;if(ol(h),h===c){Qa=null;break}if(null!==f){f.return=p,Qa=f;break}Qa=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var _=g.sibling;g.sibling=null,g=_}while(null!==g)}}Qa=s}}if(0!==(2064&s.subtreeFlags)&&null!==a)a.return=s,Qa=a;else t:for(;null!==Qa;){if(0!==(2048&(s=Qa).flags))switch(s.tag){case 0:case 11:case 15:nl(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Qa=y;break t}Qa=s.return}}var v=t.current;for(Qa=v;null!==Qa;){var b=(a=Qa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Qa=b;else t:for(a=v;null!==Qa;){if(0!==(2048&(l=Qa).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(S){Eu(l,l.return,S)}if(l===a){Qa=null;break t}var w=l.sibling;if(null!==w){w.return=l.return,Qa=w;break t}Qa=l.return}}if(Tl=i,qi(),oe&&"function"===typeof oe.onPostCommitFiberRoot)try{oe.onPostCommitFiberRoot(ie,t)}catch(S){}r=!0}return r}finally{ve=n,Ol.transition=e}}return!1}function xu(t,e,n){t=Bo(t,e=fa(0,e=ua(n,e),1),1),e=tu(),null!==t&&(_e(t,1,e),ru(t,e))}function Eu(t,e,n){if(3===t.tag)xu(t,t,n);else for(;null!==e;){if(3===e.tag){xu(e,t,n);break}if(1===e.tag){var r=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Zl||!Zl.has(r))){e=Bo(e,t=pa(e,t=ua(n,t),1),1),t=tu(),null!==e&&(_e(e,1,t),ru(e,t));break}}e=e.return}}function Cu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),e=tu(),t.pingedLanes|=t.suspendedLanes&n,Nl===t&&(Pl&n)===n&&(4===Rl||3===Rl&&(130023424&Pl)===Pl&&500>Xt()-Fl?du(t,0):Ul|=n),ru(t,e)}function ku(t,e){0===e&&(0===(1&t.mode)?e=1:(e=ce,0===(130023424&(ce<<=1))&&(ce=4194304)));var n=tu();null!==(t=Ao(t,e))&&(_e(t,e,n),ru(t,n))}function Ou(t){var e=t.memoizedState,n=0;null!==e&&(n=e.retryLane),ku(t,n)}function Tu(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(e),ku(t,n)}function Nu(t,e){return Gt(t,e)}function Iu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(t,e,n,r){return new Iu(t,e,n,r)}function Mu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function ju(t,e){var n=t.alternate;return null===n?((n=Pu(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&t.flags,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ru(t,e,n,r,i,s){var a=2;if(r=t,"function"===typeof t)Mu(t)&&(a=1);else if("string"===typeof t)a=5;else t:switch(t){case x:return Au(n.children,i,s,e);case E:a=8,i|=8;break;case C:return(t=Pu(12,n,e,2|i)).elementType=C,t.lanes=s,t;case N:return(t=Pu(13,n,e,i)).elementType=N,t.lanes=s,t;case I:return(t=Pu(19,n,e,i)).elementType=I,t.lanes=s,t;case j:return Du(n,i,s,e);default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case k:a=10;break t;case O:a=9;break t;case T:a=11;break t;case P:a=14;break t;case M:a=16,r=null;break t}throw Error(o(130,null==t?t:typeof t,""))}return(e=Pu(a,n,e,i)).elementType=t,e.type=r,e.lanes=s,e}function Au(t,e,n,r){return(t=Pu(7,t,r,e)).lanes=n,t}function Du(t,e,n,r){return(t=Pu(22,t,r,e)).elementType=j,t.lanes=n,t.stateNode={isHidden:!1},t}function Lu(t,e,n){return(t=Pu(6,t,null,e)).lanes=n,t}function Uu(t,e,n){return(e=Pu(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function zu(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ge(0),this.expirationTimes=ge(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ge(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bu(t,e,n,r,i,o,s,a,l){return t=new zu(t,e,n,a,l),1===e?(e=1,!0===o&&(e|=8)):e=0,o=Pu(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lo(o),t}function Fu(t){if(!t)return Oi;t:{if(qt(t=t._reactInternals)!==t||1!==t.tag)throw Error(o(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break t;case 1:if(Mi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break t}}e=e.return}while(null!==e);throw Error(o(171))}if(1===t.tag){var n=t.type;if(Mi(n))return Ai(t,n,e)}return e}function qu(t,e,n,r,i,o,s,a,l){return(t=Bu(n,r,!0,t,0,o,0,a,l)).context=Fu(null),n=t.current,(o=zo(r=tu(),i=eu(n))).callback=void 0!==e&&null!==e?e:null,Bo(n,o,i),t.current.lanes=i,_e(t,i,r),ru(t,r),t}function Hu(t,e,n,r){var i=e.current,o=tu(),s=eu(i);return n=Fu(n),null===e.context?e.context=n:e.pendingContext=n,(e=zo(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),null!==(t=Bo(i,e,s))&&(nu(t,i,s,o),Fo(t,i,s)),s}function Wu(t){return(t=t.current).child?(t.child.tag,t.child.stateNode):null}function Vu(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function Zu(t,e){Vu(t,e),(t=t.alternate)&&Vu(t,e)}xl=function(t,e,n){if(null!==t)if(t.memoizedProps!==e.pendingProps||Ni.current)va=!0;else{if(0===(t.lanes&n)&&0===(128&e.flags))return va=!1,function(t,e,n){switch(e.tag){case 3:Na(e),po();break;case 5:Qo(e);break;case 1:Mi(e.type)&&Di(e);break;case 4:Ko(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ki(xo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=e.memoizedState))return null!==r.dehydrated?(ki(ts,1&ts.current),e.flags|=128,null):0!==(n&e.child.childLanes)?La(t,e,n):(ki(ts,1&ts.current),null!==(t=Wa(t,e,n))?t.sibling:null);ki(ts,1&ts.current);break;case 19:if(r=0!==(n&e.childLanes),0!==(128&t.flags)){if(r)return qa(t,e,n);e.flags|=128}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(ts,ts.current),r)break;return null;case 22:case 23:return e.lanes=0,Ea(t,e,n)}return Wa(t,e,n)}(t,e,n);va=0!==(131072&t.flags)}else va=!1,io&&0!==(1048576&e.flags)&&Ji(e,Zi,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ha(t,e),t=e.pendingProps;var i=Pi(e,Ti.current);Io(e,n),i=gs(null,e,r,t,i,n);var s=_s();return e.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mi(r)?(s=!0,Di(e)):s=!1,e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Lo(e),i.updater=ia,e.stateNode=i,i._reactInternals=e,la(e,r,t,n),e=Ta(null,e,r,!0,s,n)):(e.tag=0,io&&s&&to(e),ba(null,e,i,n),e=e.child),e;case 16:r=e.elementType;t:{switch(Ha(t,e),t=e.pendingProps,r=(i=r._init)(r._payload),e.type=r,i=e.tag=function(t){if("function"===typeof t)return Mu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===T)return 11;if(t===P)return 14}return 2}(r),t=na(r,t),i){case 0:e=ka(null,e,r,t,n);break t;case 1:e=Oa(null,e,r,t,n);break t;case 11:e=wa(null,e,r,t,n);break t;case 14:e=Sa(null,e,r,na(r.type,t),n);break t}throw Error(o(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,ka(t,e,r,i=e.elementType===r?i:na(r,i),n);case 1:return r=e.type,i=e.pendingProps,Oa(t,e,r,i=e.elementType===r?i:na(r,i),n);case 3:t:{if(Na(e),null===t)throw Error(o(387));r=e.pendingProps,i=(s=e.memoizedState).element,Uo(t,e),Ho(e,r,null,n);var a=e.memoizedState;if(r=a.element,s.isDehydrated){if(s={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,256&e.flags){e=Ia(t,e,r,n,i=ua(Error(o(423)),e));break t}if(r!==i){e=Ia(t,e,r,n,i=ua(Error(o(424)),e));break t}for(ro=ui(e.stateNode.containerInfo.firstChild),no=e,io=!0,oo=null,n=So(e,null,r,n),e.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){e=Wa(t,e,n);break t}ba(t,e,r,n)}e=e.child}return e;case 5:return Qo(e),null===t&&uo(e),r=e.type,i=e.pendingProps,s=null!==t?t.memoizedProps:null,a=i.children,ni(r,i)?a=null:null!==s&&ni(r,s)&&(e.flags|=32),Ca(t,e),ba(t,e,a,n),e.child;case 6:return null===t&&uo(e),null;case 13:return La(t,e,n);case 4:return Ko(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=wo(e,null,r,n):ba(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,wa(t,e,r,i=e.elementType===r?i:na(r,i),n);case 7:return ba(t,e,e.pendingProps,n),e.child;case 8:case 12:return ba(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,a=i.value,ki(xo,r._currentValue),r._currentValue=a,null!==s)if(ar(s.value,a)){if(s.children===i.children&&!Ni.current){e=Wa(t,e,n);break t}}else for(null!==(s=e.child)&&(s.return=e);null!==s;){var l=s.dependencies;if(null!==l){a=s.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===s.tag){(u=zo(-1,n&-n)).tag=2;var c=s.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}s.lanes|=n,null!==(u=s.alternate)&&(u.lanes|=n),No(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(10===s.tag)a=s.type===e.type?null:s.child;else if(18===s.tag){if(null===(a=s.return))throw Error(o(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),No(a,n,e),a=s.sibling}else a=s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===e){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}ba(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Io(e,n),r=r(i=Po(i)),e.flags|=1,ba(t,e,r,n),e.child;case 14:return i=na(r=e.type,e.pendingProps),Sa(t,e,r,i=na(r.type,i),n);case 15:return xa(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:na(r,i),Ha(t,e),e.tag=1,Mi(r)?(t=!0,Di(e)):t=!1,Io(e,n),sa(e,r,i),la(e,r,i,n),Ta(null,e,r,!0,t,n);case 19:return qa(t,e,n);case 22:return Ea(t,e,n)}throw Error(o(156,e.tag))};var Gu="function"===typeof reportError?reportError:function(t){console.error(t)};function Yu(t){this._internalRoot=t}function $u(t){this._internalRoot=t}function Ku(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)}function Xu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Qu(){}function Ju(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if("function"===typeof i){var a=i;i=function(){var t=Wu(s);a.call(t)}}Hu(e,s,t,i)}else s=function(t,e,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var t=Wu(s);o.call(t)}}var s=qu(e,r,t,0,null,!1,0,"",Qu);return t._reactRootContainer=s,t[pi]=s.current,qr(8===t.nodeType?t.parentNode:t),cu(),s}for(;i=t.lastChild;)t.removeChild(i);if("function"===typeof r){var a=r;r=function(){var t=Wu(l);a.call(t)}}var l=Bu(t,0,!1,null,0,!1,0,"",Qu);return t._reactRootContainer=l,t[pi]=l.current,qr(8===t.nodeType?t.parentNode:t),cu((function(){Hu(e,l,n,r)})),l}(n,e,t,i,r);return Wu(s)}$u.prototype.render=Yu.prototype.render=function(t){var e=this._internalRoot;if(null===e)throw Error(o(409));Hu(t,e,null,null)},$u.prototype.unmount=Yu.prototype.unmount=function(){var t=this._internalRoot;if(null!==t){this._internalRoot=null;var e=t.containerInfo;cu((function(){Hu(null,t,null,null)})),e[pi]=null}},$u.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ee();t={blockedOn:null,target:t,priority:e};for(var n=0;n<je.length&&0!==e&&e<je[n].priority;n++);je.splice(n,0,t),0===n&&Le(t)}},we=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=he(e.pendingLanes);0!==n&&(ye(e,1|n),ru(e,Xt()),0===(6&Tl)&&(ql=Xt()+500,qi()))}break;case 13:cu((function(){var e=Ao(t,1);if(null!==e){var n=tu();nu(e,t,1,n)}})),Zu(t,1)}},Se=function(t){if(13===t.tag){var e=Ao(t,134217728);if(null!==e)nu(e,t,134217728,tu());Zu(t,134217728)}},xe=function(t){if(13===t.tag){var e=eu(t),n=Ao(t,e);if(null!==n)nu(n,t,e,tu());Zu(t,e)}},Ee=function(){return ve},Ce=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}},St=function(t,e,n){switch(e){case"input":if(Q(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=wi(r);if(!i)throw Error(o(90));G(r),Q(r,i)}}}break;case"textarea":ot(t,n);break;case"select":null!=(e=n.value)&&nt(t,!!n.multiple,e,!1)}},Tt=uu,Nt=cu;var tc={usingClientEntryPoint:!1,Events:[vi,bi,wi,kt,Ot,uu]},ec={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nc={bundleType:ec.bundleType,version:ec.version,rendererPackageName:ec.rendererPackageName,rendererConfig:ec.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Vt(t))?null:t.stateNode},findFiberByHostInstance:ec.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{ie=rc.inject(nc),oe=rc}catch(ct){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,e.createPortal=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Ku(e))throw Error(o(200));return function(t,e,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:t,containerInfo:e,implementation:n}}(t,e,null,n)},e.createRoot=function(t,e){if(!Ku(t))throw Error(o(299));var n=!1,r="",i=Gu;return null!==e&&void 0!==e&&(!0===e.unstable_strictMode&&(n=!0),void 0!==e.identifierPrefix&&(r=e.identifierPrefix),void 0!==e.onRecoverableError&&(i=e.onRecoverableError)),e=Bu(t,1,!1,null,0,n,0,r,i),t[pi]=e.current,qr(8===t.nodeType?t.parentNode:t),new Yu(e)},e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(o(188));throw t=Object.keys(t).join(","),Error(o(268,t))}return t=null===(t=Vt(e))?null:t.stateNode},e.flushSync=function(t){return cu(t)},e.hydrate=function(t,e,n){if(!Xu(e))throw Error(o(200));return Ju(null,t,e,!0,n)},e.hydrateRoot=function(t,e,n){if(!Ku(t))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,s="",a=Gu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),e=qu(e,null,t,1,null!=n?n:null,i,0,s,a),t[pi]=e.current,qr(t),r)for(t=0;t<r.length;t++)i=(i=(n=r[t])._getVersion)(n._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new $u(e)},e.render=function(t,e,n){if(!Xu(e))throw Error(o(200));return Ju(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Xu(t))throw Error(o(40));return!!t._reactRootContainer&&(cu((function(){Ju(null,null,t,!1,(function(){t._reactRootContainer=null,t[pi]=null}))})),!0)},e.unstable_batchedUpdates=uu,e.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xu(n))throw Error(o(200));if(null==t||void 0===t._reactInternals)throw Error(o(38));return Ju(t,e,n,!1,r)},e.version="18.3.1-next-f1338f8080-20240426"},4391:(t,e,n)=>{"use strict";var r=n(7950);e.H=r.createRoot,r.hydrateRoot},7950:(t,e,n)=>{"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(2730)},1153:(t,e,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(t,e,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==e.key&&(u=""+e.key),void 0!==e.ref&&(c=e.ref),e)s.call(e,r)&&!l.hasOwnProperty(r)&&(o[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps)void 0===o[r]&&(o[r]=e[r]);return{$$typeof:i,type:t,key:u,ref:c,props:o,_owner:a.current}}e.Fragment=o,e.jsx=u,e.jsxs=u},4202:(t,e)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function _(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||p}function y(){}function v(t,e,n){this.props=t,this.context=e,this.refs=g,this.updater=n||p}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},y.prototype=_.prototype;var b=v.prototype=new y;b.constructor=v,m(b,_.prototype),b.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function C(t,e,r){var i,o={},s=null,a=null;if(null!=e)for(i in void 0!==e.ref&&(a=e.ref),void 0!==e.key&&(s=""+e.key),e)S.call(e,i)&&!E.hasOwnProperty(i)&&(o[i]=e[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:t,key:s,ref:a,props:o,_owner:x.current}}function k(t){return"object"===typeof t&&null!==t&&t.$$typeof===n}var O=/\/+/g;function T(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function N(t,e,i,o,s){var a=typeof t;"undefined"!==a&&"boolean"!==a||(t=null);var l=!1;if(null===t)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case n:case r:l=!0}}if(l)return s=s(l=t),t=""===o?"."+T(l,0):o,w(s)?(i="",null!=t&&(i=t.replace(O,"$&/")+"/"),N(s,e,i,"",(function(t){return t}))):null!=s&&(k(s)&&(s=function(t,e){return{$$typeof:n,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(s,i+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(O,"$&/")+"/")+t)),e.push(s)),1;if(l=0,o=""===o?".":o+":",w(t))for(var u=0;u<t.length;u++){var c=o+T(a=t[u],u);l+=N(a,e,i,c,s)}else if(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=f&&t[f]||t["@@iterator"])?t:null}(t),"function"===typeof c)for(t=c.call(t),u=0;!(a=t.next()).done;)l+=N(a=a.value,e,i,c=o+T(a,u++),s);else if("object"===a)throw e=String(t),Error("Objects are not valid as a React child (found: "+("[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function I(t,e,n){if(null==t)return t;var r=[],i=0;return N(t,r,"","",(function(t){return e.call(n,t,i++)})),r}function P(t){if(-1===t._status){var e=t._result;(e=e()).then((function(e){0!==t._status&&-1!==t._status||(t._status=1,t._result=e)}),(function(e){0!==t._status&&-1!==t._status||(t._status=2,t._result=e)})),-1===t._status&&(t._status=0,t._result=e)}if(1===t._status)return t._result.default;throw t._result}var M={current:null},j={transition:null},R={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:j,ReactCurrentOwner:x};function A(){throw Error("act(...) is not supported in production builds of React.")}e.Children={map:I,forEach:function(t,e,n){I(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return I(t,(function(){e++})),e},toArray:function(t){return I(t,(function(t){return t}))||[]},only:function(t){if(!k(t))throw Error("React.Children.only expected to receive a single React element child.");return t}},e.Component=_,e.Fragment=i,e.Profiler=s,e.PureComponent=v,e.StrictMode=o,e.Suspense=c,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,e.act=A,e.cloneElement=function(t,e,r){if(null===t||void 0===t)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=m({},t.props),o=t.key,s=t.ref,a=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,a=x.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)S.call(e,u)&&!E.hasOwnProperty(u)&&(i[u]=void 0===e[u]&&void 0!==l?l[u]:e[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:t.type,key:o,ref:s,props:i,_owner:a}},e.createContext=function(t){return(t={$$typeof:l,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=C,e.createFactory=function(t){var e=C.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=k,e.lazy=function(t){return{$$typeof:d,_payload:{_status:-1,_result:t},_init:P}},e.memo=function(t,e){return{$$typeof:h,type:t,compare:void 0===e?null:e}},e.startTransition=function(t){var e=j.transition;j.transition={};try{t()}finally{j.transition=e}},e.unstable_act=A,e.useCallback=function(t,e){return M.current.useCallback(t,e)},e.useContext=function(t){return M.current.useContext(t)},e.useDebugValue=function(){},e.useDeferredValue=function(t){return M.current.useDeferredValue(t)},e.useEffect=function(t,e){return M.current.useEffect(t,e)},e.useId=function(){return M.current.useId()},e.useImperativeHandle=function(t,e,n){return M.current.useImperativeHandle(t,e,n)},e.useInsertionEffect=function(t,e){return M.current.useInsertionEffect(t,e)},e.useLayoutEffect=function(t,e){return M.current.useLayoutEffect(t,e)},e.useMemo=function(t,e){return M.current.useMemo(t,e)},e.useReducer=function(t,e,n){return M.current.useReducer(t,e,n)},e.useRef=function(t){return M.current.useRef(t)},e.useState=function(t){return M.current.useState(t)},e.useSyncExternalStore=function(t,e,n){return M.current.useSyncExternalStore(t,e,n)},e.useTransition=function(){return M.current.useTransition()},e.version="18.3.1"},5043:(t,e,n)=>{"use strict";t.exports=n(4202)},579:(t,e,n)=>{"use strict";t.exports=n(1153)},9966:(t,e,n)=>{var r=n(6382),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function s(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=s),s.prototype=Object.create(i.prototype),o(i,s),s.from=function(t,e,n){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},s.alloc=function(t,e,n){if("number"!==typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"===typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},s.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},s.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},7234:(t,e)=>{"use strict";function n(t,e){var n=t.length;t.push(e);t:for(;0<n;){var r=n-1>>>1,i=t[r];if(!(0<o(i,e)))break t;t[r]=e,t[n]=i,n=r}}function r(t){return 0===t.length?null:t[0]}function i(t){if(0===t.length)return null;var e=t[0],n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length,s=i>>>1;r<s;){var a=2*(r+1)-1,l=t[a],u=a+1,c=t[u];if(0>o(l,n))u<i&&0>o(c,l)?(t[r]=c,t[u]=n,r=u):(t[r]=l,t[a]=n,r=a);else{if(!(u<i&&0>o(c,n)))break t;t[r]=c,t[u]=n,r=u}}}return e}function o(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();e.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,_="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(t){for(var e=r(c);null!==e;){if(null===e.callback)i(c);else{if(!(e.startTime<=t))break;i(c),e.sortIndex=e.expirationTime,n(u,e)}e=r(c)}}function w(t){if(g=!1,b(t),!m)if(null!==r(u))m=!0,j(S);else{var e=r(c);null!==e&&R(w,e.startTime-t)}}function S(t,n){m=!1,g&&(g=!1,y(k),k=-1),p=!0;var o=f;try{for(b(n),d=r(u);null!==d&&(!(d.expirationTime>n)||t&&!N());){var s=d.callback;if("function"===typeof s){d.callback=null,f=d.priorityLevel;var a=s(d.expirationTime<=n);n=e.unstable_now(),"function"===typeof a?d.callback=a:d===r(u)&&i(u),b(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&R(w,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,C=null,k=-1,O=5,T=-1;function N(){return!(e.unstable_now()-T<O)}function I(){if(null!==C){var t=e.unstable_now();T=t;var n=!0;try{n=C(!0,t)}finally{n?x():(E=!1,C=null)}}else E=!1}if("function"===typeof v)x=function(){v(I)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,M=P.port2;P.port1.onmessage=I,x=function(){M.postMessage(null)}}else x=function(){_(I,0)};function j(t){C=t,E||(E=!0,x())}function R(t,n){k=_((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){m||p||(m=!0,j(S))},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<t?Math.floor(1e3/t):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(t){switch(f){case 1:case 2:case 3:var e=3;break;default:e=f}var n=f;f=e;try{return t()}finally{f=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=f;f=t;try{return e()}finally{f=n}},e.unstable_scheduleCallback=function(t,i,o){var s=e.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?s+o:s:o=s,t){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return t={id:h++,callback:i,priorityLevel:t,startTime:o,expirationTime:a=o+a,sortIndex:-1},o>s?(t.sortIndex=o,n(c,t),null===r(u)&&t===r(c)&&(g?(y(k),k=-1):g=!0,R(w,o-s))):(t.sortIndex=a,n(u,t),m||p||(m=!0,j(S))),t},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(t){var e=f;return function(){var n=f;f=e;try{return t.apply(this,arguments)}finally{f=n}}}},8853:(t,e,n)=>{"use strict";t.exports=n(7234)},8694:(t,e,n)=>{"use strict";var r=n(9966).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!==typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=l,this.end=u,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=c,this.end=h,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function s(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,n=function(t,e){if(128!==(192&e[0]))return t.lastNeed=0,"\ufffd";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"\ufffd";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"\ufffd"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function l(t,e){if((t.length-e)%2===0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function c(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\ufffd":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=s(e[r]);if(i>=0)return i>0&&(t.lastNeed=i-1),i;if(--r<n||-2===i)return 0;if(i=s(e[r]),i>=0)return i>0&&(t.lastNeed=i-2),i;if(--r<n||-2===i)return 0;if(i=s(e[r]),i>=0)return i>0&&(2===i?i=0:t.lastNeed=i-3),i;return 0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r].call(o.exports,o,o.exports,n),o.exports}n.m=t,n.u=t=>"static/js/process.worker.acd24d65.chunk.js",n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.p="./",n.b=document.baseURI||self.location.href,(()=>{"use strict";var t=n(5043),e=n(4391);let r=function(t){return t.Start="start",t.Query="query",t.Node="node",t.Label="label",t.Type="type",t.Rel="relationship",t.History="history",t}({}),i=function(t){return t.String="String",t.Integer="Integer",t.Float="Float",t.Boolean="Boolean",t.List="List",t.Map="Map",t.Point="Point",t.Date="Date",t.Time="Time",t.DateTime="DateTime",t.LocalTime="LocalTime",t.LocalDateTime="LocalDateTime",t.Duration="Duration",t}({}),o=function(t){return t[t.Table=1]="Table",t[t.Graph=2]="Graph",t[t.Summary=3]="Summary",t[t.JSON=4]="JSON",t}({}),s=function(t){return t[t.Neo4j=0]="Neo4j",t[t.Memgraph=1]="Memgraph",t[t.Neptune=2]="Neptune",t}({});var a=n(579);class l extends t.Component{render(){return(0,a.jsxs)("div",{className:"field",children:[(0,a.jsxs)("label",{className:"switch "+(this.props.color||""),children:[(0,a.jsx)("input",{type:"checkbox",name:this.props.name,onChange:this.props.onChange,checked:this.props.checked||!1,disabled:this.props.disabled||!1}),(0,a.jsx)("span",{className:"slider"})," ",this.props.label]}),this.props.help&&(0,a.jsx)("p",{className:"help",children:this.props.help})]})}}class u extends t.Component{constructor(){super(...arguments),this.ref=t.createRef(),this.highlightRef=t.createRef(),this.state={height:0},this.resize=()=>{if(!1!==this.props.autoresize){this.ref.current.style.height="0px";const t=window.getComputedStyle(this.ref.current);this.ref.current.style.height=Math.ceil(parseFloat(t.getPropertyValue("border-top-width")))+this.ref.current.scrollHeight+Math.ceil(parseFloat(t.getPropertyValue("border-bottom-width")))+"px"}},this.highlight=()=>{if(this.props.highlight){let t=this.ref.current.value;for(const e in this.props.highlight)for(const n of this.props.highlight[e])t=t.replace(new RegExp("(?<!>)\\b"+n+"\\b(?!<)","gi"),`<mark style="${"#"===e[0]?"color: "+e:""};">$&</mark>`);this.highlightRef.current.innerHTML=t}}}componentDidMount(){this.resize(),this.highlight()}componentDidUpdate(){this.resize(),this.highlight()}render(){return(0,a.jsxs)(a.Fragment,{children:[this.props.highlight&&(0,a.jsx)("div",{className:"highlight-backdrop textarea "+(this.props.color||""),children:(0,a.jsx)("div",{className:"highlights",ref:this.highlightRef})}),(0,a.jsx)("textarea",{name:this.props.name,className:"textarea "+(this.props.color||""),value:this.props.value,onChange:this.props.onChange,ref:this.ref,autoFocus:this.props.focus||!1,placeholder:this.props.placeholder,required:this.props.required,onKeyDown:this.props.onKeyDown})]})}}class c extends t.Component{render(){return(0,a.jsxs)("button",{className:"button "+(this.props.color||""),onClick:this.props.onClick,type:this.props.type||"button",title:this.props.title||"",value:this.props.value,children:[this.props.icon&&(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:this.props.icon})}),this.props.text&&(0,a.jsx)("span",{children:this.props.text}),this.props.children]})}}class h extends t.Component{render(){return(0,a.jsx)(c,{color:"tag is-link is-rounded px-2 "+(this.props.size||""),onClick:()=>this.props.tabManager.add(this.props.label,"fa-regular fa-circle",r.Label,{label:this.props.label,database:this.props.database}),text:this.props.label.startsWith("*")?"*":":"+this.props.label})}}class d extends t.Component{render(){return(0,a.jsx)(c,{color:"tag is-info is-rounded px-2 has-text-white "+(this.props.size||""),onClick:()=>this.props.tabManager.add(this.props.type,"fa-solid fa-arrow-right-long",r.Type,{type:this.props.type,database:this.props.database}),text:this.props.type.startsWith("*")?"*":":"+this.props.type})}}var f,p=n(2636);function m(t){const e=null===t||void 0===t?void 0:t.host;return Boolean((null===e||void 0===e?void 0:e.shadowRoot)===t)}function g(t){return"[object ShadowRoot]"===Object.prototype.toString.call(t)}function _(t){try{const n=t.rules||t.cssRules;return n?((e=Array.from(n,y).join("")).includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e):null}catch(n){return null}var e}function y(t){let e;if(function(t){return"styleSheet"in t}(t))try{e=_(t.styleSheet)||function(t){const{cssText:e}=t;if(e.split('"').length<3)return e;const n=["@import",`url(${JSON.stringify(t.href)})`];return""===t.layerName?n.push("layer"):t.layerName&&n.push(`layer(${t.layerName})`),t.supportsText&&n.push(`supports(${t.supportsText})`),t.media.length&&n.push(t.media.mediaText),n.join(" ")+";"}(t)}catch(n){}else if(function(t){return"selectorText"in t}(t)&&t.selectorText.includes(":"))return function(t){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}(t.cssText);return e||t.cssText}!function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"}(f||(f={}));class v{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){var e;if(!t)return-1;const n=null===(e=this.getMeta(t))||void 0===e?void 0:e.id;return null!==n&&void 0!==n?n:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const e=this.getId(t);this.idNodeMap.delete(e),t.childNodes&&t.childNodes.forEach((t=>this.removeNodeFromMap(t)))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,e){const n=e.id;this.idNodeMap.set(n,t),this.nodeMetaMap.set(t,e)}replace(t,e){const n=this.getNode(t);if(n){const t=this.nodeMetaMap.get(n);t&&this.nodeMetaMap.set(e,t)}this.idNodeMap.set(t,e)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function b(t){let{element:e,maskInputOptions:n,tagName:r,type:i,value:o,maskInputFn:s}=t,a=o||"";const l=i&&w(i);return(n[r.toLowerCase()]||l&&n[l])&&(a=s?s(a,e):"*".repeat(a.length)),a}function w(t){return t.toLowerCase()}const S="__rrweb_original__";function x(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?w(e):null}function E(t,e){var n;let r;try{r=new URL(t,null!==e&&void 0!==e?e:window.location.href)}catch(o){return null}const i=r.pathname.match(/\.([0-9a-z]+)(?:$)/i);return null!==(n=null===i||void 0===i?void 0:i[1])&&void 0!==n?n:null}let C=1;const k=new RegExp("[^a-z0-9-_:]"),O=-2;function T(){return C++}let N,I;const P=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,M=/^(?:[a-z+]+:)?\/\//i,j=/^www\..*/i,R=/^(data:)([^,]*),(.*)/i;function A(t,e){return(t||"").replace(P,((t,n,r,i,o,s)=>{const a=r||o||s,l=n||i||"";if(!a)return t;if(M.test(a)||j.test(a))return`url(${l}${a}${l})`;if(R.test(a))return`url(${l}${a}${l})`;if("/"===a[0])return`url(${l}${function(t){let e="";return e=t.indexOf("//")>-1?t.split("/").slice(0,3).join("/"):t.split("/")[0],e=e.split("?")[0],e}(e)+a}${l})`;const u=e.split("/"),c=a.split("/");u.pop();for(const e of c)"."!==e&&(".."===e?u.pop():u.push(e));return`url(${l}${u.join("/")}${l})`}))}const D=/^[^ \t\n\r\u000c]+/,L=/^[, \t\n\r\u000c]+/;function U(t,e){if(!e||""===e.trim())return e;const n=t.createElement("a");return n.href=e,n.href}function z(t){return Boolean("svg"===t.tagName||t.ownerSVGElement)}function B(){const t=document.createElement("a");return t.href="",t.href}function F(t,e,n,r){return r?"src"===n||"href"===n&&("use"!==e||"#"!==r[0])||"xlink:href"===n&&"#"!==r[0]?U(t,r):"background"!==n||"table"!==e&&"td"!==e&&"th"!==e?"srcset"===n?function(t,e){if(""===e.trim())return e;let n=0;function r(t){let r;const i=t.exec(e.substring(n));return i?(r=i[0],n+=r.length,r):""}const i=[];for(;r(L),!(n>=e.length);){let o=r(D);if(","===o.slice(-1))o=U(t,o.substring(0,o.length-1)),i.push(o);else{let r="";o=U(t,o);let s=!1;for(;;){const t=e.charAt(n);if(""===t){i.push((o+r).trim());break}if(s)")"===t&&(s=!1);else{if(","===t){n+=1,i.push((o+r).trim());break}"("===t&&(s=!0)}r+=t,n+=1}}}return i.join(", ")}(t,r):"style"===n?A(r,B()):"object"===e&&"data"===n?U(t,r):r:U(t,r):r}function q(t,e,n){return("video"===t||"audio"===t)&&"autoplay"===e}function H(t,e,n){if(!t)return!1;if(t.nodeType!==t.ELEMENT_NODE)return!!n&&H(t.parentNode,e,n);for(let r=t.classList.length;r--;){const n=t.classList[r];if(e.test(n))return!0}return!!n&&H(t.parentNode,e,n)}function W(t,e,n,r){try{const i=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(null===i)return!1;if("string"===typeof e){if(r){if(i.closest(`.${e}`))return!0}else if(i.classList.contains(e))return!0}else if(H(i,e,r))return!0;if(n)if(r){if(i.closest(n))return!0}else if(i.matches(n))return!0}catch(i){}return!1}function V(t,e){const{doc:n,mirror:r,blockClass:i,blockSelector:o,needsMask:s,inlineStylesheet:a,maskInputOptions:l={},maskTextFn:u,maskInputFn:c,dataURLOptions:h={},inlineImages:d,recordCanvas:p,keepIframeSrcFn:m,newlyAddedElement:g=!1}=e,y=function(t,e){if(!e.hasNode(t))return;const n=e.getId(t);return 1===n?void 0:n}(n,r);switch(t.nodeType){case t.DOCUMENT_NODE:return"CSS1Compat"!==t.compatMode?{type:f.Document,childNodes:[],compatMode:t.compatMode}:{type:f.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:f.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:y};case t.ELEMENT_NODE:return function(t,e){const{doc:n,blockClass:r,blockSelector:i,inlineStylesheet:o,maskInputOptions:s={},maskInputFn:a,dataURLOptions:l={},inlineImages:u,recordCanvas:c,keepIframeSrcFn:h,newlyAddedElement:d=!1,rootId:p}=e,m=function(t,e,n){try{if("string"===typeof e){if(t.classList.contains(e))return!0}else for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}if(n)return t.matches(n)}catch(r){}return!1}(t,r,i),g=function(t){if(t instanceof HTMLFormElement)return"form";const e=w(t.tagName);return k.test(e)?"div":e}(t);let y={};const v=t.attributes.length;for(let f=0;f<v;f++){const e=t.attributes[f];q(g,e.name,e.value)||(y[e.name]=F(n,g,w(e.name),e.value))}if("link"===g&&o){const e=Array.from(n.styleSheets).find((e=>e.href===t.href));let r=null;e&&(r=_(e)),r&&(delete y.rel,delete y.href,y._cssText=A(r,e.href))}if("style"===g&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const e=_(t.sheet);e&&(y._cssText=A(e,B()))}if("input"===g||"textarea"===g||"select"===g){const e=t.value,n=t.checked;"radio"!==y.type&&"checkbox"!==y.type&&"submit"!==y.type&&"button"!==y.type&&e?y.value=b({element:t,type:x(t),tagName:g,value:e,maskInputOptions:s,maskInputFn:a}):n&&(y.checked=n)}"option"===g&&(t.selected&&!s.select?y.selected=!0:delete y.selected);if("canvas"===g&&c)if("2d"===t.__context)(function(t){const e=t.getContext("2d");if(!e)return!0;for(let n=0;n<t.width;n+=50)for(let r=0;r<t.height;r+=50){const i=e.getImageData,o=S in i?i[S]:i;if(new Uint32Array(o.call(e,n,r,Math.min(50,t.width-n),Math.min(50,t.height-r)).data.buffer).some((t=>0!==t)))return!1}return!0})(t)||(y.rr_dataURL=t.toDataURL(l.type,l.quality));else if(!("__context"in t)){const e=t.toDataURL(l.type,l.quality),n=document.createElement("canvas");n.width=t.width,n.height=t.height;e!==n.toDataURL(l.type,l.quality)&&(y.rr_dataURL=e)}if("img"===g&&u){N||(N=n.createElement("canvas"),I=N.getContext("2d"));const e=t,r=e.crossOrigin;e.crossOrigin="anonymous";const i=()=>{e.removeEventListener("load",i);try{N.width=e.naturalWidth,N.height=e.naturalHeight,I.drawImage(e,0,0),y.rr_dataURL=N.toDataURL(l.type,l.quality)}catch(t){console.warn(`Cannot inline img src=${e.currentSrc}! Error: ${t}`)}r?y.crossOrigin=r:e.removeAttribute("crossorigin")};e.complete&&0!==e.naturalWidth?i():e.addEventListener("load",i)}if("audio"===g||"video"===g){const e=y;e.rr_mediaState=t.paused?"paused":"played",e.rr_mediaCurrentTime=t.currentTime,e.rr_mediaPlaybackRate=t.playbackRate,e.rr_mediaMuted=t.muted,e.rr_mediaLoop=t.loop,e.rr_mediaVolume=t.volume}d||(t.scrollLeft&&(y.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(y.rr_scrollTop=t.scrollTop));if(m){const{width:e,height:n}=t.getBoundingClientRect();y={class:y.class,rr_width:`${e}px`,rr_height:`${n}px`}}"iframe"!==g||h(y.src)||(t.contentDocument||(y.rr_src=y.src),delete y.src);let E;try{customElements.get(g)&&(E=!0)}catch(C){}return{type:f.Element,tagName:g,attributes:y,childNodes:[],isSVG:z(t)||void 0,needBlock:m,rootId:p,isCustom:E}}(t,{doc:n,blockClass:i,blockSelector:o,inlineStylesheet:a,maskInputOptions:l,maskInputFn:c,dataURLOptions:h,inlineImages:d,recordCanvas:p,keepIframeSrcFn:m,newlyAddedElement:g,rootId:y});case t.TEXT_NODE:return function(t,e){var n;const{needsMask:r,maskTextFn:i,rootId:o}=e,s=t.parentNode&&t.parentNode.tagName;let a=t.textContent;const l="STYLE"===s||void 0,u="SCRIPT"===s||void 0;if(l&&a){try{t.nextSibling||t.previousSibling||(null===(n=t.parentNode.sheet)||void 0===n?void 0:n.cssRules)&&(a=_(t.parentNode.sheet))}catch(c){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${c}`,t)}a=A(a,B())}u&&(a="SCRIPT_PLACEHOLDER");!l&&!u&&a&&r&&(a=i?i(a,t.parentElement):a.replace(/[\S]/g,"*"));return{type:f.Text,textContent:a||"",isStyle:l,rootId:o}}(t,{needsMask:s,maskTextFn:u,rootId:y});case t.CDATA_SECTION_NODE:return{type:f.CDATA,textContent:"",rootId:y};case t.COMMENT_NODE:return{type:f.Comment,textContent:t.textContent||"",rootId:y};default:return!1}}function Z(t){return void 0===t||null===t?"":t.toLowerCase()}function G(t,e){const{doc:n,mirror:r,blockClass:i,blockSelector:o,maskTextClass:s,maskTextSelector:a,skipChild:l=!1,inlineStylesheet:u=!0,maskInputOptions:c={},maskTextFn:h,maskInputFn:d,slimDOMOptions:p,dataURLOptions:_={},inlineImages:y=!1,recordCanvas:v=!1,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:S=5e3,onStylesheetLoad:x,stylesheetLoadTimeout:C=5e3,keepIframeSrcFn:k=()=>!1,newlyAddedElement:N=!1}=e;let{needsMask:I}=e,{preserveWhiteSpace:P=!0}=e;if(!I&&t.childNodes){I=W(t,s,a,void 0===I)}const M=V(t,{doc:n,mirror:r,blockClass:i,blockSelector:o,needsMask:I,inlineStylesheet:u,maskInputOptions:c,maskTextFn:h,maskInputFn:d,dataURLOptions:_,inlineImages:y,recordCanvas:v,keepIframeSrcFn:k,newlyAddedElement:N});if(!M)return console.warn(t,"not serialized"),null;let j;j=r.hasNode(t)?r.getId(t):!function(t,e){if(e.comment&&t.type===f.Comment)return!0;if(t.type===f.Element){if(e.script&&("script"===t.tagName||"link"===t.tagName&&("preload"===t.attributes.rel||"modulepreload"===t.attributes.rel)&&"script"===t.attributes.as||"link"===t.tagName&&"prefetch"===t.attributes.rel&&"string"===typeof t.attributes.href&&"js"===E(t.attributes.href)))return!0;if(e.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(Z(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===Z(t.attributes.name)||"icon"===Z(t.attributes.rel)||"apple-touch-icon"===Z(t.attributes.rel)||"shortcut icon"===Z(t.attributes.rel))))return!0;if("meta"===t.tagName){if(e.headMetaDescKeywords&&Z(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(Z(t.attributes.property).match(/^(og|twitter|fb):/)||Z(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===Z(t.attributes.name)))return!0;if(e.headMetaRobots&&("robots"===Z(t.attributes.name)||"googlebot"===Z(t.attributes.name)||"bingbot"===Z(t.attributes.name)))return!0;if(e.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(e.headMetaAuthorship&&("author"===Z(t.attributes.name)||"generator"===Z(t.attributes.name)||"framework"===Z(t.attributes.name)||"publisher"===Z(t.attributes.name)||"progid"===Z(t.attributes.name)||Z(t.attributes.property).match(/^article:/)||Z(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&("google-site-verification"===Z(t.attributes.name)||"yandex-verification"===Z(t.attributes.name)||"csrf-token"===Z(t.attributes.name)||"p:domain_verify"===Z(t.attributes.name)||"verify-v1"===Z(t.attributes.name)||"verification"===Z(t.attributes.name)||"shopify-checkout-api-token"===Z(t.attributes.name)))return!0}}return!1}(M,p)&&(P||M.type!==f.Text||M.isStyle||M.textContent.replace(/^\s+|\s+$/gm,"").length)?T():O;const R=Object.assign(M,{id:j});if(r.add(t,R),j===O)return null;b&&b(t);let A=!l;if(R.type===f.Element){A=A&&!R.needBlock,delete R.needBlock;const e=t.shadowRoot;e&&g(e)&&(R.isShadowHost=!0)}if((R.type===f.Document||R.type===f.Element)&&A){p.headWhitespace&&R.type===f.Element&&"head"===R.tagName&&(P=!1);const e={doc:n,mirror:r,blockClass:i,blockSelector:o,needsMask:I,maskTextClass:s,maskTextSelector:a,skipChild:l,inlineStylesheet:u,maskInputOptions:c,maskTextFn:h,maskInputFn:d,slimDOMOptions:p,dataURLOptions:_,inlineImages:y,recordCanvas:v,preserveWhiteSpace:P,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:S,onStylesheetLoad:x,stylesheetLoadTimeout:C,keepIframeSrcFn:k};if(R.type===f.Element&&"textarea"===R.tagName&&void 0!==R.attributes.value);else for(const n of Array.from(t.childNodes)){const t=G(n,e);t&&R.childNodes.push(t)}if(function(t){return t.nodeType===t.ELEMENT_NODE}(t)&&t.shadowRoot)for(const n of Array.from(t.shadowRoot.childNodes)){const r=G(n,e);r&&(g(t.shadowRoot)&&(r.isShadow=!0),R.childNodes.push(r))}}return t.parentNode&&m(t.parentNode)&&g(t.parentNode)&&(R.isShadow=!0),R.type===f.Element&&"iframe"===R.tagName&&function(t,e,n){const r=t.contentWindow;if(!r)return;let i,o=!1;try{i=r.document.readyState}catch(a){return}if("complete"!==i){const r=setTimeout((()=>{o||(e(),o=!0)}),n);return void t.addEventListener("load",(()=>{clearTimeout(r),o=!0,e()}))}const s="about:blank";if(r.location.href!==s||t.src===s||""===t.src)return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}(t,(()=>{const e=t.contentDocument;if(e&&w){const n=G(e,{doc:e,mirror:r,blockClass:i,blockSelector:o,needsMask:I,maskTextClass:s,maskTextSelector:a,skipChild:!1,inlineStylesheet:u,maskInputOptions:c,maskTextFn:h,maskInputFn:d,slimDOMOptions:p,dataURLOptions:_,inlineImages:y,recordCanvas:v,preserveWhiteSpace:P,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:S,onStylesheetLoad:x,stylesheetLoadTimeout:C,keepIframeSrcFn:k});n&&w(t,n)}}),S),R.type===f.Element&&"link"===R.tagName&&"string"===typeof R.attributes.rel&&("stylesheet"===R.attributes.rel||"preload"===R.attributes.rel&&"string"===typeof R.attributes.href&&"css"===E(R.attributes.href))&&function(t,e,n){let r,i=!1;try{r=t.sheet}catch(s){return}if(r)return;const o=setTimeout((()=>{i||(e(),i=!0)}),n);t.addEventListener("load",(()=>{clearTimeout(o),i=!0,e()}))}(t,(()=>{if(x){const e=G(t,{doc:n,mirror:r,blockClass:i,blockSelector:o,needsMask:I,maskTextClass:s,maskTextSelector:a,skipChild:!1,inlineStylesheet:u,maskInputOptions:c,maskTextFn:h,maskInputFn:d,slimDOMOptions:p,dataURLOptions:_,inlineImages:y,recordCanvas:v,preserveWhiteSpace:P,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:S,onStylesheetLoad:x,stylesheetLoadTimeout:C,keepIframeSrcFn:k});e&&x(t,e)}}),C),R}function Y(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document;const r={capture:!0,passive:!0};return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}const $="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.";let K={map:{},getId:()=>(console.error($),-1),getNode:()=>(console.error($),null),removeNodeFromMap(){console.error($)},has:()=>(console.error($),!1),reset(){console.error($)}};function X(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=null,i=0;return function(){for(var o=arguments.length,s=new Array(o),a=0;a<o;a++)s[a]=arguments[a];const l=Date.now();i||!1!==n.leading||(i=l);const u=e-(l-i),c=this;u<=0||u>e?(r&&(clearTimeout(r),r=null),i=l,t.apply(c,s)):r||!1===n.trailing||(r=setTimeout((()=>{i=!1===n.leading?0:Date.now(),r=null,t.apply(c,s)}),u))}}function Q(t,e,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window;const o=i.Object.getOwnPropertyDescriptor(t,e);return i.Object.defineProperty(t,e,r?n:{set(t){setTimeout((()=>{n.set.call(this,t)}),0),o&&o.set&&o.set.call(this,t)}}),()=>Q(t,e,o||{},!0)}function J(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],i=n(r);return"function"===typeof i&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=i,()=>{t[e]=r}}catch(r){return()=>{}}}"undefined"!==typeof window&&window.Proxy&&window.Reflect&&(K=new Proxy(K,{get:(t,e,n)=>("map"===e&&console.error($),Reflect.get(t,e,n))}));let tt=Date.now;function et(t){var e,n,r,i,o,s;const a=t.document;return{left:a.scrollingElement?a.scrollingElement.scrollLeft:void 0!==t.pageXOffset?t.pageXOffset:(null===a||void 0===a?void 0:a.documentElement.scrollLeft)||(null===(n=null===(e=null===a||void 0===a?void 0:a.body)||void 0===e?void 0:e.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===(r=null===a||void 0===a?void 0:a.body)||void 0===r?void 0:r.scrollLeft)||0,top:a.scrollingElement?a.scrollingElement.scrollTop:void 0!==t.pageYOffset?t.pageYOffset:(null===a||void 0===a?void 0:a.documentElement.scrollTop)||(null===(o=null===(i=null===a||void 0===a?void 0:a.body)||void 0===i?void 0:i.parentElement)||void 0===o?void 0:o.scrollTop)||(null===(s=null===a||void 0===a?void 0:a.body)||void 0===s?void 0:s.scrollTop)||0}}function nt(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function rt(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function it(t){if(!t)return null;return t.nodeType===t.ELEMENT_NODE?t:t.parentElement}function ot(t,e,n,r){if(!t)return!1;const i=it(t);if(!i)return!1;try{if("string"===typeof e){if(i.classList.contains(e))return!0;if(r&&null!==i.closest("."+e))return!0}else if(H(i,e,r))return!0}catch(o){}if(n){if(i.matches(n))return!0;if(r&&null!==i.closest(n))return!0}return!1}function st(t,e){return e.getId(t)===O}function at(t,e){if(m(t))return!1;const n=e.getId(t);return!e.has(n)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||at(t.parentNode,e))}function lt(t){return Boolean(t.changedTouches)}function ut(t,e){return Boolean("IFRAME"===t.nodeName&&e.getMeta(t))}function ct(t,e){return Boolean("LINK"===t.nodeName&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&"stylesheet"===t.getAttribute("rel")&&e.getMeta(t))}function ht(t){return Boolean(null===t||void 0===t?void 0:t.shadowRoot)}/[1-9][0-9]{12}/.test(Date.now().toString())||(tt=()=>(new Date).getTime());class dt{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var e;return null!==(e=this.styleIDMap.get(t))&&void 0!==e?e:-1}has(t){return this.styleIDMap.has(t)}add(t,e){if(this.has(t))return this.getId(t);let n;return n=void 0===e?this.id++:e,this.styleIDMap.set(t,n),this.idStyleMap.set(n,t),n}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function ft(t){var e,n;let r=null;return(null===(n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t))||void 0===n?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(r=t.getRootNode().host),r}function pt(t){const e=t.ownerDocument;if(!e)return!1;const n=function(t){let e,n=t;for(;e=ft(n);)n=e;return n}(t);return e.contains(n)}function mt(t){const e=t.ownerDocument;return!!e&&(e.contains(t)||pt(t))}var gt=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(gt||{}),_t=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(_t||{}),yt=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(yt||{}),vt=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(vt||{}),bt=(t=>(t[t["2D"]=0]="2D",t[t.WebGL=1]="WebGL",t[t.WebGL2=2]="WebGL2",t))(bt||{});function wt(t){return"__ln"in t}class St{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let e=this.head;for(let n=0;n<t;n++)e=(null===e||void 0===e?void 0:e.next)||null;return e}addNode(t){const e={value:t,previous:null,next:null};if(t.__ln=e,t.previousSibling&&wt(t.previousSibling)){const n=t.previousSibling.__ln.next;e.next=n,e.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=e,n&&(n.previous=e)}else if(t.nextSibling&&wt(t.nextSibling)&&t.nextSibling.__ln.previous){const n=t.nextSibling.__ln.previous;e.previous=n,e.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=e,n&&(n.next=e)}else this.head&&(this.head.previous=e),e.next=this.head,this.head=e;null===e.next&&(this.tail=e),this.length++}removeNode(t){const e=t.__ln;this.head&&(e.previous?(e.previous.next=e.next,e.next?e.next.previous=e.previous:this.tail=e.previous):(this.head=e.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const xt=(t,e)=>`${t}@${e}`;class Et{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],e=new Set,n=new St,r=t=>{let e=t,n=O;for(;n===O;)e=e&&e.nextSibling,n=e&&this.mirror.getId(e);return n},i=i=>{if(!i.parentNode||!mt(i)||"TEXTAREA"===i.parentNode.tagName)return;const o=m(i.parentNode)?this.mirror.getId(ft(i)):this.mirror.getId(i.parentNode),s=r(i);if(-1===o||-1===s)return n.addNode(i);const a=G(i,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:t=>{ut(t,this.mirror)&&this.iframeManager.addIframe(t),ct(t,this.mirror)&&this.stylesheetManager.trackLinkElement(t),ht(i)&&this.shadowDomManager.addShadowRoot(i.shadowRoot,this.doc)},onIframeLoad:(t,e)=>{this.iframeManager.attachIframe(t,e),this.shadowDomManager.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{this.stylesheetManager.attachLinkElement(t,e)}});a&&(t.push({parentId:o,nextId:s,node:a}),e.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const a of this.movedSet)kt(this.removes,a,this.mirror)&&!this.movedSet.has(a.parentNode)||i(a);for(const a of this.addedSet)Tt(this.droppedSet,a)||kt(this.removes,a,this.mirror)?Tt(this.movedSet,a)?i(a):this.droppedSet.add(a):i(a);let o=null;for(;n.length;){let t=null;if(o){const e=this.mirror.getId(o.value.parentNode),n=r(o.value);-1!==e&&-1!==n&&(t=o)}if(!t){let e=n.tail;for(;e;){const n=e;if(e=e.previous,n){const e=this.mirror.getId(n.value.parentNode);if(-1===r(n.value))continue;if(-1!==e){t=n;break}{const e=n.value;if(e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const r=e.parentNode.host;if(-1!==this.mirror.getId(r)){t=n;break}}}}}}if(!t){for(;n.head;)n.removeNode(n.head.value);break}o=t.previous,n.removeNode(t.value),i(t.value)}const s={texts:this.texts.map((t=>{const e=t.node;return e.parentNode&&"TEXTAREA"===e.parentNode.tagName&&this.genTextAreaValueMutation(e.parentNode),{id:this.mirror.getId(e),value:t.value}})).filter((t=>!e.has(t.id))).filter((t=>this.mirror.has(t.id))),attributes:this.attributes.map((t=>{const{attributes:e}=t;if("string"===typeof e.style){const n=JSON.stringify(t.styleDiff),r=JSON.stringify(t._unchangedStyles);n.length<e.style.length&&(n+r).split("var(").length===e.style.split("var(").length&&(e.style=t.styleDiff)}return{id:this.mirror.getId(t.node),attributes:e}})).filter((t=>!e.has(t.id))).filter((t=>this.mirror.has(t.id))),removes:this.removes,adds:t};(s.texts.length||s.attributes.length||s.removes.length||s.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(s))},this.genTextAreaValueMutation=t=>{let e=this.attributeMap.get(t);e||(e={node:t,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(e),this.attributeMap.set(t,e)),e.attributes.value=Array.from(t.childNodes,(t=>t.textContent||"")).join("")},this.processMutation=t=>{if(!st(t.target,this.mirror))switch(t.type){case"characterData":{const e=t.target.textContent;ot(t.target,this.blockClass,this.blockSelector,!1)||e===t.oldValue||this.texts.push({value:W(t.target,this.maskTextClass,this.maskTextSelector,!0)&&e?this.maskTextFn?this.maskTextFn(e,it(t.target)):e.replace(/[\S]/g,"*"):e,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,i=t.target.getAttribute(r);if("value"===r){const t=x(n);i=b({element:n,maskInputOptions:this.maskInputOptions,tagName:n.tagName,type:t,value:i,maskInputFn:this.maskInputFn})}if(ot(t.target,this.blockClass,this.blockSelector,!1)||i===t.oldValue)return;let o=this.attributeMap.get(t.target);if("IFRAME"===n.tagName&&"src"===r&&!this.keepIframeSrcFn(i)){if(n.contentDocument)return;r="rr_src"}if(o||(o={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(t.target,o)),"type"===r&&"INPUT"===n.tagName&&"password"===(t.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!q(n.tagName,r)&&(o.attributes[r]=F(this.doc,w(n.tagName),w(r),i),"style"===r)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(e){this.unattachedDoc=this.doc}const r=this.unattachedDoc.createElement("span");t.oldValue&&r.setAttribute("style",t.oldValue);for(const t of Array.from(n.style)){const e=n.style.getPropertyValue(t),i=n.style.getPropertyPriority(t);e!==r.style.getPropertyValue(t)||i!==r.style.getPropertyPriority(t)?o.styleDiff[t]=""===i?e:[e,i]:o._unchangedStyles[t]=[e,i]}for(const t of Array.from(r.style))""===n.style.getPropertyValue(t)&&(o.styleDiff[t]=!1)}break}case"childList":if(ot(t.target,this.blockClass,this.blockSelector,!0))return;if("TEXTAREA"===t.target.tagName)return void this.genTextAreaValueMutation(t.target);t.addedNodes.forEach((e=>this.genAdds(e,t.target))),t.removedNodes.forEach((e=>{const n=this.mirror.getId(e),r=m(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);ot(t.target,this.blockClass,this.blockSelector,!1)||st(e,this.mirror)||!function(t,e){return-1!==e.getId(t)}(e,this.mirror)||(this.addedSet.has(e)?(Ct(this.addedSet,e),this.droppedSet.add(e)):this.addedSet.has(t.target)&&-1===n||at(t.target,this.mirror)||(this.movedSet.has(e)&&this.movedMap[xt(n,r)]?Ct(this.movedSet,e):this.removes.push({parentId:r,id:n,isShadow:!(!m(t.target)||!g(t.target))||void 0})),this.mapRemoves.push(e))}))}},this.genAdds=(t,e)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!this.addedSet.has(t)&&!this.movedSet.has(t)){if(this.mirror.hasNode(t)){if(st(t,this.mirror))return;this.movedSet.add(t);let n=null;e&&this.mirror.hasNode(e)&&(n=this.mirror.getId(e)),n&&-1!==n&&(this.movedMap[xt(this.mirror.getId(t),n)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);ot(t,this.blockClass,this.blockSelector,!1)||(t.childNodes.forEach((t=>this.genAdds(t))),ht(t)&&t.shadowRoot.childNodes.forEach((e=>{this.processedNodeManager.add(e,this),this.genAdds(e,t)})))}}}init(t){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach((e=>{this[e]=t[e]}))}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Ct(t,e){t.delete(e),e.childNodes.forEach((e=>Ct(t,e)))}function kt(t,e,n){return 0!==t.length&&Ot(t,e,n)}function Ot(t,e,n){const{parentNode:r}=e;if(!r)return!1;const i=n.getId(r);return!!t.some((t=>t.id===i))||Ot(t,r,n)}function Tt(t,e){return 0!==t.size&&Nt(t,e)}function Nt(t,e){const{parentNode:n}=e;return!!n&&(!!t.has(n)||Nt(t,n))}let It;function Pt(t){It=t}function Mt(){It=void 0}const jt=t=>{if(!It)return t;return function(){try{return t(...arguments)}catch(e){if(It&&!0===It(e))return;throw e}}},Rt=[];function At(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch(e){}return t&&t.target}function Dt(t,e){var n,r;const i=new Et;Rt.push(i),i.init(t);let o=window.MutationObserver||window.__rrMutationObserver;const s=null===(r=null===(n=null===window||void 0===window?void 0:window.Zone)||void 0===n?void 0:n.__symbol__)||void 0===r?void 0:r.call(n,"MutationObserver");s&&window[s]&&(o=window[s]);const a=new o(jt(i.processMutations.bind(i)));return a.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function Lt(t){let{mouseInteractionCb:e,doc:n,mirror:r,blockClass:i,blockSelector:o,sampling:s}=t;if(!1===s.mouseInteraction)return()=>{};const a=!0===s.mouseInteraction||void 0===s.mouseInteraction?{}:s.mouseInteraction,l=[];let u=null;return Object.keys(yt).filter((t=>Number.isNaN(Number(t))&&!t.endsWith("_Departed")&&!1!==a[t])).forEach((t=>{let s=w(t);const a=(t=>n=>{const s=At(n);if(ot(s,i,o,!0))return;let a=null,l=t;if("pointerType"in n){switch(n.pointerType){case"mouse":a=vt.Mouse;break;case"touch":a=vt.Touch;break;case"pen":a=vt.Pen}a===vt.Touch?yt[t]===yt.MouseDown?l="TouchStart":yt[t]===yt.MouseUp&&(l="TouchEnd"):vt.Pen}else lt(n)&&(a=vt.Touch);null!==a?(u=a,(l.startsWith("Touch")&&a===vt.Touch||l.startsWith("Mouse")&&a===vt.Mouse)&&(a=null)):yt[t]===yt.Click&&(a=u,u=null);const c=lt(n)?n.changedTouches[0]:n;if(!c)return;const h=r.getId(s),{clientX:d,clientY:f}=c;jt(e)(Object.assign({type:yt[l],id:h,x:d,y:f},null!==a&&{pointerType:a}))})(t);if(window.PointerEvent)switch(yt[t]){case yt.MouseDown:case yt.MouseUp:s=s.replace("mouse","pointer");break;case yt.TouchStart:case yt.TouchEnd:return}l.push(Y(s,a,n))})),jt((()=>{l.forEach((t=>t()))}))}function Ut(t){let{scrollCb:e,doc:n,mirror:r,blockClass:i,blockSelector:o,sampling:s}=t;const a=jt(X(jt((t=>{const s=At(t);if(!s||ot(s,i,o,!0))return;const a=r.getId(s);if(s===n&&n.defaultView){const t=et(n.defaultView);e({id:a,x:t.left,y:t.top})}else e({id:a,x:s.scrollLeft,y:s.scrollTop})})),s.scroll||100));return Y("scroll",a,n)}const zt=["INPUT","TEXTAREA","SELECT"],Bt=new WeakMap;function Ft(t){return function(t,e){if(Vt("CSSGroupingRule")&&t.parentRule instanceof CSSGroupingRule||Vt("CSSMediaRule")&&t.parentRule instanceof CSSMediaRule||Vt("CSSSupportsRule")&&t.parentRule instanceof CSSSupportsRule||Vt("CSSConditionRule")&&t.parentRule instanceof CSSConditionRule){const n=Array.from(t.parentRule.cssRules).indexOf(t);e.unshift(n)}else if(t.parentStyleSheet){const n=Array.from(t.parentStyleSheet.cssRules).indexOf(t);e.unshift(n)}return e}(t,[])}function qt(t,e,n){let r,i;return t?(t.ownerNode?r=e.getId(t.ownerNode):i=n.getId(t),{styleId:i,id:r}):{}}function Ht(t,e){let{mirror:n,stylesheetManager:r}=t;var i,o,s;let a=null;a="#document"===e.nodeName?n.getId(e):n.getId(e.host);const l="#document"===e.nodeName?null===(i=e.defaultView)||void 0===i?void 0:i.Document:null===(s=null===(o=e.ownerDocument)||void 0===o?void 0:o.defaultView)||void 0===s?void 0:s.ShadowRoot,u=(null===l||void 0===l?void 0:l.prototype)?Object.getOwnPropertyDescriptor(null===l||void 0===l?void 0:l.prototype,"adoptedStyleSheets"):void 0;return null!==a&&-1!==a&&l&&u?(Object.defineProperty(e,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get(){var t;return null===(t=u.get)||void 0===t?void 0:t.call(this)},set(t){var e;const n=null===(e=u.set)||void 0===e?void 0:e.call(this,t);if(null!==a&&-1!==a)try{r.adoptStyleSheets(t,a)}catch(i){}return n}}),jt((()=>{Object.defineProperty(e,"adoptedStyleSheets",{configurable:u.configurable,enumerable:u.enumerable,get:u.get,set:u.set})}))):()=>{}}function Wt(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=t.doc.defaultView;if(!n)return()=>{};let r;!function(t,e){const{mutationCb:n,mousemoveCb:r,mouseInteractionCb:i,scrollCb:o,viewportResizeCb:s,inputCb:a,mediaInteractionCb:l,styleSheetRuleCb:u,styleDeclarationCb:c,canvasMutationCb:h,fontCb:d,selectionCb:f,customElementCb:p}=t;t.mutationCb=function(){e.mutation&&e.mutation(...arguments),n(...arguments)},t.mousemoveCb=function(){e.mousemove&&e.mousemove(...arguments),r(...arguments)},t.mouseInteractionCb=function(){e.mouseInteraction&&e.mouseInteraction(...arguments),i(...arguments)},t.scrollCb=function(){e.scroll&&e.scroll(...arguments),o(...arguments)},t.viewportResizeCb=function(){e.viewportResize&&e.viewportResize(...arguments),s(...arguments)},t.inputCb=function(){e.input&&e.input(...arguments),a(...arguments)},t.mediaInteractionCb=function(){e.mediaInteaction&&e.mediaInteaction(...arguments),l(...arguments)},t.styleSheetRuleCb=function(){e.styleSheetRule&&e.styleSheetRule(...arguments),u(...arguments)},t.styleDeclarationCb=function(){e.styleDeclaration&&e.styleDeclaration(...arguments),c(...arguments)},t.canvasMutationCb=function(){e.canvasMutation&&e.canvasMutation(...arguments),h(...arguments)},t.fontCb=function(){e.font&&e.font(...arguments),d(...arguments)},t.selectionCb=function(){e.selection&&e.selection(...arguments),f(...arguments)},t.customElementCb=function(){e.customElement&&e.customElement(...arguments),p(...arguments)}}(t,e),t.recordDOM&&(r=Dt(t,t.doc));const i=function(t){let{mousemoveCb:e,sampling:n,doc:r,mirror:i}=t;if(!1===n.mousemove)return()=>{};const o="number"===typeof n.mousemove?n.mousemove:50,s="number"===typeof n.mousemoveCallback?n.mousemoveCallback:500;let a,l=[];const u=X(jt((t=>{const n=Date.now()-a;e(l.map((t=>(t.timeOffset-=n,t))),t),l=[],a=null})),s),c=jt(X(jt((t=>{const e=At(t),{clientX:n,clientY:r}=lt(t)?t.changedTouches[0]:t;a||(a=tt()),l.push({x:n,y:r,id:i.getId(e),timeOffset:tt()-a}),u("undefined"!==typeof DragEvent&&t instanceof DragEvent?_t.Drag:t instanceof MouseEvent?_t.MouseMove:_t.TouchMove)})),o,{trailing:!1})),h=[Y("mousemove",c,r),Y("touchmove",c,r),Y("drag",c,r)];return jt((()=>{h.forEach((t=>t()))}))}(t),o=Lt(t),s=Ut(t),a=function(t,e){let{viewportResizeCb:n}=t,{win:r}=e,i=-1,o=-1;return Y("resize",jt(X(jt((()=>{const t=nt(),e=rt();i===t&&o===e||(n({width:Number(e),height:Number(t)}),i=t,o=e)})),200)),r)}(t,{win:n}),l=function(t){let{inputCb:e,doc:n,mirror:r,blockClass:i,blockSelector:o,ignoreClass:s,ignoreSelector:a,maskInputOptions:l,maskInputFn:u,sampling:c,userTriggeredOnInput:h}=t;function d(t){let e=At(t);const r=t.isTrusted,c=e&&e.tagName;if(e&&"OPTION"===c&&(e=e.parentElement),!e||!c||zt.indexOf(c)<0||ot(e,i,o,!0))return;if(e.classList.contains(s)||a&&e.matches(a))return;let d=e.value,p=!1;const m=x(e)||"";"radio"===m||"checkbox"===m?p=e.checked:(l[c.toLowerCase()]||l[m])&&(d=b({element:e,maskInputOptions:l,tagName:c,type:m,value:d,maskInputFn:u})),f(e,h?{text:d,isChecked:p,userTriggered:r}:{text:d,isChecked:p});const g=e.name;"radio"===m&&g&&p&&n.querySelectorAll(`input[type="radio"][name="${g}"]`).forEach((t=>{if(t!==e){const e=t.value;f(t,h?{text:e,isChecked:!p,userTriggered:!1}:{text:e,isChecked:!p})}}))}function f(t,n){const i=Bt.get(t);if(!i||i.text!==n.text||i.isChecked!==n.isChecked){Bt.set(t,n);const i=r.getId(t);jt(e)(Object.assign(Object.assign({},n),{id:i}))}}const p=("last"===c.input?["change"]:["input","change"]).map((t=>Y(t,jt(d),n))),m=n.defaultView;if(!m)return()=>{p.forEach((t=>t()))};const g=m.Object.getOwnPropertyDescriptor(m.HTMLInputElement.prototype,"value"),_=[[m.HTMLInputElement.prototype,"value"],[m.HTMLInputElement.prototype,"checked"],[m.HTMLSelectElement.prototype,"value"],[m.HTMLTextAreaElement.prototype,"value"],[m.HTMLSelectElement.prototype,"selectedIndex"],[m.HTMLOptionElement.prototype,"selected"]];return g&&g.set&&p.push(..._.map((t=>Q(t[0],t[1],{set(){jt(d)({target:this,isTrusted:!1})}},!1,m)))),jt((()=>{p.forEach((t=>t()))}))}(t),u=function(t){let{mediaInteractionCb:e,blockClass:n,blockSelector:r,mirror:i,sampling:o,doc:s}=t;const a=jt((t=>X(jt((o=>{const s=At(o);if(!s||ot(s,n,r,!0))return;const{currentTime:a,volume:l,muted:u,playbackRate:c,loop:h}=s;e({type:t,id:i.getId(s),currentTime:a,volume:l,muted:u,playbackRate:c,loop:h})})),o.media||500))),l=[Y("play",a(0),s),Y("pause",a(1),s),Y("seeked",a(2),s),Y("volumechange",a(3),s),Y("ratechange",a(4),s)];return jt((()=>{l.forEach((t=>t()))}))}(t);let c=()=>{},h=()=>{},d=()=>{},f=()=>{};t.recordDOM&&(c=function(t,e){let{styleSheetRuleCb:n,mirror:r,stylesheetManager:i}=t,{win:o}=e;if(!o.CSSStyleSheet||!o.CSSStyleSheet.prototype)return()=>{};const s=o.CSSStyleSheet.prototype.insertRule;o.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:jt(((t,e,o)=>{const[s,a]=o,{id:l,styleId:u}=qt(e,r,i.styleMirror);return(l&&-1!==l||u&&-1!==u)&&n({id:l,styleId:u,adds:[{rule:s,index:a}]}),t.apply(e,o)}))});const a=o.CSSStyleSheet.prototype.deleteRule;let l,u;o.CSSStyleSheet.prototype.deleteRule=new Proxy(a,{apply:jt(((t,e,o)=>{const[s]=o,{id:a,styleId:l}=qt(e,r,i.styleMirror);return(a&&-1!==a||l&&-1!==l)&&n({id:a,styleId:l,removes:[{index:s}]}),t.apply(e,o)}))}),o.CSSStyleSheet.prototype.replace&&(l=o.CSSStyleSheet.prototype.replace,o.CSSStyleSheet.prototype.replace=new Proxy(l,{apply:jt(((t,e,o)=>{const[s]=o,{id:a,styleId:l}=qt(e,r,i.styleMirror);return(a&&-1!==a||l&&-1!==l)&&n({id:a,styleId:l,replace:s}),t.apply(e,o)}))})),o.CSSStyleSheet.prototype.replaceSync&&(u=o.CSSStyleSheet.prototype.replaceSync,o.CSSStyleSheet.prototype.replaceSync=new Proxy(u,{apply:jt(((t,e,o)=>{const[s]=o,{id:a,styleId:l}=qt(e,r,i.styleMirror);return(a&&-1!==a||l&&-1!==l)&&n({id:a,styleId:l,replaceSync:s}),t.apply(e,o)}))}));const c={};Zt("CSSGroupingRule")?c.CSSGroupingRule=o.CSSGroupingRule:(Zt("CSSMediaRule")&&(c.CSSMediaRule=o.CSSMediaRule),Zt("CSSConditionRule")&&(c.CSSConditionRule=o.CSSConditionRule),Zt("CSSSupportsRule")&&(c.CSSSupportsRule=o.CSSSupportsRule));const h={};return Object.entries(c).forEach((t=>{let[e,o]=t;h[e]={insertRule:o.prototype.insertRule,deleteRule:o.prototype.deleteRule},o.prototype.insertRule=new Proxy(h[e].insertRule,{apply:jt(((t,e,o)=>{const[s,a]=o,{id:l,styleId:u}=qt(e.parentStyleSheet,r,i.styleMirror);return(l&&-1!==l||u&&-1!==u)&&n({id:l,styleId:u,adds:[{rule:s,index:[...Ft(e),a||0]}]}),t.apply(e,o)}))}),o.prototype.deleteRule=new Proxy(h[e].deleteRule,{apply:jt(((t,e,o)=>{const[s]=o,{id:a,styleId:l}=qt(e.parentStyleSheet,r,i.styleMirror);return(a&&-1!==a||l&&-1!==l)&&n({id:a,styleId:l,removes:[{index:[...Ft(e),s]}]}),t.apply(e,o)}))})})),jt((()=>{o.CSSStyleSheet.prototype.insertRule=s,o.CSSStyleSheet.prototype.deleteRule=a,l&&(o.CSSStyleSheet.prototype.replace=l),u&&(o.CSSStyleSheet.prototype.replaceSync=u),Object.entries(c).forEach((t=>{let[e,n]=t;n.prototype.insertRule=h[e].insertRule,n.prototype.deleteRule=h[e].deleteRule}))}))}(t,{win:n}),h=Ht(t,t.doc),d=function(t,e){let{styleDeclarationCb:n,mirror:r,ignoreCSSAttributes:i,stylesheetManager:o}=t,{win:s}=e;const a=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(a,{apply:jt(((t,e,s)=>{var l;const[u,c,h]=s;if(i.has(u))return a.apply(e,[u,c,h]);const{id:d,styleId:f}=qt(null===(l=e.parentRule)||void 0===l?void 0:l.parentStyleSheet,r,o.styleMirror);return(d&&-1!==d||f&&-1!==f)&&n({id:d,styleId:f,set:{property:u,value:c,priority:h},index:Ft(e.parentRule)}),t.apply(e,s)}))});const l=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(l,{apply:jt(((t,e,s)=>{var a;const[u]=s;if(i.has(u))return l.apply(e,[u]);const{id:c,styleId:h}=qt(null===(a=e.parentRule)||void 0===a?void 0:a.parentStyleSheet,r,o.styleMirror);return(c&&-1!==c||h&&-1!==h)&&n({id:c,styleId:h,remove:{property:u},index:Ft(e.parentRule)}),t.apply(e,s)}))}),jt((()=>{s.CSSStyleDeclaration.prototype.setProperty=a,s.CSSStyleDeclaration.prototype.removeProperty=l}))}(t,{win:n}),t.collectFonts&&(f=function(t){let{fontCb:e,doc:n}=t;const r=n.defaultView;if(!r)return()=>{};const i=[],o=new WeakMap,s=r.FontFace;r.FontFace=function(t,e,n){const r=new s(t,e,n);return o.set(r,{family:t,buffer:"string"!==typeof e,descriptors:n,fontSource:"string"===typeof e?e:JSON.stringify(Array.from(new Uint8Array(e)))}),r};const a=J(n.fonts,"add",(function(t){return function(n){return setTimeout(jt((()=>{const t=o.get(n);t&&(e(t),o.delete(n))})),0),t.apply(this,[n])}}));return i.push((()=>{r.FontFace=s})),i.push(a),jt((()=>{i.forEach((t=>t()))}))}(t)));const p=function(t){const{doc:e,mirror:n,blockClass:r,blockSelector:i,selectionCb:o}=t;let s=!0;const a=jt((()=>{const t=e.getSelection();if(!t||s&&(null===t||void 0===t?void 0:t.isCollapsed))return;s=t.isCollapsed||!1;const a=[],l=t.rangeCount||0;for(let e=0;e<l;e++){const o=t.getRangeAt(e),{startContainer:s,startOffset:l,endContainer:u,endOffset:c}=o;ot(s,r,i,!0)||ot(u,r,i,!0)||a.push({start:n.getId(s),startOffset:l,end:n.getId(u),endOffset:c})}o({ranges:a})}));return a(),Y("selectionchange",a)}(t),m=function(t){let{doc:e,customElementCb:n}=t;const r=e.defaultView;return r&&r.customElements?J(r.customElements,"define",(function(t){return function(e,r,i){try{n({define:{name:e}})}catch(o){console.warn(`Custom element callback failed for ${e}`)}return t.apply(this,[e,r,i])}})):()=>{}}(t),g=[];for(const _ of t.plugins)g.push(_.observer(_.callback,n,_.options));return jt((()=>{Rt.forEach((t=>t.reset())),null===r||void 0===r||r.disconnect(),i(),o(),s(),a(),l(),u(),c(),h(),d(),f(),p(),m(),g.forEach((t=>t()))}))}function Vt(t){return"undefined"!==typeof window[t]}function Zt(t){return Boolean("undefined"!==typeof window[t]&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class Gt{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,e,n,r){const i=n||this.getIdToRemoteIdMap(t),o=r||this.getRemoteIdToIdMap(t);let s=i.get(e);return s||(s=this.generateIdFn(),i.set(e,s),o.set(s,e)),s}getIds(t,e){const n=this.getIdToRemoteIdMap(t),r=this.getRemoteIdToIdMap(t);return e.map((e=>this.getId(t,e,n,r)))}getRemoteId(t,e,n){const r=n||this.getRemoteIdToIdMap(t);if("number"!==typeof e)return e;const i=r.get(e);return i||-1}getRemoteIds(t,e){const n=this.getRemoteIdToIdMap(t);return e.map((e=>this.getRemoteId(t,e,n)))}reset(t){if(!t)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let e=this.iframeIdToRemoteIdMap.get(t);return e||(e=new Map,this.iframeIdToRemoteIdMap.set(t,e)),e}getRemoteIdToIdMap(t){let e=this.iframeRemoteIdToIdMap.get(t);return e||(e=new Map,this.iframeRemoteIdToIdMap.set(t,e)),e}}class Yt{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new Gt(T),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Gt(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,e){var n;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:e}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),null===(n=this.loadListener)||void 0===n||n.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const e=t;if("rrweb"!==e.data.type||e.origin!==e.data.origin)return;if(!t.source)return;const n=this.crossOriginIframeMap.get(t.source);if(!n)return;const r=this.transformCrossOriginEvent(n,e.data.event);r&&this.wrappedEmit(r,e.data.isCheckout)}transformCrossOriginEvent(t,e){var n;switch(e.type){case gt.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(e.data.node,t);const n=e.data.node.id;return this.crossOriginIframeRootIdMap.set(t,n),this.patchRootIdOnNode(e.data.node,n),{timestamp:e.timestamp,type:gt.IncrementalSnapshot,data:{source:_t.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:e.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case gt.Meta:case gt.Load:case gt.DomContentLoaded:return!1;case gt.Plugin:return e;case gt.Custom:return this.replaceIds(e.data.payload,t,["id","parentId","previousId","nextId"]),e;case gt.IncrementalSnapshot:switch(e.data.source){case _t.Mutation:return e.data.adds.forEach((e=>{this.replaceIds(e,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(e.node,t);const n=this.crossOriginIframeRootIdMap.get(t);n&&this.patchRootIdOnNode(e.node,n)})),e.data.removes.forEach((e=>{this.replaceIds(e,t,["parentId","id"])})),e.data.attributes.forEach((e=>{this.replaceIds(e,t,["id"])})),e.data.texts.forEach((e=>{this.replaceIds(e,t,["id"])})),e;case _t.Drag:case _t.TouchMove:case _t.MouseMove:return e.data.positions.forEach((e=>{this.replaceIds(e,t,["id"])})),e;case _t.ViewportResize:return!1;case _t.MediaInteraction:case _t.MouseInteraction:case _t.Scroll:case _t.CanvasMutation:case _t.Input:return this.replaceIds(e.data,t,["id"]),e;case _t.StyleSheetRule:case _t.StyleDeclaration:return this.replaceIds(e.data,t,["id"]),this.replaceStyleIds(e.data,t,["styleId"]),e;case _t.Font:return e;case _t.Selection:return e.data.ranges.forEach((e=>{this.replaceIds(e,t,["start","end"])})),e;case _t.AdoptedStyleSheet:return this.replaceIds(e.data,t,["id"]),this.replaceStyleIds(e.data,t,["styleIds"]),null===(n=e.data.styles)||void 0===n||n.forEach((e=>{this.replaceStyleIds(e,t,["styleId"])})),e}}return!1}replace(t,e,n,r){for(const i of r)(Array.isArray(e[i])||"number"===typeof e[i])&&(Array.isArray(e[i])?e[i]=t.getIds(n,e[i]):e[i]=t.getId(n,e[i]));return e}replaceIds(t,e,n){return this.replace(this.crossOriginIframeMirror,t,e,n)}replaceStyleIds(t,e,n){return this.replace(this.crossOriginIframeStyleMirror,t,e,n)}replaceIdOnNode(t,e){this.replaceIds(t,e,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach((t=>{this.replaceIdOnNode(t,e)}))}patchRootIdOnNode(t,e){t.type===f.Document||t.rootId||(t.rootId=e),"childNodes"in t&&t.childNodes.forEach((t=>{this.patchRootIdOnNode(t,e)}))}}class $t{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,e){if(!g(t))return;if(this.shadowDoms.has(t))return;this.shadowDoms.add(t);const n=Dt(Object.assign(Object.assign({},this.bypassOptions),{doc:e,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t);this.restoreHandlers.push((()=>n.disconnect())),this.restoreHandlers.push(Ut(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))),setTimeout((()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Ht({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))}),0)}observeAttachShadow(t){t.contentWindow&&t.contentDocument&&this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,e){const n=this;this.restoreHandlers.push(J(t.prototype,"attachShadow",(function(t){return function(r){const i=t.call(this,r);return this.shadowRoot&&mt(this)&&n.addShadowRoot(this.shadowRoot,e),i}})))}reset(){this.restoreHandlers.forEach((t=>{try{t()}catch(e){}})),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}function Kt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))}for(var Xt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qt="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Jt=0;Jt<64;Jt++)Qt[Xt.charCodeAt(Jt)]=Jt;const te=new Map;const ee=(t,e,n)=>{if(!t||!ie(t,e)&&"object"!==typeof t)return;const r=function(t,e){let n=te.get(t);return n||(n=new Map,te.set(t,n)),n.has(e)||n.set(e,[]),n.get(e)}(n,t.constructor.name);let i=r.indexOf(t);return-1===i&&(i=r.length,r.push(t)),i};function ne(t,e,n){if(t instanceof Array)return t.map((t=>ne(t,e,n)));if(null===t)return t;if(t instanceof Float32Array||t instanceof Float64Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Uint8Array||t instanceof Uint16Array||t instanceof Int16Array||t instanceof Int8Array||t instanceof Uint8ClampedArray){return{rr_type:t.constructor.name,args:[Object.values(t)]}}if(t instanceof ArrayBuffer){const e=t.constructor.name,n=function(t){var e,n=new Uint8Array(t),r=n.length,i="";for(e=0;e<r;e+=3)i+=Xt[n[e]>>2],i+=Xt[(3&n[e])<<4|n[e+1]>>4],i+=Xt[(15&n[e+1])<<2|n[e+2]>>6],i+=Xt[63&n[e+2]];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i}(t);return{rr_type:e,base64:n}}if(t instanceof DataView){return{rr_type:t.constructor.name,args:[ne(t.buffer,e,n),t.byteOffset,t.byteLength]}}if(t instanceof HTMLImageElement){const e=t.constructor.name,{src:n}=t;return{rr_type:e,src:n}}if(t instanceof HTMLCanvasElement){return{rr_type:"HTMLImageElement",src:t.toDataURL()}}if(t instanceof ImageData){return{rr_type:t.constructor.name,args:[ne(t.data,e,n),t.width,t.height]}}if(ie(t,e)||"object"===typeof t){return{rr_type:t.constructor.name,index:ee(t,e,n)}}return t}const re=(t,e,n)=>t.map((t=>ne(t,e,n))),ie=(t,e)=>{const n=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter((t=>"function"===typeof e[t]));return Boolean(n.find((n=>t instanceof e[n])))};function oe(t,e,n,r){const i=[];try{const o=J(t.HTMLCanvasElement.prototype,"getContext",(function(t){return function(i){for(var o=arguments.length,s=new Array(o>1?o-1:0),a=1;a<o;a++)s[a-1]=arguments[a];if(!ot(this,e,n,!0)){const t=function(t){return"experimental-webgl"===t?"webgl":t}(i);if("__context"in this||(this.__context=t),r&&["webgl","webgl2"].includes(t))if(s[0]&&"object"===typeof s[0]){const t=s[0];t.preserveDrawingBuffer||(t.preserveDrawingBuffer=!0)}else s.splice(0,1,{preserveDrawingBuffer:!0})}return t.apply(this,[i,...s])}}));i.push(o)}catch(o){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach((t=>t()))}}function se(t,e,n,r,i,o,s){const a=[],l=Object.getOwnPropertyNames(t);for(const c of l)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(c))try{if("function"!==typeof t[c])continue;const o=J(t,c,(function(t){return function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];const u=t.apply(this,a);if(ee(u,s,this),"tagName"in this.canvas&&!ot(this.canvas,r,i,!0)){const t=re(a,s,this),r={type:e,property:c,args:t};n(this.canvas,r)}return u}}));a.push(o)}catch(u){const r=Q(t,c,{set(t){n(this.canvas,{type:e,property:c,args:[t],setter:!0})}});a.push(r)}return a}var ae=function(t,e){var n;return function(r){return n=n||function(t,e){var n=function(t,e){var n=void 0===e?null:e,r=t.toString().split("\n");r.pop(),r.shift();for(var i=r[0].search(/\S/),o=/(['"])__worker_loader_strict__(['"])/g,s=0,a=r.length;s<a;++s)r[s]=r[s].substring(i).replace(o,"$1use strict$2")+"\n";return n&&r.push("//# sourceMappingURL="+n+"\n"),r}(t,e),r=new Blob(n,{type:"application/javascript"});return URL.createObjectURL(r)}(t,e),new Worker(n,r)}}((function(){!function(){function t(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{l(r.next(t))}catch(e){o(e)}}function a(t){try{l(r.throw(t))}catch(e){o(e)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((r=r.apply(t,e||[])).next())}))}for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="undefined"===typeof Uint8Array?[]:new Uint8Array(256),r=0;r<64;r++)n[e.charCodeAt(r)]=r;var i=function(t){var n,r=new Uint8Array(t),i=r.length,o="";for(n=0;n<i;n+=3)o+=e[r[n]>>2],o+=e[(3&r[n])<<4|r[n+1]>>4],o+=e[(15&r[n+1])<<2|r[n+2]>>6],o+=e[63&r[n+2]];return i%3===2?o=o.substring(0,o.length-1)+"=":i%3===1&&(o=o.substring(0,o.length-2)+"=="),o};const o=new Map,s=new Map;const a=self;a.onmessage=function(e){return t(this,void 0,void 0,(function*(){if(!("OffscreenCanvas"in globalThis))return a.postMessage({id:e.data.id});{const{id:n,bitmap:r,width:l,height:u,dataURLOptions:c}=e.data,h=function(e,n,r){return t(this,void 0,void 0,(function*(){const t=`${e}-${n}`;if("OffscreenCanvas"in globalThis){if(s.has(t))return s.get(t);const o=new OffscreenCanvas(e,n);o.getContext("2d");const a=yield o.convertToBlob(r),l=yield a.arrayBuffer(),u=i(l);return s.set(t,u),u}return""}))}(l,u,c),d=new OffscreenCanvas(l,u);d.getContext("2d").drawImage(r,0,0),r.close();const f=yield d.convertToBlob(c),p=f.type,m=yield f.arrayBuffer(),g=i(m);if(!o.has(n)&&(yield h)===g)return o.set(n,g),a.postMessage({id:n});if(o.get(n)===g)return a.postMessage({id:n});a.postMessage({id:n,type:p,base64:g,width:l,height:u}),o.set(n,g)}}))}}()}),null);class le{reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(t){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(t,e)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(t)||this.pendingCanvasMutations.set(t,[]),this.pendingCanvasMutations.get(t).push(e)};const{sampling:e="all",win:n,blockClass:r,blockSelector:i,recordCanvas:o,dataURLOptions:s}=t;this.mutationCb=t.mutationCb,this.mirror=t.mirror,o&&"all"===e&&this.initCanvasMutationObserver(n,r,i),o&&"number"===typeof e&&this.initCanvasFPSObserver(e,n,r,i,{dataURLOptions:s})}initCanvasFPSObserver(t,e,n,r,i){const o=oe(e,n,r,!0),s=new Map,a=new ae;a.onmessage=t=>{const{id:e}=t.data;if(s.set(e,!1),!("base64"in t.data))return;const{base64:n,type:r,width:i,height:o}=t.data;this.mutationCb({id:e,type:bt["2D"],commands:[{property:"clearRect",args:[0,0,i,o]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:n}],type:r}]},0,0]}]})};const l=1e3/t;let u,c=0;const h=t=>{c&&t-c<l||(c=t,(()=>{const t=[];return e.document.querySelectorAll("canvas").forEach((e=>{ot(e,n,r,!0)||t.push(e)})),t})().forEach((t=>Kt(this,void 0,void 0,(function*(){var e;const n=this.mirror.getId(t);if(s.get(n))return;if(0===t.width||0===t.height)return;if(s.set(n,!0),["webgl","webgl2"].includes(t.__context)){const n=t.getContext(t.__context);!1===(null===(e=null===n||void 0===n?void 0:n.getContextAttributes())||void 0===e?void 0:e.preserveDrawingBuffer)&&n.clear(n.COLOR_BUFFER_BIT)}const r=yield createImageBitmap(t);a.postMessage({id:n,bitmap:r,width:t.width,height:t.height,dataURLOptions:i.dataURLOptions},[r])}))))),u=requestAnimationFrame(h)};u=requestAnimationFrame(h),this.resetObservers=()=>{o(),cancelAnimationFrame(u)}}initCanvasMutationObserver(t,e,n){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const r=oe(t,e,n,!1),i=function(t,e,n,r){const i=[],o=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(const a of o)try{if("function"!==typeof e.CanvasRenderingContext2D.prototype[a])continue;const o=J(e.CanvasRenderingContext2D.prototype,a,(function(i){return function(){for(var o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return ot(this.canvas,n,r,!0)||setTimeout((()=>{const n=re(s,e,this);t(this.canvas,{type:bt["2D"],property:a,args:n})}),0),i.apply(this,s)}}));i.push(o)}catch(s){const n=Q(e.CanvasRenderingContext2D.prototype,a,{set(e){t(this.canvas,{type:bt["2D"],property:a,args:[e],setter:!0})}});i.push(n)}return()=>{i.forEach((t=>t()))}}(this.processMutation.bind(this),t,e,n),o=function(t,e,n,r){const i=[];return i.push(...se(e.WebGLRenderingContext.prototype,bt.WebGL,t,n,r,0,e)),"undefined"!==typeof e.WebGL2RenderingContext&&i.push(...se(e.WebGL2RenderingContext.prototype,bt.WebGL2,t,n,r,0,e)),()=>{i.forEach((t=>t()))}}(this.processMutation.bind(this),t,e,n,this.mirror);this.resetObservers=()=>{r(),i(),o()}}startPendingCanvasMutationFlusher(){requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}startRAFTimestamping(){const t=e=>{this.rafStamps.latestId=e,requestAnimationFrame(t)};requestAnimationFrame(t)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach(((t,e)=>{const n=this.mirror.getId(e);this.flushPendingCanvasMutationFor(e,n)})),requestAnimationFrame((()=>this.flushPendingCanvasMutations()))}flushPendingCanvasMutationFor(t,e){if(this.frozen||this.locked)return;const n=this.pendingCanvasMutations.get(t);if(!n||-1===e)return;const r=n.map((t=>{const e=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["type"]);return e})),{type:i}=n[0];this.mutationCb({id:e,type:i,commands:r}),this.pendingCanvasMutations.delete(t)}}class ue{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new dt,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,e){"_cssText"in e.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:e.id,attributes:e.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,e){if(0===t.length)return;const n={id:e,styleIds:[]},r=[];for(const i of t){let t;this.styleMirror.has(i)?t=this.styleMirror.getId(i):(t=this.styleMirror.add(i),r.push({styleId:t,rules:Array.from(i.rules||CSSRule,((t,e)=>({rule:y(t),index:e})))})),n.styleIds.push(t)}r.length>0&&(n.styles=r),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class ce{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame((()=>{this.clear(),this.loop&&this.periodicallyClear()}))}inOtherBuffer(t,e){const n=this.nodeMap.get(t);return n&&Array.from(n).some((t=>t!==e))}add(t,e){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(e))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function he(t){return Object.assign(Object.assign({},t),{timestamp:tt()})}let de,fe,pe,me=!1;const ge=new v;function _e(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{emit:e,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:o=null,ignoreClass:s="rr-ignore",ignoreSelector:a=null,maskTextClass:l="rr-mask",maskTextSelector:u=null,inlineStylesheet:c=!0,maskAllInputs:h,maskInputOptions:d,slimDOMOptions:f,maskInputFn:p,maskTextFn:m,hooks:g,packFn:_,sampling:y={},dataURLOptions:b={},mousemoveWait:w,recordDOM:S=!0,recordCanvas:x=!1,recordCrossOriginIframes:E=!1,recordAfter:C=("DOMContentLoaded"===t.recordAfter?t.recordAfter:"load"),userTriggeredOnInput:k=!1,collectFonts:O=!1,inlineImages:T=!1,plugins:N,keepIframeSrcFn:I=()=>!1,ignoreCSSAttributes:P=new Set([]),errorHandler:M}=t;Pt(M);const j=!E||window.parent===window;let R=!1;if(!j)try{window.parent.document&&(R=!1)}catch($){R=!0}if(j&&!e)throw new Error("emit function is required");void 0!==w&&void 0===y.mousemove&&(y.mousemove=w),ge.reset();const A=!0===h?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:void 0!==d?d:{password:!0},D=!0===f||"all"===f?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===f,headMetaDescKeywords:"all"===f}:f||{};let L;!function(){var t=this;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];let i=n[0];if(!(0 in n))throw new TypeError("1 argument is required");do{if(t===i)return!0}while(i=i&&i.parentNode);return!1})}();let U=0;const z=t=>{for(const e of N||[])e.eventProcessor&&(t=e.eventProcessor(t));return _&&!R&&(t=_(t)),t};de=(t,i)=>{var o;if(!(null===(o=Rt[0])||void 0===o?void 0:o.isFrozen())||t.type===gt.FullSnapshot||t.type===gt.IncrementalSnapshot&&t.data.source===_t.Mutation||Rt.forEach((t=>t.unfreeze())),j)null===e||void 0===e||e(z(t),i);else if(R){const e={type:"rrweb",event:z(t),origin:window.location.origin,isCheckout:i};window.parent.postMessage(e,"*")}if(t.type===gt.FullSnapshot)L=t,U=0;else if(t.type===gt.IncrementalSnapshot){if(t.data.source===_t.Mutation&&t.data.isAttachIframe)return;U++;const e=r&&U>=r,i=n&&t.timestamp-L.timestamp>n;(e||i)&&fe(!0)}};const B=t=>{de(he({type:gt.IncrementalSnapshot,data:Object.assign({source:_t.Mutation},t)}))},F=t=>de(he({type:gt.IncrementalSnapshot,data:Object.assign({source:_t.Scroll},t)})),q=t=>de(he({type:gt.IncrementalSnapshot,data:Object.assign({source:_t.CanvasMutation},t)})),H=new ue({mutationCb:B,adoptedStyleSheetCb:t=>de(he({type:gt.IncrementalSnapshot,data:Object.assign({source:_t.AdoptedStyleSheet},t)}))}),W=new Yt({mirror:ge,mutationCb:B,stylesheetManager:H,recordCrossOriginIframes:E,wrappedEmit:de});for(const v of N||[])v.getMirror&&v.getMirror({nodeMirror:ge,crossOriginIframeMirror:W.crossOriginIframeMirror,crossOriginIframeStyleMirror:W.crossOriginIframeStyleMirror});const V=new ce;pe=new le({recordCanvas:x,mutationCb:q,win:window,blockClass:i,blockSelector:o,mirror:ge,sampling:y.canvas,dataURLOptions:b});const Z=new $t({mutationCb:B,scrollCb:F,bypassOptions:{blockClass:i,blockSelector:o,maskTextClass:l,maskTextSelector:u,inlineStylesheet:c,maskInputOptions:A,dataURLOptions:b,maskTextFn:m,maskInputFn:p,recordCanvas:x,inlineImages:T,sampling:y,slimDOMOptions:D,iframeManager:W,stylesheetManager:H,canvasManager:pe,keepIframeSrcFn:I,processedNodeManager:V},mirror:ge});fe=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!S)return;de(he({type:gt.Meta,data:{href:window.location.href,width:rt(),height:nt()}}),t),H.reset(),Z.init(),Rt.forEach((t=>t.lock()));const e=function(t,e){const{mirror:n=new v,blockClass:r="rr-block",blockSelector:i=null,maskTextClass:o="rr-mask",maskTextSelector:s=null,inlineStylesheet:a=!0,inlineImages:l=!1,recordCanvas:u=!1,maskAllInputs:c=!1,maskTextFn:h,maskInputFn:d,slimDOM:f=!1,dataURLOptions:p,preserveWhiteSpace:m,onSerialize:g,onIframeLoad:_,iframeLoadTimeout:y,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:S=()=>!1}=e||{};return G(t,{doc:t,mirror:n,blockClass:r,blockSelector:i,maskTextClass:o,maskTextSelector:s,skipChild:!1,inlineStylesheet:a,maskInputOptions:!0===c?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:!1===c?{password:!0}:c,maskTextFn:h,maskInputFn:d,slimDOMOptions:!0===f||"all"===f?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===f,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===f?{}:f,dataURLOptions:p,inlineImages:l,recordCanvas:u,preserveWhiteSpace:m,onSerialize:g,onIframeLoad:_,iframeLoadTimeout:y,onStylesheetLoad:b,stylesheetLoadTimeout:w,keepIframeSrcFn:S,newlyAddedElement:!1})}(document,{mirror:ge,blockClass:i,blockSelector:o,maskTextClass:l,maskTextSelector:u,inlineStylesheet:c,maskAllInputs:A,maskTextFn:m,slimDOM:D,dataURLOptions:b,recordCanvas:x,inlineImages:T,onSerialize:t=>{ut(t,ge)&&W.addIframe(t),ct(t,ge)&&H.trackLinkElement(t),ht(t)&&Z.addShadowRoot(t.shadowRoot,document)},onIframeLoad:(t,e)=>{W.attachIframe(t,e),Z.observeAttachShadow(t)},onStylesheetLoad:(t,e)=>{H.attachLinkElement(t,e)},keepIframeSrcFn:I});if(!e)return console.warn("Failed to snapshot the document");de(he({type:gt.FullSnapshot,data:{node:e,initialOffset:et(window)}}),t),Rt.forEach((t=>t.unlock())),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&H.adoptStyleSheets(document.adoptedStyleSheets,ge.getId(document))};try{const t=[],e=t=>{var e;return jt(Wt)({mutationCb:B,mousemoveCb:(t,e)=>de(he({type:gt.IncrementalSnapshot,data:{source:e,positions:t}})),mouseInteractionCb:t=>de(he({type:gt.IncrementalSnapshot,data:Object.assign({source:_t.MouseInteraction},t)})),scrollCb:F,viewportResizeCb:t=>de(he({type:gt.IncrementalSnapshot,data:Object.assign({source:_t.ViewportResize},t)})),inputCb:t=>de(he({type:gt.IncrementalSnapshot,data:Object.assign({source:_t.Input},t)})),mediaInteractionCb:t=>de(he({type:gt.IncrementalSnapshot,data:Object.assign({source:_t.MediaInteraction},t)})),styleSheetRuleCb:t=>de(he({type:gt.IncrementalSnapshot,data:Object.assign({source:_t.StyleSheetRule},t)})),styleDeclarationCb:t=>de(he({type:gt.IncrementalSnapshot,data:Object.assign({source:_t.StyleDeclaration},t)})),canvasMutationCb:q,fontCb:t=>de(he({type:gt.IncrementalSnapshot,data:Object.assign({source:_t.Font},t)})),selectionCb:t=>{de(he({type:gt.IncrementalSnapshot,data:Object.assign({source:_t.Selection},t)}))},customElementCb:t=>{de(he({type:gt.IncrementalSnapshot,data:Object.assign({source:_t.CustomElement},t)}))},blockClass:i,ignoreClass:s,ignoreSelector:a,maskTextClass:l,maskTextSelector:u,maskInputOptions:A,inlineStylesheet:c,sampling:y,recordDOM:S,recordCanvas:x,inlineImages:T,userTriggeredOnInput:k,collectFonts:O,doc:t,maskInputFn:p,maskTextFn:m,keepIframeSrcFn:I,blockSelector:o,slimDOMOptions:D,dataURLOptions:b,mirror:ge,iframeManager:W,stylesheetManager:H,shadowDomManager:Z,processedNodeManager:V,canvasManager:pe,ignoreCSSAttributes:P,plugins:(null===(e=null===N||void 0===N?void 0:N.filter((t=>t.observer)))||void 0===e?void 0:e.map((t=>({observer:t.observer,options:t.options,callback:e=>de(he({type:gt.Plugin,data:{plugin:t.name,payload:e}}))}))))||[]},g)};W.addLoadListener((n=>{try{t.push(e(n.contentDocument))}catch(r){console.warn(r)}}));const n=()=>{fe(),t.push(e(document)),me=!0};return"interactive"===document.readyState||"complete"===document.readyState?n():(t.push(Y("DOMContentLoaded",(()=>{de(he({type:gt.DomContentLoaded,data:{}})),"DOMContentLoaded"===C&&n()}))),t.push(Y("load",(()=>{de(he({type:gt.Load,data:{}})),"load"===C&&n()}),window))),()=>{t.forEach((t=>t())),V.destroy(),me=!1,Mt()}}catch(K){console.warn(K)}}_e.addCustomEvent=(t,e)=>{if(!me)throw new Error("please add custom event after start recording");de(he({type:gt.Custom,data:{tag:t,payload:e}}))},_e.freezePage=()=>{Rt.forEach((t=>t.freeze()))},_e.takeFullSnapshot=t=>{if(!me)throw new Error("please take full snapshot after start recording");fe(t)},_e.mirror=ge;var ye,ve=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(ve||{}),be=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(be||{}),we={DEBUG:!1,LIB_VERSION:"2.55.1"};if("undefined"===typeof window){var Se={hostname:""};ye={navigator:{userAgent:"",onLine:!0},document:{location:Se,referrer:""},screen:{width:0,height:0},location:Se}}else ye=window;var xe=864e5,Ee=8e3,Ce=Array.prototype,ke=Function.prototype,Oe=Object.prototype,Te=Ce.slice,Ne=Oe.toString,Ie=Oe.hasOwnProperty,Pe=ye.console,Me=ye.navigator,je=ye.document,Re=ye.opera,Ae=ye.screen,De=Me.userAgent,Le=ke.bind,Ue=Ce.forEach,ze=Ce.indexOf,Be=Ce.map,Fe=Array.isArray,qe={},He={trim:function(t){return t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},We={log:function(){if(we.DEBUG&&!He.isUndefined(Pe)&&Pe)try{Pe.log.apply(Pe,arguments)}catch(t){He.each(arguments,(function(t){Pe.log(t)}))}},warn:function(){if(we.DEBUG&&!He.isUndefined(Pe)&&Pe){var t=["Mixpanel warning:"].concat(He.toArray(arguments));try{Pe.warn.apply(Pe,t)}catch(e){He.each(t,(function(t){Pe.warn(t)}))}}},error:function(){if(we.DEBUG&&!He.isUndefined(Pe)&&Pe){var t=["Mixpanel error:"].concat(He.toArray(arguments));try{Pe.error.apply(Pe,t)}catch(e){He.each(t,(function(t){Pe.error(t)}))}}},critical:function(){if(!He.isUndefined(Pe)&&Pe){var t=["Mixpanel error:"].concat(He.toArray(arguments));try{Pe.error.apply(Pe,t)}catch(e){He.each(t,(function(t){Pe.error(t)}))}}}},Ve=function(t,e){return function(){return arguments[0]="["+e+"] "+arguments[0],t.apply(We,arguments)}},Ze=function(t){return{log:Ve(We.log,t),error:Ve(We.error,t),critical:Ve(We.critical,t)}};He.bind=function(t,e){var n,r;if(Le&&t.bind===Le)return Le.apply(t,Te.call(arguments,1));if(!He.isFunction(t))throw new TypeError;return n=Te.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(Te.call(arguments)));var i={};i.prototype=t.prototype;var o=new i;i.prototype=null;var s=t.apply(o,n.concat(Te.call(arguments)));return Object(s)===s?s:o},r},He.each=function(t,e,n){if(null!==t&&void 0!==t)if(Ue&&t.forEach===Ue)t.forEach(e,n);else if(t.length===+t.length){for(var r=0,i=t.length;r<i;r++)if(r in t&&e.call(n,t[r],r,t)===qe)return}else for(var o in t)if(Ie.call(t,o)&&e.call(n,t[o],o,t)===qe)return},He.extend=function(t){return He.each(Te.call(arguments,1),(function(e){for(var n in e)void 0!==e[n]&&(t[n]=e[n])})),t},He.isArray=Fe||function(t){return"[object Array]"===Ne.call(t)},He.isFunction=function(t){try{return/^\s*\bfunction\b/.test(t)}catch(Fl){return!1}},He.isArguments=function(t){return!(!t||!Ie.call(t,"callee"))},He.toArray=function(t){return t?t.toArray?t.toArray():He.isArray(t)||He.isArguments(t)?Te.call(t):He.values(t):[]},He.map=function(t,e,n){if(Be&&t.map===Be)return t.map(e,n);var r=[];return He.each(t,(function(t){r.push(e.call(n,t))})),r},He.keys=function(t){var e=[];return null===t||He.each(t,(function(t,n){e[e.length]=n})),e},He.values=function(t){var e=[];return null===t||He.each(t,(function(t){e[e.length]=t})),e},He.include=function(t,e){var n=!1;return null===t?n:ze&&t.indexOf===ze?-1!=t.indexOf(e):(He.each(t,(function(t){if(n||(n=t===e))return qe})),n)},He.includes=function(t,e){return-1!==t.indexOf(e)},He.inherit=function(t,e){return t.prototype=new e,t.prototype.constructor=t,t.superclass=e.prototype,t},He.isObject=function(t){return t===Object(t)&&!He.isArray(t)},He.isEmptyObject=function(t){if(He.isObject(t)){for(var e in t)if(Ie.call(t,e))return!1;return!0}return!1},He.isUndefined=function(t){return void 0===t},He.isString=function(t){return"[object String]"==Ne.call(t)},He.isDate=function(t){return"[object Date]"==Ne.call(t)},He.isNumber=function(t){return"[object Number]"==Ne.call(t)},He.isElement=function(t){return!(!t||1!==t.nodeType)},He.encodeDates=function(t){return He.each(t,(function(e,n){He.isDate(e)?t[n]=He.formatDate(e):He.isObject(e)&&(t[n]=He.encodeDates(e))})),t},He.timestamp=function(){return Date.now=Date.now||function(){return+new Date},Date.now()},He.formatDate=function(t){function e(t){return t<10?"0"+t:t}return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())},He.strip_empty_properties=function(t){var e={};return He.each(t,(function(t,n){He.isString(t)&&t.length>0&&(e[n]=t)})),e},He.truncate=function(t,e){var n;return"string"===typeof t?n=t.slice(0,e):He.isArray(t)?(n=[],He.each(t,(function(t){n.push(He.truncate(t,e))}))):He.isObject(t)?(n={},He.each(t,(function(t,r){n[r]=He.truncate(t,e)}))):n=t,n},He.JSONEncode=function(t){var e=function(t){var e=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return e.lastIndex=0,e.test(t)?'"'+t.replace(e,(function(t){var e=n[t];return"string"===typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+t+'"'},n=function(t,r){var i="",o=0,s="",a="",l=0,u=i,c=[],h=r[t];switch(h&&"object"===typeof h&&"function"===typeof h.toJSON&&(h=h.toJSON(t)),typeof h){case"string":return e(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";if(i+="    ",c=[],"[object Array]"===Ne.apply(h)){for(l=h.length,o=0;o<l;o+=1)c[o]=n(o,h)||"null";return a=0===c.length?"[]":i?"[\n"+i+c.join(",\n"+i)+"\n"+u+"]":"["+c.join(",")+"]",i=u,a}for(s in h)Ie.call(h,s)&&(a=n(s,h))&&c.push(e(s)+(i?": ":":")+a);return a=0===c.length?"{}":i?"{"+c.join(",")+u+"}":"{"+c.join(",")+"}",i=u,a}};return n("",{"":t})},He.JSONDecode=function(){var t,e,n,r,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},o=function(e){var r=new SyntaxError(e);throw r.at=t,r.text=n,r},s=function(r){return r&&r!==e&&o("Expected '"+r+"' instead of '"+e+"'"),e=n.charAt(t),t+=1,e},a=function(){var t,n="";for("-"===e&&(n="-",s("-"));e>="0"&&e<="9";)n+=e,s();if("."===e)for(n+=".";s()&&e>="0"&&e<="9";)n+=e;if("e"===e||"E"===e)for(n+=e,s(),"-"!==e&&"+"!==e||(n+=e,s());e>="0"&&e<="9";)n+=e,s();if(t=+n,isFinite(t))return t;o("Bad number")},l=function(){var t,n,r,a="";if('"'===e)for(;s();){if('"'===e)return s(),a;if("\\"===e)if(s(),"u"===e){for(r=0,n=0;n<4&&(t=parseInt(s(),16),isFinite(t));n+=1)r=16*r+t;a+=String.fromCharCode(r)}else{if("string"!==typeof i[e])break;a+=i[e]}else a+=e}o("Bad string")},u=function(){for(;e&&e<=" ";)s()};return r=function(){switch(u(),e){case"{":return function(){var t,n={};if("{"===e){if(s("{"),u(),"}"===e)return s("}"),n;for(;e;){if(t=l(),u(),s(":"),Object.hasOwnProperty.call(n,t)&&o('Duplicate key "'+t+'"'),n[t]=r(),u(),"}"===e)return s("}"),n;s(","),u()}}o("Bad object")}();case"[":return function(){var t=[];if("["===e){if(s("["),u(),"]"===e)return s("]"),t;for(;e;){if(t.push(r()),u(),"]"===e)return s("]"),t;s(","),u()}}o("Bad array")}();case'"':return l();case"-":return a();default:return e>="0"&&e<="9"?a():function(){switch(e){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}o('Unexpected "'+e+'"')}()}},function(i){var s;return n=i,t=0,e=" ",s=r(),u(),e&&o("Syntax error"),s}}(),He.base64Encode=function(t){var e,n,r,i,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,u="",c=[];if(!t)return t;t=He.utf8Encode(t);do{e=(o=t.charCodeAt(a++)<<16|t.charCodeAt(a++)<<8|t.charCodeAt(a++))>>18&63,n=o>>12&63,r=o>>6&63,i=63&o,c[l++]=s.charAt(e)+s.charAt(n)+s.charAt(r)+s.charAt(i)}while(a<t.length);switch(u=c.join(""),t.length%3){case 1:u=u.slice(0,-2)+"==";break;case 2:u=u.slice(0,-1)+"="}return u},He.utf8Encode=function(t){var e,n,r,i,o="";for(e=n=0,r=(t=(t+"").replace(/\r\n/g,"\n").replace(/\r/g,"\n")).length,i=0;i<r;i++){var s=t.charCodeAt(i),a=null;s<128?n++:a=s>127&&s<2048?String.fromCharCode(s>>6|192,63&s|128):String.fromCharCode(s>>12|224,s>>6&63|128,63&s|128),null!==a&&(n>e&&(o+=t.substring(e,n)),o+=a,e=n=i+1)}return n>e&&(o+=t.substring(e,t.length)),o},He.UUID=function(){var t=function(){var t,e=1*new Date;if(ye.performance&&ye.performance.now)t=ye.performance.now();else for(t=0;e==1*new Date;)t++;return e.toString(16)+Math.floor(t).toString(16)};return function(){var e=(Ae.height*Ae.width).toString(16);return t()+"-"+Math.random().toString(16).replace(".","")+"-"+function(){var t,e,n=De,r=[],i=0;function o(t,e){var n,i=0;for(n=0;n<e.length;n++)i|=r[n]<<8*n;return t^i}for(t=0;t<n.length;t++)e=n.charCodeAt(t),r.unshift(255&e),r.length>=4&&(i=o(i,r),r=[]);return r.length>0&&(i=o(i,r)),i.toString(16)}()+"-"+e+"-"+t()}}();var Ge=["ahrefsbot","ahrefssiteaudit","baiduspider","bingbot","bingpreview","chrome-lighthouse","facebookexternal","petalbot","pinterest","screaming frog","yahoo! slurp","yandexbot","adsbot-google","apis-google","duplexweb-google","feedfetcher-google","google favicon","google web preview","google-read-aloud","googlebot","googleweblight","mediapartners-google","storebot-google"];He.isBlockedUA=function(t){var e;for(t=t.toLowerCase(),e=0;e<Ge.length;e++)if(-1!==t.indexOf(Ge[e]))return!0;return!1},He.HTTPBuildQuery=function(t,e){var n,r,i=[];return He.isUndefined(e)&&(e="&"),He.each(t,(function(t,e){n=encodeURIComponent(t.toString()),r=encodeURIComponent(e),i[i.length]=r+"="+n})),i.join(e)},He.getQueryParam=function(t,e){e=e.replace(/[[]/g,"\\[").replace(/[\]]/g,"\\]");var n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);if(null===n||n&&"string"!==typeof n[1]&&n[1].length)return"";var r=n[1];try{r=decodeURIComponent(r)}catch(i){We.error("Skipping decoding for malformed query param: "+r)}return r.replace(/\+/g," ")},He.cookie={get:function(t){for(var e=t+"=",n=je.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(e))return decodeURIComponent(i.substring(e.length,i.length))}return null},parse:function(t){var e;try{e=He.JSONDecode(He.cookie.get(t))||{}}catch(n){}return e},set_seconds:function(t,e,n,r,i,o,s){var a="",l="",u="";if(s)a="; domain="+s;else if(r){var c=nn(je.location.hostname);a=c?"; domain=."+c:""}if(n){var h=new Date;h.setTime(h.getTime()+1e3*n),l="; expires="+h.toGMTString()}o&&(i=!0,u="; SameSite=None"),i&&(u+="; secure"),je.cookie=t+"="+encodeURIComponent(e)+l+"; path=/"+a+u},set:function(t,e,n,r,i,o,s){var a="",l="",u="";if(s)a="; domain="+s;else if(r){var c=nn(je.location.hostname);a=c?"; domain=."+c:""}if(n){var h=new Date;h.setTime(h.getTime()+24*n*60*60*1e3),l="; expires="+h.toGMTString()}o&&(i=!0,u="; SameSite=None"),i&&(u+="; secure");var d=t+"="+encodeURIComponent(e)+l+"; path=/"+a+u;return je.cookie=d,d},remove:function(t,e,n){He.cookie.set(t,"",-1,e,!1,!1,n)}};var Ye=null,$e=function(t,e){if(null!==Ye&&!e)return Ye;var n=!0;try{t=t||window.localStorage;var r="__mplss_"+Je(8);t.setItem(r,"xyz"),"xyz"!==t.getItem(r)&&(n=!1),t.removeItem(r)}catch(i){n=!1}return Ye=n,n};He.localStorage={is_supported:function(t){var e=$e(null,t);return e||We.error("localStorage unsupported; falling back to cookie store"),e},error:function(t){We.error("localStorage error: "+t)},get:function(t){try{return window.localStorage.getItem(t)}catch(e){He.localStorage.error(e)}return null},parse:function(t){try{return He.JSONDecode(He.localStorage.get(t))||{}}catch(e){}return null},set:function(t,e){try{window.localStorage.setItem(t,e)}catch(n){He.localStorage.error(n)}},remove:function(t){try{window.localStorage.removeItem(t)}catch(e){He.localStorage.error(e)}}},He.register_event=function(){function t(e){return e&&(e.preventDefault=t.preventDefault,e.stopPropagation=t.stopPropagation),e}return t.preventDefault=function(){this.returnValue=!1},t.stopPropagation=function(){this.cancelBubble=!0},function(e,n,r,i,o){if(e)if(e.addEventListener&&!i)e.addEventListener(n,r,!!o);else{var s="on"+n,a=e[s];e[s]=function(e,n,r){var i=function(i){if(i=i||t(window.event)){var o,s,a=!0;return He.isFunction(r)&&(o=r(i)),s=n.call(e,i),!1!==o&&!1!==s||(a=!1),a}};return i}(e,r,a)}else We.error("No valid element provided to register_event")}}();var Ke=new RegExp('^(\\w*)\\[(\\w+)([=~\\|\\^\\$\\*]?)=?"?([^\\]"]*)"?\\]$');He.dom_query=function(){function t(t){return t.all?t.all:t.getElementsByTagName("*")}var e=/[\t\r\n]/g;function n(t,n){var r=" "+n+" ";return(" "+t.className+" ").replace(e," ").indexOf(r)>=0}function r(e){if(!je.getElementsByTagName)return[];var r,i,o,s,a,l,u,c,h,d,f=e.split(" "),p=[je];for(l=0;l<f.length;l++)if((r=f[l].replace(/^\s+/,"").replace(/\s+$/,"")).indexOf("#")>-1){o=(i=r.split("#"))[0];var m=i[1],g=je.getElementById(m);if(!g||o&&g.nodeName.toLowerCase()!=o)return[];p=[g]}else if(r.indexOf(".")>-1){o=(i=r.split("."))[0];var _=i[1];for(o||(o="*"),s=[],a=0,u=0;u<p.length;u++)for(h="*"==o?t(p[u]):p[u].getElementsByTagName(o),c=0;c<h.length;c++)s[a++]=h[c];for(p=[],d=0,u=0;u<s.length;u++)s[u].className&&He.isString(s[u].className)&&n(s[u],_)&&(p[d++]=s[u])}else{var y=r.match(Ke);if(y){o=y[1];var v,b=y[2],w=y[3],S=y[4];for(o||(o="*"),s=[],a=0,u=0;u<p.length;u++)for(h="*"==o?t(p[u]):p[u].getElementsByTagName(o),c=0;c<h.length;c++)s[a++]=h[c];switch(p=[],d=0,w){case"=":v=function(t){return t.getAttribute(b)==S};break;case"~":v=function(t){return t.getAttribute(b).match(new RegExp("\\b"+S+"\\b"))};break;case"|":v=function(t){return t.getAttribute(b).match(new RegExp("^"+S+"-?"))};break;case"^":v=function(t){return 0===t.getAttribute(b).indexOf(S)};break;case"$":v=function(t){return t.getAttribute(b).lastIndexOf(S)==t.getAttribute(b).length-S.length};break;case"*":v=function(t){return t.getAttribute(b).indexOf(S)>-1};break;default:v=function(t){return t.getAttribute(b)}}for(p=[],d=0,u=0;u<s.length;u++)v(s[u])&&(p[d++]=s[u])}else{for(o=r,s=[],a=0,u=0;u<p.length;u++)for(h=p[u].getElementsByTagName(o),c=0;c<h.length;c++)s[a++]=h[c];p=s}}return p}return function(t){return He.isElement(t)?[t]:He.isObject(t)&&!He.isUndefined(t.length)?t:r.call(this,t)}}();var Xe=["utm_source","utm_medium","utm_campaign","utm_content","utm_term","utm_id","utm_source_platform","utm_campaign_id","utm_creative_format","utm_marketing_tactic"],Qe=["dclid","fbclid","gclid","ko_click_id","li_fat_id","msclkid","sccid","ttclid","twclid","wbraid"];He.info={campaignParams:function(t){var e="",n={};return He.each(Xe,(function(r){(e=He.getQueryParam(je.URL,r)).length?n[r]=e:void 0!==t&&(n[r]=t)})),n},clickParams:function(){var t="",e={};return He.each(Qe,(function(n){(t=He.getQueryParam(je.URL,n)).length&&(e[n]=t)})),e},marketingParams:function(){return He.extend(He.info.campaignParams(),He.info.clickParams())},searchEngine:function(t){return 0===t.search("https?://(.*)google.([^/?]*)")?"google":0===t.search("https?://(.*)bing.com")?"bing":0===t.search("https?://(.*)yahoo.com")?"yahoo":0===t.search("https?://(.*)duckduckgo.com")?"duckduckgo":null},searchInfo:function(t){var e=He.info.searchEngine(t),n="yahoo"!=e?"q":"p",r={};if(null!==e){r.$search_engine=e;var i=He.getQueryParam(t,n);i.length&&(r.mp_keyword=i)}return r},browser:function(t,e,n){return e=e||"",n||He.includes(t," OPR/")?He.includes(t,"Mini")?"Opera Mini":"Opera":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":He.includes(t,"IEMobile")||He.includes(t,"WPDesktop")?"Internet Explorer Mobile":He.includes(t,"SamsungBrowser/")?"Samsung Internet":He.includes(t,"Edge")||He.includes(t,"Edg/")?"Microsoft Edge":He.includes(t,"FBIOS")?"Facebook Mobile":He.includes(t,"Chrome")?"Chrome":He.includes(t,"CriOS")?"Chrome iOS":He.includes(t,"UCWEB")||He.includes(t,"UCBrowser")?"UC Browser":He.includes(t,"FxiOS")?"Firefox iOS":He.includes(e,"Apple")?He.includes(t,"Mobile")?"Mobile Safari":"Safari":He.includes(t,"Android")?"Android Mobile":He.includes(t,"Konqueror")?"Konqueror":He.includes(t,"Firefox")?"Firefox":He.includes(t,"MSIE")||He.includes(t,"Trident/")?"Internet Explorer":He.includes(t,"Gecko")?"Mozilla":""},browserVersion:function(t,e,n){var r={"Internet Explorer Mobile":/rv:(\d+(\.\d+)?)/,"Microsoft Edge":/Edge?\/(\d+(\.\d+)?)/,Chrome:/Chrome\/(\d+(\.\d+)?)/,"Chrome iOS":/CriOS\/(\d+(\.\d+)?)/,"UC Browser":/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/,Safari:/Version\/(\d+(\.\d+)?)/,"Mobile Safari":/Version\/(\d+(\.\d+)?)/,Opera:/(Opera|OPR)\/(\d+(\.\d+)?)/,Firefox:/Firefox\/(\d+(\.\d+)?)/,"Firefox iOS":/FxiOS\/(\d+(\.\d+)?)/,Konqueror:/Konqueror:(\d+(\.\d+)?)/,BlackBerry:/BlackBerry (\d+(\.\d+)?)/,"Android Mobile":/android\s(\d+(\.\d+)?)/,"Samsung Internet":/SamsungBrowser\/(\d+(\.\d+)?)/,"Internet Explorer":/(rv:|MSIE )(\d+(\.\d+)?)/,Mozilla:/rv:(\d+(\.\d+)?)/}[He.info.browser(t,e,n)];if(void 0===r)return null;var i=t.match(r);return i?parseFloat(i[i.length-2]):null},os:function(){var t=De;return/Windows/i.test(t)?/Phone/.test(t)||/WPDesktop/.test(t)?"Windows Phone":"Windows":/(iPhone|iPad|iPod)/.test(t)?"iOS":/Android/.test(t)?"Android":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Mac/i.test(t)?"Mac OS X":/Linux/.test(t)?"Linux":/CrOS/.test(t)?"Chrome OS":""},device:function(t){return/Windows Phone/i.test(t)||/WPDesktop/.test(t)?"Windows Phone":/iPad/.test(t)?"iPad":/iPod/.test(t)?"iPod Touch":/iPhone/.test(t)?"iPhone":/(BlackBerry|PlayBook|BB10)/i.test(t)?"BlackBerry":/Android/.test(t)?"Android":""},referringDomain:function(t){var e=t.split("/");return e.length>=3?e[2]:""},currentUrl:function(){return ye.location.href},properties:function(t){return"object"!==typeof t&&(t={}),He.extend(He.strip_empty_properties({$os:He.info.os(),$browser:He.info.browser(De,Me.vendor,Re),$referrer:je.referrer,$referring_domain:He.info.referringDomain(je.referrer),$device:He.info.device(De)}),{$current_url:He.info.currentUrl(),$browser_version:He.info.browserVersion(De,Me.vendor,Re),$screen_height:Ae.height,$screen_width:Ae.width,mp_lib:"web",$lib_version:we.LIB_VERSION,$insert_id:Je(),time:He.timestamp()/1e3},He.strip_empty_properties(t))},people_properties:function(){return He.extend(He.strip_empty_properties({$os:He.info.os(),$browser:He.info.browser(De,Me.vendor,Re)}),{$browser_version:He.info.browserVersion(De,Me.vendor,Re)})},mpPageViewProperties:function(){return He.strip_empty_properties({current_page_title:je.title,current_domain:ye.location.hostname,current_url_path:ye.location.pathname,current_url_protocol:ye.location.protocol,current_url_search:ye.location.search})}};var Je=function(t){var e=Math.random().toString(36).substring(2,10)+Math.random().toString(36).substring(2,10);return t?e.substring(0,t):e},tn=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,en=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,nn=function(t){var e=en,n=t.split("."),r=n[n.length-1];(r.length>4||"com"===r||"org"===r)&&(e=tn);var i=t.match(e);return i?i[0]:""},rn=null,on=null;"undefined"!==typeof JSON&&(rn=JSON.stringify,on=JSON.parse),rn=rn||He.JSONEncode,on=on||He.JSONDecode,He.toArray=He.toArray,He.isObject=He.isObject,He.JSONEncode=He.JSONEncode,He.JSONDecode=He.JSONDecode,He.isBlockedUA=He.isBlockedUA,He.isEmptyObject=He.isEmptyObject,He.info=He.info,He.info.device=He.info.device,He.info.browser=He.info.browser,He.info.browserVersion=He.info.browserVersion,He.info.properties=He.info.properties;var sn="__mp_opt_in_out_";function an(t,e){yn(!0,t,e)}function ln(t,e){yn(!1,t,e)}function un(t,e){return"1"===_n(t,e)}function cn(t,e){if(function(t){if(t&&t.ignoreDnt)return!1;var e=t&&t.window||ye,n=e.navigator||{},r=!1;return He.each([n.doNotTrack,n.msDoNotTrack,e.doNotTrack],(function(t){He.includes([!0,1,"1","yes"],t)&&(r=!0)})),r}(e))return We.warn('This browser has "Do Not Track" enabled. This will prevent the Mixpanel SDK from sending any data. To ignore the "Do Not Track" browser setting, initialize the Mixpanel instance with the config "ignore_dnt: true"'),!0;var n="0"===_n(t,e);return n&&We.warn("You are opted out of Mixpanel tracking. This will prevent the Mixpanel SDK from sending any data."),n}function hn(t){return vn(t,(function(t){return this.get_config(t)}))}function dn(t){return vn(t,(function(t){return this._get_config(t)}))}function fn(t){return vn(t,(function(t){return this._get_config(t)}))}function pn(t,e){mn(e=e||{}).remove(gn(t,e),!!e.crossSubdomainCookie,e.cookieDomain)}function mn(t){return"localStorage"===(t=t||{}).persistenceType?He.localStorage:He.cookie}function gn(t,e){return((e=e||{}).persistencePrefix||sn)+t}function _n(t,e){return mn(e).get(gn(t,e))}function yn(t,e,n){He.isString(e)&&e.length?(mn(n=n||{}).set(gn(e,n),t?1:0,He.isNumber(n.cookieExpiration)?n.cookieExpiration:null,!!n.crossSubdomainCookie,!!n.secureCookie,!!n.crossSiteCookie,n.cookieDomain),n.track&&t&&n.track(n.trackEventName||"$opt_in",n.trackProperties,{send_immediately:!0})):We.error("gdpr."+(t?"optIn":"optOut")+" called with an invalid token")}function vn(t,e){return function(){var n=!1;try{var r=e.call(this,"token"),i=e.call(this,"ignore_dnt"),o=e.call(this,"opt_out_tracking_persistence_type"),s=e.call(this,"opt_out_tracking_cookie_prefix"),a=e.call(this,"window");r&&(n=cn(r,{ignoreDnt:i,persistenceType:o,persistencePrefix:s,window:a}))}catch(u){We.error("Unexpected error when checking tracking opt-out status: "+u)}if(!n)return t.apply(this,arguments);var l=arguments[arguments.length-1];"function"===typeof l&&l(0)}}var bn=Ze("lock"),wn=function(t,e){e=e||{},this.storageKey=t,this.storage=e.storage||window.localStorage,this.pollIntervalMS=e.pollIntervalMS||100,this.timeoutMS=e.timeoutMS||2e3};wn.prototype.withLock=function(t,e,n){n||"function"===typeof e||(n=e,e=null);var r=n||(new Date).getTime()+"|"+Math.random(),i=(new Date).getTime(),o=this.storageKey,s=this.pollIntervalMS,a=this.timeoutMS,l=this.storage,u=o+":X",c=o+":Y",h=o+":Z",d=function(t){e&&e(t)},f=function(t){if((new Date).getTime()-i>a)return bn.error("Timeout waiting for mutex on "+o+"; clearing lock. ["+r+"]"),l.removeItem(h),l.removeItem(c),void g();setTimeout((function(){try{t()}catch(e){d(e)}}),s*(Math.random()+.1))},p=function(t,e){t()?e():f((function(){p(t,e)}))},m=function(){var t=l.getItem(c);if(t&&t!==r)return!1;if(l.setItem(c,r),l.getItem(c)===r)return!0;if(!$e(l,!0))throw new Error("localStorage support dropped while acquiring lock");return!1},g=function(){l.setItem(u,r),p(m,(function(){l.getItem(u)!==r?f((function(){l.getItem(c)===r?p((function(){return!l.getItem(h)}),_):g()})):_()}))},_=function(){l.setItem(h,"1");try{t()}finally{l.removeItem(h),l.getItem(c)===r&&l.removeItem(c),l.getItem(u)===r&&l.removeItem(u)}};try{if(!$e(l,!0))throw new Error("localStorage support check failed");g()}catch(y){d(y)}};var Sn=Ze("batch"),xn=function(t,e){e=e||{},this.storageKey=t,this.storage=e.storage||window.localStorage,this.reportError=e.errorReporter||He.bind(Sn.error,Sn),this.lock=new wn(t,{storage:this.storage}),this.usePersistence=e.usePersistence,this.pid=e.pid||null,this.memQueue=[]};xn.prototype.enqueue=function(t,e,n){var r={id:Je(),flushAfter:(new Date).getTime()+2*e,payload:t};this.usePersistence?this.lock.withLock(He.bind((function(){var e;try{var i=this.readFromStorage();i.push(r),(e=this.saveToStorage(i))&&this.memQueue.push(r)}catch(o){this.reportError("Error enqueueing item",t),e=!1}n&&n(e)}),this),He.bind((function(t){this.reportError("Error acquiring storage lock",t),n&&n(!1)}),this),this.pid):(this.memQueue.push(r),n&&n(!0))},xn.prototype.fillBatch=function(t){var e=this.memQueue.slice(0,t);if(this.usePersistence&&e.length<t){var n=this.readFromStorage();if(n.length){var r={};He.each(e,(function(t){r[t.id]=!0}));for(var i=0;i<n.length;i++){var o=n[i];if((new Date).getTime()>o.flushAfter&&!r[o.id]&&(o.orphaned=!0,e.push(o),e.length>=t))break}}}return e};var En=function(t,e){var n=[];return He.each(t,(function(t){t.id&&!e[t.id]&&n.push(t)})),n};xn.prototype.removeItemsByID=function(t,e){var n={};if(He.each(t,(function(t){n[t]=!0})),this.memQueue=En(this.memQueue,n),this.usePersistence){var r=He.bind((function(){var e;try{var r=this.readFromStorage();if(r=En(r,n),e=this.saveToStorage(r)){r=this.readFromStorage();for(var i=0;i<r.length;i++){var o=r[i];if(o.id&&n[o.id])return this.reportError("Item not removed from storage"),!1}}}catch(s){this.reportError("Error removing items",t),e=!1}return e}),this);this.lock.withLock((function(){var t=r();e&&e(t)}),He.bind((function(t){var n=!1;if(this.reportError("Error acquiring storage lock",t),!$e(this.storage,!0)&&!(n=r()))try{this.storage.removeItem(this.storageKey)}catch(t){this.reportError("Error clearing queue",t)}e&&e(n)}),this),this.pid)}else e&&e(!0)};var Cn=function(t,e){var n=[];return He.each(t,(function(t){var r=t.id;if(r in e){var i=e[r];null!==i&&(t.payload=i,n.push(t))}else n.push(t)})),n};xn.prototype.updatePayloads=function(t,e){this.memQueue=Cn(this.memQueue,t),this.usePersistence?this.lock.withLock(He.bind((function(){var n;try{var r=this.readFromStorage();r=Cn(r,t),n=this.saveToStorage(r)}catch(i){this.reportError("Error updating items",t),n=!1}e&&e(n)}),this),He.bind((function(t){this.reportError("Error acquiring storage lock",t),e&&e(!1)}),this),this.pid):e&&e(!0)},xn.prototype.readFromStorage=function(){var t;try{(t=this.storage.getItem(this.storageKey))&&(t=on(t),He.isArray(t)||(this.reportError("Invalid storage entry:",t),t=null))}catch(e){this.reportError("Error retrieving queue",e),t=null}return t||[]},xn.prototype.saveToStorage=function(t){try{return this.storage.setItem(this.storageKey,rn(t)),!0}catch(e){return this.reportError("Error saving queue",e),!1}},xn.prototype.clear=function(){this.memQueue=[],this.usePersistence&&this.storage.removeItem(this.storageKey)};var kn=Ze("batch"),On=function(t,e){this.errorReporter=e.errorReporter,this.queue=new xn(t,{errorReporter:He.bind(this.reportError,this),storage:e.storage,usePersistence:e.usePersistence}),this.libConfig=e.libConfig,this.sendRequest=e.sendRequestFunc,this.beforeSendHook=e.beforeSendHook,this.stopAllBatching=e.stopAllBatchingFunc,this.batchSize=this.libConfig.batch_size,this.flushInterval=this.libConfig.batch_flush_interval_ms,this.stopped=!this.libConfig.batch_autostart,this.consecutiveRemovalFailures=0,this.itemIdsSentSuccessfully={},this.flushOnlyOnInterval=e.flushOnlyOnInterval||!1};On.prototype.enqueue=function(t,e){this.queue.enqueue(t,this.flushInterval,e)},On.prototype.start=function(){this.stopped=!1,this.consecutiveRemovalFailures=0,this.flush()},On.prototype.stop=function(){this.stopped=!0,this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null)},On.prototype.clear=function(){this.queue.clear()},On.prototype.resetBatchSize=function(){this.batchSize=this.libConfig.batch_size},On.prototype.resetFlush=function(){this.scheduleFlush(this.libConfig.batch_flush_interval_ms)},On.prototype.scheduleFlush=function(t){this.flushInterval=t,this.stopped||(this.timeoutID=setTimeout(He.bind((function(){this.stopped||this.flush()}),this),this.flushInterval))},On.prototype.flush=function(t){try{if(this.requestInProgress)return void kn.log("Flush: Request already in progress");t=t||{};var e=this.libConfig.batch_request_timeout_ms,n=(new Date).getTime(),r=this.batchSize,i=this.queue.fillBatch(r),o=i.length===r,s=[],a={};if(He.each(i,(function(t){var e=t.payload;if(this.beforeSendHook&&!t.orphaned&&(e=this.beforeSendHook(e)),e){e.event&&e.properties&&(e.properties=He.extend({},e.properties,{mp_sent_by_lib_version:we.LIB_VERSION}));var n=!0,r=t.id;r?(this.itemIdsSentSuccessfully[r]||0)>5&&(this.reportError("[dupe] item ID sent too many times, not sending",{item:t,batchSize:i.length,timesSent:this.itemIdsSentSuccessfully[r]}),n=!1):this.reportError("[dupe] found item with no ID",{item:t}),n&&s.push(e)}a[t.id]=e}),this),s.length<1)return void this.resetFlush();this.requestInProgress=!0;var l=He.bind((function(s){this.requestInProgress=!1;try{var l=!1;if(t.unloading)this.queue.updatePayloads(a);else if(He.isObject(s)&&"timeout"===s.error&&(new Date).getTime()-n>=e)this.reportError("Network timeout; retrying"),this.flush();else if(He.isObject(s)&&(s.httpStatusCode>=500||429===s.httpStatusCode||s.httpStatusCode<=0&&!function(){var t=ye.navigator.onLine;return He.isUndefined(t)||t}()||"timeout"===s.error)){var u=2*this.flushInterval;s.retryAfter&&(u=1e3*parseInt(s.retryAfter,10)||u),u=Math.min(6e5,u),this.reportError("Error; retry in "+u+" ms"),this.scheduleFlush(u)}else if(He.isObject(s)&&413===s.httpStatusCode)if(i.length>1){var c=Math.max(1,Math.floor(r/2));this.batchSize=Math.min(this.batchSize,c,i.length-1),this.reportError("413 response; reducing batch size to "+this.batchSize),this.resetFlush()}else this.reportError("Single-event request too large; dropping",i),this.resetBatchSize(),l=!0;else l=!0;l&&(this.queue.removeItemsByID(He.map(i,(function(t){return t.id})),He.bind((function(t){t?(this.consecutiveRemovalFailures=0,this.flushOnlyOnInterval&&!o?this.resetFlush():this.flush()):(this.reportError("Failed to remove items from queue"),++this.consecutiveRemovalFailures>5?(this.reportError("Too many queue failures; disabling batching system."),this.stopAllBatching()):this.resetFlush())}),this)),He.each(i,He.bind((function(t){var e=t.id;e?(this.itemIdsSentSuccessfully[e]=this.itemIdsSentSuccessfully[e]||0,this.itemIdsSentSuccessfully[e]++,this.itemIdsSentSuccessfully[e]>5&&this.reportError("[dupe] item ID sent too many times",{item:t,batchSize:i.length,timesSent:this.itemIdsSentSuccessfully[e]})):this.reportError("[dupe] found item with no ID while removing",{item:t})}),this)))}catch(h){this.reportError("Error handling API response",h),this.resetFlush()}}),this),u={method:"POST",verbose:!0,ignore_json_errors:!0,timeout_ms:e};t.unloading&&(u.transport="sendBeacon"),kn.log("MIXPANEL REQUEST:",s),this.sendRequest(s,u,l)}catch(c){this.reportError("Error flushing request queue",c),this.resetFlush()}},On.prototype.reportError=function(t,e){if(kn.error.apply(kn.error,arguments),this.errorReporter)try{e instanceof Error||(e=new Error(t)),this.errorReporter(t,e)}catch(e){kn.error(e)}};var Tn=Ze("recorder"),Nn=ye.CompressionStream,In={batch_size:1e3,batch_flush_interval_ms:1e4,batch_request_timeout_ms:9e4,batch_autostart:!0},Pn=new Set([be.MouseMove,be.MouseInteraction,be.Scroll,be.ViewportResize,be.Input,be.TouchMove,be.MediaInteraction,be.Drag,be.Selection]);var Mn=function(t){this._mixpanel=t,this._stopRecording=null,this.recEvents=[],this.seqNo=0,this.replayId=null,this.replayStartTime=null,this.sendBatchId=null,this.idleTimeoutId=null,this.maxTimeoutId=null,this.recordMaxMs=xe,this.recordMinMs=0,this._initBatcher()};Mn.prototype._initBatcher=function(){this.batcher=new On("__mprec",{libConfig:In,sendRequestFunc:He.bind(this.flushEventsWithOptOut,this),errorReporter:He.bind(this.reportError,this),flushOnlyOnInterval:!0,usePersistence:!1})},Mn.prototype.get_config=function(t){return this._mixpanel.get_config(t)},Mn.prototype.startRecording=function(t){if(null===this._stopRecording){this.recordMaxMs=this.get_config("record_max_ms"),this.recordMaxMs>xe&&(this.recordMaxMs=xe,Tn.critical("record_max_ms cannot be greater than "+xe+"ms. Capping value.")),this.recordMinMs=this.get_config("record_min_ms"),this.recordMinMs>Ee&&(this.recordMinMs=Ee,Tn.critical("record_min_ms cannot be greater than 8000ms. Capping value.")),this.recEvents=[],this.seqNo=0,this.replayStartTime=(new Date).getTime(),this.replayId=He.UUID(),t||this.recordMinMs>0?this.batcher.stop():this.batcher.start();var e=He.bind((function(){clearTimeout(this.idleTimeoutId),this.idleTimeoutId=setTimeout(He.bind((function(){Tn.log("Idle timeout reached, restarting recording."),this.resetRecording()}),this),this.get_config("record_idle_timeout_ms"))}),this),n=this.get_config("record_block_selector");""!==n&&null!==n||(n=void 0),this._stopRecording=_e({emit:He.bind((function(t){this.batcher.enqueue(t),function(t){return t.type===ve.IncrementalSnapshot&&Pn.has(t.data.source)}(t)&&(this.batcher.stopped&&(new Date).getTime()-this.replayStartTime>=this.recordMinMs&&this.batcher.start(),e())}),this),blockClass:this.get_config("record_block_class"),blockSelector:n,collectFonts:this.get_config("record_collect_fonts"),inlineImages:this.get_config("record_inline_images"),maskAllInputs:!0,maskTextClass:this.get_config("record_mask_text_class"),maskTextSelector:this.get_config("record_mask_text_selector")}),e(),this.maxTimeoutId=setTimeout(He.bind(this.resetRecording,this),this.recordMaxMs)}else Tn.log("Recording already in progress, skipping startRecording.")},Mn.prototype.resetRecording=function(){this.stopRecording(),this.startRecording(!0)},Mn.prototype.stopRecording=function(){null!==this._stopRecording&&(this._stopRecording(),this._stopRecording=null),this.batcher.stopped?this.batcher.clear():(this.batcher.flush(),this.batcher.stop()),this.replayId=null,clearTimeout(this.idleTimeoutId),clearTimeout(this.maxTimeoutId)},Mn.prototype.flushEventsWithOptOut=function(t,e,n){this._flushEvents(t,e,n,He.bind(this._onOptOut,this))},Mn.prototype._onOptOut=function(t){0===t&&(this.recEvents=[],this.stopRecording())},Mn.prototype._sendRequest=function(t,e,n,r){var i=He.bind((function(e,n){200===e.status&&this.replayId===t&&this.seqNo++,r({status:0,httpStatusCode:e.status,responseBody:n,retryAfter:e.headers.get("Retry-After")})}),this);ye.fetch(this.get_config("api_host")+"/"+this.get_config("api_routes").record+"?"+new URLSearchParams(e),{method:"POST",headers:{Authorization:"Basic "+btoa(this.get_config("token")+":"),"Content-Type":"application/octet-stream"},body:n}).then((function(t){t.json().then((function(e){i(t,e)})).catch((function(t){r({error:t})}))})).catch((function(t){r({error:t,httpStatusCode:0})}))},Mn.prototype._flushEvents=hn((function(t,e,n){const r=t.length;if(r>0){var i=this.replayId,o=t[0].timestamp;0!==this.seqNo&&this.replayStartTime||(0!==this.seqNo&&this.reportError("Replay start time not set but seqNo is not 0. Using current batch start time as a fallback."),this.replayStartTime=o);var s=t[r-1].timestamp-this.replayStartTime,a={distinct_id:String(this._mixpanel.get_distinct_id()),seq:this.seqNo,batch_start_time:o/1e3,replay_id:i,replay_length_ms:s,replay_start_time:this.replayStartTime/1e3},l=He.JSONEncode(t),u=this._mixpanel.get_property("$device_id");u&&(a.$device_id=u);var c=this._mixpanel.get_property("$user_id");if(c&&(a.$user_id=c),Nn){var h=new Blob([l],{type:"application/json"}).stream().pipeThrough(new Nn("gzip"));new Response(h).blob().then(He.bind((function(t){a.format="gzip",this._sendRequest(i,a,t,n)}),this))}else a.format="body",this._sendRequest(i,a,l,n)}})),Mn.prototype.reportError=function(t,e){Tn.error.apply(Tn.error,arguments);try{e||t instanceof Error||(t=new Error(t)),this.get_config("error_reporter")(t,e)}catch(e){Tn.error(e)}},ye.__mp_recorder=Mn;var jn=function(){};jn.prototype.create_properties=function(){},jn.prototype.event_handler=function(){},jn.prototype.after_track_handler=function(){},jn.prototype.init=function(t){return this.mp=t,this},jn.prototype.track=function(t,e,n,r){var i=this,o=He.dom_query(t);if(0!==o.length)return He.each(o,(function(t){He.register_event(t,this.override_event,(function(t){var o={},s=i.create_properties(n,this),a=i.mp.get_config("track_links_timeout");i.event_handler(t,this,o),window.setTimeout(i.track_callback(r,s,o,!0),a),i.mp.track(e,s,i.track_callback(r,s,o))}))}),this),!0;We.error("The DOM query ("+t+") returned 0 elements")},jn.prototype.track_callback=function(t,e,n,r){r=r||!1;var i=this;return function(){n.callback_fired||(n.callback_fired=!0,t&&!1===t(r,e)||i.after_track_handler(e,n,r))}},jn.prototype.create_properties=function(t,e){return"function"===typeof t?t(e):He.extend({},t)};var Rn=function(){this.override_event="click"};He.inherit(Rn,jn),Rn.prototype.create_properties=function(t,e){var n=Rn.superclass.create_properties.apply(this,arguments);return e.href&&(n.url=e.href),n},Rn.prototype.event_handler=function(t,e,n){n.new_tab=2===t.which||t.metaKey||t.ctrlKey||"_blank"===e.target,n.href=e.href,n.new_tab||t.preventDefault()},Rn.prototype.after_track_handler=function(t,e){e.new_tab||setTimeout((function(){window.location=e.href}),0)};var An=function(){this.override_event="submit"};He.inherit(An,jn),An.prototype.event_handler=function(t,e,n){n.element=e,t.preventDefault()},An.prototype.after_track_handler=function(t,e){setTimeout((function(){e.element.submit()}),0)};var Dn="$set",Ln="$set_once",Un="$unset",zn="$add",Bn="$append",Fn="$union",qn="$remove",Hn={set_action:function(t,e){var n={},r={};return He.isObject(t)?He.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=t)}),this):r[t]=e,n[Dn]=r,n},unset_action:function(t){var e={},n=[];return He.isArray(t)||(t=[t]),He.each(t,(function(t){this._is_reserved_property(t)||n.push(t)}),this),e[Un]=n,e},set_once_action:function(t,e){var n={},r={};return He.isObject(t)?He.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=t)}),this):r[t]=e,n[Ln]=r,n},union_action:function(t,e){var n={},r={};return He.isObject(t)?He.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=He.isArray(t)?t:[t])}),this):r[t]=He.isArray(e)?e:[e],n[Fn]=r,n},append_action:function(t,e){var n={},r={};return He.isObject(t)?He.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=t)}),this):r[t]=e,n[Bn]=r,n},remove_action:function(t,e){var n={},r={};return He.isObject(t)?He.each(t,(function(t,e){this._is_reserved_property(e)||(r[e]=t)}),this):r[t]=e,n[qn]=r,n},delete_action:function(){var t={$delete:""};return t}},Wn=function(){};He.extend(Wn.prototype,Hn),Wn.prototype._init=function(t,e,n){this._mixpanel=t,this._group_key=e,this._group_id=n},Wn.prototype.set=fn((function(t,e,n){var r=this.set_action(t,e);return He.isObject(t)&&(n=e),this._send_request(r,n)})),Wn.prototype.set_once=fn((function(t,e,n){var r=this.set_once_action(t,e);return He.isObject(t)&&(n=e),this._send_request(r,n)})),Wn.prototype.unset=fn((function(t,e){var n=this.unset_action(t);return this._send_request(n,e)})),Wn.prototype.union=fn((function(t,e,n){He.isObject(t)&&(n=e);var r=this.union_action(t,e);return this._send_request(r,n)})),Wn.prototype.delete=fn((function(t){var e=this.delete_action();return this._send_request(e,t)})),Wn.prototype.remove=fn((function(t,e,n){var r=this.remove_action(t,e);return this._send_request(r,n)})),Wn.prototype._send_request=function(t,e){t.$group_key=this._group_key,t.$group_id=this._group_id,t.$token=this._get_config("token");var n=He.encodeDates(t);return this._mixpanel._track_or_batch({type:"groups",data:n,endpoint:this._get_config("api_host")+"/"+this._get_config("api_routes").groups,batcher:this._mixpanel.request_batchers.groups},e)},Wn.prototype._is_reserved_property=function(t){return"$group_key"===t||"$group_id"===t},Wn.prototype._get_config=function(t){return this._mixpanel.get_config(t)},Wn.prototype.toString=function(){return this._mixpanel.toString()+".group."+this._group_key+"."+this._group_id},Wn.prototype.remove=Wn.prototype.remove,Wn.prototype.set=Wn.prototype.set,Wn.prototype.set_once=Wn.prototype.set_once,Wn.prototype.union=Wn.prototype.union,Wn.prototype.unset=Wn.prototype.unset,Wn.prototype.toString=Wn.prototype.toString;var Vn=function(){};He.extend(Vn.prototype,Hn),Vn.prototype._init=function(t){this._mixpanel=t},Vn.prototype.set=dn((function(t,e,n){var r=this.set_action(t,e);return He.isObject(t)&&(n=e),this._get_config("save_referrer")&&this._mixpanel.persistence.update_referrer_info(document.referrer),r[Dn]=He.extend({},He.info.people_properties(),r[Dn]),this._send_request(r,n)})),Vn.prototype.set_once=dn((function(t,e,n){var r=this.set_once_action(t,e);return He.isObject(t)&&(n=e),this._send_request(r,n)})),Vn.prototype.unset=dn((function(t,e){var n=this.unset_action(t);return this._send_request(n,e)})),Vn.prototype.increment=dn((function(t,e,n){var r={},i={};return He.isObject(t)?(He.each(t,(function(t,e){if(!this._is_reserved_property(e)){if(isNaN(parseFloat(t)))return void We.error("Invalid increment value passed to mixpanel.people.increment - must be a number");i[e]=t}}),this),n=e):(He.isUndefined(e)&&(e=1),i[t]=e),r[zn]=i,this._send_request(r,n)})),Vn.prototype.append=dn((function(t,e,n){He.isObject(t)&&(n=e);var r=this.append_action(t,e);return this._send_request(r,n)})),Vn.prototype.remove=dn((function(t,e,n){He.isObject(t)&&(n=e);var r=this.remove_action(t,e);return this._send_request(r,n)})),Vn.prototype.union=dn((function(t,e,n){He.isObject(t)&&(n=e);var r=this.union_action(t,e);return this._send_request(r,n)})),Vn.prototype.track_charge=dn((function(t,e,n){if(He.isNumber(t)||(t=parseFloat(t),!isNaN(t)))return this.append("$transactions",He.extend({$amount:t},e),n);We.error("Invalid value passed to mixpanel.people.track_charge - must be a number")})),Vn.prototype.clear_charges=function(t){return this.set("$transactions",[],t)},Vn.prototype.delete_user=function(){if(this._identify_called()){var t={$delete:this._mixpanel.get_distinct_id()};return this._send_request(t)}We.error("mixpanel.people.delete_user() requires you to call identify() first")},Vn.prototype.toString=function(){return this._mixpanel.toString()+".people"},Vn.prototype._send_request=function(t,e){t.$token=this._get_config("token"),t.$distinct_id=this._mixpanel.get_distinct_id();var n=this._mixpanel.get_property("$device_id"),r=this._mixpanel.get_property("$user_id"),i=this._mixpanel.get_property("$had_persisted_distinct_id");n&&(t.$device_id=n),r&&(t.$user_id=r),i&&(t.$had_persisted_distinct_id=i);var o=He.encodeDates(t);return this._identify_called()?this._mixpanel._track_or_batch({type:"people",data:o,endpoint:this._get_config("api_host")+"/"+this._get_config("api_routes").engage,batcher:this._mixpanel.request_batchers.people},e):(this._enqueue(t),He.isUndefined(e)||(this._get_config("verbose")?e({status:-1,error:null}):e(-1)),He.truncate(o,255))},Vn.prototype._get_config=function(t){return this._mixpanel.get_config(t)},Vn.prototype._identify_called=function(){return!0===this._mixpanel._flags.identify_called},Vn.prototype._enqueue=function(t){Dn in t?this._mixpanel.persistence._add_to_people_queue(Dn,t):Ln in t?this._mixpanel.persistence._add_to_people_queue(Ln,t):Un in t?this._mixpanel.persistence._add_to_people_queue(Un,t):zn in t?this._mixpanel.persistence._add_to_people_queue(zn,t):Bn in t?this._mixpanel.persistence._add_to_people_queue(Bn,t):qn in t?this._mixpanel.persistence._add_to_people_queue(qn,t):Fn in t?this._mixpanel.persistence._add_to_people_queue(Fn,t):We.error("Invalid call to _enqueue():",t)},Vn.prototype._flush_one_queue=function(t,e,n,r){var i=this,o=He.extend({},this._mixpanel.persistence.load_queue(t)),s=o;He.isUndefined(o)||!He.isObject(o)||He.isEmptyObject(o)||(i._mixpanel.persistence._pop_from_people_queue(t,o),i._mixpanel.persistence.save(),r&&(s=r(o)),e.call(i,s,(function(e,r){0===e&&i._mixpanel.persistence._add_to_people_queue(t,o),He.isUndefined(n)||n(e,r)})))},Vn.prototype._flush=function(t,e,n,r,i,o,s){var a=this;this._flush_one_queue(Dn,this.set,t),this._flush_one_queue(Ln,this.set_once,r),this._flush_one_queue(Un,this.unset,o,(function(t){return He.keys(t)})),this._flush_one_queue(zn,this.increment,e),this._flush_one_queue(Fn,this.union,i);var l=this._mixpanel.persistence.load_queue(Bn);if(!He.isUndefined(l)&&He.isArray(l)&&l.length)for(var u,c=function(t,e){0===t&&a._mixpanel.persistence._add_to_people_queue(Bn,u),He.isUndefined(n)||n(t,e)},h=l.length-1;h>=0;h--)l=this._mixpanel.persistence.load_queue(Bn),u=l.pop(),a._mixpanel.persistence.save(),He.isEmptyObject(u)||a.append(u,c);var d=this._mixpanel.persistence.load_queue(qn);if(!He.isUndefined(d)&&He.isArray(d)&&d.length)for(var f,p=function(t,e){0===t&&a._mixpanel.persistence._add_to_people_queue(qn,f),He.isUndefined(s)||s(t,e)},m=d.length-1;m>=0;m--)d=this._mixpanel.persistence.load_queue(qn),f=d.pop(),a._mixpanel.persistence.save(),He.isEmptyObject(f)||a.remove(f,p)},Vn.prototype._is_reserved_property=function(t){return"$distinct_id"===t||"$token"===t||"$device_id"===t||"$user_id"===t||"$had_persisted_distinct_id"===t},Vn.prototype.set=Vn.prototype.set,Vn.prototype.set_once=Vn.prototype.set_once,Vn.prototype.unset=Vn.prototype.unset,Vn.prototype.increment=Vn.prototype.increment,Vn.prototype.append=Vn.prototype.append,Vn.prototype.remove=Vn.prototype.remove,Vn.prototype.union=Vn.prototype.union,Vn.prototype.track_charge=Vn.prototype.track_charge,Vn.prototype.clear_charges=Vn.prototype.clear_charges,Vn.prototype.delete_user=Vn.prototype.delete_user,Vn.prototype.toString=Vn.prototype.toString;var Zn,Gn="__mps",Yn="__mpso",$n="__mpus",Kn="__mpa",Xn="__mpap",Qn="__mpr",Jn="__mpu",tr="$people_distinct_id",er="__alias",nr="__timers",rr=[Gn,Yn,$n,Kn,Xn,Qn,Jn,tr,er,nr],ir=function(t){this.props={},this.campaign_params_saved=!1,t.persistence_name?this.name="mp_"+t.persistence_name:this.name="mp_"+t.token+"_mixpanel";var e=t.persistence;"cookie"!==e&&"localStorage"!==e&&(We.critical("Unknown persistence type "+e+"; falling back to cookie"),e=t.persistence="cookie"),"localStorage"===e&&He.localStorage.is_supported()?this.storage=He.localStorage:this.storage=He.cookie,this.load(),this.update_config(t),this.upgrade(),this.save()};ir.prototype.properties=function(){var t={};return this.load(),He.each(this.props,(function(e,n){He.include(rr,n)||(t[n]=e)})),t},ir.prototype.load=function(){if(!this.disabled){var t=this.storage.parse(this.name);t&&(this.props=He.extend({},t))}},ir.prototype.upgrade=function(){var t,e;this.storage===He.localStorage?(t=He.cookie.parse(this.name),He.cookie.remove(this.name),He.cookie.remove(this.name,!0),t&&this.register_once(t)):this.storage===He.cookie&&(e=He.localStorage.parse(this.name),He.localStorage.remove(this.name),e&&this.register_once(e))},ir.prototype.save=function(){this.disabled||this.storage.set(this.name,He.JSONEncode(this.props),this.expire_days,this.cross_subdomain,this.secure,this.cross_site,this.cookie_domain)},ir.prototype.load_prop=function(t){return this.load(),this.props[t]},ir.prototype.remove=function(){this.storage.remove(this.name,!1,this.cookie_domain),this.storage.remove(this.name,!0,this.cookie_domain)},ir.prototype.clear=function(){this.remove(),this.props={}},ir.prototype.register_once=function(t,e,n){return!!He.isObject(t)&&("undefined"===typeof e&&(e="None"),this.expire_days="undefined"===typeof n?this.default_expiry:n,this.load(),He.each(t,(function(t,n){this.props.hasOwnProperty(n)&&this.props[n]!==e||(this.props[n]=t)}),this),this.save(),!0)},ir.prototype.register=function(t,e){return!!He.isObject(t)&&(this.expire_days="undefined"===typeof e?this.default_expiry:e,this.load(),He.extend(this.props,t),this.save(),!0)},ir.prototype.unregister=function(t){this.load(),t in this.props&&(delete this.props[t],this.save())},ir.prototype.update_search_keyword=function(t){this.register(He.info.searchInfo(t))},ir.prototype.update_referrer_info=function(t){this.register_once({$initial_referrer:t||"$direct",$initial_referring_domain:He.info.referringDomain(t)||"$direct"},"")},ir.prototype.get_referrer_info=function(){return He.strip_empty_properties({$initial_referrer:this.props.$initial_referrer,$initial_referring_domain:this.props.$initial_referring_domain})},ir.prototype.update_config=function(t){this.default_expiry=this.expire_days=t.cookie_expiration,this.set_disabled(t.disable_persistence),this.set_cookie_domain(t.cookie_domain),this.set_cross_site(t.cross_site_cookie),this.set_cross_subdomain(t.cross_subdomain_cookie),this.set_secure(t.secure_cookie)},ir.prototype.set_disabled=function(t){this.disabled=t,this.disabled?this.remove():this.save()},ir.prototype.set_cookie_domain=function(t){t!==this.cookie_domain&&(this.remove(),this.cookie_domain=t,this.save())},ir.prototype.set_cross_site=function(t){t!==this.cross_site&&(this.cross_site=t,this.remove(),this.save())},ir.prototype.set_cross_subdomain=function(t){t!==this.cross_subdomain&&(this.cross_subdomain=t,this.remove(),this.save())},ir.prototype.get_cross_subdomain=function(){return this.cross_subdomain},ir.prototype.set_secure=function(t){t!==this.secure&&(this.secure=!!t,this.remove(),this.save())},ir.prototype._add_to_people_queue=function(t,e){var n=this._get_queue_key(t),r=e[t],i=this._get_or_create_queue(Dn),o=this._get_or_create_queue(Ln),s=this._get_or_create_queue(Un),a=this._get_or_create_queue(zn),l=this._get_or_create_queue(Fn),u=this._get_or_create_queue(qn,[]),c=this._get_or_create_queue(Bn,[]);n===Gn?(He.extend(i,r),this._pop_from_people_queue(zn,r),this._pop_from_people_queue(Fn,r),this._pop_from_people_queue(Un,r)):n===Yn?(He.each(r,(function(t,e){e in o||(o[e]=t)})),this._pop_from_people_queue(Un,r)):n===$n?He.each(r,(function(t){He.each([i,o,a,l],(function(e){t in e&&delete e[t]})),He.each(c,(function(e){t in e&&delete e[t]})),s[t]=!0})):n===Kn?(He.each(r,(function(t,e){e in i?i[e]+=t:(e in a||(a[e]=0),a[e]+=t)}),this),this._pop_from_people_queue(Un,r)):n===Jn?(He.each(r,(function(t,e){He.isArray(t)&&(e in l||(l[e]=[]),l[e]=l[e].concat(t))})),this._pop_from_people_queue(Un,r)):n===Qn?(u.push(r),this._pop_from_people_queue(Bn,r)):n===Xn&&(c.push(r),this._pop_from_people_queue(Un,r)),We.log("MIXPANEL PEOPLE REQUEST (QUEUED, PENDING IDENTIFY):"),We.log(e),this.save()},ir.prototype._pop_from_people_queue=function(t,e){var n=this.props[this._get_queue_key(t)];He.isUndefined(n)||He.each(e,(function(e,r){t===Bn||t===qn?He.each(n,(function(t){t[r]===e&&delete t[r]})):delete n[r]}),this)},ir.prototype.load_queue=function(t){return this.load_prop(this._get_queue_key(t))},ir.prototype._get_queue_key=function(t){return t===Dn?Gn:t===Ln?Yn:t===Un?$n:t===zn?Kn:t===Bn?Xn:t===qn?Qn:t===Fn?Jn:void We.error("Invalid queue:",t)},ir.prototype._get_or_create_queue=function(t,e){var n=this._get_queue_key(t);return e=He.isUndefined(e)?{}:e,this.props[n]||(this.props[n]=e)},ir.prototype.set_event_timer=function(t,e){var n=this.load_prop(nr)||{};n[t]=e,this.props[nr]=n,this.save()},ir.prototype.remove_event_timer=function(t){var e=(this.load_prop(nr)||{})[t];return He.isUndefined(e)||(delete this.props[nr][t],this.save()),e};var or,sr=function(t,e){throw new Error(t+" not available in this build.")},ar=function(t){return t},lr=function(){},ur="mixpanel",cr="base64",hr="$device:",dr=ye.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest,fr=!dr&&-1===De.indexOf("MSIE")&&-1===De.indexOf("Mozilla"),pr=null;Me.sendBeacon&&(pr=function(){return Me.sendBeacon.apply(Me,arguments)});var mr={track:"track/",engage:"engage/",groups:"groups/",record:"record/"},gr={api_host:"https://api-js.mixpanel.com",api_routes:mr,api_method:"POST",api_transport:"XHR",api_payload_format:cr,app_host:"https://mixpanel.com",cdn:"https://cdn.mxpnl.com",cross_site_cookie:!1,cross_subdomain_cookie:!0,error_reporter:lr,persistence:"cookie",persistence_name:"",cookie_domain:"",cookie_name:"",loaded:lr,mp_loader:null,track_marketing:!0,track_pageview:!1,skip_first_touch_marketing:!1,store_google:!0,stop_utm_persistence:!1,save_referrer:!0,test:!1,verbose:!1,img:!1,debug:!1,track_links_timeout:300,cookie_expiration:365,upgrade:!1,disable_persistence:!1,disable_cookie:!1,secure_cookie:!1,ip:!0,opt_out_tracking_by_default:!1,opt_out_persistence_by_default:!1,opt_out_tracking_persistence_type:"localStorage",opt_out_tracking_cookie_prefix:null,property_blacklist:[],xhr_headers:{},ignore_dnt:!1,batch_requests:!0,batch_size:50,batch_flush_interval_ms:5e3,batch_request_timeout_ms:9e4,batch_autostart:!0,hooks:{},record_block_class:new RegExp("^(mp-block|fs-exclude|amp-block|rr-block|ph-no-capture)$"),record_block_selector:"img, video",record_collect_fonts:!1,record_idle_timeout_ms:18e5,record_inline_images:!1,record_mask_text_class:new RegExp("^(mp-mask|fs-mask|amp-mask|rr-mask|ph-mask)$"),record_mask_text_selector:"*",record_max_ms:xe,record_min_ms:0,record_sessions_percent:0,recorder_src:"https://cdn.mxpnl.com/libs/mixpanel-recorder.min.js"},_r=!1,yr=function(){},vr=function(t,e,n){var r,i=n===ur?or:or[n];if(i&&0===Zn)r=i;else{if(i&&!He.isArray(i))return void We.error("You have already initialized "+n);r=new yr}if(r._cached_groups={},r._init(t,e,n),r.people=new Vn,r.people._init(r),!r.get_config("skip_first_touch_marketing")){var o=He.info.campaignParams(null),s={},a=!1;He.each(o,(function(t,e){s["initial_"+e]=t,t&&(a=!0)})),a&&r.people.set_once(s)}return we.DEBUG=we.DEBUG||r.get_config("debug"),!He.isUndefined(i)&&He.isArray(i)&&(r._execute_array.call(r.people,i.people),r._execute_array(i)),r};yr.prototype.init=function(t,e,n){if(He.isUndefined(n))this.report_error("You must name your new library: init(token, config, name)");else{if(n!==ur){var r=vr(t,e,n);return or[n]=r,r._loaded(),r}this.report_error("You must initialize the main mixpanel object right after you include the Mixpanel js snippet")}},yr.prototype._init=function(t,e,n){e=e||{},this.__loaded=!0,this.config={};var r={};"api_payload_format"in e||(e.api_host||gr.api_host).match(/\.mixpanel\.com/)&&(r.api_payload_format="json");if(this.set_config(He.extend({},gr,r,e,{name:n,token:t,callback_fn:(n===ur?n:ur+"."+n)+"._jsc"})),this._jsc=lr,this.__dom_loaded_queue=[],this.__request_queue=[],this.__disabled_events=[],this._flags={disable_all_events:!1,identify_called:!1},this.request_batchers={},this._batch_requests=this.get_config("batch_requests"),this._batch_requests)if(He.localStorage.is_supported(!0)&&dr){if(this.init_batchers(),pr&&ye.addEventListener){var i=He.bind((function(){this.request_batchers.events.stopped||this.request_batchers.events.flush({unloading:!0})}),this);ye.addEventListener("pagehide",(function(t){t.persisted&&i()})),ye.addEventListener("visibilitychange",(function(){"hidden"===je.visibilityState&&i()}))}}else this._batch_requests=!1,We.log("Turning off Mixpanel request-queueing; needs XHR and localStorage support"),He.each(this.get_batcher_configs(),(function(t){We.log("Clearing batch queue "+t.queue_key),He.localStorage.remove(t.queue_key)}));this.persistence=this.cookie=new ir(this.config),this.unpersisted_superprops={},this._gdpr_init();var o=He.UUID();this.get_distinct_id()||this.register_once({distinct_id:hr+o,$device_id:o},"");var s=this.get_config("track_pageview");s&&this._init_url_change_tracking(s),this.get_config("record_sessions_percent")>0&&100*Math.random()<=this.get_config("record_sessions_percent")&&this.start_session_recording()},yr.prototype.start_session_recording=hn((function(){if(ye.MutationObserver){var t=He.bind((function(){this._recorder=this._recorder||new ye.__mp_recorder(this),this._recorder.startRecording()}),this);He.isUndefined(ye.__mp_recorder)?sr(this.get_config("recorder_src"),t):t()}else We.critical("Browser does not support MutationObserver; skipping session recording")})),yr.prototype.stop_session_recording=function(){this._recorder?this._recorder.stopRecording():We.critical("Session recorder module not loaded")},yr.prototype.get_session_recording_properties=function(){var t={};if(this._recorder){var e=this._recorder.replayId;e&&(t.$mp_replay_id=e)}return t},yr.prototype._loaded=function(){if(this.get_config("loaded")(this),this._set_default_superprops(),this.people.set_once(this.persistence.get_referrer_info()),this.get_config("store_google")&&this.get_config("stop_utm_persistence")){var t=He.info.campaignParams(null);He.each(t,function(t,e){this.unregister(e)}.bind(this))}},yr.prototype._set_default_superprops=function(){this.persistence.update_search_keyword(je.referrer),this.get_config("store_google")&&!this.get_config("stop_utm_persistence")&&this.register(He.info.campaignParams()),this.get_config("save_referrer")&&this.persistence.update_referrer_info(je.referrer)},yr.prototype._dom_loaded=function(){He.each(this.__dom_loaded_queue,(function(t){this._track_dom.apply(this,t)}),this),this.has_opted_out_tracking()||He.each(this.__request_queue,(function(t){this._send_request.apply(this,t)}),this),delete this.__dom_loaded_queue,delete this.__request_queue},yr.prototype._track_dom=function(t,e){if(this.get_config("img"))return this.report_error("You can't use DOM tracking functions with img = true."),!1;if(!_r)return this.__dom_loaded_queue.push([t,e]),!1;var n=(new t).init(this);return n.track.apply(n,e)},yr.prototype._init_url_change_tracking=function(t){var e="";if(this.track_pageview()&&(e=He.info.currentUrl()),He.include(["full-url","url-with-path-and-query-string","url-with-path"],t)){ye.addEventListener("popstate",(function(){ye.dispatchEvent(new Event("mp_locationchange"))})),ye.addEventListener("hashchange",(function(){ye.dispatchEvent(new Event("mp_locationchange"))}));var n=ye.history.pushState;"function"===typeof n&&(ye.history.pushState=function(t,e,r){n.call(ye.history,t,e,r),ye.dispatchEvent(new Event("mp_locationchange"))});var r=ye.history.replaceState;"function"===typeof r&&(ye.history.replaceState=function(t,e,n){r.call(ye.history,t,e,n),ye.dispatchEvent(new Event("mp_locationchange"))}),ye.addEventListener("mp_locationchange",function(){var n=He.info.currentUrl(),r=!1;("full-url"===t?r=n!==e:"url-with-path-and-query-string"===t?r=n.split("#")[0]!==e.split("#")[0]:"url-with-path"===t&&(r=n.split("#")[0].split("?")[0]!==e.split("#")[0].split("?")[0]),r)&&(this.track_pageview()&&(e=n))}.bind(this))}},yr.prototype._prepare_callback=function(t,e){if(He.isUndefined(t))return null;if(dr){return function(n){t(n,e)}}var n=this._jsc,r=""+Math.floor(1e8*Math.random()),i=this.get_config("callback_fn")+"["+r+"]";return n[r]=function(i){delete n[r],t(i,e)},i},yr.prototype._send_request=function(t,e,n,r){var i=!0;if(fr)return this.__request_queue.push(arguments),i;var o={method:this.get_config("api_method"),transport:this.get_config("api_transport"),verbose:this.get_config("verbose")},s=null;r||!He.isFunction(n)&&"string"!==typeof n||(r=n,n=null),n=He.extend(o,n||{}),dr||(n.method="GET");var a="POST"===n.method,l=pr&&a&&"sendbeacon"===n.transport.toLowerCase(),u=n.verbose;e.verbose&&(u=!0),this.get_config("test")&&(e.test=1),u&&(e.verbose=1),this.get_config("img")&&(e.img=1),dr||(r?e.callback=r:(u||this.get_config("test"))&&(e.callback="(function(){})")),e.ip=this.get_config("ip")?1:0,e._=(new Date).getTime().toString(),a&&(s="data="+encodeURIComponent(e.data),delete e.data),t+="?"+He.HTTPBuildQuery(e);var c=this;if("img"in e){var h=je.createElement("img");h.src=t,je.body.appendChild(h)}else if(l){try{i=pr(t,s)}catch(_){c.report_error(_),i=!1}try{r&&r(i?1:0)}catch(_){c.report_error(_)}}else if(dr)try{var d=new XMLHttpRequest;d.open(n.method,t,!0);var f=this.get_config("xhr_headers");if(a&&(f["Content-Type"]="application/x-www-form-urlencoded"),He.each(f,(function(t,e){d.setRequestHeader(e,t)})),n.timeout_ms&&"undefined"!==typeof d.timeout){d.timeout=n.timeout_ms;var p=(new Date).getTime()}d.withCredentials=!0,d.onreadystatechange=function(){var t;if(4===d.readyState)if(200===d.status){if(r)if(u){var e;try{e=He.JSONDecode(d.responseText)}catch(_){if(c.report_error(_),!n.ignore_json_errors)return;e=d.responseText}r(e)}else r(Number(d.responseText))}else if(t=d.timeout&&!d.status&&(new Date).getTime()-p>=d.timeout?"timeout":"Bad HTTP status: "+d.status+" "+d.statusText,c.report_error(t),r)if(u){var i=d.responseHeaders||{};r({status:0,httpStatusCode:d.status,error:t,retryAfter:i["Retry-After"]})}else r(0)},d.send(s)}catch(_){c.report_error(_),i=!1}else{var m=je.createElement("script");m.type="text/javascript",m.async=!0,m.defer=!0,m.src=t;var g=je.getElementsByTagName("script")[0];g.parentNode.insertBefore(m,g)}return i},yr.prototype._execute_array=function(t){var e,n=[],r=[],i=[];He.each(t,(function(t){t&&(e=t[0],He.isArray(e)?i.push(t):"function"===typeof t?t.call(this):He.isArray(t)&&"alias"===e?n.push(t):He.isArray(t)&&-1!==e.indexOf("track")&&"function"===typeof this[e]?i.push(t):r.push(t))}),this);var o=function(t,e){He.each(t,(function(t){if(He.isArray(t[0])){var n=e;He.each(t,(function(t){n=n[t[0]].apply(n,t.slice(1))}))}else this[t[0]].apply(this,t.slice(1))}),e)};o(n,this),o(r,this),o(i,this)},yr.prototype.are_batchers_initialized=function(){return!!this.request_batchers.events},yr.prototype.get_batcher_configs=function(){var t="__mpq_"+this.get_config("token"),e=this.get_config("api_routes");return this._batcher_configs=this._batcher_configs||{events:{type:"events",endpoint:"/"+e.track,queue_key:t+"_ev"},people:{type:"people",endpoint:"/"+e.engage,queue_key:t+"_pp"},groups:{type:"groups",endpoint:"/"+e.groups,queue_key:t+"_gr"}},this._batcher_configs},yr.prototype.init_batchers=function(){if(!this.are_batchers_initialized()){var t=He.bind((function(t){return new On(t.queue_key,{libConfig:this.config,errorReporter:this.get_config("error_reporter"),sendRequestFunc:He.bind((function(e,n,r){this._send_request(this.get_config("api_host")+t.endpoint,this._encode_data_for_request(e),n,this._prepare_callback(r,e))}),this),beforeSendHook:He.bind((function(e){return this._run_hook("before_send_"+t.type,e)}),this),stopAllBatchingFunc:He.bind(this.stop_batch_senders,this),usePersistence:!0})}),this),e=this.get_batcher_configs();this.request_batchers={events:t(e.events),people:t(e.people),groups:t(e.groups)}}this.get_config("batch_autostart")&&this.start_batch_senders()},yr.prototype.start_batch_senders=function(){this._batchers_were_started=!0,this.are_batchers_initialized()&&(this._batch_requests=!0,He.each(this.request_batchers,(function(t){t.start()})))},yr.prototype.stop_batch_senders=function(){this._batch_requests=!1,He.each(this.request_batchers,(function(t){t.stop(),t.clear()}))},yr.prototype.push=function(t){this._execute_array([t])},yr.prototype.disable=function(t){"undefined"===typeof t?this._flags.disable_all_events=!0:this.__disabled_events=this.__disabled_events.concat(t)},yr.prototype._encode_data_for_request=function(t){var e=He.JSONEncode(t);return this.get_config("api_payload_format")===cr&&(e=He.base64Encode(e)),{data:e}},yr.prototype._track_or_batch=function(t,e){var n=He.truncate(t.data,255),r=t.endpoint,i=t.batcher,o=t.should_send_immediately,s=t.send_request_options||{};e=e||lr;var a=!0,l=He.bind((function(){return s.skip_hooks||(n=this._run_hook("before_send_"+t.type,n)),n?(We.log("MIXPANEL REQUEST:"),We.log(n),this._send_request(r,this._encode_data_for_request(n),s,this._prepare_callback(e,n))):null}),this);return this._batch_requests&&!o?i.enqueue(n,(function(t){t?e(1,n):l()})):a=l(),a&&n},yr.prototype.track=hn((function(t,e,n,r){r||"function"!==typeof n||(r=n,n=null);var i=(n=n||{}).transport;i&&(n.transport=i);var o=n.send_immediately;if("function"!==typeof r&&(r=lr),He.isUndefined(t))this.report_error("No event name provided to mixpanel.track");else{if(!this._event_is_disabled(t)){(e=He.extend({},e)).token=this.get_config("token");var s=this.persistence.remove_event_timer(t);if(!He.isUndefined(s)){var a=(new Date).getTime()-s;e.$duration=parseFloat((a/1e3).toFixed(3))}this._set_default_superprops();var l=this.get_config("track_marketing")?He.info.marketingParams():{};e=He.extend({},He.info.properties({mp_loader:this.get_config("mp_loader")}),l,this.persistence.properties(),this.unpersisted_superprops,this.get_session_recording_properties(),e);var u=this.get_config("property_blacklist");He.isArray(u)?He.each(u,(function(t){delete e[t]})):this.report_error("Invalid value for property_blacklist config: "+u);var c={event:t,properties:e};return this._track_or_batch({type:"events",data:c,endpoint:this.get_config("api_host")+"/"+this.get_config("api_routes").track,batcher:this.request_batchers.events,should_send_immediately:o,send_request_options:n},r)}r(0)}})),yr.prototype.set_group=hn((function(t,e,n){He.isArray(e)||(e=[e]);var r={};return r[t]=e,this.register(r),this.people.set(t,e,n)})),yr.prototype.add_group=hn((function(t,e,n){var r=this.get_property(t),i={};return void 0===r?(i[t]=[e],this.register(i)):-1===r.indexOf(e)&&(r.push(e),i[t]=r,this.register(i)),this.people.union(t,e,n)})),yr.prototype.remove_group=hn((function(t,e,n){var r=this.get_property(t);if(void 0!==r){var i=r.indexOf(e);i>-1&&(r.splice(i,1),this.register({group_key:r})),0===r.length&&this.unregister(t)}return this.people.remove(t,e,n)})),yr.prototype.track_with_groups=hn((function(t,e,n,r){var i=He.extend({},e||{});return He.each(n,(function(t,e){null!==t&&void 0!==t&&(i[e]=t)})),this.track(t,i,r)})),yr.prototype._create_map_key=function(t,e){return t+"_"+JSON.stringify(e)},yr.prototype._remove_group_from_cache=function(t,e){delete this._cached_groups[this._create_map_key(t,e)]},yr.prototype.get_group=function(t,e){var n=this._create_map_key(t,e),r=this._cached_groups[n];return void 0!==r&&r._group_key===t&&r._group_id===e||((r=new Wn)._init(this,t,e),this._cached_groups[n]=r),r},yr.prototype.track_pageview=hn((function(t,e){"object"!==typeof t&&(t={});var n=(e=e||{}).event_name||"$mp_web_page_view",r=He.extend(He.info.mpPageViewProperties(),He.info.campaignParams(),He.info.clickParams()),i=He.extend({},r,t);return this.track(n,i)})),yr.prototype.track_links=function(){return this._track_dom.call(this,Rn,arguments)},yr.prototype.track_forms=function(){return this._track_dom.call(this,An,arguments)},yr.prototype.time_event=function(t){He.isUndefined(t)?this.report_error("No event name provided to mixpanel.time_event"):this._event_is_disabled(t)||this.persistence.set_event_timer(t,(new Date).getTime())};var br={persistent:!0},wr=function(t){var e;return e=He.isObject(t)?t:He.isUndefined(t)?{}:{days:t},He.extend({},br,e)};yr.prototype.register=function(t,e){var n=wr(e);n.persistent?this.persistence.register(t,n.days):He.extend(this.unpersisted_superprops,t)},yr.prototype.register_once=function(t,e,n){var r=wr(n);r.persistent?this.persistence.register_once(t,e,r.days):("undefined"===typeof e&&(e="None"),He.each(t,(function(t,n){this.unpersisted_superprops.hasOwnProperty(n)&&this.unpersisted_superprops[n]!==e||(this.unpersisted_superprops[n]=t)}),this))},yr.prototype.unregister=function(t,e){(e=wr(e)).persistent?this.persistence.unregister(t):delete this.unpersisted_superprops[t]},yr.prototype._register_single=function(t,e){var n={};n[t]=e,this.register(n)},yr.prototype.identify=function(t,e,n,r,i,o,s,a){var l=this.get_distinct_id();if(t&&l!==t){if("string"===typeof t&&0===t.indexOf(hr))return this.report_error("distinct_id cannot have $device: prefix"),-1;this.register({$user_id:t})}if(!this.get_property("$device_id")){var u=l;this.register_once({$had_persisted_distinct_id:!0,$device_id:u},"")}t!==l&&t!==this.get_property(er)&&(this.unregister(er),this.register({distinct_id:t})),this._flags.identify_called=!0,this.people._flush(e,n,r,i,o,s,a),t!==l&&this.track("$identify",{distinct_id:t,$anon_distinct_id:l},{skip_hooks:!0})},yr.prototype.reset=function(){this.persistence.clear(),this._flags.identify_called=!1;var t=He.UUID();this.register_once({distinct_id:hr+t,$device_id:t},"")},yr.prototype.get_distinct_id=function(){return this.get_property("distinct_id")},yr.prototype.alias=function(t,e){if(t===this.get_property(tr))return this.report_error("Attempting to create alias for existing People user - aborting."),-2;var n=this;return He.isUndefined(e)&&(e=this.get_distinct_id()),t!==e?(this._register_single(er,t),this.track("$create_alias",{alias:t,distinct_id:e},{skip_hooks:!0},(function(){n.identify(t)}))):(this.report_error("alias matches current distinct_id - skipping api call."),this.identify(t),-1)},yr.prototype.name_tag=function(t){this._register_single("mp_name_tag",t)},yr.prototype.set_config=function(t){He.isObject(t)&&(He.extend(this.config,t),t.batch_size&&He.each(this.request_batchers,(function(t){t.resetBatchSize()})),this.get_config("persistence_name")||(this.config.persistence_name=this.config.cookie_name),this.get_config("disable_persistence")||(this.config.disable_persistence=this.config.disable_cookie),this.persistence&&this.persistence.update_config(this.config),we.DEBUG=we.DEBUG||this.get_config("debug"))},yr.prototype.get_config=function(t){return this.config[t]},yr.prototype._run_hook=function(t){var e=(this.config.hooks[t]||ar).apply(this,Te.call(arguments,1));return"undefined"===typeof e&&(this.report_error(t+" hook did not return a value"),e=null),e},yr.prototype.get_property=function(t){return this.persistence.load_prop([t])},yr.prototype.toString=function(){var t=this.get_config("name");return t!==ur&&(t=ur+"."+t),t},yr.prototype._event_is_disabled=function(t){return He.isBlockedUA(De)||this._flags.disable_all_events||He.include(this.__disabled_events,t)},yr.prototype._gdpr_init=function(){"localStorage"===this.get_config("opt_out_tracking_persistence_type")&&He.localStorage.is_supported()&&(!this.has_opted_in_tracking()&&this.has_opted_in_tracking({persistence_type:"cookie"})&&this.opt_in_tracking({enable_persistence:!1}),!this.has_opted_out_tracking()&&this.has_opted_out_tracking({persistence_type:"cookie"})&&this.opt_out_tracking({clear_persistence:!1}),this.clear_opt_in_out_tracking({persistence_type:"cookie",enable_persistence:!1})),this.has_opted_out_tracking()?this._gdpr_update_persistence({clear_persistence:!0}):this.has_opted_in_tracking()||!this.get_config("opt_out_tracking_by_default")&&!He.cookie.get("mp_optout")||(He.cookie.remove("mp_optout"),this.opt_out_tracking({clear_persistence:this.get_config("opt_out_persistence_by_default")}))},yr.prototype._gdpr_update_persistence=function(t){var e;if(t&&t.clear_persistence)e=!0;else{if(!t||!t.enable_persistence)return;e=!1}this.get_config("disable_persistence")||this.persistence.disabled===e||this.persistence.set_disabled(e),e?this.stop_batch_senders():this._batchers_were_started&&this.start_batch_senders()},yr.prototype._gdpr_call_func=function(t,e){return e=He.extend({track:He.bind(this.track,this),persistence_type:this.get_config("opt_out_tracking_persistence_type"),cookie_prefix:this.get_config("opt_out_tracking_cookie_prefix"),cookie_expiration:this.get_config("cookie_expiration"),cross_site_cookie:this.get_config("cross_site_cookie"),cross_subdomain_cookie:this.get_config("cross_subdomain_cookie"),cookie_domain:this.get_config("cookie_domain"),secure_cookie:this.get_config("secure_cookie"),ignore_dnt:this.get_config("ignore_dnt")},e),He.localStorage.is_supported()||(e.persistence_type="cookie"),t(this.get_config("token"),{track:e.track,trackEventName:e.track_event_name,trackProperties:e.track_properties,persistenceType:e.persistence_type,persistencePrefix:e.cookie_prefix,cookieDomain:e.cookie_domain,cookieExpiration:e.cookie_expiration,crossSiteCookie:e.cross_site_cookie,crossSubdomainCookie:e.cross_subdomain_cookie,secureCookie:e.secure_cookie,ignoreDnt:e.ignore_dnt})},yr.prototype.opt_in_tracking=function(t){t=He.extend({enable_persistence:!0},t),this._gdpr_call_func(an,t),this._gdpr_update_persistence(t)},yr.prototype.opt_out_tracking=function(t){(t=He.extend({clear_persistence:!0,delete_user:!0},t)).delete_user&&this.people&&this.people._identify_called()&&(this.people.delete_user(),this.people.clear_charges()),this._gdpr_call_func(ln,t),this._gdpr_update_persistence(t)},yr.prototype.has_opted_in_tracking=function(t){return this._gdpr_call_func(un,t)},yr.prototype.has_opted_out_tracking=function(t){return this._gdpr_call_func(cn,t)},yr.prototype.clear_opt_in_out_tracking=function(t){t=He.extend({enable_persistence:!0},t),this._gdpr_call_func(pn,t),this._gdpr_update_persistence(t)},yr.prototype.report_error=function(t,e){We.error.apply(We.error,arguments);try{e||t instanceof Error||(t=new Error(t)),this.get_config("error_reporter")(t,e)}catch(e){We.error(e)}},yr.prototype.init=yr.prototype.init,yr.prototype.reset=yr.prototype.reset,yr.prototype.disable=yr.prototype.disable,yr.prototype.time_event=yr.prototype.time_event,yr.prototype.track=yr.prototype.track,yr.prototype.track_links=yr.prototype.track_links,yr.prototype.track_forms=yr.prototype.track_forms,yr.prototype.track_pageview=yr.prototype.track_pageview,yr.prototype.register=yr.prototype.register,yr.prototype.register_once=yr.prototype.register_once,yr.prototype.unregister=yr.prototype.unregister,yr.prototype.identify=yr.prototype.identify,yr.prototype.alias=yr.prototype.alias,yr.prototype.name_tag=yr.prototype.name_tag,yr.prototype.set_config=yr.prototype.set_config,yr.prototype.get_config=yr.prototype.get_config,yr.prototype.get_property=yr.prototype.get_property,yr.prototype.get_distinct_id=yr.prototype.get_distinct_id,yr.prototype.toString=yr.prototype.toString,yr.prototype.opt_out_tracking=yr.prototype.opt_out_tracking,yr.prototype.opt_in_tracking=yr.prototype.opt_in_tracking,yr.prototype.has_opted_out_tracking=yr.prototype.has_opted_out_tracking,yr.prototype.has_opted_in_tracking=yr.prototype.has_opted_in_tracking,yr.prototype.clear_opt_in_out_tracking=yr.prototype.clear_opt_in_out_tracking,yr.prototype.get_group=yr.prototype.get_group,yr.prototype.set_group=yr.prototype.set_group,yr.prototype.add_group=yr.prototype.add_group,yr.prototype.remove_group=yr.prototype.remove_group,yr.prototype.track_with_groups=yr.prototype.track_with_groups,yr.prototype.start_batch_senders=yr.prototype.start_batch_senders,yr.prototype.stop_batch_senders=yr.prototype.stop_batch_senders,yr.prototype.start_session_recording=yr.prototype.start_session_recording,yr.prototype.stop_session_recording=yr.prototype.stop_session_recording,yr.prototype.get_session_recording_properties=yr.prototype.get_session_recording_properties,yr.prototype.DEFAULT_API_ROUTES=mr,ir.prototype.properties=ir.prototype.properties,ir.prototype.update_search_keyword=ir.prototype.update_search_keyword,ir.prototype.update_referrer_info=ir.prototype.update_referrer_info,ir.prototype.get_cross_subdomain=ir.prototype.get_cross_subdomain,ir.prototype.clear=ir.prototype.clear;var Sr={},xr=function(){or.init=function(t,e,n){if(n)return or[n]||(or[n]=Sr[n]=vr(t,e,n),or[n]._loaded()),or[n];var r=or;Sr[ur]?r=Sr[ur]:t&&((r=vr(t,e,ur))._loaded(),Sr[ur]=r),or=r,1===Zn&&(ye[ur]=or),He.each(Sr,(function(t,e){e!==ur&&(or[e]=t)})),or._=He}};var Er=(sr=function(t,e){e()},Zn=0,or=new yr,xr(),or.init(),function(){function t(){t.done||(t.done=!0,_r=!0,fr=!1,He.each(Sr,(function(t){t._dom_loaded()})))}if(je.addEventListener)"complete"===je.readyState?t():je.addEventListener("DOMContentLoaded",t,!1);else if(je.attachEvent){je.attachEvent("onreadystatechange",t);var e=!1;try{e=null===ye.frameElement}catch(n){}je.documentElement.doScroll&&e&&function e(){try{je.documentElement.doScroll("left")}catch(n){return void setTimeout(e,1)}t()}()}He.register_event(ye,"load",t,!0)}(),or);class Cr{constructor(){var t=this;this._neo4j=n(2636),this._driver=void 0,this.activedb=void 0,this.availableDatabases=[],this.callbacks_1=[],this.callbacks_2=[],this.hasElementId=!1,this.logs=[],this.ecosystem=s.Neo4j,this.setDriver=(t,e)=>{this._driver=t,t.getServerInfo().then((t=>{this.ecosystem=/memgraph/i.test(t.agent)?s.Memgraph:s.Neo4j,this.hasElementId=this.ecosystem===s.Neo4j&&t.protocolVersion>=5,this.query("SHOW DATABASES").then((t=>{this.ecosystem===s.Memgraph?(this.activedb=t.records[0].get("Name"),this.availableDatabases=t.records.map((t=>t.get("Name")))):(this.activedb=t.records.find((t=>t.get("default"))).get("name"),this.availableDatabases=t.records.filter((t=>"system"!==t.get("type"))).map((t=>t.get("name"))));const n=localStorage.getItem("activedb");n&&this.activedb!==n&&this.availableDatabases.includes(n)&&(this.activedb=n),e()})).catch((()=>{e()}))})).catch(e)},this.disconnect=()=>{this._driver&&this._driver.close(),this._driver=null},this.registerChangeActiveDatabaseCallback=t=>{for(const e of this.callbacks_1)if(`${t}`===`${e}`)return;this.callbacks_1.push(t)},this.registerChangeDatabasesCallback=t=>{for(const e of this.callbacks_2)if(`${t}`===`${e}`)return;this.callbacks_2.push(t)},this.fnId=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"n";return t.hasElementId?"elementId("+e+")":"id("+e+")"},this.getId=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"elementId",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"identity";return t.hasElementId?e[n]:t._neo4j.integer.inSafeRange(e[r])?t._neo4j.integer.toNumber(e[r]):t._neo4j.integer.toString(e[r])},this.isInt=t=>t instanceof p.Integer,this.strInt=t=>this.isInt(t)?this._neo4j.integer.toString(t):t,this.fromInt=t=>this._neo4j.integer.inSafeRange(t)?this._neo4j.integer.toNumber(t):parseFloat(this._neo4j.integer.toString(t)),this.toInt=t=>this._neo4j.int(t),this.query=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return"undefined"===typeof process&&Er.track("Executed query"),new Promise(((i,o)=>{t._driver.executeQuery(e,n,{database:r}).then((r=>{t.logs=t.logs.concat({query:e,params:n,status:!0,date:new Date}).slice(-1e3),i({records:r.records,summary:r.summary})})).catch((r=>{t.logs=t.logs.concat({query:e,params:n,status:!1,date:new Date}).slice(-1e3),o(r)}))}))}}get neo4j(){return this._neo4j}set database(t){if(0!==this.databases.length&&this.databases.includes(t)){this.activedb=t,localStorage.setItem("activedb",t);for(const e of this.callbacks_1)e(t)}}get database(){return this.activedb}set databases(t){this.availableDatabases=t,this.databases.includes(this.database)||(this.database=t[0]);for(const e of this.callbacks_2)e(t)}get databases(){return this.availableDatabases}get driver(){return this._driver}static get instance(){return this._instance||(this._instance=new this)}}Cr._instance=void 0;const kr=Cr.instance,Or=n.p+"static/media/logo.f04b85f70fa75cb174d7.png",Tr=n.p+"static/media/logo_dark.55f6e32f08fe36e2921e.png",Nr=t.createContext(null),Ir=t.createContext(null),Pr=t.createContext(null),Mr=t.createContext(null);class jr extends t.Component{constructor(){super(...arguments),this.state={url:localStorage.getItem("host")||"bolt://localhost:7687",username:"",password:"",remember:!1,submitted:!1,error:null,mixedContentInfo:!1},this.handleSubmit=async t=>{t.preventDefault(),this.setState({submitted:!0}),this.tryConnect(this.state.url,this.state.username,this.state.password,(t=>{this.setState({submitted:!1,error:t})}))},this.tryConnect=(t,e,n,r)=>{let i;try{i=kr.neo4j.driver(t,e.length>0&&n.length>0?kr.neo4j.auth.basic(e,n):void 0,{userAgent:"stefanak-michal/cypherGUI"})}catch(o){return void r("["+o.name+"] "+o.message)}kr.setDriver(i,(i=>{i?r("["+i.name+"] "+i.message):(localStorage.setItem("host",t),this.state.remember&&localStorage.setItem("login",JSON.stringify({username:e,password:n})),this.props.handleLogin())}))},this.handleInputChange=t=>{t.preventDefault();const e=t.currentTarget,n="checkbox"===t.currentTarget.type?e.checked:e.value,r=e.name,i={};i[r]=n,"url"===r&&(i.mixedContentInfo=this.isMixedContent(n)),this.setState(i)},this.isMixedContent=t=>{try{const e=new URL(t);if("https:"===location.protocol&&("bolt:"===e.protocol||"neo4j:"===e.protocol))return!0}catch(e){console.error(e)}return!1}}componentDidMount(){const t=localStorage.getItem("login");if(t)try{const e=JSON.parse(t);this.tryConnect(this.state.url,e.username,e.password,(()=>{localStorage.removeItem("login")}))}catch(e){console.error(e)}this.isMixedContent(this.state.url)&&this.setState({mixedContentInfo:!0})}render(){return document.title="Login / cypherGUI",(0,a.jsx)("section",{className:"mt-5 container is-fluid",children:(0,a.jsx)("div",{className:"columns",children:(0,a.jsxs)("div",{className:"column is-6-desktop is-offset-3-desktop",children:[(0,a.jsx)("h1",{className:"has-text-centered",children:(0,a.jsx)("img",{src:this.props.darkMode?Tr:Or,alt:"cypherGUI"})}),(0,a.jsxs)("form",{id:"login",className:"mt-6 box",onSubmit:this.handleSubmit,children:[(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",htmlFor:"input-url",children:"URL"}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("input",{id:"input-url",className:"input",name:"url",type:"text",onChange:this.handleInputChange,value:this.state.url})})]}),this.state.mixedContentInfo&&(0,a.jsxs)("div",{className:"notification is-warning my-3",children:[(0,a.jsx)("i",{className:"fa-solid fa-triangle-exclamation mr-1"}),"Not encrypted protocol won't work on encrypted website (https) because of"," ",(0,a.jsx)("a",{href:"https://developer.mozilla.org/en-US/docs/Web/Security/Mixed_content",target:"_blank",referrerPolicy:"no-referrer",children:"mixed content"}),". You can run cypherGUI"," ",(0,a.jsx)("a",{href:"https://github.com/stefanak-michal/cyphergui/blob/master/README.md#local-instance",target:"_blank",children:"locally"})," ","or add certificate to your graph database instance. Adding certificate is a complex issue and you can read more about it"," ",(0,a.jsx)("a",{href:"https://ko-fi.com/post/Neo4j-and-self-signed-certificate-on-Windows-S6S2I0KQT",target:"_blank",children:"here"}),"."]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",htmlFor:"input-username",children:"Username"}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("input",{id:"input-username",className:"input",name:"username",type:"text",onChange:this.handleInputChange,value:this.state.username,autoFocus:!0})})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",htmlFor:"input-password",children:"Password"}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("input",{id:"input-password",className:"input",name:"password",type:"password",onChange:this.handleInputChange})})]}),(0,a.jsx)(l,{name:"remember",label:"Remember me (not secure)",checked:this.state.remember,color:"is-primary",onChange:()=>this.setState((t=>({remember:!t.remember})))}),this.state.error&&(0,a.jsx)("div",{className:"notification is-danger mt-3 mb-0",children:this.state.error}),(0,a.jsxs)("div",{className:"buttons mt-3 is-justify-content-space-between",children:[(0,a.jsx)(c,{text:"Login",icon:"fa-solid fa-check",color:"is-primary "+(this.state.submitted?"is-loading":""),type:"submit"}),(0,a.jsx)(Mr.Consumer,{children:t=>(0,a.jsx)(c,{icon:"fa-solid fa-circle-half-stroke",title:"Dark mode switch",onClick:t})})]})]})]})})})}}const Rr=jr;class Ar extends t.Component{constructor(){super(...arguments),this.state={delete:!1},this.showDelete=t=>{this.setState({delete:"mouseenter"===t.type})}}render(){return(0,a.jsx)("li",{className:this.props.active?"is-active":"",onClick:t=>{"Start"!==this.props.id?t.ctrlKey?this.props.tabManager.close(this.props.id,t):t.shiftKey?this.props.tabManager.closeAll(t):this.props.tabManager.setActive(this.props.id):this.props.tabManager.setActive(this.props.id)},onMouseEnter:this.showDelete,onMouseLeave:this.showDelete,title:"Start"!==this.props.id?"Ctrl+click close tab\nShift+click close all tabs (ignores unsaved changes)":"",children:(0,a.jsxs)("a",{children:[this.props.icon&&(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:this.props.icon,"aria-hidden":"true"})}),(0,a.jsx)("span",{children:this.props.title}),"Start"!==this.props.title&&this.state.delete&&(0,a.jsx)("button",{className:"delete is-small ml-3",onClick:t=>this.props.tabManager.close(this.props.id,t)})]})})}}const Dr=Ar,Lr=n.p+"static/media/logo_small_dark.8bad16c717d1ac571f64.png";class Ur extends t.Component{constructor(){super(...arguments),this.state={open:!1,databases:[],activeDb:""},this.handleOpen=()=>{this.setState((t=>({open:!t.open})))}}componentDidMount(){this.setState({databases:kr.databases,activeDb:kr.database}),kr.registerChangeDatabasesCallback((t=>{this.setState({databases:t})}))}render(){return(0,a.jsxs)("nav",{className:"navbar",role:"navigation","aria-label":"main navigation",children:[(0,a.jsxs)("div",{className:"navbar-brand",children:[(0,a.jsx)("span",{className:"navbar-item",children:(0,a.jsx)("img",{src:this.props.darkMode?Lr:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAAAdCAYAAAA6ufdPAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAEoJJREFUeJztm3mcHVWVx7/nvtf9qqq704EgAUIgCbJJhiX9QqKMsjgSFYEBJY6ogwMaQQ3pDogOLhD081EE0t0Ji4LMqCwqQcWFTVSQQQh2d8ISFYKEbIBhTSfpV1Xd79WZP97SVffV60Q/MxLR3+fTn0/fc8+599yqU+eec+59oqr4vTPfi+qngL1U5FZvs7+Ii1YN0wBbr5o1ITNSWixwAvCywmVeZ/83G/G/3rFt6Yw3ZErmASBbIeUi0bNaFgzc/Vrq9efCdd1pIjJRVVuAoqo+H4bhalXV7cmKSGt7e3sTwODg4IiqbhuDt7m9vb1lcHBw81hji0grMKSqavzejvejugw4BjhAVC/0250bx1IpO1L6scC/AxOAAwSuC7rzZ2xvMa9XZIqZqcABwLTK3yQh88prq9WOQUTaPc8733XdNcDTqvogcA9wr4g84TjOesdxPiUiuTR5z/Mmua5bchxnaxiGr4Rh+Eoul7uh0Xyu697hOE4YhuErjuNEruu+JCIS53EcZ6XrusOO42yt8GwyqHQBAlyucApQAt63pfstu6ZNFC7tmAYcZdNV6NrRh/O6g9F9bZIOs+G1UOXPgeM473Qc5xlVvQyY2oBtbxFZ6jjOE7lc7p/sTlXdDzBxmjFm4xjTHmy1t8W9qohkRWQ60BTjedEAe5Q5uNUbHPgJ8BwguezwLmmzlIpRKh0YP4Zyr28otqEOtxT6XnhNdNlBeJ7XKSI/Axq9TxtTROR+z/OOtOkpvKkfqYhkgb0t8rPxhuM4kxkNoapYZxR+DYByZ2Fcx+PAZACVTJQ2mZfd+jiw2aYr3JvG/3cBrfOoz3GRpj6/nQGO4yxQ1W4g8+fIich4Vf2ERZ6SwppqqA2M8FmrnTbeeiOZ7OdU+T2wiwhvqvZoMbqJr/1zW53I/KdCEbqtJfQXtfm8aivo7nhr0DvzrDRlX5cQYxvqWFvfawrP844SkSsadP9CVTtFZK6IfBpYa/XfFQTBJy3alJRx1jcYvy68UFXbUNNCkA3Gnb98o9fC4RJxnCgfFPRDwDbQN/vNwZ1pxqqqbwRAWGmUOe5g/6xxXQ/WkgcV+aaqXs3S/VMD8NcfUjzqTohK0nIN9Z60KCJdvu+/IwiC3kKhsKxQKFweBMGhwH9RzlsWBUHwHlUdsmSnpEzVKD6v4zXG7Iihri+74Xn9I05s6/YXdzyNkTuBo/zm4M7S5YedmmnOvRGNJhGpqMjJAqDRJ3NdKx6yR1Wjp2dKMoH5T4UNFG6MRcc6hfFb/kWQaarsIcrLoBvcXHgHn1i1rY533LY5InhK1AbgNYc3x/nCJUfsH2nmcFFtiaBZhXXxspHfPfNIhT3FaDNApsjjzef1P8HS2eP8UukEFaYbNNRI7nK7+n6bprLAvskaizxX0S8btG95W4QcI9AsymNOC7cxr78w1iPYtmTmdBNFRwsyGUGJdGUwLHfv8pn+QZvXX9wxW8VMrOpvpPRI7tyVTw1dduQe0lQ6SdDH3c7yO8rlcseralpC1OX7/pUp9K3AWZ7nfbFQKNgGVcUUq13yfb/Rh5pmhDtiqOukmnBt6z7ykCzs5mwpPMRFq4aDxflj1XAX0Jw6pbDSXdA/o4FCfxH8no5OkC8AaRWHbSifd7sGlkBZ6aBn5jGKJmLjkNIu4ztX1mJovyf/fWBujOW7bmf/6bH+tRBLhlQWCrJCJboZ2CuhgbLE3XvaQk67pVQlbe45YnyOzKsJPtELRE2fotdTLlfF8bDrcVyasQ4tnnGYyZhulGNT1j8komc7CwYSpUO/J78J2L2monKOAR+hV6EdtMvtHOgBcF33duDd1rg/D4LgnTtSK7UhIuI4jg/Ed84Nvu/vk8bvuu6NwAetMY4qFAoPxngeoL6qNMUABL0zz8pItEolus9vd28FcBb236si59YGhEGEH1GJP1TZb+sV+d3io4VL8/sFV85qVOZojGVzM35v/iaQbtKNFKAVocfv6eitEiLVN8UZBAbjRlrBQYmWymj8uGh6M3YWKpyuEv0C20jLfef6zz1zTpzUFEldaQrkTEV/Rb2RAszyC5xtE4d6O+YYYx5qYKQALapyQ6F35kk1Sjks2z3OJMJnVfhW2UgByqUiEXGA41LGvfQvMVKAtra2CSSNFBpv+5DyPIwxT2+HpxQEwXMGIJnJ6Yl+9+GTAAz4FeLakmQPdBf0n+oOO9NB+gXGZQ21In/Qnf9sVOKPWiytCXry/znWAm34z635Msrp2+dERXip2hA0UZNTO/hfJAbYP0ETrT3IcFxuH+riNc1Tn5nGuvVLFQMvD5fJ1BuqchDl2nT6EHBovF1Y0tFhkNsAt+G8NfWjz1f/H8oW0j6EpD6V9TqO8xbAsXifC4LgvjjBdd23e553muu6H3Zdd571d0bltAiAMAwnpsw/lqFOsdpDQ0NDtTJe5WPaw9ZRVUfKhVrVZ6pUhS0u3itlsh5WHoHvtSxYvgmACx7YKuXSBkilH1DhC7ExPseyuTtU+hju6TgY5fz6Hv21wpdEuaO6KBH5iLOg/5Iai8ibLJl18VYw4ch9sV6+Jh6kpL3oKt89Cl8CXrW6xhfGe7V1S31panR0uB3k+3V01dZYS0TlSjRhREXQr0Wq7wL9iSVd27GMkf0azV1FaWTkmcos+ZTu+1WTZTRVvVVVbwG+A3zD+vtWLperGZIxZk97QFVNrXiIiIdlhCKyJu7Nc7ncvtR/4Ouh4jmKkZydycoWifQNRrSbrgd9yhKbFRBlt6SsTgFBkLA6JXT8iVG3/Ww8jhsLJeFjqOXBVC5zuwY+U41F/e6OU4wxv88t6HvSEk9u60jCUEul4gHGXrcZ9aglmJbi9lTRs73OgWsB/N6Zj6J6a2II9FCgr6LrZKR+51T04251jJ78W4mHEiJB9d+h7hlzjDDbku30OgeuKq89fwjCSbHu0TUK+5G+aT+s8G2DPtl6/qMvAERRtId1UgmQ2HZbW1snisiYBzdhGL4Ya9reDxp41Obm5inUG+Eaq50W266DiqG2ndf/EnCmzRFF8jMxeonCmYXu/EBUGvmhacoeaUQuAIjQ8stCNZKOUzKYS1UjVyOzY8epy+ZmUPmgRX3M3dJ6YdVIAdyugR/VyS6a3ky7k3xQsW0dwKgcULem4WKNR5BpWG9a4YaqkQK4JnOPXyomx1AdTTBNNBm1nr/KjV5X/7UxSmIAQWolHhFOs1R82OscuIpr802Br+9HZJE1eC2ZEmRayifS53pSl6yJyBvqWCFRahoeHt4jkxlzIwxVtVZ5EJE97fBWRF5OExSRN9q0KIrWWDxphroWxorFAG9h30q/N/8EykEiXJPJNl2Djr5awcxh2dzrOe2WUsuCgceAd401no3g+TWTsJIBhJu56N5iukRMtr1pL6wzZiKT/JpVDyDuRYSg9fzHRj2CaF3il0W/Gm9vKZpsU8Nok7JHTaKkohfUWovE0N5hbZFRrXwjyDFJlWnze/I/Ao6COuO6yR1csaQ2irKfpVqkhnMalL/SSoVevCEiI8Bdqrq7iOxK2cPFn3Hcm6Z6aVXdkjIPInJoCtn2qPazhKpH9XvzV6HsEi/ZVFHonXmSKAda5GcFfUyRd4Ke6j+75gfakx+UcoLgotwdDPPFtJqfDY1ksu3R0Oj+7ckBKNlJtqxkrPhIJHkurayPe2rqM8wVzZ0Df4gTsjI8JWX6+MlL0guo3Od19T1fbRbaOyZK8oIFkPigEkZcOR1Mxt7CnzRikdc18I24/lKfnPR55w4MpOgLsMkmqOr0eDsMw98Tczau675MsgqTGKNizDZSQz5VnZESevzRatcZqqrWtv4ZAq0sEhM/n/YXHzlZjF5f1oevOwv6E2UZv6fjVJDvAScnphcOdJo5cdvlh82uxkeNoBHtYmxaJkjnrhOehL3wkahmAEF3x1ttQxV0zFKIwK3UQU+1QyuVbD8Ai47N0p40NJVoeYJZzN5Yx/4ilTju2rxHeqYfIaxWZTnILd7m1nsa7DKTrPZ9KTxV2EaBiJzgOM7+QRA8ldI3znGcxIUV1WRopaqv2sZnjDkAuD1O8zxvHxE5wZoiDMPwNxat4dZv3M3B0c5g2xGJSxTX5j1MdBuwG/A/jsu5trTbOfBDVaoLXCHIsZVrgqsRpmayzUtsGRtCVHdnUzLJYm+hJz+j0JOvyy7B2C+J0CtuARi85tBdELnG7lcdTR4q1xgTiUMk+rg9tyCftoZZXa2A+G1De2KFT0bM6sR6opJ9WwiqHrm8RVvbtFzlDjvj3QX9B3ud/f/hdfbdac8R0z+5dSOrbb5an8g9gH1RpklEvt3e3r6rxZt1HKd6/XN0bcast9ppXnp+W1tbLWQZN27cBFX9NvUHR/dVTr7isD2qhmFYyfpjN/n9npkfUHSOgTxwCLAhkuxpzFs+YivE0tnjRDgY8Ee0+R3Vs/7hpTNWl0rmd6An1slYiDJNzxgtlojXMlUv9nvzm1R0jURyhsA5CgW/O//F+KkUonUF+eYw97Fgcb6v2TRdqmX9k5BRQ81mwqlEljdQ+Uqhu0Mymn0yMqX3CFyC/YCV0SQpy2T71WspShqLiG2oUc5sXhvTaX2l7lod4T3bnPDrrbBqqHf2RKOlq2nXt9Gd/6rbwhLm9Y8AZEy4d10SR7SWBigUChs9z7tdte69vHl4eHi167p3UL6jsJfjOO+mfCnehn3Z5IEUnqnFYnGV67o/B5pV9fi0SoKqXh1vV065bEPdpKo+xL7UQk/+owLXCbFkKeKMloXL674agDAq7Un5i9sSv5ASmqZN2VIJwCmXrRqferQsWL6p0JP/lcA7YuQJKLdI7CUIjCufSs04zh089r2Nky29VE1FIq035lGlxD42m8J0EflJJA0ra2tdmkcfcEnrxiiq2Fus7fk3xO9AiOr3FLk41r9vJtKVfk9+oymfmpXfkXC5X+BD7tLZRzN/+RZRUx+jk1nbSHGAUql0oTFmDvXebQLw4bFkK0gYqu/7DzqO8zRg13N3Bz4E5bgxBX1hGP40Tmhra5swMjLiWXy1UpyJ/dNpjxYZGiZEObN5LUIATAx6OmpHc00jxeoXu3EsI61BowtJz0jrWTErq0Yq6O+2w+7bhGw2HqOmlkLGQkHhvdUaM1AuTSWxtVLqiyPpUS1DLmb0auqvBWYpJ0r2lr+W+Q+Xt0uJbE89khtsaXS9DoAwDFcBH6VBwrMdPJXJZO6LE7SMT1CXEY+Jl4B/s49tS6VSw/gUYoaqUJfEREYa/sCP+U+FKL1lWfmZ35O/0e/JL1Pk+sp4X20oG4PXtaJflDOBhj8GA0IVned19l1cJTjF4jLixe84VH8gyiUWNWouOrUTOExqKaQRXlDkfV5n/4rkPMnSlNTf3wTLo4pECUNtnb/ixUj0BBqtZRRLXY+5tY9f62L0Z3akrOf7/g2qegJjH3XG8byIXBAEwRFbt2590e4MguDnwMeBxrYyigFglu/7dlmKYrHYMOOH2Ber8GWBZVWaiNzVem7fqrFmdQfbLvbbt00BfT+jt2IU0W5vwUBdMtMITlf/zcEVM34TZTPzRDkedFegpOg6VB6UbPY6b/7ypNc5/9EhuWLG0WrMQoSTAVfhEYN+x+kauMnvzv/UmmZjwhtqXYa5UUz0EY0ypyD6dpTdQZ8W5baRSK5tO6/P9pQoukrgBhAHQFXqrzwq94uU648CgyLmBzZPy4KBx7j8sEP8bNM5lH/ZW9XtWeCRKIqub1m44tG4jEj0B8X8d+04NmXuRgiC4G4ROch13X8FPqCqeWBiWUW2AutE5H7gl77v366qY+54vu9f5zjOr4F5InIy5VBAKBvvC6raD1wfhuHtjS7AZDIZo6rV0lpIOcn8VW29cTm/Z8abFXOiQf7gDPrfH+sn0wlFF3fMxjBbkW2qPNzS1f/49qX+/xBcOWuqFktPEIvFBLnW6ez7eLXt9+SXA7OqbYV7vM7+4/+6mu48EJEmIKOqO1Ye/CsjEQNVLtju8JdZk1s4sBxYvl3G/0P43YdPwjSdYozemZvf/3SCLtnvYiUMWr5kEUfCo4qqfY/g7wqqOgLUV3d2Eox5hLpTw2S7UD0vKoHfk39S0Q2CaUGyM6lf14/dzr7R4vLS/XPQnryiZszftaHu7PjbNNSl++fQ9vglmgMFObBB8vksmeyn4oRAdt0LSokzsXjp6h/Y+WC2z7LzYXi4fSr1N8vT8GhJzRzXSsRKRW23GTOmWHfE+A/sPPibNNTm8/qf0Gy0P3AeKr+kfFlihHLG+iTwY5DT3MG2fGvXb+vqrU2Z4jDIQ5WfiT8iyh25Vx/5h0fdifG/k56FJ+/bHlgAAAAASUVORK5CYII=",alt:"cypherGUI"})}),(0,a.jsxs)("a",{href:"#",role:"button",className:"navbar-burger "+(this.state.open?"is-active":""),"aria-label":"menu","aria-expanded":"false","data-target":"basicNavbar",onClick:this.handleOpen,children:[(0,a.jsx)("span",{"aria-hidden":"true"}),(0,a.jsx)("span",{"aria-hidden":"true"}),(0,a.jsx)("span",{"aria-hidden":"true"})]})]}),(0,a.jsxs)("div",{id:"basicNavbar",className:"navbar-menu "+(this.state.open?"is-active":""),children:[(0,a.jsx)("div",{className:"navbar-start",children:this.state.databases.length>1&&(0,a.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable",children:[(0,a.jsx)("a",{className:"navbar-link",children:this.state.activeDb}),(0,a.jsx)("div",{className:"navbar-dropdown",children:this.state.databases.map((t=>(0,a.jsx)("a",{className:(this.state.activeDb===t?"is-active":"")+" navbar-item",onClick:()=>{kr.database=t,this.setState({activeDb:t})},children:t},"navbar-item-"+t)))})]})}),(0,a.jsx)("div",{className:"navbar-end",children:(0,a.jsx)("div",{className:"navbar-item",children:(0,a.jsxs)("div",{className:"buttons",children:[(0,a.jsx)(c,{icon:"fa-regular fa-plus",text:"Query",onClick:()=>this.props.tabManager.add({prefix:"Query"},"fa-solid fa-terminal",r.Query),color:"is-link"}),(0,a.jsx)(c,{icon:"fa-solid fa-clock-rotate-left",title:"Open history",onClick:()=>this.props.tabManager.add("History","fa-solid fa-clock-rotate-left",r.History)}),(0,a.jsx)(c,{icon:"fa-solid fa-gears",onClick:this.props.handleOpenSettings,title:"Open settings"}),(0,a.jsx)(c,{onClick:this.props.handleLogout,text:"Log out"})]})})})]})]})}}const zr=Ur;class Br extends t.Component{constructor(){super(...arguments),this.state={labels:[],types:[],serverInfo:{},error:null},this.requestData=()=>{Promise.all([kr.query("MATCH (n) WITH DISTINCT labels(n) AS ll UNWIND ll AS l RETURN collect(DISTINCT l) AS c",{},kr.database),kr.query("MATCH ()-[n]-() RETURN collect(DISTINCT type(n)) AS c",{},kr.database),kr.driver.getServerInfo()]).then((t=>{this.setState({labels:t[0].records[0].get("c"),types:t[1].records[0].get("c"),serverInfo:t[2]})})).catch((t=>this.setState({error:"["+t.name+"] "+t.message})))}}componentDidMount(){kr.registerChangeActiveDatabaseCallback(this.requestData),this.requestData()}componentDidUpdate(t){t.active!==this.props.active&&this.props.active&&this.requestData()}render(){return(0,a.jsx)("div",{className:"columns",children:(0,a.jsxs)("div",{className:"column is-three-fifths-desktop is-offset-one-fifth-desktop",children:[this.state.error&&(0,a.jsxs)("div",{className:"message is-danger",children:[(0,a.jsxs)("div",{className:"message-header",children:[(0,a.jsx)("p",{children:"Error"}),(0,a.jsx)("button",{className:"delete","aria-label":"delete",onClick:()=>this.setState({error:null})})]}),(0,a.jsx)("div",{className:"message-body",children:this.state.error})]}),(0,a.jsx)("div",{className:"subtitle mb-2",children:"Server"}),Object.keys(this.state.serverInfo).length?(0,a.jsxs)("div",{children:["Connected to ",(0,a.jsx)("b",{children:this.state.serverInfo.address||""})," with protocol version"," ",(0,a.jsx)("b",{children:this.state.serverInfo.protocolVersion||""}),"."]}):(0,a.jsx)("div",{children:"Loading ..."}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"subtitle mb-2",children:"Node labels"}),(0,a.jsx)("div",{className:"buttons",children:this.state.labels.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h,{label:"* ",database:kr.database,tabManager:this.props.tabManager,size:"is-medium"},"all-labels")," ",this.state.labels.map((t=>(0,a.jsx)(h,{label:t,database:kr.database,tabManager:this.props.tabManager,size:"is-medium"},t)))]}):(0,a.jsx)("span",{className:"has-text-grey-light",children:"none"})}),(0,a.jsx)("div",{className:"buttons",children:(0,a.jsx)(c,{icon:"fa-solid fa-plus",text:"Create node",color:"is-primary",onClick:()=>this.props.tabManager.add({prefix:"New node"},"fa-solid fa-square-plus",r.Node,{id:null,database:kr.database},(new Date).getTime().toString())})}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"subtitle mb-2",children:"Relationship types"}),(0,a.jsx)("div",{className:"buttons",children:this.state.types.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d,{type:"*",database:kr.database,tabManager:this.props.tabManager,size:"is-medium"},"all-types"),this.state.types.map((t=>(0,a.jsx)(d,{type:t,database:kr.database,tabManager:this.props.tabManager,size:"is-medium"},t)))]}):(0,a.jsx)("span",{className:"has-text-grey-light",children:"none"})}),(0,a.jsx)("div",{className:"buttons",children:(0,a.jsx)(c,{icon:"fa-solid fa-plus",text:"Create relationship",color:"is-primary",onClick:()=>this.props.tabManager.add({prefix:"New relationship"},"fa-regular fa-square-plus",r.Rel,{id:null,database:kr.database},(new Date).getTime().toString())})}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]})})}}const Fr=Br;class qr{constructor(t,e){this.identity=void 0,this.query=void 0,this.identity=t,this.query=e}}class Hr extends t.Component{render(){return(0,a.jsxs)("div",{className:"is-flex is-align-items-center",children:[this.props.node.labels.map((t=>(0,a.jsx)(h,{label:t,database:this.props.database||kr.database,tabManager:this.props.tabManager,size:"mr-1 "+(this.props.small?"is-small":"is-medium")},t))),(0,a.jsx)(c,{onClick:()=>this.props.tabManager.add({prefix:"Node",i:this.props.node.identity},"fa-solid fa-pen-to-square",r.Node,{id:kr.getId(this.props.node),database:this.props.database||kr.database}),icon:"fa-solid fa-pen-clip",color:this.props.small?"is-small":"",text:"#"+kr.strInt(this.props.node.identity)}),(0,a.jsx)(Pr.Consumer,{children:t=>(0,a.jsx)(c,{icon:"fa-solid fa-rectangle-list",onClick:()=>t(this.props.node.properties),color:"ml-1 "+(this.props.small?"is-small":""),title:"Properties"})})]})}}class Wr extends t.Component{render(){return(0,a.jsxs)("div",{className:"is-flex is-align-items-center",children:[(0,a.jsx)(d,{type:this.props.rel.type,database:this.props.database||kr.database,tabManager:this.props.tabManager,size:"mr-1 "+(this.props.small?"is-small":"is-medium")}),(0,a.jsx)(c,{onClick:()=>this.props.tabManager.add({prefix:"Rel",i:this.props.rel.identity},"fa-regular fa-pen-to-square",r.Rel,{id:kr.getId(this.props.rel),database:kr.database}),icon:"fa-solid fa-pen-clip",color:this.props.small?"is-small":"",text:"#"+kr.strInt(this.props.rel.identity)}),Object.keys(this.props.rel.properties).length>0&&(0,a.jsx)(Pr.Consumer,{children:t=>(0,a.jsx)(c,{icon:"fa-solid fa-rectangle-list",onClick:()=>t(this.props.rel.properties),color:"ml-1 "+(this.props.small?"is-small":""),title:"Properties"})})]})}}function Vr(t){let e;return Array.isArray(t)?(e=[],t.forEach((t=>{const n={};for(const e of t.keys)n[e]=t.get(e);e.push(n)}))):"object"===typeof t&&(e=t),JSON.stringify(e,((t,e)=>kr.isInt(e)?kr.fromInt(e):e),2)}function Zr(t){return"number"===typeof t?i.Float:kr.isInt(t)?i.Integer:"boolean"===typeof t?i.Boolean:Array.isArray(t)?i.List:kr.neo4j.isDate(t)?i.Date:kr.neo4j.isTime(t)?i.Time:kr.neo4j.isDateTime(t)?i.DateTime:kr.neo4j.isLocalTime(t)?i.LocalTime:kr.neo4j.isLocalDateTime(t)?i.LocalDateTime:kr.neo4j.isDuration(t)?i.Duration:kr.neo4j.isPoint(t)?i.Point:"object"===typeof t?i.Map:i.String}function Gr(t,e){switch(t){case i.Integer:return kr.strInt(e);case i.DateTime:return(()=>{const[t,n]=e.toString().split("T"),r=n.substring(0,8),i=kr.fromInt(e.timeZoneOffsetSeconds)/60/60;return[t,r,kr.strInt(e.nanosecond),i]})();case i.Duration:return Kr(e);case i.LocalDateTime:return(()=>{const[t,n]=e.toString().split("T");return[t,n.substring(0,8),kr.strInt(e.nanosecond)]})();case i.LocalTime:return[e.toString().substring(0,8),kr.strInt(e.nanosecond)];case i.Point:{const t=kr.strInt(e.srid);return["4979","9157"].includes(t)?[t,e.x,e.y,e.z]:[t,e.x,e.y]}case i.Time:return[e.toString().substring(0,8),kr.strInt(e.nanosecond),kr.fromInt(e.timeZoneOffsetSeconds)/60/60];case i.List:case i.Map:case i.String:case i.Boolean:return null;case i.Float:case i.Date:default:return e?e.toString():null}}function Yr(t){return"{"+t.map((t=>t.key+": "+$r(t))).join(", ")+"}"}function $r(t){if(null===t.value)return"null";switch(t.type){case i.String:return"'"+t.value.replaceAll("'","\\'").replaceAll("\n","\\n")+"'";case i.Integer:return t.temp;case i.Boolean:return t.value?"true":"false";case i.List:return"["+t.value.map((t=>$r(t))).join(", ")+"]";case i.Map:return"{"+t.value.map((t=>t.key+": "+$r(t))).join(", ")+"}";case i.Point:return"point({srid: "+t.temp[0]+", x: "+t.temp[1]+", y: "+t.temp[2]+(4===t.temp.length?", z: "+t.temp[3]:"")+"})";case i.Date:return"date('"+t.temp+"')";case i.DateTime:return"datetime('"+t.value.toString()+"')";case i.Time:return"time('"+t.value.toString()+"')";case i.LocalTime:return"localtime('"+t.value.toString()+"')";case i.LocalDateTime:return"localdatetime('"+t.value.toString()+"')";case i.Duration:return"duration('"+t.temp+"')";default:return t.value.toString()}}function Kr(t){let e="P";const n=kr.fromInt(t.months),r=Math.floor(n/12);r>0&&(e+=r+"Y"),n%12>0&&(e+=n%12+"M");const i=kr.fromInt(t.days);i>0&&(e+=i+"D");let o="";const s=kr.fromInt(t.seconds),a=Math.floor(s/3600);a>0&&(o+=a+"H");const l=Math.floor(s%3600/60);l>0&&(o+=l+"M");let u=!0;o.length>0&&(e+="T"+o,u=!1),o="",s%3600%60>0&&(o+=s%3600%60);const c=kr.strInt(t.nanoseconds);return c.length>0&&"0"!==c&&(o+=(0===o.length?"0.":".")+c.substring(0,6).replace(/0*$/,"")),o.length>0&&(e+=(u?"T":"")+o+"S"),e}function Xr(t){const e={};for(const n of t)n.type===i.List?(e[n.key]=[],n.value.forEach((t=>{e[n.key].push(t.value)}))):n.type===i.Map?(e[n.key]={},n.value.forEach((t=>{e[n.key][t.key]=t.value}))):e[n.key]=n.value;return e}function Qr(t){return kr.isInt(t)?kr.strInt(t):Array.isArray(t)?"["+t.join(", ")+"]":"boolean"===typeof t?(0,a.jsx)(l,{name:"",label:"",checked:t,disabled:!0}):"Object"===t.constructor.name?"{"+Object.keys(t).map((e=>e+": "+Qr(t[e]))).join(", ")+"}":t.toString()}class Jr extends t.Component{render(){return(0,a.jsxs)("div",{className:"modal is-active",children:[(0,a.jsx)("div",{className:"modal-background",onClick:this.props.backdrop&&this.props.handleClose}),(0,a.jsxs)("div",{className:"modal-card",children:[(0,a.jsxs)("header",{className:"modal-card-head "+(this.props.color||"is-dark"),children:[(0,a.jsxs)("p",{className:"modal-card-title",children:[this.props.icon&&(0,a.jsx)("span",{className:"icon mr-3",children:(0,a.jsx)("i",{className:this.props.icon})}),this.props.title]}),(0,a.jsx)("button",{className:"delete","aria-label":"close",onClick:this.props.handleClose})]}),this.props.children&&(0,a.jsx)("section",{className:"modal-card-body",children:this.props.children}),this.props.buttons&&(0,a.jsx)("footer",{className:"modal-card-foot is-justify-content-flex-end buttons",children:this.props.buttons})]})]})}}class ti extends t.Component{render(){return(0,a.jsxs)(Jr,{title:"Are you sure?",color:"is-warning",handleClose:this.props.handleClose,icon:"fa-solid fa-circle-exclamation",buttons:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c,{text:"Close anyway",icon:"fa-solid fa-check",onClick:this.props.handleConfirm,color:"is-warning"}),(0,a.jsx)(c,{text:"Don't close",icon:"fa-solid fa-xmark",onClick:this.props.handleClose})]}),children:[(0,a.jsx)("p",{children:"You have unsaved changes. By closing this tab you will lose them."}),(0,a.jsxs)("p",{className:"mt-5",children:[(0,a.jsx)("i",{className:"fa-solid fa-info"}),(0,a.jsx)("i",{className:"ml-2",children:"You can disable this confirmation dialog in settings."})]})]})}}class ei extends t.Component{constructor(){super(...arguments),this.state={detach:!1},this.handleConfirm=()=>{this.props.handleConfirm(this.props.delete,this.state.detach),this.props.handleClose()}}render(){return(0,a.jsx)(Jr,{title:"Are you sure?",color:"is-danger",handleClose:this.props.handleClose,icon:"fa-solid fa-circle-exclamation",buttons:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c,{text:"Confirm",icon:"fa-solid fa-check",onClick:this.handleConfirm,color:"is-danger"}),(0,a.jsx)(c,{text:"Cancel",icon:"fa-solid fa-xmark",onClick:this.props.handleClose})]}),children:this.props.detach&&(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(l,{name:"detachDelete",onChange:t=>this.setState({detach:t.currentTarget.checked}),label:"Detach delete?",checked:this.state.detach,color:"is-danger"})})})}}class ni extends t.Component{render(){return(0,a.jsx)(Jr,{title:"Properties",handleClose:this.props.handleClose,icon:"fa-solid fa-rectangle-list",backdrop:!0,children:(0,a.jsxs)("div",{className:"control has-icons-right",children:[(0,a.jsx)("pre",{children:Vr(this.props.properties)}),(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)("span",{className:"icon is-right is-clickable",onClick:t,children:(0,a.jsx)("i",{className:"fa-regular fa-copy"})})})]})})}}class ri extends t.Component{constructor(){super(...arguments),this.state={settings:oi()},this.handleChange=t=>{const e=t.currentTarget,n=e instanceof HTMLInputElement?e.checked:e.value;this.setState((()=>(si(e.name,n),{settings:oi()})))}}render(){return(0,a.jsxs)(Jr,{title:"Settings",icon:"fa-solid fa-gears",handleClose:this.props.handleClose,buttons:(0,a.jsx)(c,{text:"Close",icon:"fa-solid fa-xmark",onClick:this.props.handleClose}),children:[kr.hasElementId&&(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(l,{name:"tableViewShowElementId",onChange:this.handleChange,label:"Show elementId in table views",checked:this.state.settings.tableViewShowElementId,color:"is-link"})}),(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(l,{name:"closeEditAfterExecuteSuccess",onChange:this.handleChange,label:"Close create/edit tab after successful execute",checked:this.state.settings.closeEditAfterExecuteSuccess,color:"is-link"})}),(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(l,{name:"forceNamingRecommendations",onChange:this.handleChange,label:"Force naming recommendations",checked:this.state.settings.forceNamingRecommendations,color:"is-link",help:"Node label PascalCase. Relationship type UPPERCASE."})}),(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(l,{name:"confirmCloseUnsavedChanges",onChange:this.handleChange,label:"Confirm dialog when closing tab with unsaved changes",checked:this.state.settings.confirmCloseUnsavedChanges,color:"is-link"})}),(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(Mr.Consumer,{children:t=>(0,a.jsx)(l,{name:"darkMode",onChange:e=>{t(),this.handleChange(e)},label:"Dark mode",checked:this.state.settings.darkMode,color:"is-link"})})}),(0,a.jsx)("div",{className:"mb-3",children:(0,a.jsx)(l,{name:"rememberOpenTabs",onChange:this.handleChange,label:"Remember open tabs",checked:this.state.settings.rememberOpenTabs,color:"is-link",help:"After successful login app will try open remembered tabs."})}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Method when printing out temporal values"}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("div",{className:"select is-fullwidth",children:(0,a.jsx)("select",{name:"temporalValueToStringFunction",value:this.state.settings.temporalValueToStringFunction,onChange:this.handleChange,children:["toISOString","toUTCString","toJSON","toString"].map((t=>(0,a.jsx)("option",{value:t,children:t},t)))})})}),(0,a.jsx)("p",{className:"help",children:"date, datetime"})]})]})}}const ii=ri;function oi(){return{tableViewShowElementId:!0,closeEditAfterExecuteSuccess:!0,forceNamingRecommendations:!0,temporalValueToStringFunction:"toString",darkMode:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,confirmCloseUnsavedChanges:!0,rememberOpenTabs:!0,...localStorage.getItem("settings")?JSON.parse(localStorage.getItem("settings")):{}}}function si(t,e){const n=oi();n[t]=e,localStorage.setItem("settings",JSON.stringify(n))}class ai extends t.Component{constructor(){super(...arguments),this.printValue=t=>{if(kr.isInt(t))return(0,a.jsx)(a.Fragment,{children:kr.strInt(t)});if(Array.isArray(t))return(0,a.jsxs)(a.Fragment,{children:["[",t.length?t.map((t=>this.printValue(t))).reduce(((t,e)=>[t,", ",e])):"","]"]});if(null===t)return(0,a.jsx)("p",{className:"has-text-grey",children:"null"});if("boolean"===typeof t)return(0,a.jsx)(a.Fragment,{children:t?"true":"false"});if("string"===typeof t)return(0,a.jsx)("p",{className:"wspace-pre is-inline-block",children:t});if(t instanceof p.Node)return(0,a.jsx)(Hr,{node:t,tabManager:this.props.tabManager,small:1===this.props.tableSize});if(t instanceof p.Relationship)return(0,a.jsx)(Wr,{rel:t,tabManager:this.props.tabManager,small:1===this.props.tableSize});if(t instanceof p.Path){let e=t.start,n=!0;return(0,a.jsx)("div",{className:"is-flex is-align-items-center",children:t.segments.map((t=>{const r=(0,a.jsxs)(a.Fragment,{children:[n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"is-size-4",children:"("}),this.printValue(kr.strInt(t.start.identity)===kr.strInt(e.identity)?t.start:t.end),(0,a.jsx)("span",{className:"is-size-4",children:")"})]}),(0,a.jsxs)("span",{className:"is-size-4 wspace-nowrap",children:[kr.strInt(t.start.identity)===kr.strInt(e.identity)?"-":"<-","["]}),this.printValue(t.relationship),(0,a.jsxs)("span",{className:"is-size-4 wspace-nowrap",children:["]",kr.strInt(t.start.identity)===kr.strInt(e.identity)?"->":"-","("]}),this.printValue(kr.strInt(t.start.identity)===kr.strInt(e.identity)?t.end:t.start),(0,a.jsx)("span",{className:"is-size-4",children:")"})]});return e=t.end,n=!1,r}))})}if(t instanceof p.Date){const e="toString"===oi().temporalValueToStringFunction?"toDateString":oi().temporalValueToStringFunction;return(0,a.jsx)("p",{className:"wspace-nowrap",children:t.toStandardDate()[e]()})}return t instanceof p.DateTime?(0,a.jsx)("p",{className:"wspace-nowrap",children:t.toStandardDate()[oi().temporalValueToStringFunction]()}):t instanceof p.Time?(0,a.jsx)("p",{className:"wspace-nowrap",children:t.toString()}):t instanceof p.LocalDateTime?(0,a.jsx)("p",{className:"wspace-nowrap",children:t.toStandardDate().toLocaleString()}):t instanceof p.LocalTime?(0,a.jsx)("p",{className:"wspace-nowrap",children:t.toString()}):t instanceof p.Duration?(0,a.jsx)("p",{className:"wspace-nowrap",children:Kr(t)}):"object"===typeof t?(0,a.jsxs)(a.Fragment,{children:[t.constructor.name||"",(0,a.jsxs)("div",{className:"control has-icons-right",children:[(0,a.jsx)("pre",{children:Vr(t)}),(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)("span",{className:"icon is-right is-clickable",onClick:t,children:(0,a.jsx)("i",{className:"fa-regular fa-copy"})})})]})]}):t.toString()}}render(){return(0,a.jsx)("div",{className:"table-container",children:(0,a.jsxs)("table",{className:"table is-bordered is-striped is-narrow is-hoverable",children:[(0,a.jsx)("thead",{children:(0,a.jsx)("tr",{children:this.props.keys.map((t=>(0,a.jsx)("th",{children:t},t)))})}),(0,a.jsx)("tbody",{children:this.props.rows.map(((t,e)=>(0,a.jsx)("tr",{children:this.props.keys.map((e=>(0,a.jsx)("td",{children:t.has(e)?this.printValue(t.get(e)):""},e)))},e)))})]})})}}const li=ai;class ui extends t.Component{render(){return(0,a.jsxs)("div",{className:"control has-icons-right",children:[(0,a.jsx)("pre",{children:Vr(this.props.summary)}),(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)("span",{className:"icon is-right is-clickable",onClick:t,children:(0,a.jsx)("i",{className:"fa-regular fa-copy"})})})]})}}const ci=ui;class hi extends t.Component{render(){return(0,a.jsxs)("div",{className:"control has-icons-right",children:[(0,a.jsx)("pre",{children:Vr(this.props.rows)}),(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)("span",{className:"icon is-right is-clickable",onClick:t,children:(0,a.jsx)("i",{className:"fa-regular fa-copy"})})})]})}}const di=hi;class fi{constructor(){this._imageByUrl={}}static getInstance(){return fi._instance||(fi._instance=new fi),fi._instance}getImage(t){return this._imageByUrl[t]}loadImage(t,e){const n=this.getImage(t);if(n)return n;const r=new Image;return this._imageByUrl[t]=r,r.onload=()=>{pi(r),null===e||void 0===e||e()},r.onerror=()=>{null===e||void 0===e||e(new Error(`Image ${t} failed to load.`))},r.src=t,r}loadImages(t,e){const n=[],r=new Set(t),i=t=>{r.delete(t),0===r.size&&(null===e||void 0===e||e())};for(let o=0;o<t.length;o++){const e=t[o],s=this._imageByUrl[e];if(s){r.delete(e),n.push(s);continue}const a=new Image;this._imageByUrl[e]=a,a.onload=()=>{pi(a),i(e)},a.onerror=()=>{i(e)},a.src=e,n.push(a)}return n}}const pi=t=>t&&0===t.width?(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t),t):t,mi=0,gi=1,_i=2;var yi;!function(t){t.CIRCLE="circle",t.DOT="dot",t.SQUARE="square",t.DIAMOND="diamond",t.TRIANGLE="triangle",t.TRIANGLE_DOWN="triangleDown",t.STAR="star",t.HEXAGON="hexagon"}(yi||(yi={}));class vi{static create(t,e){return new wi(t,e)}}const bi=t=>t instanceof wi;class wi{constructor(t,e){this.style={},this.state=mi,this._inEdgesById={},this._outEdgesById={},this.id=t.data.id,this.data=t.data,this.position={id:this.id},this._onLoadedImage=null===e||void 0===e?void 0:e.onLoadedImage}clearPosition(){this.position.x=void 0,this.position.y=void 0}getCenter(){return void 0===this.position.x||void 0===this.position.y?{x:0,y:0}:{x:this.position.x,y:this.position.y}}getRadius(){var t;return null!==(t=this.style.size)&&void 0!==t?t:0}getBorderedRadius(){return this.getRadius()+this.getBorderWidth()/2}getBoundingBox(){const t=this.getCenter(),e=this.getBorderedRadius();return{x:t.x-e,y:t.y-e,width:2*e,height:2*e}}getInEdges(){return Object.values(this._inEdgesById)}getOutEdges(){return Object.values(this._outEdgesById)}getEdges(){const t={},e=this.getOutEdges();for(let r=0;r<e.length;r++){const n=e[r];t[n.id]=n}const n=this.getInEdges();for(let r=0;r<n.length;r++){const e=n[r];t[e.id]=e}return Object.values(t)}getAdjacentNodes(){const t={},e=this.getOutEdges();for(let r=0;r<e.length;r++){const n=e[r].endNode;n&&(t[n.id]=n)}const n=this.getInEdges();for(let r=0;r<n.length;r++){const e=n[r].startNode;e&&(t[e.id]=e)}return Object.values(t)}hasStyle(){return this.style&&Object.keys(this.style).length>0}addEdge(t){t.start===this.id&&(this._outEdgesById[t.id]=t),t.end===this.id&&(this._inEdgesById[t.id]=t)}removeEdge(t){delete this._outEdgesById[t.id],delete this._inEdgesById[t.id]}isSelected(){return this.state===gi}isHovered(){return this.state===_i}clearState(){this.state=mi}getDistanceToBorder(){return this.getBorderedRadius()}includesPoint(t){const e=this._isPointInBoundingBox(t);if(!e)return!1;if(this.style.shape===yi.SQUARE)return e;const n=this.getCenter(),r=this.getBorderedRadius(),i=t.x-n.x,o=t.y-n.y;return Math.sqrt(i*i+o*o)<=r}hasShadow(){var t,e,n;return(null!==(t=this.style.shadowSize)&&void 0!==t?t:0)>0||(null!==(e=this.style.shadowOffsetX)&&void 0!==e?e:0)>0||(null!==(n=this.style.shadowOffsetY)&&void 0!==n?n:0)>0}hasBorder(){var t,e;const n=(null!==(t=this.style.borderWidth)&&void 0!==t?t:0)>0,r=(null!==(e=this.style.borderWidthSelected)&&void 0!==e?e:0)>0;return n||this.isSelected()&&r}getLabel(){return this.style.label}getColor(){let t;return this.style.color&&(t=this.style.color),this.isHovered()&&this.style.colorHover&&(t=this.style.colorHover),this.isSelected()&&this.style.colorSelected&&(t=this.style.colorSelected),t}getBorderWidth(){let t=0;return this.style.borderWidth&&this.style.borderWidth>0&&(t=this.style.borderWidth),this.isSelected()&&this.style.borderWidthSelected&&this.style.borderWidthSelected>0&&(t=this.style.borderWidthSelected),t}getBorderColor(){if(!this.hasBorder())return;let t;return this.style.borderColor&&(t=this.style.borderColor),this.isHovered()&&this.style.borderColorHover&&(t=this.style.borderColorHover),this.isSelected()&&this.style.borderColorSelected&&(t=this.style.borderColorSelected.toString()),t}getBackgroundImage(){var t;if((null!==(t=this.style.size)&&void 0!==t?t:0)<=0)return;let e;if(this.style.imageUrl&&(e=this.style.imageUrl),this.isSelected()&&this.style.imageUrlSelected&&(e=this.style.imageUrlSelected),!e)return;const n=fi.getInstance().getImage(e);return n||fi.getInstance().loadImage(e,(t=>{var e;t||null===(e=this._onLoadedImage)||void 0===e||e.call(this)}))}_isPointInBoundingBox(t){return((t,e)=>{const n=t.x+t.width,r=t.y+t.height;return e.x>=t.x&&e.x<=n&&e.y>=t.y&&e.y<=r})(this.getBoundingBox(),t)}}const Si=(t,e,n)=>{const r=e.x-t.x,i=e.y-t.y;let o=((n.x-t.x)*r+(n.y-t.y)*i)/(r*r+i*i);o>1&&(o=1),o<0&&(o=0);const s=t.x+o*r,a=t.y+o*i,l=s-n.x,u=a-n.y;return Math.sqrt(l*l+u*u)};var xi;!function(t){t.STRAIGHT="straight",t.LOOPBACK="loopback",t.CURVED="curved"}(xi||(xi={}));class Ei{static create(t){switch(Oi(t)){case xi.STRAIGHT:return new Ti(t);case xi.LOOPBACK:return new Ii(t);case xi.CURVED:return new Ni(t);default:return new Ti(t)}}static copy(t,e){const n=Ei.create({data:t.data,offset:void 0!==(null===e||void 0===e?void 0:e.offset)?e.offset:t.offset,startNode:t.startNode,endNode:t.endNode});return n.state=t.state,n.style=t.style,n}}const Ci=t=>t instanceof Ti||t instanceof Ni||t instanceof Ii;class ki{constructor(t){var e;this.style={},this.state=mi,this._type=xi.STRAIGHT,this.id=t.data.id,this.data=t.data,this.offset=null!==(e=t.offset)&&void 0!==e?e:0,this.startNode=t.startNode,this.endNode=t.endNode,this._type=Oi(t),this.position={id:this.id,source:this.startNode.id,target:this.endNode.id},this.startNode.addEdge(this),this.endNode.addEdge(this)}get type(){return this._type}get start(){return this.data.start}get end(){return this.data.end}hasStyle(){return this.style&&Object.keys(this.style).length>0}isSelected(){return this.state===gi}isHovered(){return this.state===_i}clearState(){this.state=mi}isLoopback(){return this._type===xi.LOOPBACK}isStraight(){return this._type===xi.STRAIGHT}isCurved(){return this._type===xi.CURVED}getCenter(){var t,e;const n=null===(t=this.startNode)||void 0===t?void 0:t.getCenter(),r=null===(e=this.endNode)||void 0===e?void 0:e.getCenter();return n&&r?{x:(n.x+r.x)/2,y:(n.y+r.y)/2}:{x:0,y:0}}getDistance(t){const e=this.startNode.getCenter(),n=this.endNode.getCenter();return e&&n?Si(e,n,t):0}getLabel(){return this.style.label}hasShadow(){var t,e,n;return(null!==(t=this.style.shadowSize)&&void 0!==t?t:0)>0||(null!==(e=this.style.shadowOffsetX)&&void 0!==e?e:0)>0||(null!==(n=this.style.shadowOffsetY)&&void 0!==n?n:0)>0}getWidth(){let t=0;return void 0!==this.style.width&&(t=this.style.width),this.isHovered()&&void 0!==this.style.widthHover&&(t=this.style.widthHover),this.isSelected()&&void 0!==this.style.widthSelected&&(t=this.style.widthSelected),t}getColor(){let t;return this.style.color&&(t=this.style.color),this.isHovered()&&this.style.colorHover&&(t=this.style.colorHover),this.isSelected()&&this.style.colorSelected&&(t=this.style.colorSelected),t}}const Oi=t=>{var e;return t.startNode.id===t.endNode.id?xi.LOOPBACK:0===(null!==(e=t.offset)&&void 0!==e?e:0)?xi.STRAIGHT:xi.CURVED};class Ti extends ki{getCenter(){var t,e;const n=null===(t=this.startNode)||void 0===t?void 0:t.getCenter(),r=null===(e=this.endNode)||void 0===e?void 0:e.getCenter();return n&&r?{x:(n.x+r.x)/2,y:(n.y+r.y)/2}:{x:0,y:0}}getDistance(t){var e,n;const r=null===(e=this.startNode)||void 0===e?void 0:e.getCenter(),i=null===(n=this.endNode)||void 0===n?void 0:n.getCenter();return r&&i?Si(r,i,t):0}}class Ni extends ki{getCenter(){return this.getCurvedControlPoint(2)}getDistance(t){var e,n;const r=null===(e=this.startNode)||void 0===e?void 0:e.getCenter(),i=null===(n=this.endNode)||void 0===n?void 0:n.getCenter();if(!r||!i)return 0;const o=this.getCurvedControlPoint();let s,a,l,u,c,h=1e9,d=r.x,f=r.y;for(a=1;a<10;a++)l=.1*a,u=Math.pow(1-l,2)*r.x+2*l*(1-l)*o.x+Math.pow(l,2)*i.x,c=Math.pow(1-l,2)*r.y+2*l*(1-l)*o.y+Math.pow(l,2)*i.y,a>0&&(s=Si({x:d,y:f},{x:u,y:c},t),h=s<h?s:h),d=u,f=c;return h}getCurvedControlPoint(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;var e;if(!this.startNode||!this.endNode)return{x:0,y:0};const n=this.startNode.getCenter(),r=this.endNode.getCenter(),i=this.startNode.getRadius(),o=this.endNode.getRadius(),s=(n.x+r.x)/2,a=(n.y+r.y)/2,l=r.x-n.x,u=r.y-n.y,c=Math.sqrt(l*l+u*u),h=Math.max(i,o,4),d=(null!==(e=this.offset)&&void 0!==e?e:1)*h*t;return{x:s+d*(u/c),y:a-d*(l/c)}}}class Ii extends ki{getCenter(){var t;const e=Math.abs(null!==(t=this.offset)&&void 0!==t?t:1),n=this.getCircularData();return{x:n.x+n.radius,y:n.y-5*e}}getDistance(t){const e=this.getCircularData(),n=e.x-t.x,r=e.y-t.y;return Math.abs(Math.sqrt(n*n+r*r)-e.radius)}getCircularData(){var t;if(!this.startNode)return{x:0,y:0,radius:0};const e=this.startNode.getCenter(),n=this.startNode.getBorderedRadius(),r=1.5*n*Math.abs(null!==(t=this.offset)&&void 0!==t?t:1),i=n;return{x:e.x+r,y:e.y-.5*i,radius:r}}}const Pi=t=>{const e=t.start,n=t.end;return e<n?`${e}-${n}`:`${n}-${e}`},Mi=t=>{var e;const n={},r=new Set;for(let s=0;s<t.length;s++){const i=Pi(t[s]);t[s].start===t[s].end&&r.add(i),n[i]=(null!==(e=n[i])&&void 0!==e?e:0)+1}const i={},o=Object.keys(n);for(let s=0;s<o.length;s++){const t=o[s],e=n[t];if(r.has(t)){i[t]=Array.from({length:e},((t,e)=>e+1));continue}if(e<=1)continue;const a=[];e%2!==0&&a.push(0);for(let n=2;n<=e;n+=2)a.push(n/2),a.push(n/2*-1);i[t]=a}return i};class ji{constructor(t){this.ids=[],this.entityById=new Map,this.getId=t.getId,this.sortBy=t.sortBy}getOne(t){return this.entityById.get(t)}getMany(t,e){const n=[];for(let r=0;r<t.length;r++){const i=this.getOne(t[r]);void 0!==i&&((null===e||void 0===e?void 0:e.filterBy)&&!e.filterBy(i)||n.push(i))}return this.sortBy&&n.sort(this.sortBy),n}getAll(t){const e=[];for(let n=0;n<this.ids.length;n++){const r=this.getOne(this.ids[n]);void 0!==r&&((null===t||void 0===t?void 0:t.filterBy)&&!t.filterBy(r)||e.push(r))}return e}setOne(t){const e=this.getId(t),n=!this.entityById.has(e);this.entityById.set(e,t),n&&(this.ids.push(e),this.sort())}setMany(t){this.sortBy&&t.sort(this.sortBy);const e=[];for(let n=0;n<t.length;n++){const r=this.getId(t[n]);this.entityById.has(r)||e.push(r),this.entityById.set(r,t[n])}this.ids=this.ids.concat(e),this.sort()}removeMany(t){const e=new Set(t),n=[];for(let r=0;r<this.ids.length;r++)e.has(this.ids[r])||n.push(this.ids[r]);this.ids=n;for(let r=0;r<t.length;r++)this.entityById.delete(t[r])}removeAll(){this.ids=[],this.entityById.clear()}sort(){this.sortBy&&this.ids.sort(((t,e)=>{if(!this.sortBy)return 0;const n=this.getOne(t),r=this.getOne(e);return void 0===n||void 0===r?0:this.sortBy(n,r)}))}get size(){return this.entityById.size}}class Ri{constructor(t,e){var n,r;this._nodes=new ji({getId:t=>t.id,sortBy:(t,e)=>{var n,r;return(null!==(n=t.style.zIndex)&&void 0!==n?n:0)-(null!==(r=e.style.zIndex)&&void 0!==r?r:0)}}),this._edges=new ji({getId:t=>t.id,sortBy:(t,e)=>{var n,r;return(null!==(n=t.style.zIndex)&&void 0!==n?n:0)-(null!==(r=e.style.zIndex)&&void 0!==r?r:0)}}),this._onLoadedImages=null===e||void 0===e?void 0:e.onLoadedImages;const i=null!==(n=null===t||void 0===t?void 0:t.nodes)&&void 0!==n?n:[],o=null!==(r=null===t||void 0===t?void 0:t.edges)&&void 0!==r?r:[];this.setup({nodes:i,edges:o})}getNodes(t){return this._nodes.getAll({filterBy:t})}getEdges(t){return this._edges.getAll({filterBy:t})}getNodeCount(){return this._nodes.size}getEdgeCount(){return this._edges.size}getNodeById(t){return this._nodes.getOne(t)}getEdgeById(t){return this._edges.getOne(t)}getNodePositions(){const t=this.getNodes(),e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=t[n].position;return e}setNodePositions(t){for(let e=0;e<t.length;e++){const n=this._nodes.getOne(t[e].id);n&&(n.position=t[e])}}getEdgePositions(){const t=this.getEdges(),e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=t[n].position;return e}setDefaultStyle(t){this._defaultStyle=t,this._applyStyle()}setup(t){var e,n;this._nodes.removeAll(),this._edges.removeAll();const r=null!==(e=null===t||void 0===t?void 0:t.nodes)&&void 0!==e?e:[],i=null!==(n=null===t||void 0===t?void 0:t.edges)&&void 0!==n?n:[];this._insertNodes(r),this._insertEdges(i),this._applyEdgeOffsets(),this._applyStyle()}clearPositions(){const t=this.getNodes();for(let e=0;e<t.length;e++)t[e].clearPosition()}merge(t){var e,n;const r=null!==(e=t.nodes)&&void 0!==e?e:[],i=null!==(n=t.edges)&&void 0!==n?n:[];this._upsertNodes(r),this._upsertEdges(i),this._applyEdgeOffsets(),this._applyStyle()}remove(t){var e,n;const r=null!==(e=t.nodeIds)&&void 0!==e?e:[],i=null!==(n=t.edgeIds)&&void 0!==n?n:[];this._removeNodes(r),this._removeEdges(i),this._applyEdgeOffsets(),this._applyStyle()}isEqual(t){if(this.getNodeCount()!==t.getNodeCount())return!1;if(this.getEdgeCount()!==t.getEdgeCount())return!1;const e=this.getNodes();for(let r=0;r<e.length;r++)if(!t.getNodeById(e[r].id))return!1;const n=this.getEdges();for(let r=0;r<n.length;r++)if(!t.getEdgeById(n[r].id))return!1;return!0}getBoundingBox(){const t=this.getNodes(),e={x:0,y:0},n={x:0,y:0};for(let r=0;r<t.length;r++){const{x:i,y:o}=t[r].getCenter();if(void 0===i||void 0===o)continue;const s=t[r].getBorderedRadius();0!==r?(i+s>n.x&&(n.x=i+s),i-s<e.x&&(e.x=i-s),o+s>n.y&&(n.y=o+s),o-s<e.y&&(e.y=o-s)):(e.x=i-s,n.x=i+s,e.y=o-s,n.y=o+s)}return{x:e.x,y:e.y,width:Math.abs(n.x-e.x),height:Math.abs(n.y-e.y)}}getNearestNode(t){const e=this.getNodes();for(let n=e.length-1;n>=0;n--)if(e[n].includesPoint(t))return e[n]}getNearestEdge(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const r=this.getEdges();for(let i=0;i<r.length;i++){const o=r[i].getDistance(t);o<=n&&(n=o,e=r[i])}return e}_insertNodes(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=vi.create({data:t[n]},{onLoadedImage:()=>{var t;return null===(t=this._onLoadedImages)||void 0===t?void 0:t.call(this)}});this._nodes.setMany(e)}_insertEdges(t){const e=[];for(let n=0;n<t.length;n++){const r=this.getNodeById(t[n].start),i=this.getNodeById(t[n].end);r&&i&&e.push(Ei.create({data:t[n],startNode:r,endNode:i}))}this._edges.setMany(e)}_upsertNodes(t){const e=[];for(let n=0;n<t.length;n++){const r=this.getNodeById(t[n].id);r?r.data=t[n]:e.push(vi.create({data:t[n]},{onLoadedImage:()=>{var t;return null===(t=this._onLoadedImages)||void 0===t?void 0:t.call(this)}}))}this._nodes.setMany(e)}_upsertEdges(t){const e=[],n=[];for(let r=0;r<t.length;r++){const i=t[r],o=this.getEdgeById(i.id);if(!o){const t=this.getNodeById(i.start),n=this.getNodeById(i.end);if(t&&n){const r=Ei.create({data:i,startNode:t,endNode:n});e.push(r)}continue}if(o.start===i.start&&o.end===i.end){o.data=i;continue}o.startNode.removeEdge(o),o.endNode.removeEdge(o);const s=this.getNodeById(i.start),a=this.getNodeById(i.end);if(!s||!a){n.push(o.id);continue}const l=Ei.create({data:i,offset:o.offset,startNode:s,endNode:a});l.state=o.state,l.style=o.style,e.push(l)}this._edges.setMany(e),this._edges.removeMany(n)}_removeNodes(t){const e=[],n=[];for(let r=0;r<t.length;r++){const i=this.getNodeById(t[r]);if(!i)continue;const o=i.getEdges();for(let t=0;t<o.length;t++){const e=o[t];e.startNode.removeEdge(e),e.endNode.removeEdge(e),n.push(e.id)}e.push(i.id)}this._nodes.removeMany(e),this._edges.removeMany(n)}_removeEdges(t){const e=[];for(let n=0;n<t.length;n++){const r=this.getEdgeById(t[n]);r&&(r.startNode.removeEdge(r),r.endNode.removeEdge(r),e.push(r.id))}this._edges.removeMany(e)}_applyEdgeOffsets(){const t=this.getEdges(),e=(t=>{var e;const n=new Array(t.length),r=Mi(t);for(let i=0;i<t.length;i++){const o=t[i];let s=0;const a=r[Pi(o)];a&&a.length&&(s=null!==(e=a.shift())&&void 0!==e?e:0,o.end<o.start&&(s*=-1)),n[i]=s}return n})(t),n=new Array(e.length);for(let r=0;r<e.length;r++){const i=t[r],o=e[r];n[r]=Ei.copy(i,{offset:o})}this._edges.setMany(n)}_applyStyle(){var t,e;const n=new Set;if(null===(t=this._defaultStyle)||void 0===t?void 0:t.getNodeStyle){const t=this.getNodes();for(let e=0;e<t.length;e++){if(t[e].hasStyle())continue;const r=this._defaultStyle.getNodeStyle(t[e]);r&&(t[e].style=r,r.imageUrl&&n.add(r.imageUrl),r.imageUrlSelected&&n.add(r.imageUrlSelected))}}if(null===(e=this._defaultStyle)||void 0===e?void 0:e.getEdgeStyle){const t=this.getEdges();for(let e=0;e<t.length;e++){if(t[e].hasStyle())continue;const n=this._defaultStyle.getEdgeStyle(t[e]);n&&(t[e].style=n)}}n.size&&fi.getInstance().loadImages(Array.from(n),(()=>{var t;null===(t=this._onLoadedImages)||void 0===t||t.call(this)})),this._nodes.sort(),this._edges.sort()}}var Ai={value:()=>{}};function Di(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Li(r)}function Li(t){this._=t}function Ui(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function zi(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Ai,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Li.prototype=Di.prototype={constructor:Li,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}}))),s=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!==typeof e)throw new Error("invalid callback: "+e);for(;++s<a;)if(n=(t=o[s]).type)i[n]=zi(i[n],t.name,e);else if(null==e)for(n in i)i[n]=zi(i[n],t.name,null);return this}for(;++s<a;)if((n=(t=o[s]).type)&&(n=Ui(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Li(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const Bi=Di;function Fi(){}function qi(t){return null==t?Fi:function(){return this.querySelector(t)}}function Hi(){return[]}function Wi(t){return null==t?Hi:function(){return this.querySelectorAll(t)}}function Vi(t){return function(){return function(t){return null==t?[]:Array.isArray(t)?t:Array.from(t)}(t.apply(this,arguments))}}function Zi(t){return function(){return this.matches(t)}}function Gi(t){return function(e){return e.matches(t)}}var Yi=Array.prototype.find;function $i(){return this.firstElementChild}var Ki=Array.prototype.filter;function Xi(){return Array.from(this.children)}function Qi(t){return new Array(t.length)}function Ji(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function to(t,e,n,r,i,o){for(var s,a=0,l=e.length,u=o.length;a<u;++a)(s=e[a])?(s.__data__=o[a],r[a]=s):n[a]=new Ji(t,o[a]);for(;a<l;++a)(s=e[a])&&(i[a]=s)}function eo(t,e,n,r,i,o,s){var a,l,u,c=new Map,h=e.length,d=o.length,f=new Array(h);for(a=0;a<h;++a)(l=e[a])&&(f[a]=u=s.call(l,l.__data__,a,e)+"",c.has(u)?i[a]=l:c.set(u,l));for(a=0;a<d;++a)u=s.call(t,o[a],a,o)+"",(l=c.get(u))?(r[a]=l,l.__data__=o[a],c.delete(u)):n[a]=new Ji(t,o[a]);for(a=0;a<h;++a)(l=e[a])&&c.get(f[a])===l&&(i[a]=l)}function no(t){return t.__data__}function ro(t){return"object"===typeof t&&"length"in t?t:Array.from(t)}function io(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}Ji.prototype={constructor:Ji,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var oo="http://www.w3.org/1999/xhtml";const so={svg:"http://www.w3.org/2000/svg",xhtml:oo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ao(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),so.hasOwnProperty(e)?{space:so[e],local:t}:t}function lo(t){return function(){this.removeAttribute(t)}}function uo(t){return function(){this.removeAttributeNS(t.space,t.local)}}function co(t,e){return function(){this.setAttribute(t,e)}}function ho(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function fo(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function po(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function mo(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function go(t){return function(){this.style.removeProperty(t)}}function _o(t,e,n){return function(){this.style.setProperty(t,e,n)}}function yo(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function vo(t,e){return t.style.getPropertyValue(e)||mo(t).getComputedStyle(t,null).getPropertyValue(e)}function bo(t){return function(){delete this[t]}}function wo(t,e){return function(){this[t]=e}}function So(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function xo(t){return t.trim().split(/^|\s+/)}function Eo(t){return t.classList||new Co(t)}function Co(t){this._node=t,this._names=xo(t.getAttribute("class")||"")}function ko(t,e){for(var n=Eo(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Oo(t,e){for(var n=Eo(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function To(t){return function(){ko(this,t)}}function No(t){return function(){Oo(this,t)}}function Io(t,e){return function(){(e.apply(this,arguments)?ko:Oo)(this,t)}}function Po(){this.textContent=""}function Mo(t){return function(){this.textContent=t}}function jo(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Ro(){this.innerHTML=""}function Ao(t){return function(){this.innerHTML=t}}function Do(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Lo(){this.nextSibling&&this.parentNode.appendChild(this)}function Uo(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function zo(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===oo&&e.documentElement.namespaceURI===oo?e.createElement(t):e.createElementNS(n,t)}}function Bo(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Fo(t){var e=ao(t);return(e.local?Bo:zo)(e)}function qo(){return null}function Ho(){var t=this.parentNode;t&&t.removeChild(this)}function Wo(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Vo(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Zo(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function Go(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var s=0,a=i.length;s<a;++s)if((r=i[s]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Yo(t,e,n){var r=mo(t),i=r.CustomEvent;"function"===typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function $o(t,e){return function(){return Yo(this,t,e)}}function Ko(t,e){return function(){return Yo(this,t,e.apply(this,arguments))}}Co.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var Xo=[null];function Qo(t,e){this._groups=t,this._parents=e}function Jo(){return new Qo([[document.documentElement]],Xo)}Qo.prototype=Jo.prototype={constructor:Qo,select:function(t){"function"!==typeof t&&(t=qi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s,a=e[i],l=a.length,u=r[i]=new Array(l),c=0;c<l;++c)(o=a[c])&&(s=t.call(o,o.__data__,c,a))&&("__data__"in o&&(s.__data__=o.__data__),u[c]=s);return new Qo(r,this._parents)},selectAll:function(t){t="function"===typeof t?Vi(t):Wi(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var s,a=e[o],l=a.length,u=0;u<l;++u)(s=a[u])&&(r.push(t.call(s,s.__data__,u,a)),i.push(s));return new Qo(r,i)},selectChild:function(t){return this.select(null==t?$i:function(t){return function(){return Yi.call(this.children,t)}}("function"===typeof t?t:Gi(t)))},selectChildren:function(t){return this.selectAll(null==t?Xi:function(t){return function(){return Ki.call(this.children,t)}}("function"===typeof t?t:Gi(t)))},filter:function(t){"function"!==typeof t&&(t=Zi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,l=r[i]=[],u=0;u<a;++u)(o=s[u])&&t.call(o,o.__data__,u,s)&&l.push(o);return new Qo(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,no);var n=e?eo:to,r=this._parents,i=this._groups;"function"!==typeof t&&(t=function(t){return function(){return t}}(t));for(var o=i.length,s=new Array(o),a=new Array(o),l=new Array(o),u=0;u<o;++u){var c=r[u],h=i[u],d=h.length,f=ro(t.call(c,c&&c.__data__,u,r)),p=f.length,m=a[u]=new Array(p),g=s[u]=new Array(p);n(c,h,m,g,l[u]=new Array(d),f,e);for(var _,y,v=0,b=0;v<p;++v)if(_=m[v]){for(v>=b&&(b=v+1);!(y=g[b])&&++b<p;);_._next=y||null}}return(s=new Qo(s,r))._enter=a,s._exit=l,s},enter:function(){return new Qo(this._enter||this._groups.map(Qi),this._parents)},exit:function(){return new Qo(this._exit||this._groups.map(Qi),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"===typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,s=Math.min(i,o),a=new Array(i),l=0;l<s;++l)for(var u,c=n[l],h=r[l],d=c.length,f=a[l]=new Array(d),p=0;p<d;++p)(u=c[p]||h[p])&&(f[p]=u);for(;l<i;++l)a[l]=n[l];return new Qo(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,s=i[o];--o>=0;)(r=i[o])&&(s&&4^r.compareDocumentPosition(s)&&s.parentNode.insertBefore(r,s),s=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=io);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var s,a=n[o],l=a.length,u=i[o]=new Array(l),c=0;c<l;++c)(s=a[c])&&(u[c]=s);u.sort(e)}return new Qo(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var s=r[i];if(s)return s}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],s=0,a=o.length;s<a;++s)(i=o[s])&&t.call(i,i.__data__,s,o);return this},attr:function(t,e){var n=ao(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?uo:lo:"function"===typeof e?n.local?po:fo:n.local?ho:co)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?go:"function"===typeof e?yo:_o)(t,e,null==n?"":n)):vo(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?bo:"function"===typeof e?So:wo)(t,e)):this.node()[t]},classed:function(t,e){var n=xo(t+"");if(arguments.length<2){for(var r=Eo(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"===typeof e?Io:e?To:No)(n,e))},text:function(t){return arguments.length?this.each(null==t?Po:("function"===typeof t?jo:Mo)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?Ro:("function"===typeof t?Do:Ao)(t)):this.node().innerHTML},raise:function(){return this.each(Lo)},lower:function(){return this.each(Uo)},append:function(t){var e="function"===typeof t?t:Fo(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"===typeof t?t:Fo(t),r=null==e?qo:"function"===typeof e?e:qi(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Ho)},clone:function(t){return this.select(t?Vo:Wo)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),s=o.length;if(!(arguments.length<2)){for(a=e?Go:Zo,r=0;r<s;++r)this.each(a(o[r],e,n));return this}var a=this.node().__on;if(a)for(var l,u=0,c=a.length;u<c;++u)for(r=0,l=a[u];r<s;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"===typeof e?Ko:$o)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,s=i.length;o<s;++o)(r=i[o])&&(yield r)}};const ts=Jo;function es(t){return"string"===typeof t?new Qo([[document.querySelector(t)]],[document.documentElement]):new Qo([[t]],Xo)}function ns(t,e){if(t=function(t){let e;for(;e=t.sourceEvent;)t=e;return t}(t),void 0===e&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=t.clientX,r.y=t.clientY,[(r=r.matrixTransform(e.getScreenCTM().inverse())).x,r.y]}if(e.getBoundingClientRect){var i=e.getBoundingClientRect();return[t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop]}}return[t.pageX,t.pageY]}const rs={passive:!1},is={capture:!0,passive:!1};function os(t){t.stopImmediatePropagation()}function ss(t){t.preventDefault(),t.stopImmediatePropagation()}function as(t){var e=t.document.documentElement,n=es(t).on("dragstart.drag",ss,is);"onselectstart"in e?n.on("selectstart.drag",ss,is):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function ls(t,e){var n=t.document.documentElement,r=es(t).on("dragstart.drag",null);e&&(r.on("click.drag",ss,is),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const us=t=>()=>t;function cs(t,e){let{sourceEvent:n,subject:r,target:i,identifier:o,active:s,x:a,y:l,dx:u,dy:c,dispatch:h}=e;Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:h}})}function hs(t){return!t.ctrlKey&&!t.button}function ds(){return this.parentNode}function fs(t,e){return null==e?{x:t.x,y:t.y}:e}function ps(){return navigator.maxTouchPoints||"ontouchstart"in this}cs.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};const ms=t=>+t;function gs(t){return((t=Math.exp(t))+1/t)/2}const _s=function t(e,n,r){function i(t,i){var o,s,a=t[0],l=t[1],u=t[2],c=i[0],h=i[1],d=i[2],f=c-a,p=h-l,m=f*f+p*p;if(m<1e-12)s=Math.log(d/u)/e,o=function(t){return[a+t*f,l+t*p,u*Math.exp(e*t*s)]};else{var g=Math.sqrt(m),_=(d*d-u*u+r*m)/(2*u*n*g),y=(d*d-u*u-r*m)/(2*d*n*g),v=Math.log(Math.sqrt(_*_+1)-_),b=Math.log(Math.sqrt(y*y+1)-y);s=(b-v)/e,o=function(t){var r=t*s,i=gs(v),o=u/(n*g)*(i*function(t){return((t=Math.exp(2*t))-1)/(t+1)}(e*r+v)-function(t){return((t=Math.exp(t))-1/t)/2}(v));return[a+o*f,l+o*p,u*i/gs(e*r+v)]}}return o.duration=1e3*s*e/Math.SQRT2,o}return i.rho=function(e){var n=Math.max(.001,+e),r=n*n;return t(n,r,r*r)},i}(Math.SQRT2,2,4);var ys,vs,bs=0,ws=0,Ss=0,xs=1e3,Es=0,Cs=0,ks=0,Os="object"===typeof performance&&performance.now?performance:Date,Ts="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ns(){return Cs||(Ts(Is),Cs=Os.now()+ks)}function Is(){Cs=0}function Ps(){this._call=this._time=this._next=null}function Ms(t,e,n){var r=new Ps;return r.restart(t,e,n),r}function js(){Cs=(Es=Os.now())+ks,bs=ws=0;try{!function(){Ns(),++bs;for(var t,e=ys;e;)(t=Cs-e._time)>=0&&e._call.call(void 0,t),e=e._next;--bs}()}finally{bs=0,function(){var t,e,n=ys,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ys=e);vs=t,As(r)}(),Cs=0}}function Rs(){var t=Os.now(),e=t-Es;e>xs&&(ks-=e,Es=t)}function As(t){bs||(ws&&(ws=clearTimeout(ws)),t-Cs>24?(t<1/0&&(ws=setTimeout(js,t-Os.now()-ks)),Ss&&(Ss=clearInterval(Ss))):(Ss||(Es=Os.now(),Ss=setInterval(Rs,xs)),bs=1,Ts(js)))}function Ds(t,e,n){var r=new Ps;return e=null==e?0:+e,r.restart((n=>{r.stop(),t(n+e)}),e,n),r}Ps.prototype=Ms.prototype={constructor:Ps,restart:function(t,e,n){if("function"!==typeof t)throw new TypeError("callback is not a function");n=(null==n?Ns():+n)+(null==e?0:+e),this._next||vs===this||(vs?vs._next=this:ys=this,vs=this),this._call=t,this._time=n,As()},stop:function(){this._call&&(this._call=null,this._time=1/0,As())}};var Ls=Bi("start","end","cancel","interrupt"),Us=[],zs=0,Bs=1,Fs=2,qs=3,Hs=4,Ws=5,Vs=6;function Zs(t,e,n,r,i,o){var s=t.__transition;if(s){if(n in s)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(t){n.state=Bs,n.timer.restart(s,n.delay,n.time),n.delay<=t&&s(t-n.delay)}function s(o){var u,c,h,d;if(n.state!==Bs)return l();for(u in i)if((d=i[u]).name===n.name){if(d.state===qs)return Ds(s);d.state===Hs?(d.state=Vs,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[u]):+u<e&&(d.state=Vs,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[u])}if(Ds((function(){n.state===qs&&(n.state=Hs,n.timer.restart(a,n.delay,n.time),a(o))})),n.state=Fs,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Fs){for(n.state=qs,r=new Array(h=n.tween.length),u=0,c=-1;u<h;++u)(d=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(l),n.state=Ws,1),o=-1,s=r.length;++o<s;)r[o].call(t,i);n.state===Ws&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){for(var r in n.state=Vs,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Ms(o,0,n.time)}(t,n,{name:e,index:r,group:i,on:Ls,tween:Us,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:zs})}function Gs(t,e){var n=$s(t,e);if(n.state>zs)throw new Error("too late; already scheduled");return n}function Ys(t,e){var n=$s(t,e);if(n.state>qs)throw new Error("too late; already running");return n}function $s(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Ks(t,e){var n,r,i,o=t.__transition,s=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>Fs&&n.state<Ws,n.state=Vs,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):s=!1;s&&delete t.__transition}}function Xs(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var Qs,Js=180/Math.PI,ta={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ea(t,e,n,r,i,o){var s,a,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,l/=a),t*r<e*n&&(t=-t,e=-e,l=-l,s=-s),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*Js,skewX:Math.atan(l)*Js,scaleX:s,scaleY:a}}function na(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],l=[];return o=t(o),s=t(s),function(t,r,i,o,s,a){if(t!==i||r!==o){var l=s.push("translate(",null,e,null,n);a.push({i:l-4,x:Xs(t,i)},{i:l-2,x:Xs(r,o)})}else(i||o)&&s.push("translate("+i+e+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Xs(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,s.rotate,a,l),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Xs(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,s.skewX,a,l),function(t,e,n,r,o,s){if(t!==n||e!==r){var a=o.push(i(o)+"scale(",null,",",null,")");s.push({i:a-4,x:Xs(t,n)},{i:a-2,x:Xs(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,l),o=s=null,function(t){for(var e,n=-1,r=l.length;++n<r;)a[(e=l[n]).i]=e.x(t);return a.join("")}}}var ra=na((function(t){const e=new("function"===typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ta:ea(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),ia=na((function(t){return null==t?ta:(Qs||(Qs=document.createElementNS("http://www.w3.org/2000/svg","g")),Qs.setAttribute("transform",t),(t=Qs.transform.baseVal.consolidate())?ea((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ta)}),", ",")",")");function oa(t,e){var n,r;return function(){var i=Ys(this,t),o=i.tween;if(o!==n)for(var s=0,a=(r=n=o).length;s<a;++s)if(r[s].name===e){(r=r.slice()).splice(s,1);break}i.tween=r}}function sa(t,e,n){var r,i;if("function"!==typeof n)throw new Error;return function(){var o=Ys(this,t),s=o.tween;if(s!==r){i=(r=s).slice();for(var a={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=a;break}l===u&&i.push(a)}o.tween=i}}function aa(t,e,n){var r=t._id;return t.each((function(){var t=Ys(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return $s(t,r).value[e]}}function la(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function ua(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ca(){}var ha=.7,da=1/ha,fa="\\s*([+-]?\\d+)\\s*",pa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ma="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ga=/^#([0-9a-f]{3,8})$/,_a=new RegExp(`^rgb\\(${fa},${fa},${fa}\\)$`),ya=new RegExp(`^rgb\\(${ma},${ma},${ma}\\)$`),va=new RegExp(`^rgba\\(${fa},${fa},${fa},${pa}\\)$`),ba=new RegExp(`^rgba\\(${ma},${ma},${ma},${pa}\\)$`),wa=new RegExp(`^hsl\\(${pa},${ma},${ma}\\)$`),Sa=new RegExp(`^hsla\\(${pa},${ma},${ma},${pa}\\)$`),xa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ea(){return this.rgb().formatHex()}function Ca(){return this.rgb().formatRgb()}function ka(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ga.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Oa(e):3===n?new Ia(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Ta(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Ta(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=_a.exec(t))?new Ia(e[1],e[2],e[3],1):(e=ya.exec(t))?new Ia(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=va.exec(t))?Ta(e[1],e[2],e[3],e[4]):(e=ba.exec(t))?Ta(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=wa.exec(t))?Da(e[1],e[2]/100,e[3]/100,1):(e=Sa.exec(t))?Da(e[1],e[2]/100,e[3]/100,e[4]):xa.hasOwnProperty(t)?Oa(xa[t]):"transparent"===t?new Ia(NaN,NaN,NaN,0):null}function Oa(t){return new Ia(t>>16&255,t>>8&255,255&t,1)}function Ta(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ia(t,e,n,r)}function Na(t,e,n,r){return 1===arguments.length?((i=t)instanceof ca||(i=ka(i)),i?new Ia((i=i.rgb()).r,i.g,i.b,i.opacity):new Ia):new Ia(t,e,n,null==r?1:r);var i}function Ia(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Pa(){return`#${Aa(this.r)}${Aa(this.g)}${Aa(this.b)}`}function Ma(){const t=ja(this.opacity);return`${1===t?"rgb(":"rgba("}${Ra(this.r)}, ${Ra(this.g)}, ${Ra(this.b)}${1===t?")":`, ${t})`}`}function ja(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ra(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Aa(t){return((t=Ra(t))<16?"0":"")+t.toString(16)}function Da(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ua(t,e,n,r)}function La(t){if(t instanceof Ua)return new Ua(t.h,t.s,t.l,t.opacity);if(t instanceof ca||(t=ka(t)),!t)return new Ua;if(t instanceof Ua)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),s=NaN,a=o-i,l=(o+i)/2;return a?(s=e===o?(n-r)/a+6*(n<r):n===o?(r-e)/a+2:(e-n)/a+4,a/=l<.5?o+i:2-o-i,s*=60):a=l>0&&l<1?0:s,new Ua(s,a,l,t.opacity)}function Ua(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function za(t){return(t=(t||0)%360)<0?t+360:t}function Ba(t){return Math.max(0,Math.min(1,t||0))}function Fa(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function qa(t,e,n,r,i){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*r+s*i)/6}la(ca,ka,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Ea,formatHex:Ea,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return La(this).formatHsl()},formatRgb:Ca,toString:Ca}),la(Ia,Na,ua(ca,{brighter(t){return t=null==t?da:Math.pow(da,t),new Ia(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?ha:Math.pow(ha,t),new Ia(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ia(Ra(this.r),Ra(this.g),Ra(this.b),ja(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Pa,formatHex:Pa,formatHex8:function(){return`#${Aa(this.r)}${Aa(this.g)}${Aa(this.b)}${Aa(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Ma,toString:Ma})),la(Ua,(function(t,e,n,r){return 1===arguments.length?La(t):new Ua(t,e,n,null==r?1:r)}),ua(ca,{brighter(t){return t=null==t?da:Math.pow(da,t),new Ua(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ha:Math.pow(ha,t),new Ua(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ia(Fa(t>=240?t-240:t+120,i,r),Fa(t,i,r),Fa(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ua(za(this.h),Ba(this.s),Ba(this.l),ja(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=ja(this.opacity);return`${1===t?"hsl(":"hsla("}${za(this.h)}, ${100*Ba(this.s)}%, ${100*Ba(this.l)}%${1===t?")":`, ${t})`}`}}));const Ha=t=>()=>t;function Wa(t,e){return function(n){return t+n*e}}function Va(t){return 1===(t=+t)?Za:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):Ha(isNaN(e)?n:e)}}function Za(t,e){var n=e-t;return n?Wa(t,n):Ha(isNaN(t)?e:t)}const Ga=function t(e){var n=Va(e);function r(t,e){var r=n((t=Na(t)).r,(e=Na(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),s=Za(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=s(e),t+""}}return r.gamma=t,r}(1);function Ya(t){return function(e){var n,r,i=e.length,o=new Array(i),s=new Array(i),a=new Array(i);for(n=0;n<i;++n)r=Na(e[n]),o[n]=r.r||0,s[n]=r.g||0,a[n]=r.b||0;return o=t(o),s=t(s),a=t(a),r.opacity=1,function(t){return r.r=o(t),r.g=s(t),r.b=a(t),r+""}}}Ya((function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],s=r>0?t[r-1]:2*i-o,a=r<e-1?t[r+2]:2*o-i;return qa((n-r/e)*e,s,i,o,a)}})),Ya((function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],s=t[(r+1)%e],a=t[(r+2)%e];return qa((n-r/e)*e,i,o,s,a)}}));var $a=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ka=new RegExp($a.source,"g");function Xa(t,e){var n,r,i,o=$a.lastIndex=Ka.lastIndex=0,s=-1,a=[],l=[];for(t+="",e+="";(n=$a.exec(t))&&(r=Ka.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),a[s]?a[s]+=i:a[++s]=i),(n=n[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,l.push({i:s,x:Xs(n,r)})),o=Ka.lastIndex;return o<e.length&&(i=e.slice(o),a[s]?a[s]+=i:a[++s]=i),a.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)a[(n=l[r]).i]=n.x(t);return a.join("")})}function Qa(t,e){var n;return("number"===typeof e?Xs:e instanceof ka?Ga:(n=ka(e))?(e=n,Ga):Xa)(t,e)}function Ja(t){return function(){this.removeAttribute(t)}}function tl(t){return function(){this.removeAttributeNS(t.space,t.local)}}function el(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttribute(t);return s===o?null:s===r?i:i=e(r=s,n)}}function nl(t,e,n){var r,i,o=n+"";return function(){var s=this.getAttributeNS(t.space,t.local);return s===o?null:s===r?i:i=e(r=s,n)}}function rl(t,e,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttribute(t))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,l));this.removeAttribute(t)}}function il(t,e,n){var r,i,o;return function(){var s,a,l=n(this);if(null!=l)return(s=this.getAttributeNS(t.space,t.local))===(a=l+"")?null:s===r&&a===i?o:(i=a,o=e(r=s,l));this.removeAttributeNS(t.space,t.local)}}function ol(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function sl(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function al(t,e){return function(){Gs(this,t).delay=+e.apply(this,arguments)}}function ll(t,e){return e=+e,function(){Gs(this,t).delay=e}}function ul(t,e){return function(){Ys(this,t).duration=+e.apply(this,arguments)}}function cl(t,e){return e=+e,function(){Ys(this,t).duration=e}}var hl=ts.prototype.constructor;function dl(t){return function(){this.style.removeProperty(t)}}var fl=0;function pl(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function ml(){return++fl}var gl=ts.prototype;pl.prototype=function(t){return ts().transition(t)}.prototype={constructor:pl,select:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=qi(t));for(var r=this._groups,i=r.length,o=new Array(i),s=0;s<i;++s)for(var a,l,u=r[s],c=u.length,h=o[s]=new Array(c),d=0;d<c;++d)(a=u[d])&&(l=t.call(a,a.__data__,d,u))&&("__data__"in a&&(l.__data__=a.__data__),h[d]=l,Zs(h[d],e,n,d,h,$s(a,n)));return new pl(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!==typeof t&&(t=Wi(t));for(var r=this._groups,i=r.length,o=[],s=[],a=0;a<i;++a)for(var l,u=r[a],c=u.length,h=0;h<c;++h)if(l=u[h]){for(var d,f=t.call(l,l.__data__,h,u),p=$s(l,n),m=0,g=f.length;m<g;++m)(d=f[m])&&Zs(d,e,n,m,f,p);o.push(f),s.push(l)}return new pl(o,s,e,n)},selectChild:gl.selectChild,selectChildren:gl.selectChildren,filter:function(t){"function"!==typeof t&&(t=Zi(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,s=e[i],a=s.length,l=r[i]=[],u=0;u<a;++u)(o=s[u])&&t.call(o,o.__data__,u,s)&&l.push(o);return new pl(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),s=new Array(r),a=0;a<o;++a)for(var l,u=e[a],c=n[a],h=u.length,d=s[a]=new Array(h),f=0;f<h;++f)(l=u[f]||c[f])&&(d[f]=l);for(;a<r;++a)s[a]=e[a];return new pl(s,this._parents,this._name,this._id)},selection:function(){return new hl(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=ml(),r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,u=0;u<l;++u)if(s=a[u]){var c=$s(s,e);Zs(s,t,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new pl(r,this._parents,t,n)},call:gl.call,nodes:gl.nodes,node:gl.node,size:gl.size,empty:gl.empty,each:gl.each,on:function(t,e){var n=this._id;return arguments.length<2?$s(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}(e)?Gs:Ys;return function(){var s=o(this,t),a=s.on;a!==r&&(i=(r=a).copy()).on(e,n),s.on=i}}(n,t,e))},attr:function(t,e){var n=ao(t),r="transform"===n?ia:Qa;return this.attrTween(t,"function"===typeof e?(n.local?il:rl)(n,r,aa(this,"attr."+t,e)):null==e?(n.local?tl:Ja)(n):(n.local?nl:el)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!==typeof e)throw new Error;var r=ao(t);return this.tween(n,(r.local?ol:sl)(r,e))},style:function(t,e,n){var r="transform"===(t+="")?ra:Qa;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=vo(this,t),s=(this.style.removeProperty(t),vo(this,t));return o===s?null:o===n&&s===r?i:i=e(n=o,r=s)}}(t,r)).on("end.style."+t,dl(t)):"function"===typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var s=vo(this,t),a=n(this),l=a+"";return null==a&&(this.style.removeProperty(t),l=a=vo(this,t)),s===l?null:s===r&&l===i?o:(i=l,o=e(r=s,a))}}(t,r,aa(this,"style."+t,e))).each(function(t,e){var n,r,i,o,s="style."+e,a="end."+s;return function(){var l=Ys(this,t),u=l.on,c=null==l.value[s]?o||(o=dl(e)):void 0;u===n&&i===c||(r=(n=u).copy()).on(a,i=c),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var s=vo(this,t);return s===o?null:s===r?i:i=e(r=s,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!==typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"===typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(aa(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!==typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=$s(this.node(),n).tween,o=0,s=i.length;o<s;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?oa:sa)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?al:ll)(e,t)):$s(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"===typeof t?ul:cl)(e,t)):$s(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!==typeof e)throw new Error;return function(){Ys(this,t).ease=e}}(e,t)):$s(this.node(),e).ease},easeVarying:function(t){if("function"!==typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!==typeof n)throw new Error;Ys(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,s){var a={value:s},l={value:function(){0===--i&&o()}};n.each((function(){var n=Ys(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(a),e._.interrupt.push(a),e._.end.push(l)),n.on=e})),0===i&&o()}))},[Symbol.iterator]:gl[Symbol.iterator]};var _l={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function yl(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}ts.prototype.interrupt=function(t){return this.each((function(){Ks(this,t)}))},ts.prototype.transition=function(t){var e,n;t instanceof pl?(e=t._id,t=t._name):(e=ml(),(n=_l).time=Ns(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var s,a=r[o],l=a.length,u=0;u<l;++u)(s=a[u])&&Zs(s,t,e,u,a,n||yl(s,e));return new pl(r,this._parents,t,e)};const vl=t=>()=>t;function bl(t,e){let{sourceEvent:n,target:r,transform:i,dispatch:o}=e;Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:o}})}function wl(t,e,n){this.k=t,this.x=e,this.y=n}wl.prototype={constructor:wl,scale:function(t){return 1===t?this:new wl(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new wl(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Sl=new wl(1,0,0);function xl(t){t.stopImmediatePropagation()}function El(t){t.preventDefault(),t.stopImmediatePropagation()}function Cl(t){return(!t.ctrlKey||"wheel"===t.type)&&!t.button}function kl(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function Ol(){return this.__zoom||Sl}function Tl(t){return-t.deltaY*(1===t.deltaMode?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Nl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Il(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),s>o?(o+s)/2:Math.min(0,o)||Math.max(0,s))}wl.prototype;const Pl=(t,e)=>!!t&&!!e&&t.x===e.x&&t.y===e.y;var Ml;!function(t){t.SIMULATION_START="simulation-start",t.SIMULATION_PROGRESS="simulation-progress",t.SIMULATION_END="simulation-end",t.NODE_DRAG="node-drag",t.NODE_DRAG_END="node-drag-end",t.SETTINGS_UPDATE="settings-update"}(Ml||(Ml={}));class jl{constructor(){this._listeners=new Map}once(t,e){const n={callable:e,isOnce:!0},r=this._listeners.get(t);return r?r.push(n):this._listeners.set(t,[n]),this}on(t,e){const n={callable:e},r=this._listeners.get(t);return r?r.push(n):this._listeners.set(t,[n]),this}off(t,e){const n=this._listeners.get(t);if(n){const r=n.filter((t=>t.callable!==e));this._listeners.set(t,r)}return this}emit(t,e){const n=this._listeners.get(t);if(!n||0===n.length)return!1;let r=!1;for(let i=0;i<n.length;i++)n[i].isOnce&&(r=!0),n[i].callable(e);if(r){const e=n.filter((t=>!t.isOnce));this._listeners.set(t,e)}return!0}eventNames(){return[...this._listeners.keys()]}listenerCount(t){const e=this._listeners.get(t);return e?e.length:0}listeners(t){const e=this._listeners.get(t);return e?e.map((t=>t.callable)):[]}addListener(t,e){return this.on(t,e)}removeListener(t,e){return this.off(t,e)}removeAllListeners(t){return t?this._listeners.delete(t):this._listeners.clear(),this}}function Rl(t){return function(){return t}}function Al(t){return 1e-6*(t()-.5)}function Dl(t){return t.index}function Ll(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}const Ul=1664525,zl=1013904223,Bl=4294967296;function Fl(t){return t.x}function ql(t){return t.y}var Hl=Math.PI*(3-Math.sqrt(5));function Wl(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,s=.6,a=new Map,l=Ms(h),u=Bi("tick","end"),c=function(){let t=1;return()=>(t=(Ul*t+zl)%Bl)/Bl}();function h(){d(),u.call("tick",e),n<r&&(l.stop(),u.call("end",e))}function d(r){var l,u,c=t.length;void 0===r&&(r=1);for(var h=0;h<r;++h)for(n+=(o-n)*i,a.forEach((function(t){t(n)})),l=0;l<c;++l)null==(u=t[l]).fx?u.x+=u.vx*=s:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=s:(u.y=u.fy,u.vy=0);return e}function f(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(.5+n),o=n*Hl;e.x=i*Math.cos(o),e.y=i*Math.sin(o)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function p(e){return e.initialize&&e.initialize(t,c),e}return null==t&&(t=[]),f(),e={tick:d,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),a.forEach(p),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(o=+t,e):o},velocityDecay:function(t){return arguments.length?(s=1-t,e):1-s},randomSource:function(t){return arguments.length?(c=t,a.forEach(p),e):c},force:function(t,n){return arguments.length>1?(null==n?a.delete(t):a.set(t,p(n)),e):a.get(t)},find:function(e,n,r){var i,o,s,a,l,u=0,c=t.length;for(null==r?r=1/0:r*=r,u=0;u<c;++u)(s=(i=e-(a=t[u]).x)*i+(o=n-a.y)*o)<r&&(l=a,r=s);return l},on:function(t,n){return arguments.length>1?(u.on(t,n),e):u.on(t)}}}function Vl(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,o,s,a,l,u,c,h,d,f=t._root,p={data:r},m=t._x0,g=t._y0,_=t._x1,y=t._y1;if(!f)return t._root=p,t;for(;f.length;)if((u=e>=(o=(m+_)/2))?m=o:_=o,(c=n>=(s=(g+y)/2))?g=s:y=s,i=f,!(f=f[h=c<<1|u]))return i[h]=p,t;if(a=+t._x.call(null,f.data),l=+t._y.call(null,f.data),e===a&&n===l)return p.next=f,i?i[h]=p:t._root=p,t;do{i=i?i[h]=new Array(4):t._root=new Array(4),(u=e>=(o=(m+_)/2))?m=o:_=o,(c=n>=(s=(g+y)/2))?g=s:y=s}while((h=c<<1|u)===(d=(l>=s)<<1|a>=o));return i[d]=f,i[h]=p,t}function Zl(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Gl(t){return t[0]}function Yl(t){return t[1]}function $l(t,e,n){var r=new Kl(null==e?Gl:e,null==n?Yl:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Kl(t,e,n,r,i,o){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function Xl(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Ql=$l.prototype=Kl.prototype;function Jl(t){return t.x+t.vx}function tu(t){return t.y+t.vy}Ql.copy=function(){var t,e,n=new Kl(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Xl(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Xl(e));return n},Ql.add=function(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Vl(this.cover(e,n),e,n,t)},Ql.addAll=function(t){var e,n,r,i,o=t.length,s=new Array(o),a=new Array(o),l=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(s[n]=r,a[n]=i,r<l&&(l=r),r>c&&(c=r),i<u&&(u=i),i>h&&(h=i));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),n=0;n<o;++n)Vl(this,s[n],a[n],t[n]);return this},Ql.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,o=(r=Math.floor(e))+1;else{for(var s,a,l=i-n||1,u=this._root;n>t||t>=i||r>e||e>=o;)switch(a=(e<r)<<1|t<n,(s=new Array(4))[a]=u,u=s,l*=2,a){case 0:i=n+l,o=r+l;break;case 1:n=i-l,o=r+l;break;case 2:i=n+l,r=o-l;break;case 3:n=i-l,r=o-l}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},Ql.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Ql.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Ql.find=function(t,e,n){var r,i,o,s,a,l,u,c=this._x0,h=this._y0,d=this._x1,f=this._y1,p=[],m=this._root;for(m&&p.push(new Zl(m,c,h,d,f)),null==n?n=1/0:(c=t-n,h=e-n,d=t+n,f=e+n,n*=n);l=p.pop();)if(!(!(m=l.node)||(i=l.x0)>d||(o=l.y0)>f||(s=l.x1)<c||(a=l.y1)<h))if(m.length){var g=(i+s)/2,_=(o+a)/2;p.push(new Zl(m[3],g,_,s,a),new Zl(m[2],i,_,g,a),new Zl(m[1],g,o,s,_),new Zl(m[0],i,o,g,_)),(u=(e>=_)<<1|t>=g)&&(l=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=l)}else{var y=t-+this._x.call(null,m.data),v=e-+this._y.call(null,m.data),b=y*y+v*v;if(b<n){var w=Math.sqrt(n=b);c=t-w,h=e-w,d=t+w,f=e+w,r=m.data}}return r},Ql.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(s=+this._y.call(null,t)))return this;var e,n,r,i,o,s,a,l,u,c,h,d,f=this._root,p=this._x0,m=this._y0,g=this._x1,_=this._y1;if(!f)return this;if(f.length)for(;;){if((u=o>=(a=(p+g)/2))?p=a:g=a,(c=s>=(l=(m+_)/2))?m=l:_=l,e=f,!(f=f[h=c<<1|u]))return this;if(!f.length)break;(e[h+1&3]||e[h+2&3]||e[h+3&3])&&(n=e,d=h)}for(;f.data!==t;)if(r=f,!(f=f.next))return this;return(i=f.next)&&delete f.next,r?(i?r.next=i:delete r.next,this):e?(i?e[h]=i:delete e[h],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(n?n[d]=f:this._root=f),this):(this._root=i,this)},Ql.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Ql.root=function(){return this._root},Ql.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Ql.visit=function(t){var e,n,r,i,o,s,a=[],l=this._root;for(l&&a.push(new Zl(l,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(l=e.node,r=e.x0,i=e.y0,o=e.x1,s=e.y1)&&l.length){var u=(r+o)/2,c=(i+s)/2;(n=l[3])&&a.push(new Zl(n,u,c,o,s)),(n=l[2])&&a.push(new Zl(n,r,c,u,s)),(n=l[1])&&a.push(new Zl(n,u,i,o,c)),(n=l[0])&&a.push(new Zl(n,r,i,u,c))}return this},Ql.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Zl(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var o,s=e.x0,a=e.y0,l=e.x1,u=e.y1,c=(s+l)/2,h=(a+u)/2;(o=i[0])&&n.push(new Zl(o,s,a,c,h)),(o=i[1])&&n.push(new Zl(o,c,a,l,h)),(o=i[2])&&n.push(new Zl(o,s,h,c,u)),(o=i[3])&&n.push(new Zl(o,c,h,l,u))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Ql.x=function(t){return arguments.length?(this._x=t,this):this._x},Ql.y=function(t){return arguments.length?(this._y=t,this):this._y};const eu=t=>t instanceof Date,nu=t=>Array.isArray(t),ru=t=>null!==t&&"object"===typeof t&&"Object"===t.constructor.name,iu=t=>eu(t)?su(t):nu(t)?au(t):ru(t)?lu(t):t,ou=(t,e)=>{const n=eu(t),r=eu(e);if(n&&!r||!n&&r)return!1;if(n&&r)return t.getTime()===e.getTime();const i=nu(t),o=nu(e);if(i&&!o||!i&&o)return!1;if(i&&o)return t.length===e.length&&t.every(((t,n)=>ou(t,e[n])));const s=ru(t),a=ru(e);if(s&&!a||!s&&a)return!1;if(s&&a){const n=Object.keys(t),r=Object.keys(e);return!!ou(n,r)&&n.every((n=>ou(t[n],e[n])))}return t===e},su=t=>new Date(t),au=t=>t.map((t=>iu(t))),lu=t=>{const e={};return Object.keys(t).forEach((n=>{e[n]=iu(t[n])})),e};var uu;!function(t){t.TICK="tick",t.END="end",t.SIMULATION_START="simulation-start",t.SIMULATION_PROGRESS="simulation-progress",t.SIMULATION_END="simulation-end",t.NODE_DRAG="node-drag",t.SETTINGS_UPDATE="settings-update"}(uu||(uu={}));const cu={isPhysicsEnabled:!1,alpha:{alpha:1,alphaMin:.001,alphaDecay:.0228,alphaTarget:.1},centering:{x:0,y:0,strength:1},collision:{radius:15,strength:1,iterations:1},links:{distance:30,strength:void 0,iterations:1},manyBody:{strength:-100,theta:.9,distanceMin:0,distanceMax:(hu=30,100*(hu>0?hu:1))},positioning:{forceX:{x:0,strength:.1},forceY:{y:0,strength:.1}}};var hu;class du extends jl{constructor(t){super(),this._edges=[],this._nodes=[],this._nodeIndexByNodeId={},this._isDragging=!1,this._isStabilizing=!1,this.linkForce=function(t){var e,n,r,i,o,s,a=Dl,l=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},u=Rl(30),c=1;function h(r){for(var i=0,a=t.length;i<c;++i)for(var l,u,h,d,f,p,m,g=0;g<a;++g)u=(l=t[g]).source,d=(h=l.target).x+h.vx-u.x-u.vx||Al(s),f=h.y+h.vy-u.y-u.vy||Al(s),d*=p=((p=Math.sqrt(d*d+f*f))-n[g])/p*r*e[g],f*=p,h.vx-=d*(m=o[g]),h.vy-=f*m,u.vx+=d*(m=1-m),u.vy+=f*m}function d(){if(r){var s,l,u=r.length,c=t.length,h=new Map(r.map(((t,e)=>[a(t,e,r),t])));for(s=0,i=new Array(u);s<c;++s)(l=t[s]).index=s,"object"!==typeof l.source&&(l.source=Ll(h,l.source)),"object"!==typeof l.target&&(l.target=Ll(h,l.target)),i[l.source.index]=(i[l.source.index]||0)+1,i[l.target.index]=(i[l.target.index]||0)+1;for(s=0,o=new Array(c);s<c;++s)l=t[s],o[s]=i[l.source.index]/(i[l.source.index]+i[l.target.index]);e=new Array(c),f(),n=new Array(c),p()}}function f(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+l(t[n],n,t)}function p(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}return null==t&&(t=[]),h.initialize=function(t,e){r=t,s=e,d()},h.links=function(e){return arguments.length?(t=e,d(),h):t},h.id=function(t){return arguments.length?(a=t,h):a},h.iterations=function(t){return arguments.length?(c=+t,h):c},h.strength=function(t){return arguments.length?(l="function"===typeof t?t:Rl(+t),f(),h):l},h.distance=function(t){return arguments.length?(u="function"===typeof t?t:Rl(+t),p(),h):u},h}(this._edges).id((t=>t.id)),this.simulation=Wl(this._nodes).force("link",this.linkForce).stop(),this.settings=Object.assign(iu(cu),t),this.initSimulation(this.settings),this.simulation.on("tick",(()=>{this.emit(uu.TICK,{nodes:this._nodes,edges:this._edges})})),this.simulation.on("end",(()=>{this._isDragging=!1,this._isStabilizing=!1,this.emit(uu.END,{nodes:this._nodes,edges:this._edges})}))}getSettings(){return iu(this.settings)}setSettings(t){const e=this.getSettings();Object.keys(t).forEach((e=>{this.settings[e]=t[e]})),ou(this.settings,e)||(this.initSimulation(t),this.emit(uu.SETTINGS_UPDATE,{settings:this.settings}),this.runSimulation({isUpdatingSettings:!0}))}startDragNode(){this._isDragging=!0,!this._isStabilizing&&this.settings.isPhysicsEnabled&&this.activateSimulation()}dragNode(t){const e=this._nodes[this._nodeIndexByNodeId[t.id]];e&&(this._isDragging||this.startDragNode(),e.fx=t.x,e.fy=t.y,this.settings.isPhysicsEnabled||(e.x=t.x,e.y=t.y,this.emit(uu.NODE_DRAG,{nodes:this._nodes,edges:this._edges})))}endDragNode(t){this._isDragging=!1,this.simulation.alphaTarget(0);const e=this._nodes[this._nodeIndexByNodeId[t.id]];e&&this.settings.isPhysicsEnabled&&pu(e)}activateSimulation(){this.settings.isPhysicsEnabled&&(this.simulation.alphaTarget(this.settings.alpha.alphaTarget).restart(),this.releaseNodes())}fixDefinedNodes(t){for(let e=0;e<t.nodes.length;e++)null!==t.nodes[e].x&&void 0!==t.nodes[e].x&&(t.nodes[e].fx=t.nodes[e].x),null!==t.nodes[e].y&&void 0!==t.nodes[e].y&&(t.nodes[e].fy=t.nodes[e].y);return t}addData(t){t=this.fixDefinedNodes(t),this._nodes.concat(t.nodes),this._edges.concat(t.edges),this.setNodeIndexByNodeId()}clearData(){this._nodes=[],this._edges=[],this.setNodeIndexByNodeId()}setData(t){t=this.fixDefinedNodes(t),this.clearData(),this.addData(t)}updateData(t){t=this.fixDefinedNodes(t);const e=new Set(t.nodes.map((t=>t.id))),n=this._nodes.filter((t=>e.has(t.id))),r=t.nodes.filter((t=>void 0===this._nodeIndexByNodeId[t.id]));this._nodes=[...n,...r],this.setNodeIndexByNodeId(),this._edges=t.edges,this.simulation.nodes(this._nodes),this.linkForce.links(this._edges)}simulate(){this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),this.runSimulation(),this.settings.isPhysicsEnabled||this.fixNodes()}startSimulation(t){this.setData(t),this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),this.runSimulation()}updateSimulation(t){const e=new Set(t.nodes.map((t=>t.id))),n=t.nodes.filter((t=>void 0===this._nodeIndexByNodeId[t.id])),r=this._nodes.filter((t=>e.has(t.id)));this.settings.isPhysicsEnabled||r.forEach((t=>fu(t))),this._nodes=[...r,...n],this.setNodeIndexByNodeId(),this._edges=t.edges,this.simulation.nodes(this._nodes),this.linkForce.links(this._edges),this.settings.isPhysicsEnabled||n.length?this.runSimulation({isUpdatingSettings:!0}):this.emit(uu.SIMULATION_END,{nodes:this._nodes,edges:this._edges})}stopSimulation(){this.simulation.stop(),this._nodes=[],this._edges=[],this.setNodeIndexByNodeId(),this.simulation.nodes(),this.linkForce.links()}initSimulation(t){var e,n,r,i;if(t.alpha&&this.simulation.alpha(t.alpha.alpha).alphaMin(t.alpha.alphaMin).alphaDecay(t.alpha.alphaDecay).alphaTarget(t.alpha.alphaTarget),t.links&&this.linkForce.distance(t.links.distance).iterations(t.links.iterations),t.collision){const e=function(t){var e,n,r,i=1,o=1;function s(){for(var t,s,l,u,c,h,d,f=e.length,p=0;p<o;++p)for(s=$l(e,Jl,tu).visitAfter(a),t=0;t<f;++t)l=e[t],h=n[l.index],d=h*h,u=l.x+l.vx,c=l.y+l.vy,s.visit(m);function m(t,e,n,o,s){var a=t.data,f=t.r,p=h+f;if(!a)return e>u+p||o<u-p||n>c+p||s<c-p;if(a.index>l.index){var m=u-a.x-a.vx,g=c-a.y-a.vy,_=m*m+g*g;_<p*p&&(0===m&&(_+=(m=Al(r))*m),0===g&&(_+=(g=Al(r))*g),_=(p-(_=Math.sqrt(_)))/_*i,l.vx+=(m*=_)*(p=(f*=f)/(d+f)),l.vy+=(g*=_)*p,a.vx-=m*(p=1-p),a.vy-=g*p)}}}function a(t){if(t.data)return t.r=n[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function l(){if(e){var r,i,o=e.length;for(n=new Array(o),r=0;r<o;++r)i=e[r],n[i.index]=+t(i,r,e)}}return"function"!==typeof t&&(t=Rl(null==t?1:+t)),s.initialize=function(t,n){e=t,r=n,l()},s.iterations=function(t){return arguments.length?(o=+t,s):o},s.strength=function(t){return arguments.length?(i=+t,s):i},s.radius=function(e){return arguments.length?(t="function"===typeof e?e:Rl(+e),l(),s):t},s}().radius(t.collision.radius).strength(t.collision.strength).iterations(t.collision.iterations);this.simulation.force("collide",e)}if(null===t.collision&&this.simulation.force("collide",null),t.manyBody){const e=function(){var t,e,n,r,i,o=Rl(-30),s=1,a=1/0,l=.81;function u(n){var i,o=t.length,s=$l(t,Fl,ql).visitAfter(h);for(r=n,i=0;i<o;++i)e=t[i],s.visit(d)}function c(){if(t){var e,n,r=t.length;for(i=new Array(r),e=0;e<r;++e)n=t[e],i[n.index]=+o(n,e,t)}}function h(t){var e,n,r,o,s,a=0,l=0;if(t.length){for(r=o=s=0;s<4;++s)(e=t[s])&&(n=Math.abs(e.value))&&(a+=e.value,l+=n,r+=n*e.x,o+=n*e.y);t.x=r/l,t.y=o/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=i[e.data.index]}while(e=e.next)}t.value=a}function d(t,o,u,c){if(!t.value)return!0;var h=t.x-e.x,d=t.y-e.y,f=c-o,p=h*h+d*d;if(f*f/l<p)return p<a&&(0===h&&(p+=(h=Al(n))*h),0===d&&(p+=(d=Al(n))*d),p<s&&(p=Math.sqrt(s*p)),e.vx+=h*t.value*r/p,e.vy+=d*t.value*r/p),!0;if(!(t.length||p>=a)){(t.data!==e||t.next)&&(0===h&&(p+=(h=Al(n))*h),0===d&&(p+=(d=Al(n))*d),p<s&&(p=Math.sqrt(s*p)));do{t.data!==e&&(f=i[t.data.index]*r/p,e.vx+=h*f,e.vy+=d*f)}while(t=t.next)}}return u.initialize=function(e,r){t=e,n=r,c()},u.strength=function(t){return arguments.length?(o="function"===typeof t?t:Rl(+t),c(),u):o},u.distanceMin=function(t){return arguments.length?(s=t*t,u):Math.sqrt(s)},u.distanceMax=function(t){return arguments.length?(a=t*t,u):Math.sqrt(a)},u.theta=function(t){return arguments.length?(l=t*t,u):Math.sqrt(l)},u}().strength(t.manyBody.strength).theta(t.manyBody.theta).distanceMin(t.manyBody.distanceMin).distanceMax(t.manyBody.distanceMax);this.simulation.force("charge",e)}if(null===t.manyBody&&this.simulation.force("charge",null),null===(e=t.positioning)||void 0===e?void 0:e.forceY){const e=function(t){var e,n,r,i=Rl(.1);function o(t){for(var i,o=0,s=e.length;o<s;++o)(i=e[o]).vx+=(r[o]-i.x)*n[o]*t}function s(){if(e){var o,s=e.length;for(n=new Array(s),r=new Array(s),o=0;o<s;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=Rl(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(i="function"===typeof t?t:Rl(+t),s(),o):i},o.x=function(e){return arguments.length?(t="function"===typeof e?e:Rl(+e),s(),o):t},o}(t.positioning.forceX.x).strength(t.positioning.forceX.strength);this.simulation.force("x",e)}if(null===(null===(n=t.positioning)||void 0===n?void 0:n.forceX)&&this.simulation.force("x",null),null===(r=t.positioning)||void 0===r?void 0:r.forceY){const e=function(t){var e,n,r,i=Rl(.1);function o(t){for(var i,o=0,s=e.length;o<s;++o)(i=e[o]).vy+=(r[o]-i.y)*n[o]*t}function s(){if(e){var o,s=e.length;for(n=new Array(s),r=new Array(s),o=0;o<s;++o)n[o]=isNaN(r[o]=+t(e[o],o,e))?0:+i(e[o],o,e)}}return"function"!==typeof t&&(t=Rl(null==t?0:+t)),o.initialize=function(t){e=t,s()},o.strength=function(t){return arguments.length?(i="function"===typeof t?t:Rl(+t),s(),o):i},o.y=function(e){return arguments.length?(t="function"===typeof e?e:Rl(+e),s(),o):t},o}(t.positioning.forceY.y).strength(t.positioning.forceY.strength);this.simulation.force("y",e)}if(null===(null===(i=t.positioning)||void 0===i?void 0:i.forceY)&&this.simulation.force("y",null),t.centering){const e=function(t,e){var n,r=1;function i(){var i,o,s=n.length,a=0,l=0;for(i=0;i<s;++i)a+=(o=n[i]).x,l+=o.y;for(a=(a/s-t)*r,l=(l/s-e)*r,i=0;i<s;++i)(o=n[i]).x-=a,o.y-=l}return null==t&&(t=0),null==e&&(e=0),i.initialize=function(t){n=t},i.x=function(e){return arguments.length?(t=+e,i):t},i.y=function(t){return arguments.length?(e=+t,i):e},i.strength=function(t){return arguments.length?(r=+t,i):r},i}(t.centering.x,t.centering.y).strength(t.centering.strength);this.simulation.force("center",e)}null===t.centering&&this.simulation.force("center",null)}runSimulation(t){if(this._isStabilizing)return;(this.settings.isPhysicsEnabled||(null===t||void 0===t?void 0:t.isUpdatingSettings))&&this.releaseNodes(),this.emit(uu.SIMULATION_START,void 0),this._isStabilizing=!0,this.simulation.alpha(this.settings.alpha.alpha).alphaTarget(this.settings.alpha.alphaTarget).stop();const e=Math.ceil(Math.log(this.settings.alpha.alphaMin)/Math.log(1-this.settings.alpha.alphaDecay));let n=-1;for(let r=0;r<e;r++){const t=Math.round(100*r/e);t>n&&(n=t,this.emit(uu.SIMULATION_PROGRESS,{nodes:this._nodes,edges:this._edges,progress:t/100})),this.simulation.tick()}this.settings.isPhysicsEnabled||this.fixNodes(),this._isStabilizing=!1,this.emit(uu.SIMULATION_END,{nodes:this._nodes,edges:this._edges})}setNodeIndexByNodeId(){this._nodeIndexByNodeId={};for(let t=0;t<this._nodes.length;t++)this._nodeIndexByNodeId[this._nodes[t].id]=t}fixNodes(t){t||(t=this._nodes);for(let e=0;e<t.length;e++)fu(this._nodes[e])}releaseNodes(t){t||(t=this._nodes);for(let e=0;e<t.length;e++)pu(this._nodes[e])}}const fu=t=>{t.fx=t.x,t.fy=t.y},pu=t=>{t.fx=null,t.fy=null};class mu extends jl{constructor(){super(),this.simulator=new du,this.simulator.on(uu.SIMULATION_START,(()=>{this.emit(Ml.SIMULATION_START,void 0)})),this.simulator.on(uu.SIMULATION_PROGRESS,(t=>{this.emit(Ml.SIMULATION_PROGRESS,t)})),this.simulator.on(uu.SIMULATION_END,(t=>{this.emit(Ml.SIMULATION_END,t)})),this.simulator.on(uu.NODE_DRAG,(t=>{this.emit(Ml.NODE_DRAG_END,t)})),this.simulator.on(uu.TICK,(t=>{this.emit(Ml.NODE_DRAG,t)})),this.simulator.on(uu.END,(t=>{this.emit(Ml.NODE_DRAG_END,t)})),this.simulator.on(uu.SETTINGS_UPDATE,(t=>{this.emit(Ml.SETTINGS_UPDATE,t)}))}setData(t,e){this.simulator.setData({nodes:t,edges:e})}addData(t,e){this.simulator.addData({nodes:t,edges:e})}updateData(t,e){this.simulator.updateData({nodes:t,edges:e})}clearData(){this.simulator.clearData()}simulate(){this.simulator.simulate()}activateSimulation(){this.simulator.activateSimulation()}startSimulation(t,e){this.simulator.startSimulation({nodes:t,edges:e})}updateSimulation(t,e){this.simulator.updateSimulation({nodes:t,edges:e})}stopSimulation(){this.simulator.stopSimulation()}startDragNode(){this.simulator.startDragNode()}dragNode(t,e){this.simulator.dragNode(Object.assign({id:t},e))}endDragNode(t){this.simulator.endDragNode({id:t})}fixNodes(t){this.simulator.fixNodes(t)}releaseNodes(t){this.simulator.releaseNodes(t)}setSettings(t){this.simulator.setSettings(t)}terminate(){this.simulator.removeAllListeners(),this.removeAllListeners()}}var gu,_u,yu,vu,bu;!function(t){t.SetData="Set Data",t.AddData="Add Data",t.UpdateData="Update Data",t.ClearData="Clear Data",t.Simulate="Simulate",t.ActivateSimulation="Activate Simulation",t.StartSimulation="Start Simulation",t.UpdateSimulation="Update Simulation",t.StopSimulation="Stop Simulation",t.StartDragNode="Start Drag Node",t.DragNode="Drag Node",t.EndDragNode="End Drag Node",t.FixNodes="Fix Nodes",t.ReleaseNodes="Release Nodes",t.SetSettings="Set Settings"}(gu||(gu={})),function(t){t.SIMULATION_START="simulation-start",t.SIMULATION_PROGRESS="simulation-progress",t.SIMULATION_END="simulation-end",t.NODE_DRAG="node-drag",t.NODE_DRAG_END="node-drag-end",t.SETTINGS_UPDATE="settings-update"}(_u||(_u={}));class wu extends jl{constructor(){super(),this.worker=new Worker(new URL(n.p+n.u(422),n.b),{type:void 0}),this.worker.onmessage=t=>{let{data:e}=t;switch(e.type){case _u.SIMULATION_START:this.emit(Ml.SIMULATION_START,void 0);break;case _u.SIMULATION_PROGRESS:this.emit(Ml.SIMULATION_PROGRESS,e.data);break;case _u.SIMULATION_END:this.emit(Ml.SIMULATION_END,e.data);break;case _u.NODE_DRAG:this.emit(Ml.NODE_DRAG,e.data);break;case _u.NODE_DRAG_END:this.emit(Ml.NODE_DRAG_END,e.data);break;case _u.SETTINGS_UPDATE:this.emit(Ml.SETTINGS_UPDATE,e.data)}}}setData(t,e){this.emitToWorker({type:gu.SetData,data:{nodes:t,edges:e}})}addData(t,e){this.emitToWorker({type:gu.AddData,data:{nodes:t,edges:e}})}updateData(t,e){this.emitToWorker({type:gu.UpdateData,data:{nodes:t,edges:e}})}clearData(){this.emitToWorker({type:gu.ClearData})}simulate(){this.emitToWorker({type:gu.Simulate})}activateSimulation(){this.emitToWorker({type:gu.ActivateSimulation})}startSimulation(t,e){this.emitToWorker({type:gu.StartSimulation,data:{nodes:t,edges:e}})}updateSimulation(t,e){this.emitToWorker({type:gu.UpdateSimulation,data:{nodes:t,edges:e}})}stopSimulation(){this.emitToWorker({type:gu.StopSimulation})}startDragNode(){this.emitToWorker({type:gu.StartDragNode})}dragNode(t,e){this.emitToWorker({type:gu.DragNode,data:Object.assign({id:t},e)})}endDragNode(t){this.emitToWorker({type:gu.EndDragNode,data:{id:t}})}fixNodes(t){this.emitToWorker({type:gu.FixNodes,data:{nodes:t}})}releaseNodes(t){this.emitToWorker({type:gu.ReleaseNodes,data:{nodes:t}})}setSettings(t){this.emitToWorker({type:gu.SetSettings,data:t})}terminate(){this.worker.terminate(),this.removeAllListeners()}emitToWorker(t){this.worker.postMessage(t)}}class Su{static getSimulator(){try{if("undefined"!==typeof Worker)return new wu;throw new Error("WebWorkers are unavailable in your environment.")}catch(t){return console.error("Could not create simulator in a WebWorker context. All calculations will be done in the main thread.",t),new mu}}}!function(t){t.RENDER_START="render-start",t.RENDER_END="render-end",t.SIMULATION_START="simulation-start",t.SIMULATION_STEP="simulation-step",t.SIMULATION_END="simulation-end",t.NODE_CLICK="node-click",t.NODE_HOVER="node-hover",t.EDGE_CLICK="edge-click",t.EDGE_HOVER="edge-hover",t.MOUSE_CLICK="mouse-click",t.MOUSE_MOVE="mouse-move",t.TRANSFORM="transform",t.NODE_DRAG_START="node-drag-start",t.NODE_DRAG="node-drag",t.NODE_DRAG_END="node-drag-end",t.NODE_RIGHT_CLICK="node-right-click",t.EDGE_RIGHT_CLICK="edge-right-click",t.MOUSE_RIGHT_CLICK="mouse-right-click",t.NODE_DOUBLE_CLICK="node-double-click",t.EDGE_DOUBLE_CLICK="edge-double-click",t.MOUSE_DOUBLE_CLICK="mouse-double-click"}(yu||(yu={}));class xu extends jl{}!function(t){t.CANVAS="canvas",t.WEBGL="webgl"}(vu||(vu={})),function(t){t.RENDER_START="render-start",t.RENDER_END="render-end"}(bu||(bu={}));const Eu={fps:60,minZoom:.25,maxZoom:8,fitZoomMargin:.2,labelsIsEnabled:!0,labelsOnEventIsEnabled:!0,shadowIsEnabled:!0,shadowOnEventIsEnabled:!0,contextAlphaOnEvent:.3,contextAlphaOnEventIsEnabled:!0,backgroundColor:null},Cu="Roboto, sans-serif";var ku;!function(t){t.TOP="top",t.MIDDLE="middle"}(ku||(ku={}));class Ou{constructor(t,e){var n,r;this.textLines=[],this.fontSize=4,this.fontFamily=Pu(4,Cu),this.text=`${void 0===t?"":t}`,this.textLines=Mu(this.text),this.position=e.position,this.properties=e.properties,this.textBaseline=e.textBaseline,(void 0!==this.properties.fontSize||this.properties.fontFamily)&&(this.fontSize=Math.max(null!==(n=this.properties.fontSize)&&void 0!==n?n:0,0),this.fontFamily=Pu(this.fontSize,null!==(r=this.properties.fontFamily)&&void 0!==r?r:Cu)),this._fixPosition()}_fixPosition(){if(this.textBaseline===ku.MIDDLE&&this.textLines.length){const t=Math.floor(this.textLines.length/2),e=(this.textLines.length-1)/2;this.position.y-=e*this.fontSize-t*(1.2-1)}}}const Tu=(t,e)=>{e.textLines.length>0&&e.fontSize>0&&e.position&&(Nu(t,e),Iu(t,e))},Nu=(t,e)=>{if(!e.properties.fontBackgroundColor||!e.position)return;t.fillStyle=e.properties.fontBackgroundColor.toString();const n=.12*e.fontSize,r=e.fontSize+2*n,i=1.2*e.fontSize,o=e.textBaseline===ku.MIDDLE?e.fontSize/2:0;for(let s=0;s<e.textLines.length;s++){const a=e.textLines[s],l=t.measureText(a).width+2*n;t.fillRect(e.position.x-l/2,e.position.y-o-n+s*i,l,r)}},Iu=(t,e)=>{var n;if(!e.position)return;t.fillStyle=(null!==(n=e.properties.fontColor)&&void 0!==n?n:"#000000").toString(),t.font=e.fontFamily,t.textBaseline=e.textBaseline,t.textAlign="center";const r=1.2*e.fontSize;for(let i=0;i<e.textLines.length;i++){const n=e.textLines[i];t.fillText(n,e.position.x,e.position.y+i*r)}},Pu=(t,e)=>`${t}px ${e}`,Mu=t=>{const e=t.split("\n"),n=[];for(let r=0;r<e.length;r++){const t=e[r].trim();n.push(t)}return n},ju=(t,e,n)=>{const r=t.startNode.getCenter(),i=t.endNode.getCenter();if(!r||!i)return{x:0,y:0};const o=e;return{x:Math.pow(1-o,2)*r.x+2*o*(1-o)*n.x+Math.pow(o,2)*i.x,y:Math.pow(1-o,2)*r.y+2*o*(1-o)*n.y+Math.pow(o,2)*i.y}},Ru=(t,e)=>{let n,r,i,o=0,s=0,a=1,l={x:0,y:0,t:0};const u=t.getCurvedControlPoint();let c=t.endNode,h=!1;e.id===t.startNode.id&&(c=t.startNode,h=!0);const d=c.getCenter();let f;for(;s<=a&&o<10&&(f=.5*(s+a),l=Object.assign(Object.assign({},ju(t,f,u)),{t:0}),n=c.getDistanceToBorder(),r=Math.sqrt(Math.pow(l.x-d.x,2)+Math.pow(l.y-d.y,2)),i=n-r,!(Math.abs(i)<.2));)i<0?!1===h?s=f:a=f:!1===h?a=f:s=f,o++;return l.t=null!==f&&void 0!==f?f:0,l},Au=(t,e)=>{const n=2*e*Math.PI;return{x:t.x+t.radius*Math.cos(n),y:t.y-t.radius*Math.sin(n)}},Du=(t,e)=>{const n=t.getCircularData();let r=.6,i=1;const o=1;let s,a,l,u=0,c={x:0,y:0,t:0};let h=.5*(r+i);const d=e.getCenter();for(;r<=i&&u<10&&(h=.5*(r+i),c=Object.assign(Object.assign({},Au(n,h)),{t:0}),s=e.getDistanceToBorder(),a=Math.sqrt(Math.pow(c.x-d.x,2)+Math.pow(c.y-d.y,2)),l=s-a,!(Math.abs(l)<.05));)l>0?o>0?r=h:i=h:o>0?i=h:r=h,u++;return c.t=null!==h&&void 0!==h?h:0,c},Lu=(t,e)=>{let n=t.endNode,r=t.startNode;e.id===t.startNode.id&&(n=t.startNode,r=t.endNode);const i=n.getCenter(),o=r.getCenter(),s=i.x-o.x,a=i.y-o.y,l=Math.sqrt(s*s+a*a),u=(l-e.getDistanceToBorder())/l;return{x:(1-u)*o.x+u*i.x,y:(1-u)*o.y+u*i.y,t:0}},Uu=(t,e)=>{const n=e.getLabel();if(!n)return;const r=new Ou(n,{position:e.getCenter(),textBaseline:ku.MIDDLE,properties:{fontBackgroundColor:e.style.fontBackgroundColor,fontColor:e.style.fontColor,fontFamily:e.style.fontFamily,fontSize:e.style.fontSize}});Tu(t,r)},zu=(t,e)=>{if(e instanceof Ti)return((t,e)=>{const n=e.startNode.getCenter(),r=e.endNode.getCenter();n&&r&&(t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(r.x,r.y),t.stroke())})(t,e);if(e instanceof Ni)return((t,e)=>{const n=e.startNode.getCenter(),r=e.endNode.getCenter();if(!n||!r)return;const i=e.getCurvedControlPoint();t.beginPath(),t.moveTo(n.x,n.y),t.quadraticCurveTo(i.x,i.y,r.x,r.y),t.stroke()})(t,e);if(e instanceof Ii)return((t,e)=>{const{x:n,y:r,radius:i}=e.getCircularData();t.beginPath(),t.arc(n,r,i,0,2*Math.PI,!1),t.closePath(),t.stroke()})(t,e);throw new Error("Failed to draw unsupported edge type")},Bu=(t,e)=>{if(0===e.style.arrowSize)return;const n=Fu(e),r=Vu([{x:0,y:0},{x:-1,y:.4},{x:-1,y:-.4}],n);t.beginPath();for(let i=0;i<r.length;i++){const e=r[i];0!==i?t.lineTo(e.x,e.y):t.moveTo(e.x,e.y)}t.closePath(),t.fill()},Fu=t=>{if(t instanceof Ti)return(t=>{var e,n;const r=null!==(e=t.style.arrowSize)&&void 0!==e?e:1,i=null!==(n=t.getWidth())&&void 0!==n?n:1,o=t.startNode.getCenter(),s=t.endNode.getCenter(),a=Math.atan2(s.y-o.y,s.x-o.x),l=Lu(t,t.endNode),u=1.5*r+3*i;return{point:l,core:{x:l.x-.9*u*Math.cos(a),y:l.y-.9*u*Math.sin(a)},angle:a,length:u}})(t);if(t instanceof Ni)return(t=>{var e,n;const r=null!==(e=t.style.arrowSize)&&void 0!==e?e:1,i=null!==(n=t.getWidth())&&void 0!==n?n:1,o=t.endNode,s=t.getCurvedControlPoint(),a=Ru(t,o),l=ju(t,Math.max(0,Math.min(1,a.t+-.1)),s),u=Math.atan2(a.y-l.y,a.x-l.x),c=1.5*r+3*i;return{point:a,core:{x:a.x-.9*c*Math.cos(u),y:a.y-.9*c*Math.sin(u)},angle:u,length:c}})(t);if(t instanceof Ii)return(t=>{var e,n;const r=null!==(e=t.style.arrowSize)&&void 0!==e?e:1,i=null!==(n=t.getWidth())&&void 0!==n?n:1,o=t.startNode,s=Du(t,o),a=-2*s.t*Math.PI+.45*Math.PI,l=1.5*r+3*i;return{point:s,core:{x:s.x-.9*l*Math.cos(a),y:s.y-.9*l*Math.sin(a)},angle:a,length:l}})(t);throw new Error("Failed to draw unsupported edge type")},qu=(t,e)=>{const n=e.getWidth();n>0&&(t.lineWidth=n);const r=e.getColor();r&&(t.strokeStyle=r.toString(),t.fillStyle=r.toString())},Hu=(t,e)=>{e.style.shadowColor&&(t.shadowColor=e.style.shadowColor.toString()),e.style.shadowSize&&(t.shadowBlur=e.style.shadowSize),e.style.shadowOffsetX&&(t.shadowOffsetX=e.style.shadowOffsetX),e.style.shadowOffsetY&&(t.shadowOffsetY=e.style.shadowOffsetY)},Wu=(t,e)=>{e.style.shadowColor&&(t.shadowColor="rgba(0,0,0,0)"),e.style.shadowSize&&(t.shadowBlur=0),e.style.shadowOffsetX&&(t.shadowOffsetX=0),e.style.shadowOffsetY&&(t.shadowOffsetY=0)},Vu=(t,e)=>{const n=e.point.x,r=e.point.y,i=e.angle,o=e.length;for(let s=0;s<t.length;s++){const e=t[s],a=e.x*Math.cos(i)-e.y*Math.sin(i),l=e.x*Math.sin(i)+e.y*Math.cos(i);e.x=n+o*a,e.y=r+o*l}return t},Zu=(t,e,n,r,i)=>{t.beginPath(),t.moveTo(e+r,n);const o=2*Math.PI/i;for(let s=1;s<i;s++)t.lineTo(e+r*Math.cos(o*s),n+r*Math.sin(o*s));t.closePath()},Gu=(t,e)=>{const n=e.getCenter(),r=e.getRadius();switch(e.style.shape){case yi.SQUARE:((t,e,n,r)=>{t.beginPath(),t.rect(e-r,n-r,2*r,2*r),t.closePath()})(t,n.x,n.y,r);break;case yi.DIAMOND:((t,e,n,r)=>{t.beginPath(),t.lineTo(e,n+r),t.lineTo(e+r,n),t.lineTo(e,n-r),t.lineTo(e-r,n),t.closePath()})(t,n.x,n.y,r);break;case yi.TRIANGLE:((t,e,n,r)=>{t.beginPath(),n+=.275*(r*=1.15);const i=2*r,o=Math.sqrt(3)*i/6,s=Math.sqrt(i*i-r*r);t.moveTo(e,n-(s-o)),t.lineTo(e+r,n+o),t.lineTo(e-r,n+o),t.lineTo(e,n-(s-o)),t.closePath()})(t,n.x,n.y,r);break;case yi.TRIANGLE_DOWN:((t,e,n,r)=>{t.beginPath(),n-=.275*(r*=1.15);const i=2*r,o=Math.sqrt(3)*i/6,s=Math.sqrt(i*i-r*r);t.moveTo(e,n+(s-o)),t.lineTo(e+r,n-o),t.lineTo(e-r,n-o),t.lineTo(e,n+(s-o)),t.closePath()})(t,n.x,n.y,r);break;case yi.STAR:((t,e,n,r)=>{t.beginPath(),n+=.1*(r*=.82);for(let i=0;i<10;i++){const o=r*(i%2===0?1.3:.5),s=e+o*Math.sin(2*i*Math.PI/10),a=n-o*Math.cos(2*i*Math.PI/10);t.lineTo(s,a)}t.closePath()})(t,n.x,n.y,r);break;case yi.HEXAGON:((t,e,n,r)=>{Zu(t,e,n,r,6)})(t,n.x,n.y,r);break;default:((t,e,n,r)=>{t.beginPath(),t.arc(e,n,r,0,2*Math.PI,!1),t.closePath()})(t,n.x,n.y,r)}},Yu=(t,e)=>{const n=e.getLabel();if(!n)return;const r=e.getCenter(),i=1.2*e.getBorderedRadius(),o=new Ou(n,{position:{x:r.x,y:r.y+i},textBaseline:ku.TOP,properties:{fontBackgroundColor:e.style.fontBackgroundColor,fontColor:e.style.fontColor,fontFamily:e.style.fontFamily,fontSize:e.style.fontSize}});Tu(t,o)},$u=(t,e,n)=>{if(!n.width||!n.height)return;const r=e.getCenter(),i=e.getRadius(),o=Math.max(2*i/n.width,2*i/n.height),s=n.height*o,a=n.width*o;t.save(),t.clip(),t.drawImage(n,r.x-a/2,r.y-s/2,a,s),t.restore()},Ku=(t,e)=>{if(e.hasBorder()){t.lineWidth=e.getBorderWidth();const n=e.getBorderColor();n&&(t.strokeStyle=n.toString())}const n=e.getColor();n&&(t.fillStyle=n.toString())},Xu=(t,e)=>{e.style.shadowColor&&(t.shadowColor=e.style.shadowColor.toString()),e.style.shadowSize&&(t.shadowBlur=e.style.shadowSize),e.style.shadowOffsetX&&(t.shadowOffsetX=e.style.shadowOffsetX),e.style.shadowOffsetY&&(t.shadowOffsetY=e.style.shadowOffsetY)},Qu=(t,e)=>{e.style.shadowColor&&(t.shadowColor="rgba(0,0,0,0)"),e.style.shadowSize&&(t.shadowBlur=0),e.style.shadowOffsetX&&(t.shadowOffsetX=0),e.style.shadowOffsetY&&(t.shadowOffsetY=0)},Ju=function(t){let e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,r=!1,i=Date.now();return function(){const o=arguments,s=Date.now();if(!r)return t(...o),i=s,void(r=!0);clearTimeout(e);const a=Math.max(n-(s-i),0);e=setTimeout((()=>{s-i>=n&&(t(...o),i=s)}),a)}},tc=t=>{const e=Math.max(t,1);return Math.round(1e3/e)};class ec extends jl{constructor(t,e){super(),this._isOriginCentered=!1,this._isInitiallyRendered=!1,this._context=t,this.width=640,this.height=480,this.transform=Sl,this._settings=Object.assign(Object.assign({},Eu),e),this._throttleRender=Ju((t=>{this._render(t)}),tc(this._settings.fps))}get isInitiallyRendered(){return this._isInitiallyRendered}getSettings(){return iu(this._settings)}setSettings(t){const e=t.fps&&t.fps!==this._settings.fps;this._settings=Object.assign(Object.assign({},this._settings),t),e&&(this._throttleRender=Ju((t=>{this._render(t)}),tc(this._settings.fps)))}render(t){this._throttleRender(t)}_render(t){if(!t.getNodeCount())return;this.emit(bu.RENDER_START,void 0);const e=Date.now();this._context.clearRect(0,0,this.width,this.height),this._settings.backgroundColor&&(this._context.fillStyle=this._settings.backgroundColor.toString(),this._context.fillRect(0,0,this.width,this.height)),this._context.save(),this._context.translate(this.transform.x,this.transform.y),this._context.scale(this.transform.k,this.transform.k),this._isOriginCentered&&this._context.translate(this.width/2,this.height/2),this.drawObjects(t.getEdges()),this.drawObjects(t.getNodes()),this._context.restore(),this.emit(bu.RENDER_END,{durationMs:Date.now()-e}),this._isInitiallyRendered=!0}drawObjects(t){if(0===t.length)return;const e=[],n=[];for(let i=0;i<t.length;i++){const r=t[i];r.isSelected()&&e.push(r),r.isHovered()&&n.push(r)}const r=e.length||n.length;this._settings.contextAlphaOnEventIsEnabled&&r&&(this._context.globalAlpha=this._settings.contextAlphaOnEvent);for(let i=0;i<t.length;i++){const e=t[i];e.isSelected()||e.isHovered()||this.drawObject(e,{isLabelEnabled:this._settings.labelsIsEnabled,isShadowEnabled:this._settings.shadowIsEnabled})}this._settings.contextAlphaOnEventIsEnabled&&r&&(this._context.globalAlpha=1);for(let i=0;i<e.length;i++)this.drawObject(e[i],{isLabelEnabled:this._settings.labelsOnEventIsEnabled,isShadowEnabled:this._settings.shadowOnEventIsEnabled});for(let i=0;i<n.length;i++)this.drawObject(n[i],{isLabelEnabled:this._settings.labelsOnEventIsEnabled,isShadowEnabled:this._settings.shadowOnEventIsEnabled})}drawObject(t,e){bi(t)?((t,e,n)=>{var r,i;const o=null===(r=null===n||void 0===n?void 0:n.isShadowEnabled)||void 0===r||r,s=null===(i=null===n||void 0===n?void 0:n.isLabelEnabled)||void 0===i||i,a=e.hasShadow();Ku(t,e),o&&a&&Xu(t,e),Gu(t,e),t.fill();const l=e.getBackgroundImage();l&&$u(t,e,l),o&&a&&Qu(t,e),e.hasBorder()&&t.stroke(),s&&Yu(t,e)})(this._context,t,e):((t,e,n)=>{var r,i;if(!e.getWidth())return;const o=null===(r=null===n||void 0===n?void 0:n.isShadowEnabled)||void 0===r||r,s=null===(i=null===n||void 0===n?void 0:n.isLabelEnabled)||void 0===i||i,a=e.hasShadow();qu(t,e),o&&a&&Hu(t,e),Bu(t,e),zu(t,e),o&&a&&Wu(t,e),s&&Uu(t,e)})(this._context,t,e)}reset(){this.transform=Sl,this._context.clearRect(0,0,this.width,this.height),this._context.save()}getFitZoomTransform(t){const e=t.getBoundingBox(),n=e.x+e.width/2,r=e.y+e.height/2,i=this.getSimulationViewRectangle(),o=i.height/(e.height*(1+this._settings.fitZoomMargin)),s=i.width/(e.width*(1+this._settings.fitZoomMargin)),a=Math.min(o,s),l=this.transform.k,u=Math.max(Math.min(a*l,this._settings.maxZoom),this._settings.minZoom),c=i.width/2*l*(1-u)-n*u,h=i.height/2*l*(1-u)-r*u;return Sl.translate(c,h).scale(u)}getSimulationPosition(t){const[e,n]=this.transform.invert([t.x,t.y]);return{x:e-this.width/2,y:n-this.height/2}}getSimulationViewRectangle(){const t=this.getSimulationPosition({x:0,y:0}),e=this.getSimulationPosition({x:this.width,y:this.height});return{x:t.x,y:t.y,width:e.x-t.x,height:e.y-t.y}}translateOriginToCenter(){this._isOriginCentered=!0}}class nc extends jl{constructor(t,e){super(),this._context=t,console.log("context",this._context),this.width=640,this.height=480,this.transform=Sl,this._settings=Object.assign(Object.assign({},Eu),e)}get isInitiallyRendered(){throw new Error("Method not implemented.")}getSettings(){return iu(this._settings)}setSettings(t){this._settings=Object.assign(Object.assign({},this._settings),t)}render(t){throw console.log("graph:",t),new Error("Method not implemented.")}reset(){throw new Error("Method not implemented.")}getFitZoomTransform(t){throw console.log("graph:",t),new Error("Method not implemented.")}getSimulationPosition(t){throw console.log("canvasPoint:",t),new Error("Method not implemented.")}getSimulationViewRectangle(){throw new Error("Method not implemented.")}translateOriginToCenter(){throw new Error("Method not implemented.")}}class rc extends Error{constructor(t){super(t),this.message=t,Object.setPrototypeOf(this,new.target.prototype),this.name=this.constructor.name}}class ic{static getRenderer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vu.CANVAS,n=arguments.length>2?arguments[2]:void 0;if(e===vu.WEBGL){const e=t.getContext("webgl2");if(!e)throw new rc("Failed to create WebGL context.");return new nc(e,n)}const r=t.getContext("2d");if(!r)throw new rc("Failed to create Canvas context.");return new ec(r,n)}}const oc=/^\s*0+\s*(?:px|rem|em|vh|vw)?\s*$/i,sc=t=>null===t||void 0===t||""===t||oc.test(t);class ac{constructor(t,e){var n;this._isSimulating=!1,this._simulationStartedAt=Date.now(),this.dragSubject=t=>{var e;const n=this.getCanvasMousePosition(t.sourceEvent),r=null===(e=this._renderer)||void 0===e?void 0:e.getSimulationPosition(n);return this._graph.getNearestNode(r)},this.dragStarted=t=>{const e=this.getCanvasMousePosition(t.sourceEvent),n=this._renderer.getSimulationPosition(e);this._events.emit(yu.NODE_DRAG_START,{node:t.subject,event:t.sourceEvent,localPoint:n,globalPoint:e}),this._dragStartPosition=e},this.dragged=t=>{const e=this.getCanvasMousePosition(t.sourceEvent),n=this._renderer.getSimulationPosition(e);Pl(this._dragStartPosition,e)||(this._dragStartPosition=void 0),this._simulator.dragNode(t.subject.id,n),this._events.emit(yu.NODE_DRAG,{node:t.subject,event:t.sourceEvent,localPoint:n,globalPoint:e})},this.dragEnded=t=>{const e=this.getCanvasMousePosition(t.sourceEvent),n=this._renderer.getSimulationPosition(e);Pl(this._dragStartPosition,e)||this._simulator.endDragNode(t.subject.id),this._events.emit(yu.NODE_DRAG_END,{node:t.subject,event:t.sourceEvent,localPoint:n,globalPoint:e})},this.zoomed=t=>{this._renderer.transform=t.transform,setTimeout((()=>{this._renderer.render(this._graph),this._events.emit(yu.TRANSFORM,{transform:t.transform})}),1)},this.mouseMoved=t=>{const e=this.getCanvasMousePosition(t),n=this._renderer.getSimulationPosition(e);if(this._strategy.onMouseMove){const r=this._strategy.onMouseMove(this._graph,n),i=r.changedSubject;i&&r.isStateChanged&&(bi(i)&&this._events.emit(yu.NODE_HOVER,{node:i,event:t,localPoint:n,globalPoint:e}),Ci(i)&&this._events.emit(yu.EDGE_HOVER,{edge:i,event:t,localPoint:n,globalPoint:e})),this._events.emit(yu.MOUSE_MOVE,{subject:i,event:t,localPoint:n,globalPoint:e}),r.isStateChanged&&this._renderer.render(this._graph)}},this.mouseClicked=t=>{const e=this.getCanvasMousePosition(t),n=this._renderer.getSimulationPosition(e);if(this._strategy.onMouseClick){const r=this._strategy.onMouseClick(this._graph,n),i=r.changedSubject;i&&(bi(i)&&this._events.emit(yu.NODE_CLICK,{node:i,event:t,localPoint:n,globalPoint:e}),Ci(i)&&this._events.emit(yu.EDGE_CLICK,{edge:i,event:t,localPoint:n,globalPoint:e})),this._events.emit(yu.MOUSE_CLICK,{subject:i,event:t,localPoint:n,globalPoint:e}),(r.isStateChanged||r.changedSubject)&&this._renderer.render(this._graph)}},this.mouseRightClicked=t=>{const e=this.getCanvasMousePosition(t),n=this._renderer.getSimulationPosition(e);if(this._strategy.onMouseRightClick){const r=this._strategy.onMouseRightClick(this._graph,n),i=r.changedSubject;i&&(bi(i)&&this._events.emit(yu.NODE_RIGHT_CLICK,{node:i,event:t,localPoint:n,globalPoint:e}),Ci(i)&&this._events.emit(yu.EDGE_RIGHT_CLICK,{edge:i,event:t,localPoint:n,globalPoint:e})),this._events.emit(yu.MOUSE_RIGHT_CLICK,{subject:i,event:t,localPoint:n,globalPoint:e}),(r.isStateChanged||r.changedSubject)&&this._renderer.render(this._graph)}},this.mouseDoubleClicked=t=>{const e=this.getCanvasMousePosition(t),n=this._renderer.getSimulationPosition(e);if(this._strategy.onMouseDoubleClick){const r=this._strategy.onMouseDoubleClick(this._graph,n),i=r.changedSubject;i&&(bi(i)&&this._events.emit(yu.NODE_DOUBLE_CLICK,{node:i,event:t,localPoint:n,globalPoint:e}),Ci(i)&&this._events.emit(yu.EDGE_DOUBLE_CLICK,{edge:i,event:t,localPoint:n,globalPoint:e})),this._events.emit(yu.MOUSE_DOUBLE_CLICK,{subject:i,event:t,localPoint:n,globalPoint:e}),(r.isStateChanged||r.changedSubject)&&this._renderer.render(this._graph)}},this._container=t.container,this._graph=t.graph,this._events=t.events,this._strategy=t.strategy,this._settings=Object.assign(Object.assign({getPosition:null===e||void 0===e?void 0:e.getPosition,zoomFitTransitionMs:200,isOutOfBoundsDragEnabled:!1,areCoordinatesRounded:!0,isSimulationAnimated:!0,areCollapsedContainerDimensionsAllowed:!1},e),{simulation:Object.assign({isPhysicsEnabled:!1},null===e||void 0===e?void 0:e.simulation),render:Object.assign({},null===e||void 0===e?void 0:e.render)}),function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.style.position="relative";const n=getComputedStyle(t);n.display||(t.style.display="block",console.warn("[Orb] Graph container doesn't have defined 'display' property. Setting 'display' to 'block'...")),!e&&sc(n.width)&&(t.style.width="100%",sc(getComputedStyle(t).width)?(t.style.width="400px",console.warn("[Orb] The graph container element and its parent don't have defined width properties.","If you are using percentage values,","please make sure that the parent element of the graph container has a defined position and width.","Setting the width of the graph container to an arbitrary value of '400px'...")):console.warn("[Orb] The graph container element doesn't have defined width. Setting width to 100%...")),!e&&sc(n.height)&&(t.style.height="100%",sc(getComputedStyle(t).height)?(t.style.height="400px",console.warn("[Orb] The graph container element and its parent don't have defined height properties.","If you are using percentage values,","please make sure that the parent element of the graph container has a defined position and height.","Setting the height of the graph container to an arbitrary value of '400px'...")):console.warn("[Orb] Graph container doesn't have defined height. Setting height to 100%..."))}(this._container,this._settings.areCollapsedContainerDimensionsAllowed),this._canvas=this._initCanvas();try{this._renderer=ic.getRenderer(this._canvas,null===(n=null===e||void 0===e?void 0:e.render)||void 0===n?void 0:n.type,this._settings.render)}catch(r){throw this._container.textContent=r.message,r}this._renderer.on(bu.RENDER_START,(()=>{this._events.emit(yu.RENDER_START,void 0)})),this._renderer.on(bu.RENDER_END,(t=>{this._events.emit(yu.RENDER_END,t)})),this._renderer.translateOriginToCenter(),this._settings.render=this._renderer.getSettings(),this._resizeObs=new ResizeObserver((()=>this._handleResize())),this._resizeObs.observe(this._container),this._handleResize(),this._d3Zoom=function(){var t,e,n,r=Cl,i=kl,o=Il,s=Tl,a=Nl,l=[0,1/0],u=[[-1/0,-1/0],[1/0,1/0]],c=250,h=_s,d=Bi("start","zoom","end"),f=500,p=150,m=0,g=10;function _(t){t.property("__zoom",Ol).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",C).on("dblclick.zoom",k).filter(a).on("touchstart.zoom",O).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",N).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(t,e){return(e=Math.max(l[0],Math.min(l[1],e)))===t.k?t:new wl(e,t.x,t.y)}function v(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new wl(t.k,r,i)}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function w(t,e,n,r){t.on("start.zoom",(function(){S(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){S(this,arguments).event(r).end()})).tween("zoom",(function(){var t=this,o=arguments,s=S(t,o).event(r),a=i.apply(t,o),l=null==n?b(a):"function"===typeof n?n.apply(t,o):n,u=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=t.__zoom,d="function"===typeof e?e.apply(t,o):e,f=h(c.invert(l).concat(u/c.k),d.invert(l).concat(u/d.k));return function(t){if(1===t)t=d;else{var e=f(t),n=u/e[2];t=new wl(n,l[0]-e[0]*n,l[1]-e[1]*n)}s.zoom(null,t)}}))}function S(t,e,n){return!n&&t.__zooming||new x(t,e)}function x(t,e){this.that=t,this.args=e,this.active=0,this.sourceEvent=null,this.extent=i.apply(t,e),this.taps=0}function E(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(r.apply(this,arguments)){var a=S(this,n).event(t),c=this.__zoom,h=Math.max(l[0],Math.min(l[1],c.k*Math.pow(2,s.apply(this,arguments)))),d=ns(t);if(a.wheel)a.mouse[0][0]===d[0]&&a.mouse[0][1]===d[1]||(a.mouse[1]=c.invert(a.mouse[0]=d)),clearTimeout(a.wheel);else{if(c.k===h)return;a.mouse=[d,c.invert(d)],Ks(this),a.start()}El(t),a.wheel=setTimeout((function(){a.wheel=null,a.end()}),p),a.zoom("mouse",o(v(y(c,h),a.mouse[0],a.mouse[1]),a.extent,u))}}function C(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];if(!n&&r.apply(this,arguments)){var a=t.currentTarget,l=S(this,i,!0).event(t),c=es(t.view).on("mousemove.zoom",(function(t){if(El(t),!l.moved){var e=t.clientX-d,n=t.clientY-f;l.moved=e*e+n*n>m}l.event(t).zoom("mouse",o(v(l.that.__zoom,l.mouse[0]=ns(t,a),l.mouse[1]),l.extent,u))}),!0).on("mouseup.zoom",(function(t){c.on("mousemove.zoom mouseup.zoom",null),ls(t.view,l.moved),El(t),l.event(t).end()}),!0),h=ns(t,a),d=t.clientX,f=t.clientY;as(t.view),xl(t),l.mouse=[h,this.__zoom.invert(h)],Ks(this),l.start()}}function k(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];if(r.apply(this,arguments)){var a=this.__zoom,l=ns(t.changedTouches?t.changedTouches[0]:t,this),h=a.invert(l),d=a.k*(t.shiftKey?.5:2),f=o(v(y(a,d),l,h),i.apply(this,n),u);El(t),c>0?es(this).transition().duration(c).call(w,f,l,t):es(this).call(_.transform,f,l,t)}}function O(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];if(r.apply(this,arguments)){var a,l,u,c,h=n.touches,d=h.length,p=S(this,o,n.changedTouches.length===d).event(n);for(xl(n),l=0;l<d;++l)c=[c=ns(u=h[l],this),this.__zoom.invert(c),u.identifier],p.touch0?p.touch1||p.touch0[2]===c[2]||(p.touch1=c,p.taps=0):(p.touch0=c,a=!0,p.taps=1+!!t);t&&(t=clearTimeout(t)),a&&(p.taps<2&&(e=c[0],t=setTimeout((function(){t=null}),f)),Ks(this),p.start())}}function T(t){if(this.__zooming){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i,s,a,l,c=S(this,n).event(t),h=t.changedTouches,d=h.length;for(El(t),i=0;i<d;++i)a=ns(s=h[i],this),c.touch0&&c.touch0[2]===s.identifier?c.touch0[0]=a:c.touch1&&c.touch1[2]===s.identifier&&(c.touch1[0]=a);if(s=c.that.__zoom,c.touch1){var f=c.touch0[0],p=c.touch0[1],m=c.touch1[0],g=c.touch1[1],_=(_=m[0]-f[0])*_+(_=m[1]-f[1])*_,b=(b=g[0]-p[0])*b+(b=g[1]-p[1])*b;s=y(s,Math.sqrt(_/b)),a=[(f[0]+m[0])/2,(f[1]+m[1])/2],l=[(p[0]+g[0])/2,(p[1]+g[1])/2]}else{if(!c.touch0)return;a=c.touch0[0],l=c.touch0[1]}c.zoom("touch",o(v(s,a,l),c.extent,u))}}function N(t){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];if(this.__zooming){var s,a,l=S(this,i).event(t),u=t.changedTouches,c=u.length;for(xl(t),n&&clearTimeout(n),n=setTimeout((function(){n=null}),f),s=0;s<c;++s)a=u[s],l.touch0&&l.touch0[2]===a.identifier?delete l.touch0:l.touch1&&l.touch1[2]===a.identifier&&delete l.touch1;if(l.touch1&&!l.touch0&&(l.touch0=l.touch1,delete l.touch1),l.touch0)l.touch0[1]=this.__zoom.invert(l.touch0[0]);else if(l.end(),2===l.taps&&(a=ns(a,this),Math.hypot(e[0]-a[0],e[1]-a[1])<g)){var h=es(this).on("dblclick.zoom");h&&h.apply(this,arguments)}}}return _.transform=function(t,e,n,r){var i=t.selection?t.selection():t;i.property("__zoom",Ol),t!==i?w(t,e,n,r):i.interrupt().each((function(){S(this,arguments).event(r).start().zoom(null,"function"===typeof e?e.apply(this,arguments):e).end()}))},_.scaleBy=function(t,e,n,r){_.scaleTo(t,(function(){return this.__zoom.k*("function"===typeof e?e.apply(this,arguments):e)}),n,r)},_.scaleTo=function(t,e,n,r){_.transform(t,(function(){var t=i.apply(this,arguments),r=this.__zoom,s=null==n?b(t):"function"===typeof n?n.apply(this,arguments):n,a=r.invert(s),l="function"===typeof e?e.apply(this,arguments):e;return o(v(y(r,l),s,a),t,u)}),n,r)},_.translateBy=function(t,e,n,r){_.transform(t,(function(){return o(this.__zoom.translate("function"===typeof e?e.apply(this,arguments):e,"function"===typeof n?n.apply(this,arguments):n),i.apply(this,arguments),u)}),null,r)},_.translateTo=function(t,e,n,r,s){_.transform(t,(function(){var t=i.apply(this,arguments),s=this.__zoom,a=null==r?b(t):"function"===typeof r?r.apply(this,arguments):r;return o(Sl.translate(a[0],a[1]).scale(s.k).translate("function"===typeof e?-e.apply(this,arguments):-e,"function"===typeof n?-n.apply(this,arguments):-n),t,u)}),r,s)},x.prototype={event:function(t){return t&&(this.sourceEvent=t),this},start:function(){return 1===++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0===--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){var e=es(this.that).datum();d.call(t,this.that,new bl(t,{sourceEvent:this.sourceEvent,target:_,type:t,transform:this.that.__zoom,dispatch:d}),e)}},_.wheelDelta=function(t){return arguments.length?(s="function"===typeof t?t:vl(+t),_):s},_.filter=function(t){return arguments.length?(r="function"===typeof t?t:vl(!!t),_):r},_.touchable=function(t){return arguments.length?(a="function"===typeof t?t:vl(!!t),_):a},_.extent=function(t){return arguments.length?(i="function"===typeof t?t:vl([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),_):i},_.scaleExtent=function(t){return arguments.length?(l[0]=+t[0],l[1]=+t[1],_):[l[0],l[1]]},_.translateExtent=function(t){return arguments.length?(u[0][0]=+t[0][0],u[1][0]=+t[1][0],u[0][1]=+t[0][1],u[1][1]=+t[1][1],_):[[u[0][0],u[0][1]],[u[1][0],u[1][1]]]},_.constrain=function(t){return arguments.length?(o=t,_):o},_.duration=function(t){return arguments.length?(c=+t,_):c},_.interpolate=function(t){return arguments.length?(h=t,_):h},_.on=function(){var t=d.on.apply(d,arguments);return t===d?_:t},_.clickDistance=function(t){return arguments.length?(m=(t=+t)*t,_):Math.sqrt(m)},_.tapDistance=function(t){return arguments.length?(g=+t,_):g},_}().scaleExtent([this._renderer.getSettings().minZoom,this._renderer.getSettings().maxZoom]).on("zoom",this.zoomed),es(this._canvas).call(function(){var t,e,n,r,i=hs,o=ds,s=fs,a=ps,l={},u=Bi("start","drag","end"),c=0,h=0;function d(t){t.on("mousedown.drag",f).filter(a).on("touchstart.drag",g).on("touchmove.drag",_,rs).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function f(s,a){if(!r&&i.call(this,s,a)){var l=v(this,o.call(this,s,a),s,a,"mouse");l&&(es(s.view).on("mousemove.drag",p,is).on("mouseup.drag",m,is),as(s.view),os(s),n=!1,t=s.clientX,e=s.clientY,l("start",s))}}function p(r){if(ss(r),!n){var i=r.clientX-t,o=r.clientY-e;n=i*i+o*o>h}l.mouse("drag",r)}function m(t){es(t.view).on("mousemove.drag mouseup.drag",null),ls(t.view,n),ss(t),l.mouse("end",t)}function g(t,e){if(i.call(this,t,e)){var n,r,s=t.changedTouches,a=o.call(this,t,e),l=s.length;for(n=0;n<l;++n)(r=v(this,a,t,e,s[n].identifier,s[n]))&&(os(t),r("start",t,s[n]))}}function _(t){var e,n,r=t.changedTouches,i=r.length;for(e=0;e<i;++e)(n=l[r[e].identifier])&&(ss(t),n("drag",t,r[e]))}function y(t){var e,n,i=t.changedTouches,o=i.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),e=0;e<o;++e)(n=l[i[e].identifier])&&(os(t),n("end",t,i[e]))}function v(t,e,n,r,i,o){var a,h,f,p=u.copy(),m=ns(o||n,e);if(null!=(f=s.call(t,new cs("beforestart",{sourceEvent:n,target:d,identifier:i,active:c,x:m[0],y:m[1],dx:0,dy:0,dispatch:p}),r)))return a=f.x-m[0]||0,h=f.y-m[1]||0,function n(o,s,u){var g,_=m;switch(o){case"start":l[i]=n,g=c++;break;case"end":delete l[i],--c;case"drag":m=ns(u||s,e),g=c}p.call(o,t,new cs(o,{sourceEvent:s,subject:f,target:d,identifier:i,active:g,x:m[0]+a,y:m[1]+h,dx:m[0]-_[0],dy:m[1]-_[1],dispatch:p}),r)}}return d.filter=function(t){return arguments.length?(i="function"===typeof t?t:us(!!t),d):i},d.container=function(t){return arguments.length?(o="function"===typeof t?t:us(t),d):o},d.subject=function(t){return arguments.length?(s="function"===typeof t?t:us(t),d):s},d.touchable=function(t){return arguments.length?(a="function"===typeof t?t:us(!!t),d):a},d.on=function(){var t=u.on.apply(u,arguments);return t===u?d:t},d.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,d):Math.sqrt(h)},d}().container(this._canvas).subject(this.dragSubject).on("start",this.dragStarted).on("drag",this.dragged).on("end",this.dragEnded)).call(this._d3Zoom).on("click",this.mouseClicked).on("mousemove",this.mouseMoved).on("contextmenu",this.mouseRightClicked).on("dblclick.zoom",this.mouseDoubleClicked),this._simulator=Su.getSimulator(),this._simulator.on(Ml.SIMULATION_START,(()=>{this._isSimulating=!0,this._simulationStartedAt=Date.now(),this._events.emit(yu.SIMULATION_START,void 0)})),this._simulator.on(Ml.SIMULATION_PROGRESS,(t=>{this._graph.setNodePositions(t.nodes),this._events.emit(yu.SIMULATION_STEP,{progress:t.progress}),this._settings.isSimulationAnimated&&this._renderer.render(this._graph)})),this._simulator.on(Ml.SIMULATION_END,(t=>{var e;this._graph.setNodePositions(t.nodes),this._renderer.render(this._graph),this._isSimulating=!1,null===(e=this._onSimulationEnd)||void 0===e||e.call(this),this._onSimulationEnd=void 0,this._events.emit(yu.SIMULATION_END,{durationMs:Date.now()-this._simulationStartedAt})})),this._simulator.on(Ml.NODE_DRAG,(t=>{this._graph.setNodePositions(t.nodes),this._renderer.render(this._graph)})),this._simulator.on(Ml.SETTINGS_UPDATE,(t=>{this._settings.simulation=t.settings})),this._simulator.setSettings(this._settings.simulation)}isInitiallyRendered(){return this._renderer.isInitiallyRendered}getSettings(){return iu(this._settings)}setSettings(t){t.getPosition&&(this._settings.getPosition=t.getPosition),t.simulation&&(this._settings.simulation=Object.assign(Object.assign({},this._settings.simulation),t.simulation),this._simulator.setSettings(this._settings.simulation)),t.render&&(this._renderer.setSettings(t.render),this._settings.render=this._renderer.getSettings())}render(t){if(this._isSimulating)return this._renderer.render(this._graph),void(null===t||void 0===t||t());if(this._settings.getPosition){const t=this._graph.getNodes();for(let e=0;e<t.length;e++){const n=this._settings.getPosition(t[e]);n&&(t[e].position=Object.assign({id:t[e].id},n))}}this._isSimulating=!0,this._onSimulationEnd=t,this._startSimulation()}recenter(t){const e=this._renderer.getFitZoomTransform(this._graph);es(this._canvas).transition().duration(this._settings.zoomFitTransitionMs).ease(ms).call(this._d3Zoom.transform,e).call((()=>{this._renderer.render(this._graph),null===t||void 0===t||t()}))}destroy(){this._resizeObs.unobserve(this._container),this._renderer.removeAllListeners(),this._simulator.terminate(),this._canvas.outerHTML=""}getCanvasMousePosition(t){var e,n,r,i;const o=this._canvas.getBoundingClientRect();let s=null!==(n=null!==(e=t.clientX)&&void 0!==e?e:t.pageX)&&void 0!==n?n:t.x,a=null!==(i=null!==(r=t.clientY)&&void 0!==r?r:t.pageY)&&void 0!==i?i:t.y;return s-=o.left,a-=o.top,this._settings.areCoordinatesRounded&&(s=Math.floor(s),a=Math.floor(a)),this._settings.isOutOfBoundsDragEnabled||(s=Math.max(0,Math.min(this._renderer.width,s)),a=Math.max(0,Math.min(this._renderer.height,a))),{x:s,y:a}}_initCanvas(){const t=document.createElement("canvas");return t.style.position="absolute",t.style.top="0",t.style.left="0",this._container.appendChild(t),t}_handleResize(){const t=this._container.getBoundingClientRect();this._canvas.width=t.width,this._canvas.height=t.height,this._renderer.width=t.width,this._renderer.height=t.height,this._renderer.isInitiallyRendered&&this._renderer.render(this._graph)}_startSimulation(){const t=this._graph.getNodePositions(),e=this._graph.getEdgePositions();this._simulator.updateData(t,e),this._simulator.simulate()}fixNodes(){this._simulator.fixNodes()}releaseNodes(){this._simulator.releaseNodes()}}new(n(228).TileLayer)("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png");class lc{onMouseClick(t,e){const n=t.getNearestNode(e);if(n)return uc(t,n),{isStateChanged:!0,changedSubject:n};const r=t.getNearestEdge(e);if(r)return cc(t,r),{isStateChanged:!0,changedSubject:r};const{changedCount:i}=hc(t);return{isStateChanged:i>0}}onMouseMove(t,e){const n=t.getNearestNode(e);if(n&&!n.isSelected())return n===this.lastHoveredNode?{changedSubject:n,isStateChanged:!1}:(dc(t,n),this.lastHoveredNode=n,{isStateChanged:!0,changedSubject:n});if(this.lastHoveredNode=void 0,!n){const{changedCount:e}=fc(t);return{isStateChanged:e>0}}return{isStateChanged:!1}}onMouseRightClick(t,e){const n=t.getNearestNode(e);if(n)return uc(t,n),{isStateChanged:!0,changedSubject:n};const r=t.getNearestEdge(e);if(r)return cc(t,r),{isStateChanged:!0,changedSubject:r};const{changedCount:i}=hc(t);return{isStateChanged:i>0}}onMouseDoubleClick(t,e){const n=t.getNearestNode(e);if(n)return uc(t,n),{isStateChanged:!0,changedSubject:n};const r=t.getNearestEdge(e);if(r)return cc(t,r),{isStateChanged:!0,changedSubject:r};const{changedCount:i}=hc(t);return{isStateChanged:i>0}}}const uc=(t,e)=>{hc(t),pc(e,gi,{isStateOverride:!0})},cc=(t,e)=>{hc(t),mc(e,gi,{isStateOverride:!0})},hc=t=>{const e=t.getNodes((t=>t.isSelected()));for(let r=0;r<e.length;r++)e[r].clearState();const n=t.getEdges((t=>t.isSelected()));for(let r=0;r<n.length;r++)n[r].clearState();return{changedCount:e.length+n.length}},dc=(t,e)=>{fc(t),pc(e,_i)},fc=t=>{const e=t.getNodes((t=>t.isHovered()));for(let r=0;r<e.length;r++)e[r].clearState();const n=t.getEdges((t=>t.isHovered()));for(let r=0;r<n.length;r++)n[r].clearState();return{changedCount:e.length+n.length}},pc=(t,e,n)=>{gc(t,n)&&(t.state=e),t.getInEdges().forEach((t=>{t&&gc(t,n)&&(t.state=e),t.startNode&&gc(t.startNode,n)&&(t.startNode.state=e)})),t.getOutEdges().forEach((t=>{t&&gc(t,n)&&(t.state=e),t.endNode&&gc(t.endNode,n)&&(t.endNode.state=e)}))},mc=(t,e,n)=>{gc(t,n)&&(t.state=e),t.startNode&&gc(t.startNode,n)&&(t.startNode.state=e),t.endNode&&gc(t.endNode,n)&&(t.endNode.state=e)},gc=(t,e)=>{const n=null===e||void 0===e?void 0:e.isStateOverride;return n||!n&&!t.state},_c=/^#[a-fA-F0-9]{6}$/;class yc{constructor(t){this.hex=_c.test(null!==t&&void 0!==t?t:"")?t:"#000000",this.rgb=vc(t)}toString(){return this.hex}getDarkerColor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3;return yc.getColorFromRGB({r:this.rgb.r-t*this.rgb.r,g:this.rgb.g-t*this.rgb.g,b:this.rgb.b-t*this.rgb.b})}getLighterColor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.3;return yc.getColorFromRGB({r:this.rgb.r+t*(255-this.rgb.r),g:this.rgb.g+t*(255-this.rgb.g),b:this.rgb.b+t*(255-this.rgb.b)})}getMixedColor(t){return yc.getColorFromRGB({r:(this.rgb.r+t.rgb.r)/2,g:(this.rgb.g+t.rgb.g)/2,b:(this.rgb.b+t.rgb.b)/2})}isEqual(t){return this.rgb.r===t.rgb.r&&this.rgb.g===t.rgb.g&&this.rgb.b===t.rgb.b}static getColorFromRGB(t){const e=Math.round(Math.max(Math.min(t.r,255),0)),n=Math.round(Math.max(Math.min(t.g,255),0)),r=Math.round(Math.max(Math.min(t.b,255),0));return new yc(bc({r:e,g:n,b:r}))}static getRandomColor(){return yc.getColorFromRGB({r:Math.round(255*Math.random()),g:Math.round(255*Math.random()),b:Math.round(255*Math.random())})}}const vc=t=>({r:parseInt(t.substring(1,3),16),g:parseInt(t.substring(3,5),16),b:parseInt(t.substring(5,7),16)}),bc=t=>"#"+((1<<24)+(t.r<<16)+(t.g<<8)+t.b).toString(16).slice(1),wc=["label","name"],Sc={size:5,color:new yc("#1d87c9")},xc={color:new yc("#ababab"),width:.3},Ec=t=>{for(let e=0;e<wc.length;e++){const n=t.data[wc[e]];if(void 0!==n&&null!==n)return`${n}`}};class Cc{constructor(t,e){var n;this.container=t,this._events=new xu,this._graph=new Ri(void 0,{onLoadedImages:()=>{this._view.isInitiallyRendered()&&this._view.render()}}),this._graph.setDefaultStyle({getNodeStyle:t=>Object.assign(Object.assign({},Sc),{label:Ec(t)}),getEdgeStyle:t=>Object.assign(Object.assign({},xc),{label:Ec(t)})}),this._context={container:this.container,graph:this._graph,events:this._events,strategy:null!==(n=null===e||void 0===e?void 0:e.strategy)&&void 0!==n?n:new lc},(null===e||void 0===e?void 0:e.view)?this._view=e.view(this._context):this._view=new ac(this._context)}get data(){return this._graph}get view(){return this._view}get events(){return this._events}setView(t){this._graph.getNodeCount()>0&&this._graph.clearPositions(),this._view&&this._view.destroy(),this._view=t(this._context)}}const kc=n.p+"static/media/orb_logo.8956ce3915ca9959c3a8.png";class Oc extends t.Component{componentDidMount(){this.props.label in Oc.defaultColor||(Oc.defaultColor[this.props.label]=this.props.currentSettings.color)}render(){var t,e;return(0,a.jsxs)(Jr,{title:"Set style of label :"+this.props.label,backdrop:!0,handleClose:this.props.handleClose,buttons:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c,{text:"Close",icon:"fa-solid fa-xmark",onClick:this.props.handleClose}),(0,a.jsx)(c,{text:"Default values",icon:"fa-solid fa-rotate-right",onClick:()=>{this.props.handleStyleSet(this.props.label,"color",Oc.defaultColor[this.props.label]),this.props.handleStyleSet(this.props.label,"size",5),this.props.handleStyleSet(this.props.label,"fontSize",4),this.props.handleStyleSet(this.props.label,"shape",yi.CIRCLE),this.props.handleStyleSet(this.props.label,"label","#label")},color:"is-warning"})]}),children:[(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Color:"}),(0,a.jsx)("div",{className:"control buttons",children:(0,a.jsx)("input",{type:"color",value:this.props.currentSettings.color,className:"input",onChange:t=>this.props.handleStyleSet(this.props.label,"color",t.currentTarget.value)})})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Size:"}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("input",{className:"slider is-fullwidth",type:"range",min:"1",max:"10",step:"1",value:null!==(t=this.props.currentSettings.size)&&void 0!==t?t:5,onChange:t=>this.props.handleStyleSet(this.props.label,"size",t.currentTarget.valueAsNumber)})})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Font size:"}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("input",{className:"slider is-fullwidth",type:"range",min:"0",max:"10",step:"1",value:null!==(e=this.props.currentSettings.fontSize)&&void 0!==e?e:4,onChange:t=>this.props.handleStyleSet(this.props.label,"fontSize",t.currentTarget.valueAsNumber)})})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Shape:"}),(0,a.jsxs)("div",{className:"control buttons has-addons",children:[(0,a.jsx)(c,{icon:"fa-solid fa-circle",color:"undefined"===typeof this.props.currentSettings.shape||this.props.currentSettings.shape===yi.CIRCLE?"is-active":"",onClick:()=>this.props.handleStyleSet(this.props.label,"shape",yi.CIRCLE)},"circle"),(0,a.jsx)(c,{icon:"fa-solid fa-square",color:this.props.currentSettings.shape===yi.SQUARE?"is-active":"",onClick:()=>this.props.handleStyleSet(this.props.label,"shape",yi.SQUARE)},"square"),(0,a.jsx)(c,{icon:"fa-solid fa-diamond",color:this.props.currentSettings.shape===yi.DIAMOND?"is-active":"",onClick:()=>this.props.handleStyleSet(this.props.label,"shape",yi.DIAMOND)},"diamond"),(0,a.jsx)(c,{color:this.props.currentSettings.shape===yi.TRIANGLE?"is-active":"",onClick:()=>this.props.handleStyleSet(this.props.label,"shape",yi.TRIANGLE),children:(0,a.jsx)("span",{className:"icon r-270",children:(0,a.jsx)("i",{className:"fa-solid fa-play"})})},"triangle_up"),(0,a.jsx)(c,{color:this.props.currentSettings.shape===yi.TRIANGLE_DOWN?"is-active":"",onClick:()=>this.props.handleStyleSet(this.props.label,"shape",yi.TRIANGLE_DOWN),children:(0,a.jsx)("span",{className:"icon r-90",children:(0,a.jsx)("i",{className:"fa-solid fa-play"})})},"triangle_down"),(0,a.jsx)(c,{icon:"fa-solid fa-star",color:this.props.currentSettings.shape===yi.STAR?"is-active":"",onClick:()=>this.props.handleStyleSet(this.props.label,"shape",yi.STAR)},"star"),(0,a.jsx)(c,{color:this.props.currentSettings.shape===yi.HEXAGON?"is-active":"",onClick:()=>this.props.handleStyleSet(this.props.label,"shape",yi.HEXAGON),children:(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAABuklEQVR4nO2br0tEQRSFryIGUVbUZNBgMRksmkz+C0bdZjVajVaLy9rUZjUaTGIxCYI/gkXEYhFEkGX1DO8Jwyi83TdvZp7c88FXTPccmGXw3REhhJD4DMMmPM5t5n9TwSq8gV+OD3At4VzBWYTn8ju46yVcTjRjEKZhG3akOPyPXXgCZxPMWxkjcBu+Se/BXd/hLhyLPLsXA5Kd5UcpH9z1CW7CwYg5SrEEL6S64K5XcCVamj6YgUeSnd1Q4W1P4VyUZAWMwh34IXGC237CPTgeOuRfmLO4AV96HDakr3ALDgVNbGEuMtcBA5X1VgJfpOYlO3upgxZ5BheqDG7OWEv6u8iktpPP7P37MCXZHT11oLLew0mfAg5qEMLXlk8BdfiV9/XZp4BYF5uQdn0KSD18VbIAFsACWAALYAEsgAWwABbAAlgAC2ABLIAFsAAWwAJYAAvoBfX/Flf/YaRdgwC+7vsUYD4s3tUgRFnN7BM+BRga8n8/jzd8w9uoXZBwUbsiY6N6ScpG7Zqci9pFSRe1q7I2qpelbdSuy7uofTDhovbJjIvaR1M25omcuUgd5q6LomdzhJD68A2J/j31r84eUgAAAABJRU5ErkJggg==",alt:"hexagon"})})},"hexagon")]})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Label field:"}),(0,a.jsxs)("div",{className:"control buttons has-addons",children:[(0,a.jsx)(c,{text:"<id>",color:"#id"===this.props.currentSettings.label?"is-active":"",onClick:()=>this.props.handleStyleSet(this.props.label,"label","#id")},"#id"),(0,a.jsx)(c,{text:"<label>",color:"undefined"===typeof this.props.currentSettings.label||"#label"===this.props.currentSettings.label?"is-active":"",onClick:()=>this.props.handleStyleSet(this.props.label,"label","#label")},"#label"),this.props.labelFields.length>0&&this.props.labelFields.map((t=>(0,a.jsx)(c,{text:t,color:this.props.currentSettings.label===t?"is-active":"",onClick:()=>this.props.handleStyleSet(this.props.label,"label",t)},t)))]})]})]})}}Oc.defaultColor={};const Tc=Oc;class Nc extends t.Component{constructor(){var t;super(...arguments),t=this,this.isColorDark=t=>{t=t.replace("#","");const e=parseInt(t,16);return.2126*(e>>16&255)+.7152*(e>>8&255)+.0722*(255&e)<175},this.labelButton=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,a.jsxs)("button",{className:"button tag is-rounded px-2 is-medium "+(t.isColorDark(t.props.nodeStyles[e].color)?"has-text-white":"has-text-black"),style:{backgroundColor:t.props.nodeStyles[e].color},onClick:()=>n?t.props.labelClick(e):t.props.tabManager.add(e,"fa-regular fa-circle",r.Label,{label:e,database:t.props.database}),children:[":",e," ",n?"("+t.props.labels[e]+")":""]},e)},this.typeButton=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(0,a.jsxs)("button",{className:"button tag is-rounded px-2 is-medium "+(t.isColorDark(t.props.edgeStyles[e].color)?"has-text-white":""),style:{backgroundColor:t.props.edgeStyles[e].color},onClick:()=>n?t.props.typeClick(e):t.props.tabManager.add(e,"fa-solid fa-arrow-right-long",r.Type,{type:e,database:t.props.database}),children:[":",e," ",n?"("+t.props.types[e]+")":""]},e)}}render(){return null===this.props.detail?(0,a.jsxs)(a.Fragment,{children:[Object.keys(this.props.labels).length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"subtitle is-5 mb-1",children:"Node Labels"}),(0,a.jsx)("span",{className:"buttons",children:Object.keys(this.props.labels).map((t=>this.labelButton(t)))})]}),Object.keys(this.props.types).length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"subtitle is-5 mb-1",children:"Relationship Types"}),(0,a.jsx)("span",{className:"buttons",children:Object.keys(this.props.types).map((t=>this.typeButton(t)))})]})]}):this.props.detail instanceof p.Node?(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"buttons mb-3",children:[(0,a.jsx)(c,{onClick:()=>this.props.tabManager.add({prefix:"Node",i:this.props.detail.identity},"fa-solid fa-pen-to-square",r.Node,{id:kr.getId(this.props.detail),database:this.props.database}),icon:"fa-solid fa-pen-clip",text:"#"+kr.strInt(this.props.detail.identity)}),this.props.stashManager.button(this.props.detail,this.props.database)]}),(0,a.jsx)("div",{className:"buttons mb-0",children:this.props.detail.labels.map((t=>this.labelButton(t,!1)))}),kr.hasElementId&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"subtitle is-5 mt-3 mb-1",children:"ElementId"}),(0,a.jsx)("span",{className:"is-copyable",onClick:t,children:this.props.detail.elementId})]}),(0,a.jsx)("p",{className:"subtitle is-5 mt-3 mb-1",children:"Properties"}),(0,a.jsxs)("table",{className:"table is-bordered is-striped is-narrow is-hoverable",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Key"}),(0,a.jsx)("th",{children:"Value"})]})}),(0,a.jsx)("tbody",{children:Object.keys(this.props.detail.properties).map((e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e}),(0,a.jsx)("td",{className:"is-copyable",onClick:t,children:Qr(this.props.detail.properties[e])})]},e)))})]})]})}):this.props.detail instanceof p.Relationship?(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"buttons mb-3",children:[(0,a.jsx)(c,{onClick:()=>this.props.tabManager.add({prefix:"Rel",i:this.props.detail.identity},"fa-solid fa-pen-to-square",r.Rel,{id:kr.getId(this.props.detail),database:this.props.database}),icon:"fa-solid fa-pen-clip",text:"#"+kr.strInt(this.props.detail.identity)}),this.props.stashManager.button(this.props.detail,this.props.database)]}),(0,a.jsx)("div",{className:"buttons mb-0",children:this.typeButton(this.props.detail.type,!1)}),kr.hasElementId&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"subtitle is-5 mt-3 mb-1",children:"ElementId"}),(0,a.jsx)("span",{className:"is-copyable",onClick:t,children:this.props.detail.elementId})]}),(0,a.jsx)("p",{className:"subtitle is-5 mt-3 mb-1",children:"Properties"}),(0,a.jsxs)("table",{className:"table is-bordered is-striped is-narrow is-hoverable",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Key"}),(0,a.jsx)("th",{children:"Value"})]})}),(0,a.jsx)("tbody",{children:Object.keys(this.props.detail.properties).map((e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e}),(0,a.jsx)("td",{className:"is-copyable",onClick:t,children:Qr(this.props.detail.properties[e])})]},e)))})]})]})}):void 0}}const Ic=Nc;class Pc extends t.Component{render(){var t,e;return(0,a.jsxs)(Jr,{title:"Set style of type :"+this.props.type,backdrop:!0,handleClose:this.props.handleClose,buttons:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c,{text:"Close",icon:"fa-solid fa-xmark",onClick:this.props.handleClose}),(0,a.jsx)(c,{text:"Default values",icon:"fa-solid fa-rotate-right",onClick:()=>{this.props.handleStyleSet(this.props.type,"color","#ababab"),this.props.handleStyleSet(this.props.type,"width",.3),this.props.handleStyleSet(this.props.type,"fontSize",4),this.props.handleStyleSet(this.props.type,"label","#label")},color:"is-warning"})]}),children:[(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Color:"}),(0,a.jsx)("div",{className:"control buttons",children:(0,a.jsx)("input",{type:"color",value:this.props.currentSettings.color,className:"input",onChange:t=>this.props.handleStyleSet(this.props.type,"color",t.currentTarget.value)})})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Width:"}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("input",{className:"slider is-fullwidth",type:"range",min:"0",max:"1",step:".1",value:null!==(t=this.props.currentSettings.width)&&void 0!==t?t:.3,onChange:t=>this.props.handleStyleSet(this.props.type,"width",t.currentTarget.valueAsNumber)})})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Font size:"}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("input",{className:"slider is-fullwidth",type:"range",min:"0",max:"10",step:"1",value:null!==(e=this.props.currentSettings.fontSize)&&void 0!==e?e:4,onChange:t=>this.props.handleStyleSet(this.props.type,"fontSize",t.currentTarget.valueAsNumber)})})]}),(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",children:"Label field:"}),(0,a.jsxs)("div",{className:"control buttons has-addons",children:[(0,a.jsx)(c,{text:"<id>",color:"#id"===this.props.currentSettings.label?"is-active":"",onClick:()=>this.props.handleStyleSet(this.props.type,"label","#id")},"#id"),(0,a.jsx)(c,{text:"<label>",color:"undefined"===typeof this.props.currentSettings.label||"#label"===this.props.currentSettings.label?"is-active":"",onClick:()=>this.props.handleStyleSet(this.props.type,"label","#label")},"#label"),this.props.labelFields.length>0&&this.props.labelFields.map((t=>(0,a.jsx)(c,{text:t,color:this.props.currentSettings.label===t?"is-active":"",onClick:()=>this.props.handleStyleSet(this.props.type,"label",t)},t)))]})]})]})}}const Mc=Pc;class jc extends t.Component{constructor(){super(...arguments),this.state={sidebarVisible:1,labels:{},types:{},detail:null,detailHover:null,nodeStyleModal:null,edgeStyleModal:null,nodeStyles:sessionStorage.getItem("nodeStyles")?JSON.parse(sessionStorage.getItem("nodeStyles")):{},edgeStyles:sessionStorage.getItem("edgeStyles")?JSON.parse(sessionStorage.getItem("edgeStyles")):{}},this.graphContainer=t.createRef(),this.graphElement=t.createRef(),this.orb=void 0,this.initGraphView=()=>{if(!this.graphElement.current)return;this.initializeOrb();const t=[],e=[],n={},r={};this.props.rows.forEach((i=>{for(const o of i.keys){const s=i.get(o);s instanceof p.Node&&!t.find((t=>t.id===kr.strInt(s.identity)))?(t.push({id:kr.strInt(s.identity),label:":"+s.labels.join(":"),element:s}),s.labels[0]in n||(n[s.labels[0]]=0),n[s.labels[0]]++):s instanceof p.Relationship&&!e.find((t=>t.id===kr.strInt(s.identity)))&&(e.push({id:kr.strInt(s.identity),start:kr.strInt(s.start),end:kr.strInt(s.end),label:":"+s.type,element:s}),s.type in r||(r[s.type]=0),r[s.type]++)}})),this.setState({labels:n,types:r}),this.orb.data.setup({nodes:t,edges:e}),this.applyNodeStyles(Object.keys(n)),this.applyEdgeStyles(Object.keys(r)),this.orb.view.setSettings({render:{shadowIsEnabled:!1,shadowOnEventIsEnabled:!0,contextAlphaOnEvent:.5}}),this.orb.view.render((()=>{this.orb.view.recenter()}))},this.initializeOrb=()=>{this.orb||(this.orb=new Cc(this.graphElement.current),this.orb.data.setDefaultStyle({getNodeStyle:t=>({size:5,color:"#1d87c9",fontSize:4,fontColor:oi().darkMode?"white":"black",shape:yi.CIRCLE,fontFamily:"Inter, Helvetica, Arial, sans-serif",label:t.data.label,shadowSize:2,shadowColor:"#8c8c8c"}),getEdgeStyle:t=>({color:"#ababab",width:.3,fontSize:4,arrowSize:1,fontColor:oi().darkMode?"white":"black",fontFamily:"Inter, Helvetica, Arial, sans-serif",label:t.data.label,shadowSize:2,shadowColor:"#8c8c8c"})}),this.orb.events.on(yu.MOUSE_CLICK,(t=>{this.setState({detail:"undefined"===typeof t.subject?null:t.subject.data.element})})),this.orb.events.on(yu.MOUSE_MOVE,(t=>{this.setState({detailHover:"undefined"===typeof t.subject?null:t.subject.data.element})})))},this.applyNodeStyles=t=>{const e={...this.state.nodeStyles};Object.keys(e).forEach((n=>{t.includes(n)||delete e[n]})),t.forEach((t=>{t in e?"color"in e[t]||(e[t].color=yc.getRandomColor().toString()):e[t]={color:yc.getRandomColor().toString()}})),this.orb.data.getNodes().forEach((t=>{t.style.color=e[t.data.element.labels[0]].color,"shape"in e[t.data.element.labels[0]]&&(t.style.shape=e[t.data.element.labels[0]].shape),"size"in e[t.data.element.labels[0]]&&(t.style.size=e[t.data.element.labels[0]].size),"fontSize"in e[t.data.element.labels[0]]&&(t.style.fontSize=e[t.data.element.labels[0]].fontSize),"label"in e[t.data.element.labels[0]]&&(e[t.data.element.labels[0]].label in t.data.element.properties?t.style.label=t.data.element.properties[e[t.data.element.labels[0]].label]:"#id"===e[t.data.element.labels[0]].label?t.style.label=t.data.id:t.style.label=t.data.label)})),this.setState({nodeStyles:e}),sessionStorage.setItem("nodeStyles",JSON.stringify(e))},this.applyEdgeStyles=t=>{const e={...this.state.edgeStyles};Object.keys(e).forEach((n=>{t.includes(n)||delete e[n]})),t.forEach((t=>{t in e?"color"in e[t]||(e[t].color="#ababab"):e[t]={color:"#ababab"}})),this.orb.data.getEdges().forEach((t=>{t.style.color=e[t.data.element.type].color,"width"in e[t.data.element.type]&&(t.style.width=e[t.data.element.type].width),"fontSize"in e[t.data.element.type]&&(t.style.fontSize=e[t.data.element.type].fontSize),"label"in e[t.data.element.type]&&(e[t.data.element.type].label in t.data.element.properties?t.style.label=t.data.element.properties[e[t.data.element.type].label]:"#id"===e[t.data.element.type].label?t.style.label=t.data.id:t.style.label=t.data.label)})),this.setState({edgeStyles:e}),sessionStorage.setItem("edgeStyles",JSON.stringify(e))},this.listenForDarkMode=t=>{t.preventDefault(),t.target.matches('input[type="checkbox"][name="darkMode"]')&&(this.orb.data.getNodes().forEach((t=>{t.style.fontColor=oi().darkMode?"white":"black"})),this.orb.data.getEdges().forEach((t=>{t.style.fontColor=oi().darkMode?"white":"black"})),this.orb.view.render())},this.sidebarSwitchBtn=()=>{this.state.sidebarVisible<=1&&this.setState((t=>({sidebarVisible:1===t.sidebarVisible?3:2})))},this.fullscreenSwitchBtn=()=>{null===document.fullscreenElement?this.graphContainer.current.requestFullscreen().then((()=>{setTimeout((()=>this.orb.view.recenter()),100)})):document.exitFullscreen().then((()=>{setTimeout((()=>this.orb.view.recenter()),100)}))},this.updateNodeStyle=(t,e,n)=>{this.setState((r=>(r.nodeStyles[t][e]=n,r)),(()=>{sessionStorage.setItem("nodeStyles",JSON.stringify(this.state.nodeStyles))})),this.orb.data.getNodes().forEach((r=>{if(r.data.element.labels[0]===t){let t=n;"label"===e&&(t=n in r.data.element.properties?r.data.element.properties[n]:"#id"===n?r.data.id:r.data.label),r.style[e]=t}})),this.orb.view.render()},this.updateEdgeStyle=(t,e,n)=>{this.setState((r=>(r.edgeStyles[t][e]=n,r)),(()=>{sessionStorage.setItem("edgeStyles",JSON.stringify(this.state.edgeStyles))})),this.orb.data.getEdges().forEach((r=>{if(r.data.element.type===t){let t=n;"label"===e&&(t=n in r.data.element.properties?r.data.element.properties[n]:"#id"===n?r.data.id:r.data.label),r.style[e]=t}})),this.orb.view.render()}}componentDidMount(){this.initGraphView(),document.getElementById("root").addEventListener("input",this.listenForDarkMode)}componentWillUnmount(){document.getElementById("root").removeEventListener("input",this.listenForDarkMode)}render(){return(0,a.jsxs)("div",{className:"graph-container is-flex",ref:this.graphContainer,children:[(0,a.jsx)("div",{className:"graph "+(this.state.sidebarVisible>0?"sidebar-visible":""),ref:this.graphElement,children:(0,a.jsx)("div",{className:"sidebar-switch-btn",children:(0,a.jsx)(c,{icon:"fa-solid "+(this.state.sidebarVisible%2===1?"fa-chevron-right":"fa-chevron-left"),color:"ml-auto is-small",onClick:this.sidebarSwitchBtn})})}),this.state.sidebarVisible>0&&(0,a.jsxs)("div",{className:"sidebar p-3 "+(3===this.state.sidebarVisible?"animate_out":"")+(2===this.state.sidebarVisible?"animate_in":""),onAnimationEnd:()=>{this.setState((t=>({sidebarVisible:3===t.sidebarVisible?0:1}))),setTimeout((()=>this.orb.view.recenter()),100)},children:[(0,a.jsx)("p",{className:"title is-4 mb-3",children:(this.state.detailHover||this.state.detail)instanceof p.Node?"Node":(this.state.detailHover||this.state.detail)instanceof p.Relationship?"Relationship":"Overview"}),(0,a.jsx)("div",{className:"content",children:(0,a.jsx)(Ic,{detail:this.state.detailHover||this.state.detail,labels:this.state.labels,types:this.state.types,labelClick:t=>this.setState({nodeStyleModal:t}),typeClick:t=>this.setState({edgeStyleModal:t}),nodeStyles:this.state.nodeStyles,edgeStyles:this.state.edgeStyles,tabManager:this.props.tabManager,stashManager:this.props.stashManager,database:this.props.database})})]}),(0,a.jsxs)("div",{className:"buttons",children:[document.fullscreenEnabled&&(0,a.jsx)(c,{icon:"fa-solid "+(null===document.fullscreenElement?"fa-expand":"fa-compress"),color:"mr-0",onClick:this.fullscreenSwitchBtn,title:"Fullscreen"}),(0,a.jsx)(c,{icon:"fa-solid fa-maximize",onClick:()=>this.orb.view.recenter(),color:"mr-0",title:"Recenter"})]}),(0,a.jsxs)("div",{className:"brand is-flex is-align-items-center",children:[(0,a.jsx)("span",{className:"is-size-7",children:"Powered by"}),(0,a.jsx)("a",{href:"https://github.com/memgraph/orb",target:"_blank",className:"ml-1",children:(0,a.jsx)("img",{src:kc,alt:"ORB"})})]}),this.state.nodeStyleModal&&(0,a.jsx)(Tc,{label:this.state.nodeStyleModal,currentSettings:this.state.nodeStyles[this.state.nodeStyleModal],handleClose:()=>this.setState({nodeStyleModal:null}),handleStyleSet:this.updateNodeStyle,labelFields:this.props.rows.map((t=>{for(const e of t.keys){const n=t.get(e);if(n instanceof p.Node&&n.labels[0]===this.state.nodeStyleModal)return Object.keys(n.properties)}}))[0]||[]}),this.state.edgeStyleModal&&(0,a.jsx)(Mc,{type:this.state.edgeStyleModal,currentSettings:this.state.edgeStyles[this.state.edgeStyleModal],handleClose:()=>this.setState({edgeStyleModal:null}),handleStyleSet:this.updateEdgeStyle,labelFields:this.props.rows.map((t=>{for(const e of t.keys){const n=t.get(e);if(n instanceof p.Relationship&&n.type===this.state.edgeStyleModal)return Object.keys(n.properties)}}))[0]||[]})]})}}const Rc=jc;class Ac extends t.Component{constructor(){super(...arguments),this.state={view:this.props.view||o.Table,tableSize:parseInt(localStorage.getItem("query.tableSize")||"2"),query:this.props.query||"",rows:[],summary:null,error:null,loading:!1,keys:[],database:null},this.showTableSize=!1,this.setShowTableSize=t=>{Array.isArray(t)?t.forEach(this.setShowTableSize):null!==t&&"object"===typeof t&&(t instanceof p.Node||t instanceof p.Relationship||t instanceof p.Path?this.showTableSize=!0:this.setShowTableSize(Object.values(t)))},this.handleSubmit=t=>{t&&t.preventDefault(),this.showTableSize=!1,this.setState({loading:!0,rows:[],summary:null},(()=>{kr.query(this.state.query,{},kr.database).then((t=>{/\s*(CREATE|DROP)\s+(COMPOSITE\s+)?DATABASE/i.test(this.state.query)&&kr.query("SHOW DATABASES").then((t=>{kr.databases=t.records.filter((t=>!t.has("type")||"system"!==t.get("type"))).map((t=>kr.ecosystem===s.Memgraph?t.get("Name"):t.get("name")))})).catch((()=>{}));const e=new Set;t.records.forEach((t=>t.keys.forEach(e.add,e))),this.setShowTableSize(t.records),this.setState((n=>({summary:t.summary,rows:t.records,error:null,loading:!1,view:0===t.records.length?o.Summary:n.view,keys:Array.from(e),database:kr.database})))})).catch((t=>{this.setState({rows:[],summary:null,error:"["+t.name+"] "+t.message,loading:!1})}))}))},this.changeView=t=>{this.setState({view:t})},this.setTableSize=t=>{this.setState({tableSize:t}),localStorage.setItem("query.tableSize",t.toString())}}componentDidMount(){this.props.execute&&this.handleSubmit(null)}render(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("form",{onSubmit:this.handleSubmit,className:"block",children:[(0,a.jsx)("div",{className:"field",children:(0,a.jsxs)("div",{className:"control has-icons-right has-icons-left",children:[(0,a.jsx)(u,{required:!0,name:"query",value:this.state.query,onChange:t=>{this.setState({query:t.currentTarget.value}),this.props.tabManager.add(this.props.tabName,"fa-solid fa-terminal",r.Query,{query:t.currentTarget.value},this.props.tabId)},color:"is-family-code is-pre-wrap",focus:!0,onKeyDown:t=>{"Enter"===t.key&&t.ctrlKey&&this.handleSubmit(null)},highlight:{mark:["CALL","CREATE","DELETE","DETACH","FOREACH","LOAD","MATCH","MERGE","OPTIONAL","REMOVE","RETURN","SET","START","UNION","UNWIND","WITH"],"#995800":["LIMIT","ORDER","SKIP","WHERE","YIELD"],"#c07817":["ASC","ASCENDING","ASSERT","BY","CSV","DESC","DESCENDING","ON"],"#1732c0":["ALL","CASE","COUNT","ELSE","END","EXISTS","THEN","WHEN"],"#1683b3":["AND","AS","CONTAINS","DISTINCT","ENDS","IN","IS","NOT","OR","STARTS","XOR"],"#a00726":["CONSTRAINT","CREATE","DROP","EXISTS","INDEX","NODE","KEY","UNIQUE"],"#ba1919":["INDEX","JOIN","SCAN","USING"],"#0f00b4":["false","null","true"]}}),(0,a.jsx)("span",{className:"icon is-left",children:(0,a.jsx)("i",{className:"fa-solid fa-terminal","aria-hidden":"true"})}),(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)("span",{className:"icon is-right is-clickable",onClick:t,children:(0,a.jsx)("i",{className:"fa-regular fa-copy"})})})]})}),(0,a.jsx)("div",{className:"field",children:(0,a.jsxs)("div",{className:"buttons is-justify-content-flex-end",children:[(0,a.jsx)(c,{color:"is-success "+(this.state.loading?"is-loading":""),type:"submit",icon:"fa-solid fa-check",text:"Execute"}),(0,a.jsx)("a",{href:kr.ecosystem===s.Memgraph?"https://memgraph.com/docs/querying":"https://neo4j.com/docs/cypher-manual/",target:"_blank",className:"button",title:"Cypher documentation",children:(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:"fa-solid fa-book"})})}),this.props.stashManager.button(new qr(this.props.tabId,this.state.query),""),(0,a.jsx)(c,{icon:"fa-solid fa-xmark",text:"Close",onClick:t=>this.props.tabManager.close(this.props.tabId,t)})]})})]}),"string"===typeof this.state.error&&(0,a.jsxs)("div",{className:"message is-danger block",children:[(0,a.jsxs)("div",{className:"message-header",children:[(0,a.jsx)("p",{children:"Error"}),(0,a.jsx)("button",{className:"delete","aria-label":"delete",onClick:()=>this.setState({error:null})})]}),(0,a.jsx)("div",{className:"message-body",children:this.state.error})]}),(0,a.jsx)("div",{className:"block",children:(0,a.jsxs)("div",{className:"buttons has-addons",children:[(0,a.jsxs)("span",{children:[(0,a.jsx)(c,{text:"Table",color:this.state.view===o.Table?"is-link is-light is-active":"",icon:"fa-solid fa-table",onClick:()=>this.changeView(o.Table)}),(0,a.jsx)(c,{text:"JSON",color:this.state.view===o.JSON?"is-link is-light is-active":"",icon:"fa-brands fa-js",onClick:()=>this.changeView(o.JSON)}),(0,a.jsx)(c,{text:"Graph",color:this.state.view===o.Graph?"is-link is-light is-active":"",icon:"fa-solid fa-circle-nodes",onClick:()=>this.changeView(o.Graph)}),(0,a.jsx)(c,{text:"Summary",color:this.state.view===o.Summary?"is-link is-light is-active":"",icon:"fa-solid fa-gauge-high",onClick:()=>this.changeView(o.Summary)})]}),this.state.view===o.Table&&this.showTableSize&&(0,a.jsxs)("span",{className:"ml-3",children:[(0,a.jsx)(c,{color:1===this.state.tableSize?"is-link is-light is-active":"",icon:"fa-solid fa-arrows-up-down is-size-7",onClick:()=>this.setTableSize(1),children:(0,a.jsx)("span",{className:"is-size-7",children:"Small"})}),(0,a.jsx)(c,{text:"Medium",color:2===this.state.tableSize?"is-link is-light is-active":"",icon:"fa-solid fa-arrows-up-down",onClick:()=>this.setTableSize(2)})]})]})}),this.state.view===o.Table&&this.state.rows.length>0&&(0,a.jsx)(li,{keys:this.state.keys,rows:this.state.rows,tableSize:this.state.tableSize,tabManager:this.props.tabManager}),this.state.view===o.Graph&&this.state.rows.length>0&&(0,a.jsx)(Rc,{rows:this.state.rows,tabManager:this.props.tabManager,stashManager:this.props.stashManager,database:this.state.database}),this.state.view===o.JSON&&this.state.rows.length>0&&(0,a.jsx)(di,{rows:this.state.rows}),this.state.view===o.Summary&&this.state.summary&&(0,a.jsx)(ci,{summary:this.state.summary}),0===this.state.rows.length&&!this.state.summary&&(0,a.jsx)("div",{className:"block",children:"No result"})]})}}const Dc=Ac;class Lc extends t.Component{constructor(){var t;super(...arguments),t=this,this.state={focus:""},this.handleKeyChange=t=>{const e=t.currentTarget,n=[...this.props.properties],r=n.findIndex((t=>e.name.startsWith("key."+t.name)));if(r>-1){const t=e.name.split(".");3===t.length?n[r].value[parseInt(t[2])].key=e.value:n[r].key=e.value,this.props.updateProperties(n),this.setState({focus:e.name})}},this.handleValueChange=function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const i=[...t.props.properties];let o=i.findIndex((t=>t.name===e));if(o>-1)i[o].temp=r,i[o].value=n;else if(o=i.findIndex((t=>e.startsWith(t.name))),o>-1){const t=parseInt(e.split(".",2)[1]);i[o].value[t].value=n,i[o].value[t].temp=r}o>-1&&(t.props.updateProperties(i),t.setState({focus:e}))},this.handleTypeChange=t=>{const e=t.currentTarget,n=this.getDefaultValue(i[e.value]),r=Gr(i[e.value],n),o=[...this.props.properties];let s=o.findIndex((t=>"type."+t.name===e.name));if(s>-1)Array.isArray(n)&&n.push({type:i.String,value:""}),o[s].type=i[e.value],o[s].value=n,o[s].temp=r;else if(s=o.findIndex((t=>e.name.startsWith("subtype."+t.name))),s>-1){const t=e.name.split(".");2===t.length?o[s].value.forEach((t=>{t.type=i[e.value],t.value=n,t.temp=r})):3===t.length&&(o[s].value[parseInt(t[2])].type=i[e.value],o[s].value[parseInt(t[2])].value=n,o[s].value[parseInt(t[2])].temp=r)}s>-1&&(this.props.updateProperties(o),this.setState({focus:e.name}))},this.getDefaultValue=t=>{const e=kr.toInt(0);switch(t){case i.String:return"";case i.Boolean:return!1;case i.Integer:return e;case i.Float:return 0;case i.List:case i.Map:return[];case i.Time:return p.Time.fromStandardDate(new Date);case i.Date:return p.Date.fromStandardDate(new Date);case i.DateTime:return p.DateTime.fromStandardDate(new Date);case i.LocalTime:return p.LocalTime.fromStandardDate(new Date);case i.LocalDateTime:return p.LocalDateTime.fromStandardDate(new Date);case i.Point:return new p.Point(e,0,0,0);case i.Duration:return new p.Duration(e,e,e,e)}},this.handleDelete=t=>{const e=[...this.props.properties];let n=e.findIndex((e=>e.name===t));if(n>-1)e.splice(n,1);else if(n=e.findIndex((e=>t.startsWith(e.name))),n>-1){const r=parseInt(t.split(".",2)[1]);e[n].value.splice(r,1)}n>-1&&this.props.updateProperties(e)},this.handleAdd=t=>{t.preventDefault();const e=t.currentTarget,n=[...this.props.properties];if(e.value){const t=n.findIndex((t=>t.name===e.value));if(t>-1){const e=n[t].value[n[t].value.length-1].type,r=this.getDefaultValue(e);n[t].value.push({type:e,value:r,temp:Gr(e,r)}),this.props.updateProperties(n),this.setState({focus:n[t].name+"."+(n[t].value.length-1)})}}else{const t=(new Date).getTime().toString();n.push({name:t,key:"",value:"",type:i.String}),this.props.updateProperties(n),this.setState({focus:"key."+t})}}}render(){return(0,a.jsxs)(a.Fragment,{children:[this.props.properties.map((t=>(0,a.jsx)(Uc,{focus:this.state.focus,property:t,onKeyChange:this.handleKeyChange,onValueChange:this.handleValueChange,onTypeChange:this.handleTypeChange,onDelete:this.handleDelete,onAdd:this.handleAdd},t.name))),(0,a.jsx)(c,{icon:"fa-solid fa-plus",color:"ml-1",text:"Add property",onClick:this.handleAdd})]})}}class Uc extends t.Component{constructor(){super(...arguments),this.components={PropertyStringInput:Fc,PropertyIntegerInput:Hc,PropertyFloatInput:Wc,PropertyBooleanInput:qc,PropertyTimeInput:Kc,PropertyDateInput:$c,PropertyDateTimeInput:Xc,PropertyLocalTimeInput:Qc,PropertyLocalDateTimeInput:Jc,PropertyDurationInput:th,PropertyPointInput:eh}}render(){const t=(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(c,{icon:"fa-regular fa-trash-can",onClick:()=>this.props.onDelete(this.props.property.name),title:"Delete property"})}),e=(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("input",{name:"key."+this.props.property.name,autoFocus:this.props.focus==="key."+this.props.property.name,className:"input",type:"text",value:this.props.property.key,onChange:this.props.onKeyChange,placeholder:"Key",pattern:"^[A-Za-z][A-Za-z_0-9]*$",required:!0})});var n,r;if(this.props.property.type===i.List)return(0,a.jsxs)("div",{className:"field is-grouped is-hoverable p-1 mb-1",children:[e,(0,a.jsxs)("div",{className:"control is-expanded",children:[(0,a.jsxs)("div",{className:"field is-grouped",children:[(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(zc,{name:this.props.property.name,selected:this.props.property.type,onTypeChange:this.props.onTypeChange,subtype:!1})}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(zc,{name:this.props.property.name,selected:null!==(n=null===(r=this.props.property.value[0])||void 0===r?void 0:r.type)&&void 0!==n?n:i.String,onTypeChange:this.props.onTypeChange,subtype:!0})}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)(c,{icon:"fa-regular fa-copy",onClick:t,value:JSON.stringify(this.props.property.value.map((t=>kr.isInt(t.value)?kr.fromInt(t.value):t.value)))})})})]}),this.props.property.value.map(((t,e)=>{const n=this.components["Property"+t.type+"Input"],r=this.props.focus===this.props.property.name+"."+e;return(0,a.jsxs)("div",{className:"field is-grouped",children:[(0,a.jsx)(n,{name:this.props.property.name+"."+e,value:t.value,temp:t.temp,onValueChange:this.props.onValueChange,focus:r}),(0,a.jsx)(c,{icon:"fa-solid fa-circle-minus",onClick:()=>this.props.onDelete(this.props.property.name+"."+e),title:"Remove list entry"})]},e)})),(0,a.jsx)("div",{className:"field",children:(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(c,{icon:"fa-solid fa-circle-plus",onClick:this.props.onAdd,title:"Add list entry",value:this.props.property.name})})})]}),t]});if(this.props.property.type===i.Map)return(0,a.jsxs)("div",{className:"field is-grouped is-hoverable p-1 mb-1",children:[e,(0,a.jsxs)("div",{className:"control is-expanded",children:[(0,a.jsxs)("div",{className:"field is-grouped",children:[(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(zc,{name:this.props.property.name,selected:this.props.property.type,onTypeChange:this.props.onTypeChange,subtype:!1})}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)(c,{icon:"fa-regular fa-copy",onClick:e=>{const n={};this.props.property.value.forEach((t=>{n[t.key]=kr.isInt(t.value)?kr.fromInt(t.value):t.value})),e.currentTarget.value=JSON.stringify(n),t(e)}})})})]}),this.props.property.value.map(((t,e)=>{const n=this.components["Property"+t.type+"Input"],r=this.props.focus===this.props.property.name+"."+e;return(0,a.jsxs)("div",{className:"field is-grouped",children:[(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("input",{name:"key."+this.props.property.name+"."+e,autoFocus:this.props.focus==="key."+this.props.property.name+"."+e,className:"input",type:"text",value:t.key,onChange:this.props.onKeyChange,placeholder:"Key",pattern:"^[A-Za-z][A-Za-z_0-9]*$",required:!0})}),(0,a.jsx)(n,{name:this.props.property.name+"."+e,value:t.value,temp:t.temp,onValueChange:this.props.onValueChange,focus:r}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(c,{icon:"fa-solid fa-circle-minus",onClick:()=>this.props.onDelete(this.props.property.name+"."+e),title:"Remove map entry"})}),(0,a.jsx)(zc,{name:this.props.property.name+"."+e,selected:t.type,onTypeChange:this.props.onTypeChange,subtype:!0})]},e)})),(0,a.jsx)("div",{className:"field",children:(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(c,{icon:"fa-solid fa-circle-plus",onClick:this.props.onAdd,title:"Add map entry",value:this.props.property.name})})})]}),t]});const o=this.components["Property"+this.props.property.type+"Input"];return(0,a.jsxs)("div",{className:"field is-grouped is-hoverable p-1 mb-1",children:[e,(0,a.jsx)(o,{name:this.props.property.name,value:this.props.property.value,temp:this.props.property.temp,onValueChange:this.props.onValueChange,focus:this.props.focus===this.props.property.name}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(zc,{name:this.props.property.name,selected:this.props.property.type,onTypeChange:this.props.onTypeChange,subtype:!1})}),t]})}}class zc extends t.Component{constructor(){super(...arguments),this.getPropertyTypes=()=>Object.keys(i).filter((t=>(!this.props.subtype||t!==i.List&&t!==i.Map)&&((kr.ecosystem!==s.Memgraph||t!==i.Point&&t!==i.Time&&t!==i.DateTime)&&(kr.ecosystem!==s.Neo4j||t!==i.Map))))}render(){return(0,a.jsx)("div",{className:"select",children:(0,a.jsx)("select",{name:(this.props.subtype?"subtype.":"type.")+this.props.name,value:this.props.selected,onChange:this.props.onTypeChange,title:this.props.subtype?"Type of list/map entries":"Property type",children:this.getPropertyTypes().map((t=>(0,a.jsx)("option",{value:t,children:t},t)))})})}}class Bc extends t.Component{}class Fc extends Bc{render(){return(0,a.jsxs)("div",{className:"control is-expanded has-icons-right",children:[(0,a.jsx)(u,{name:this.props.name,value:this.props.value,onChange:t=>this.props.onValueChange(this.props.name,t.currentTarget.value),focus:this.props.focus,placeholder:"Value"}),(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)("span",{className:"icon is-right is-clickable",onClick:t,children:(0,a.jsx)("i",{className:"fa-regular fa-copy"})})})]})}}class qc extends Bc{render(){return(0,a.jsx)("div",{className:"control is-expanded",children:(0,a.jsxs)("label",{className:"switch",children:[(0,a.jsx)("input",{name:this.props.name,type:"checkbox",checked:this.props.value,onChange:t=>this.props.onValueChange(this.props.name,t.currentTarget.checked),placeholder:"Value",autoFocus:this.props.focus}),(0,a.jsx)("span",{className:"slider"})]})})}}class Hc extends Bc{render(){return(0,a.jsxs)("div",{className:"control is-expanded has-icons-right",children:[(0,a.jsx)("input",{name:this.props.name,className:"input",type:"number",value:this.props.temp,step:"1",autoFocus:this.props.focus,onChange:t=>this.props.onValueChange(this.props.name,t.currentTarget.value.length?kr.toInt(t.currentTarget.value):null,t.currentTarget.value),placeholder:"Value"}),(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)("span",{className:"icon is-right is-clickable",onClick:t,children:(0,a.jsx)("i",{className:"fa-regular fa-copy"})})})]})}}class Wc extends Bc{render(){return(0,a.jsxs)("div",{className:"control is-expanded has-icons-right",children:[(0,a.jsx)("input",{name:this.props.name,className:"input",type:"number",value:this.props.temp,onChange:t=>this.props.onValueChange(this.props.name,t.currentTarget.valueAsNumber||null,t.currentTarget.value),autoFocus:this.props.focus,placeholder:"Value",step:"any"}),(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)("span",{className:"icon is-right is-clickable",onClick:t,children:(0,a.jsx)("i",{className:"fa-regular fa-copy"})})})]})}}class Vc extends t.Component{render(){return(0,a.jsx)("div",{className:"control is-expanded",children:(0,a.jsx)("input",{className:"input "+(this.props.invalid?"is-danger":""),type:"time",value:this.props.value,onChange:this.props.handleChange,step:"1",ref:this.props.inputRef,title:"Time"})})}}class Zc extends t.Component{render(){return(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("input",{className:"input "+(this.props.invalid?"is-danger":""),type:"number",step:"1",min:"0",max:"999999999",value:this.props.value,title:"Nanoseconds",ref:this.props.inputRef,onChange:this.props.handleChange})})}}class Gc extends t.Component{render(){return(0,a.jsx)("div",{className:"control is-expanded",children:(0,a.jsx)("input",{className:"input "+(this.props.invalid?"is-danger":""),type:"date",value:this.props.value,onChange:this.props.handleChange,step:"1",ref:this.props.inputRef,title:"Date"})})}}class Yc extends t.Component{render(){const t=[];for(let e=-11;e<=12;e++)t.push(e);return(0,a.jsx)("div",{className:"control",children:(0,a.jsx)("div",{className:"select "+(this.props.invalid?"is-danger":""),children:(0,a.jsx)("select",{title:"Timezone",ref:this.props.selectRef,value:this.props.value,onChange:this.props.handleChange,children:t.map(((t,e)=>(0,a.jsx)("option",{value:t,children:(t>=0?"+":"-")+Math.abs(t).toString().padStart(2,"0")+":00"},e)))})})})}}class $c extends Bc{constructor(){super(...arguments),this.state={valid:!0},this.dateRef=t.createRef(),this.handleChange=()=>{const t=null!==this.dateRef.current.valueAsDate;this.props.onValueChange(this.props.name,t?new p.Date(this.dateRef.current.valueAsDate.getUTCFullYear(),this.dateRef.current.valueAsDate.getUTCMonth()+1,this.dateRef.current.valueAsDate.getUTCDate()):null,this.dateRef.current.value),this.setState({valid:t})}}componentDidMount(){this.setState({valid:null!==this.dateRef.current.valueAsDate})}render(){return(0,a.jsx)("div",{className:"control is-expanded",children:(0,a.jsxs)("div",{className:"field has-addons",children:[(0,a.jsx)(Gc,{value:this.props.temp,handleChange:this.handleChange,inputRef:this.dateRef,invalid:!this.state.valid}),this.state.valid&&(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)(c,{icon:"fa-regular fa-copy",onClick:t,value:this.props.temp})})})]})})}}class Kc extends Bc{constructor(){super(...arguments),this.state={valid:!0},this.timezoneRef=t.createRef(),this.nanosecondsRef=t.createRef(),this.timeRef=t.createRef(),this.handleChange=()=>{const t=null!==this.timeRef.current.valueAsDate;this.props.onValueChange(this.props.name,t?new p.Time(this.timeRef.current.valueAsDate.getUTCHours(),this.timeRef.current.valueAsDate.getUTCMinutes(),this.timeRef.current.valueAsDate.getUTCSeconds(),this.nanosecondsRef.current.valueAsNumber,60*parseInt(this.timezoneRef.current.value)*60):null,[this.timeRef.current.value,this.nanosecondsRef.current.value,parseInt(this.timezoneRef.current.value)]),this.setState({valid:t})}}componentDidMount(){this.setState({valid:null!==this.timeRef.current.valueAsDate})}render(){return(0,a.jsx)("div",{className:"control is-expanded",children:(0,a.jsxs)("div",{className:"field has-addons",children:[(0,a.jsx)(Vc,{value:this.props.temp[0],inputRef:this.timeRef,handleChange:this.handleChange,invalid:!this.state.valid}),(0,a.jsx)(Zc,{value:this.props.temp[1],handleChange:this.handleChange,inputRef:this.nanosecondsRef,invalid:!this.state.valid}),(0,a.jsx)(Yc,{value:this.props.temp[2],handleChange:this.handleChange,selectRef:this.timezoneRef,invalid:!this.state.valid}),this.state.valid&&(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)(c,{icon:"fa-regular fa-copy",onClick:t,value:this.props.value.toString()})})})]})})}}class Xc extends Bc{constructor(){super(...arguments),this.state={valid:!0},this.timezoneRef=t.createRef(),this.nanosecondsRef=t.createRef(),this.timeRef=t.createRef(),this.dateRef=t.createRef(),this.handleChange=()=>{const t=null!==this.dateRef.current.valueAsDate&&null!==this.timeRef.current.valueAsDate;this.props.onValueChange(this.props.name,t?new p.DateTime(this.dateRef.current.valueAsDate.getUTCFullYear(),this.dateRef.current.valueAsDate.getUTCMonth()+1,this.dateRef.current.valueAsDate.getUTCDate(),this.timeRef.current.valueAsDate.getUTCHours(),this.timeRef.current.valueAsDate.getUTCMinutes(),this.timeRef.current.valueAsDate.getUTCSeconds(),this.nanosecondsRef.current.valueAsNumber,60*parseInt(this.timezoneRef.current.value)*60):null,[this.dateRef.current.value,this.timeRef.current.value,this.nanosecondsRef.current.value,parseInt(this.timezoneRef.current.value)]),this.setState({valid:t})}}componentDidMount(){this.setState({valid:null!==this.dateRef.current.valueAsDate&&null!==this.timeRef.current.valueAsDate})}render(){return(0,a.jsx)("div",{className:"control is-expanded",children:(0,a.jsxs)("div",{className:"field has-addons",children:[(0,a.jsx)(Gc,{value:this.props.temp[0],handleChange:this.handleChange,inputRef:this.dateRef,invalid:!this.state.valid}),(0,a.jsx)(Vc,{value:this.props.temp[1],inputRef:this.timeRef,handleChange:this.handleChange,invalid:!this.state.valid}),(0,a.jsx)(Zc,{value:this.props.temp[2],handleChange:this.handleChange,inputRef:this.nanosecondsRef,invalid:!this.state.valid}),(0,a.jsx)(Yc,{value:this.props.temp[3],handleChange:this.handleChange,selectRef:this.timezoneRef,invalid:!this.state.valid}),this.state.valid&&(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)(c,{icon:"fa-regular fa-copy",onClick:t,value:this.props.value.toString()})})})]})})}}class Qc extends Bc{constructor(){super(...arguments),this.state={valid:!0},this.nanosecondsRef=t.createRef(),this.timeRef=t.createRef(),this.handleChange=()=>{const t=null!==this.timeRef.current.valueAsDate;this.props.onValueChange(this.props.name,t?new p.LocalTime(this.timeRef.current.valueAsDate.getUTCHours(),this.timeRef.current.valueAsDate.getUTCMinutes(),this.timeRef.current.valueAsDate.getUTCSeconds(),this.nanosecondsRef.current.valueAsNumber):null,[this.timeRef.current.value,this.nanosecondsRef.current.value]),this.setState({valid:t})}}componentDidMount(){this.setState({valid:null!==this.timeRef.current.valueAsDate})}render(){return(0,a.jsx)("div",{className:"control is-expanded",children:(0,a.jsxs)("div",{className:"field has-addons",children:[(0,a.jsx)(Vc,{value:this.props.temp[0],inputRef:this.timeRef,handleChange:this.handleChange,invalid:!this.state.valid}),(0,a.jsx)(Zc,{value:this.props.temp[1],handleChange:this.handleChange,inputRef:this.nanosecondsRef,invalid:!this.state.valid}),this.state.valid&&(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)(c,{icon:"fa-regular fa-copy",onClick:t,value:this.props.value.toString()})})})]})})}}class Jc extends Bc{constructor(){super(...arguments),this.state={valid:!0},this.nanosecondsRef=t.createRef(),this.timeRef=t.createRef(),this.dateRef=t.createRef(),this.handleChange=()=>{const t=null!==this.dateRef.current.valueAsDate&&null!==this.timeRef.current.valueAsDate;this.props.onValueChange(this.props.name,t?new p.LocalDateTime(this.dateRef.current.valueAsDate.getUTCFullYear(),this.dateRef.current.valueAsDate.getUTCMonth()+1,this.dateRef.current.valueAsDate.getUTCDate(),this.timeRef.current.valueAsDate.getUTCHours(),this.timeRef.current.valueAsDate.getUTCMinutes(),this.timeRef.current.valueAsDate.getUTCSeconds(),this.nanosecondsRef.current.valueAsNumber):null,[this.dateRef.current.value,this.timeRef.current.value,this.nanosecondsRef.current.value]),this.setState({valid:t})}}componentDidMount(){this.setState({valid:null!==this.dateRef.current.valueAsDate&&null!==this.timeRef.current.valueAsDate})}render(){return(0,a.jsx)("div",{className:"control is-expanded",children:(0,a.jsxs)("div",{className:"field has-addons",children:[(0,a.jsx)(Gc,{value:this.props.temp[0],handleChange:this.handleChange,inputRef:this.dateRef,invalid:!this.state.valid}),(0,a.jsx)(Vc,{value:this.props.temp[1],inputRef:this.timeRef,handleChange:this.handleChange,invalid:!this.state.valid}),(0,a.jsx)(Zc,{value:this.props.temp[2],handleChange:this.handleChange,inputRef:this.nanosecondsRef,invalid:!this.state.valid}),this.state.valid&&(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)(c,{icon:"fa-regular fa-copy",onClick:t,value:this.props.value.toString()})})})]})})}}class th extends Bc{render(){return(0,a.jsxs)("div",{className:"control is-expanded has-icons-right",children:[(0,a.jsx)("input",{className:"input",type:"text",value:this.props.temp,name:this.props.name,autoFocus:this.props.focus,title:"Duration",onChange:t=>this.props.onValueChange(this.props.name,function(t){let e=0,n=0,r=0,i=0;const[o,s]=t.substring(1).split("T");if(o)for(const a of o.match(/[\d.]+[A-Z]/g)||[])switch(a.slice(-1)){case"Y":e+=12*parseInt(a.slice(0,-1));break;case"M":e+=parseInt(a.slice(0,-1));break;case"D":n=parseInt(a.slice(0,-1))}if(s)for(const a of s.match(/[\d.]+[A-Z]/g)||[])switch(a.slice(-1)){case"H":r+=60*parseInt(a.slice(0,-1))*60;break;case"M":r+=60*parseInt(a.slice(0,-1));break;case"S":{const[t,e]=a.slice(0,-1).split(".",2);r+=parseInt(t),i=parseInt(e);break}}return new p.Duration(kr.toInt(e),kr.toInt(n),kr.toInt(r),kr.toInt(i))}(t.currentTarget.value),t.currentTarget.value),pattern:"P(\\d+Y)?(\\d+M)?(\\d+D)?(T(\\d+H)?(\\d+M)?([\\d\\.]+S)?)?"}),(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)("span",{className:"icon is-right is-clickable",onClick:t,children:(0,a.jsx)("i",{className:"fa-regular fa-copy"})})})]})}}class eh extends Bc{constructor(){super(...arguments),this.sridRef=t.createRef(),this.xRef=t.createRef(),this.yRef=t.createRef(),this.zRef=t.createRef(),this.availableSRID=[["4326","wgs-84"],["4979","wgs-84-3d"],["7203","cartesian"],["9157","cartesian-3d"]],this.handleChange=()=>{const t=["4979","9157"].includes(this.sridRef.current.value);this.props.onValueChange(this.props.name,t?new p.Point(kr.toInt(this.sridRef.current.value),this.xRef.current.valueAsNumber,this.yRef.current.valueAsNumber,this.zRef.current.valueAsNumber):new p.Point(kr.toInt(this.sridRef.current.value),this.xRef.current.valueAsNumber,this.yRef.current.valueAsNumber),t?[this.sridRef.current.value,this.xRef.current.value,this.yRef.current.value,this.zRef.current.value]:[this.sridRef.current.value,this.xRef.current.value,this.yRef.current.value])}}render(){return(0,a.jsx)("div",{className:"control is-expanded",children:(0,a.jsxs)("div",{className:"field has-addons",children:[(0,a.jsxs)("div",{className:"control has-icons-left",children:[(0,a.jsx)("div",{className:"select",children:(0,a.jsx)("select",{ref:this.sridRef,value:this.props.temp[0],onChange:this.handleChange,title:"SRID",children:this.availableSRID.map((t=>(0,a.jsxs)("option",{value:t[0],children:[t[1]," (",t[0],")"]},t[1])))})}),(0,a.jsx)("span",{className:"icon is-left",children:(0,a.jsx)("i",{className:"fa-solid fa-location-dot"})})]}),(0,a.jsxs)("div",{className:"control is-expanded has-icons-left",children:[(0,a.jsx)("input",{type:"number",title:"X",ref:this.xRef,className:"input",value:this.props.temp[1],onChange:this.handleChange,step:"any"}),(0,a.jsx)("span",{className:"icon is-left",children:(0,a.jsx)("i",{className:"fa-solid fa-x"})})]}),(0,a.jsxs)("div",{className:"control is-expanded has-icons-left",children:[(0,a.jsx)("input",{type:"number",title:"Y",ref:this.yRef,className:"input",value:this.props.temp[2],onChange:this.handleChange,step:"any"}),(0,a.jsx)("span",{className:"icon is-left",children:(0,a.jsx)("i",{className:"fa-solid fa-y"})})]}),(0,a.jsxs)("div",{className:"control is-expanded has-icons-left "+(4===this.props.temp.length?"":"is-hidden"),children:[(0,a.jsx)("input",{type:"number",title:"Z",ref:this.zRef,className:"input",value:this.props.temp[3]||0,onChange:this.handleChange,step:"any"}),(0,a.jsx)("span",{className:"icon is-left",children:(0,a.jsx)("i",{className:"fa-solid fa-z"})})]}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)(c,{icon:"fa-regular fa-copy",onClick:t,value:this.props.value.toString()})})})]})})}}const nh=Lc;class rh extends t.Component{constructor(){var t;super(...arguments),t=this,this.state={node:null,focus:null,labels:this.props.label?[this.props.label]:[],properties:[],labelModal:!1,labelModalInput:"",error:null,delete:!1,showAllRels:!1},this.rels=[],this.nodes=[],this.create=null===this.props.id,this.requestData=()=>{this.create||kr.query("MATCH (n) WHERE "+kr.fnId()+" = $id OPTIONAL MATCH (n)-[r]-(a) RETURN n, collect(DISTINCT r) AS r, collect(DISTINCT a) AS a",{id:this.props.id},this.props.database).then((t=>{if(0===t.records.length)return void this.props.tabManager.close(this.props.tabId);const e=t.records[0].get("n"),n=[],r=(new Date).getTime();for(const o in e.properties){const t=Zr(e.properties[o]);if(t===i.List){const t=Zr(e.properties[o][0]);e.properties[o]=e.properties[o].map((e=>({value:e,type:t,temp:Gr(t,e)})))}if(t===i.Map){const t=[];for(const n in e.properties[o]){const r=Zr(e.properties[o][n]);t.push({key:n,value:e.properties[o][n],type:r,temp:Gr(r,e.properties[o][n])})}e.properties[o]=t}n.push({name:o+r,key:o,value:e.properties[o],type:t,temp:Gr(t,e.properties[o])})}n.sort(((t,e)=>t.name.toLowerCase().localeCompare(e.name.toLowerCase()))),this.rels=t.records[0].get("r"),this.nodes=t.records[0].get("a"),this.setState({node:e,labels:[...e.labels],properties:n})})).catch((()=>this.props.tabManager.close(this.props.tabId)))},this.handleLabelOpenModal=()=>{kr.query("MATCH (n) WITH DISTINCT labels(n) AS ll UNWIND ll AS l RETURN collect(DISTINCT l) AS c",{},this.props.database).then((t=>{this.setState({labelModal:t.records[0].get("c").filter((t=>!this.state.labels.includes(t)))})})).catch((t=>this.setState({error:"["+t.name+"] "+t.message})))},this.handleLabelSelect=t=>{this.setState((e=>({labels:e.labels.includes(t)?e.labels:e.labels.concat(t),labelModal:!1,labelModalInput:""})),this.markChanged)},this.handleLabelInput=t=>{let e=t.currentTarget.value;oi().forceNamingRecommendations&&(e=e.replace(/^[^a-zA-Z]*/,"").replace(/^[a-z]/,(t=>t.toUpperCase())).replace(/_[a-zA-Z]/,(t=>t.substring(1).toUpperCase()))),this.setState({labelModalInput:e})},this.handleLabelDelete=t=>{this.setState((e=>{const n=[...e.labels],r=this.state.labels.indexOf(t);return-1!==r&&n.splice(r,1),{labels:n}}),this.markChanged)},this.handleLabelModalClose=()=>{this.setState({labelModal:!1})},this.handleSubmit=t=>{t.preventDefault();const{query:e,props:n}=this.generateQuery();kr.query(e,{id:this.props.id,p:n},this.props.database).then((t=>{if(t.summary.counters.containsUpdates()&&this.props.toast(this.create?"Node created":"Node updated"),oi().closeEditAfterExecuteSuccess)this.props.tabManager.setChanged(this.props.tabId,!1,(()=>{this.props.tabManager.close(this.props.tabId)}));else if(this.create){const e=t.records[0].get("n");this.props.tabManager.setChanged(this.props.tabId,!1,(()=>{this.props.tabManager.add({prefix:"Node",i:e.identity},"fa-solid fa-pen-to-square",r.Node,{id:kr.getId(e),database:this.props.database}),this.props.tabManager.close(this.props.tabId)}))}})).catch((t=>this.setState({error:"["+t.name+"] "+t.message})))},this.generateQuery=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=t.create?t.state.labels.join(":"):t.state.labels.filter((e=>!t.state.node.labels.includes(e))).join(":");n.length>0&&(n=" SET n:"+n);let r=t.create?"":t.state.node.labels.filter((e=>!t.state.labels.includes(e))).join(":");r.length>0&&(r=" REMOVE n:"+r);const i=Xr(t.state.properties);let o="";return e?(t.create?o+="CREATE (n)":o+="MATCH (n) WHERE "+kr.fnId()+" = "+("string"===typeof t.props.id?"'"+t.props.id+"'":t.props.id),o+=n+r,t.state.properties.length&&(o+=" SET n = "+Yr(t.state.properties))):o+=(t.create?"CREATE (n)":"MATCH (n) WHERE "+kr.fnId()+" = $id")+n+r+" SET n = $p RETURN n",{query:o,props:i}},this.handleDeleteModalConfirm=(t,e)=>{kr.query("MATCH (n) WHERE "+kr.fnId()+" = $id "+(e?"DETACH ":"")+"DELETE n",{id:t},this.props.database).then((t=>{t.summary.counters.updates().nodesDeleted>0&&(this.props.tabManager.setChanged(this.props.tabId,!1,(()=>this.props.tabManager.close(this.props.tabId))),this.props.toast("Node deleted"))})).catch((t=>{this.setState({error:t.message})}))},this.markChanged=()=>{this.props.tabManager.setChanged(this.props.tabId,this.create||this.state.node.labels.sort().toString()!==this.state.labels.sort().toString()||Object.keys(this.state.node.properties).sort().toString()!==this.state.properties.map((t=>t.key)).sort().toString()||this.state.properties.some((t=>t.value.toString()!==this.state.node.properties[t.key].toString())))}}componentDidMount(){this.requestData()}componentDidUpdate(t){!this.create&&this.props.active&&this.props.active!==t.active&&kr.query("MATCH (n) WHERE "+kr.fnId()+" = $id RETURN COUNT(n) AS c",{id:this.props.id},this.props.database).then((t=>{1!==kr.fromInt(t.records[0].get("c"))&&this.props.tabManager.close(this.props.tabId)})).catch((()=>this.props.tabManager.close(this.props.tabId)))}render(){return this.create||null!==this.state.node?(0,a.jsxs)(a.Fragment,{children:[this.state.delete&&(0,a.jsx)(ei,{delete:this.state.delete,detach:!0,handleConfirm:this.handleDeleteModalConfirm,handleClose:()=>this.setState({delete:!1})}),Array.isArray(this.state.labelModal)&&(0,a.jsxs)(Jr,{title:"Add label",icon:"fa-solid fa-tag",handleClose:this.handleLabelModalClose,children:[(0,a.jsx)("div",{className:"buttons",children:this.state.labelModal.map((t=>(0,a.jsx)(c,{text:t,color:"is-link is-rounded tag is-medium",onClick:()=>this.handleLabelSelect(t)},t)))}),(0,a.jsxs)("form",{onSubmit:t=>(t.preventDefault(),this.handleLabelSelect(this.state.labelModalInput),!0),children:[(0,a.jsx)("label",{className:"label",children:"Or specify new one"}),(0,a.jsxs)("div",{className:"field is-grouped",children:[(0,a.jsx)("div",{className:"control is-expanded",children:(0,a.jsx)("input",{autoFocus:!0,pattern:"^[A-Za-z][A-Za-z_0-9]*$",required:!0,className:"input",type:"text",value:this.state.labelModalInput,onChange:this.handleLabelInput})}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(c,{icon:"fa-solid fa-check",type:"submit"})})]})]})]}),(0,a.jsxs)("form",{onSubmit:this.handleSubmit,children:[!this.create&&(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsxs)("div",{className:"columns",children:[(0,a.jsx)("div",{className:"column "+(kr.hasElementId?"is-half-desktop":""),children:(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",htmlFor:"node-identity",children:"identity"}),(0,a.jsx)("div",{className:"control",onClick:t,children:(0,a.jsx)("input",{id:"node-identity",className:"input is-copyable",readOnly:!0,type:"text",value:kr.strInt(this.state.node.identity)})})]})}),kr.hasElementId&&(0,a.jsx)("div",{className:"column is-half-desktop",children:(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",htmlFor:"node-elementId",children:"elementId"}),(0,a.jsx)("div",{className:"control",onClick:t,children:(0,a.jsx)("input",{id:"node-elementId",className:"input is-copyable",readOnly:!0,type:"text",value:this.state.node.elementId})})]})})]})}),(0,a.jsxs)("fieldset",{className:"box",children:[(0,a.jsxs)("legend",{className:"tag is-link is-light",children:[(0,a.jsx)("i",{className:"fa-solid fa-tags mr-2"}),"Labels"]}),(0,a.jsxs)("div",{className:"buttons tags",children:[this.state.labels.map((t=>(0,a.jsxs)("span",{className:"tag is-link is-medium is-rounded",children:[(0,a.jsx)("a",{className:"has-text-white mr-1",onClick:()=>this.props.tabManager.add(t,"fa-regular fa-circle",r.Label,{label:t,database:this.props.database}),children:t}),(0,a.jsx)("button",{className:"delete",onClick:()=>this.handleLabelDelete(t)})]},"label-"+t))),(0,a.jsx)(c,{icon:"fa-solid fa-plus",onClick:this.handleLabelOpenModal})]})]}),(0,a.jsxs)("fieldset",{className:"box",children:[(0,a.jsxs)("legend",{className:"tag is-link is-light",children:[(0,a.jsx)("i",{className:"fa-solid fa-rectangle-list mr-2"}),"Properties"]}),(0,a.jsx)(nh,{properties:this.state.properties,updateProperties:t=>{this.setState({properties:t},this.markChanged)}})]}),this.rels.length>0&&(0,a.jsxs)("fieldset",{className:"box",children:[(0,a.jsxs)("legend",{className:"tag is-link is-light",children:[(0,a.jsx)("i",{className:"fa-solid fa-circle-nodes mr-2"}),"Relationships"]}),(this.state.showAllRels?this.rels:this.rels.slice(0,3)).map((t=>{const e=kr.getId(t,"startNodeElementId","start")===this.props.id?1:2,n=this.nodes.find((n=>kr.getId(n)===kr.getId(t,2===e?"startNodeElementId":"endNodeElementId",2===e?"start":"end")));return(0,a.jsxs)("div",{className:"is-flex is-align-items-center is-justify-content-flex-start mb-3 mb-last-none",children:[(0,a.jsx)("i",{className:"fa-regular fa-circle"}),(0,a.jsxs)("span",{className:"is-size-4",children:[2===e&&"<","-["]}),(0,a.jsx)(Wr,{rel:t,tabManager:this.props.tabManager,small:!0}),(0,a.jsxs)("span",{className:"is-size-4",children:["]-",1===e&&">","("]}),(0,a.jsx)(Hr,{node:n,tabManager:this.props.tabManager,small:!0}),(0,a.jsx)("span",{className:" is-size-4",children:")"}),(0,a.jsx)("span",{className:"ml-auto"})]},kr.strInt(t.identity))})),!this.state.showAllRels&&this.rels.length>3&&(0,a.jsx)(c,{icon:"fa-solid fa-caret-down",text:"Show all (+"+(this.rels.length-3)+")",onClick:()=>this.setState({showAllRels:!0})})]}),(0,a.jsx)("div",{className:"mb-3",style:{overflowY:"auto"},children:(0,a.jsxs)("span",{className:"icon-text is-flex-wrap-nowrap",children:[(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:"fa-solid fa-terminal","aria-hidden":"true"})}),(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)("span",{className:"is-family-code is-pre-wrap is-copyable",onClick:t,children:this.generateQuery(!0).query})})]})}),this.state.error&&(0,a.jsxs)("div",{className:"message is-danger",children:[(0,a.jsxs)("div",{className:"message-header",children:[(0,a.jsx)("p",{children:"Error"}),(0,a.jsx)("button",{className:"delete","aria-label":"delete",onClick:()=>this.setState({error:null})})]}),(0,a.jsx)("div",{className:"message-body",children:this.state.error})]}),(0,a.jsx)("div",{className:"field",children:(0,a.jsxs)("div",{className:"control buttons is-justify-content-flex-end",children:[(0,a.jsx)(c,{color:"is-success",type:"submit",icon:"fa-solid fa-check",text:"Execute"}),!this.create&&this.props.stashManager.button(this.state.node,this.props.database),!this.create&&(0,a.jsx)(c,{icon:"fa-solid fa-refresh",text:"Reload",onClick:this.requestData}),(0,a.jsx)(c,{icon:"fa-solid fa-xmark",text:"Close",onClick:t=>this.props.tabManager.close(this.props.tabId,t)}),!this.create&&(0,a.jsx)(c,{icon:"fa-regular fa-trash-can",color:"is-danger",text:"Delete",onClick:()=>this.setState({delete:kr.getId(this.state.node)})})]})})]})]}):(0,a.jsx)("span",{className:"has-text-grey-light",children:"Loading..."})}}const ih=rh;class oh extends t.Component{render(){if(this.props.pages<=1)return;const t=[];if(this.props.page>=4)t.push(1,"e",this.props.page-1);else for(let e=1;e<this.props.page;e++)t.push(e);if(t.push(this.props.page),this.props.page<=this.props.pages-3)t.push(this.props.page+1,"e",this.props.pages);else for(let e=this.props.page+1;e<=this.props.pages;e++)t.push(e);return(0,a.jsxs)("nav",{className:"pagination is-centered",role:"navigation","aria-label":"pagination",children:[(0,a.jsx)("button",{className:"pagination-previous button",disabled:1===this.props.page,onClick:()=>this.props.action(this.props.page-1),"aria-label":"Goto previous page",children:(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:"fa-solid fa-chevron-left"})})}),(0,a.jsx)("button",{className:"pagination-next button",disabled:this.props.page===this.props.pages,onClick:()=>this.props.action(this.props.page+1),"aria-label":"Goto next page",children:(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:"fa-solid fa-chevron-right"})})}),(0,a.jsx)("ul",{className:"pagination-list",children:t.map(((t,e)=>(0,a.jsxs)("li",{children:["e"===t&&(0,a.jsx)("span",{className:"pagination-ellipsis",children:"\u2026"}),"number"===typeof t&&(0,a.jsx)("button",{className:"button pagination-link "+(this.props.page===t?"is-current":""),onClick:()=>this.props.action(t),"aria-label":"Goto page "+t,"aria-current":this.props.page===t&&"page",children:t})]},"li"+e)))})]})}}class sh extends t.Component{render(){return(0,a.jsxs)(a.Fragment,{children:[this.props.current.includes(this.props.sort)&&(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:"fa-solid fa-sort-down"})}),this.props.current.includes(this.props.sort+" DESC")&&(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:"fa-solid fa-sort-up"})})]})}}class ah extends t.Component{constructor(){var t;super(...arguments),t=this,this.perPage=20,this.queryTabId=void 0,this.state={rows:[],page:1,total:0,sort:[],delete:!1,error:null,search:"",loading:!1},this.requestData=()=>{const t=!!this.state.search.length&&/^\d+$/.test(this.state.search);let e="MATCH ("+(this.props.label.startsWith("*")?"n":"n:"+this.props.label)+")";if(this.state.search.length){switch(kr.ecosystem){case s.Neo4j:e+=" WHERE any(prop IN keys(n) WHERE toStringOrNull(n[prop]) STARTS WITH $search)";break;case s.Memgraph:e+=' WHERE any(prop IN keys(n) WHERE NOT valueType(n[prop]) IN ["LIST", "MAP"] AND toString(n[prop]) STARTS WITH $search)';break;default:return}t&&(e+=" OR id(n) = $id")}kr.query(e+" RETURN COUNT(n) AS cnt",{search:this.state.search,id:t?kr.toInt(this.state.search):null},this.props.database).then((n=>{const r=kr.fromInt(n.records[0].get("cnt")),i=Math.min(this.state.page,Math.ceil(r/this.perPage));kr.query(e+" RETURN n "+(this.state.sort.length?"ORDER BY "+this.state.sort.join(", "):"")+" SKIP $skip LIMIT $limit",{skip:kr.toInt(Math.max(i-1,0)*this.perPage),limit:kr.toInt(this.perPage),search:this.state.search,id:t?kr.toInt(this.state.search):null},this.props.database).then((t=>{this.setState({rows:t.records.map((t=>t.get("n"))),total:r,page:Math.max(i,1),loading:!1})})).catch((t=>this.setState({error:"["+t.name+"] "+t.message,loading:!1})))})).catch((t=>this.setState({error:"["+t.name+"] "+t.message,loading:!1})))},this.handleChangePage=t=>{this.setState({page:t},this.requestData)},this.handleDeleteModalConfirm=(t,e)=>{kr.query("MATCH (n) WHERE "+kr.fnId()+" = $id "+(e?"DETACH ":"")+"DELETE n",{id:t},this.props.database).then((e=>{if(e.summary.counters.updates().nodesDeleted>0){this.requestData(),this.props.toast("Node deleted");const e=this.props.tabManager.generateId({id:t,database:this.props.database});this.props.tabManager.setChanged(e,!1,(()=>{this.props.tabManager.close(e)}))}})).catch((t=>{this.setState({error:t.message})}))},this.handleSetSort=t=>{this.setState((e=>{const n=e.sort.indexOf(t),r=e.sort.indexOf(t+" DESC"),i=[...e.sort];return-1!==n?i[n]=t+" DESC":-1!==r?i.splice(n,1):i.push(t),{sort:i}}),this.requestData)},this.timeout=null,this.handleSearch=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.setState({search:e,loading:!0},(()=>{null!==t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout((()=>{t.requestData(),t.timeout=null}),300)}))}}componentDidMount(){this.requestData()}componentDidUpdate(t){t.active!==this.props.active&&this.props.active&&this.requestData()}render(){const t=[];for(const r of this.state.rows)for(const e in r.properties)t.includes(e)||t.push(e);for(let r of this.state.sort)r=r.replace(/^n\.([^ ]+)(?: DESC)?$/,"$1"),t.includes(r)||t.push(r);t.sort();const e=(()=>{for(const t of this.state.rows)for(const e of t.labels)if(e!==this.props.label)return!0;return!1})();let n="MATCH ("+(this.props.label.startsWith("*")?"n":"n:"+this.props.label)+")";if(this.state.search.length){switch(kr.ecosystem){case s.Neo4j:n+=' WHERE any(prop IN keys(n) WHERE toStringOrNull(n[prop]) STARTS WITH "'+this.state.search+'")';break;case s.Memgraph:n+=' WHERE any(prop IN keys(n) WHERE NOT valueType(n[prop]) IN ["LIST", "MAP"] AND toString(n[prop]) STARTS WITH "'+this.state.search+'")';break;default:return}/^\d+$/.test(this.state.search)&&(n+=" OR id(n) = "+this.state.search)}return n+=" RETURN n"+(this.state.sort.length?" ORDER BY "+this.state.sort.join(", "):"")+" SKIP "+Math.max(this.state.page-1,0)*this.perPage+" LIMIT "+this.perPage,(0,a.jsxs)(a.Fragment,{children:[this.state.delete&&(0,a.jsx)(ei,{delete:this.state.delete,detach:!0,handleConfirm:this.handleDeleteModalConfirm,handleClose:()=>this.setState({delete:!1})}),this.state.error&&(0,a.jsxs)("div",{className:"message is-danger",children:[(0,a.jsxs)("div",{className:"message-header",children:[(0,a.jsx)("p",{children:"Error"}),(0,a.jsx)("button",{className:"delete","aria-label":"delete",onClick:()=>this.setState({error:null})})]}),(0,a.jsx)("div",{className:"message-body",children:this.state.error})]}),(0,a.jsx)("div",{className:"mb-3",style:{overflowY:"auto"},children:(0,a.jsxs)("span",{className:"icon-text is-flex-wrap-nowrap",children:[(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:"fa-solid fa-terminal","aria-hidden":"true"})}),(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)("span",{className:"is-family-code is-pre-wrap is-copyable",onClick:t,children:n})})]})}),(0,a.jsxs)("div",{className:"buttons mb-3",children:[(0,a.jsx)(c,{icon:"fa-solid fa-plus",text:"Create node",color:"is-primary",onClick:()=>this.props.tabManager.add({prefix:"New node"},"fa-solid fa-square-plus",r.Node,{id:null,database:this.props.database,label:"*"===this.props.label?"":this.props.label},(new Date).getTime().toString())}),(0,a.jsx)(c,{icon:"fa-solid fa-circle-nodes",text:"View as graph",onClick:()=>this.queryTabId=this.props.tabManager.add({prefix:"Query"},"fa-solid fa-terminal",r.Query,{query:n,execute:!0,view:o.Graph},this.queryTabId)}),(0,a.jsxs)("div",{className:"control has-icons-left is-align-self-flex-start "+(this.state.loading?"border-progress":""),children:[(0,a.jsx)("input",{className:"input",type:"search",placeholder:"Search",value:this.state.search,onChange:t=>this.handleSearch(t.currentTarget.value)}),(0,a.jsx)("span",{className:"icon is-left",children:(0,a.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})]}),(0,a.jsx)("div",{className:"table-container",children:(0,a.jsxs)("table",{className:"table is-bordered is-striped is-narrow is-hoverable",children:[(0,a.jsxs)("thead",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{colSpan:oi().tableViewShowElementId&&kr.hasElementId?3:2,children:"Node"}),e&&(0,a.jsx)("th",{rowSpan:2,children:"Additional labels"}),t.length>0?(0,a.jsx)("th",{colSpan:t.length,children:"properties"}):""]}),(0,a.jsxs)("tr",{children:[(0,a.jsxs)("th",{className:"wspace-nowrap is-clickable",onClick:()=>this.handleSetSort("id(n)"),children:["id ",(0,a.jsx)(sh,{sort:"id(n)",current:this.state.sort})]}),oi().tableViewShowElementId&&kr.hasElementId&&(0,a.jsxs)("th",{className:"wspace-nowrap is-clickable",onClick:()=>this.handleSetSort("elementId(n)"),children:["elementId ",(0,a.jsx)(sh,{sort:"elementId(n)",current:this.state.sort})]}),(0,a.jsx)("th",{}),t.map((t=>(0,a.jsxs)("th",{className:"wspace-nowrap is-clickable",onClick:()=>this.handleSetSort("n."+t),children:[t," ",(0,a.jsx)(sh,{sort:"n."+t,current:this.state.sort})]},"th-"+t)))]})]}),(0,a.jsx)("tbody",{children:this.state.rows.map((n=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(c,{onClick:()=>this.props.tabManager.add({prefix:"Node",i:n.identity},"fa-solid fa-pen-to-square",r.Node,{id:kr.getId(n),database:this.props.database}),icon:"fa-solid fa-pen-clip",text:"#"+kr.strInt(n.identity)})}),oi().tableViewShowElementId&&kr.hasElementId&&(0,a.jsx)("td",{className:"wspace-nowrap",children:n.elementId}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"buttons is-flex-wrap-nowrap",children:[this.props.stashManager.button(n,this.props.database),(0,a.jsx)(c,{icon:"fa-regular fa-trash-can",color:"is-danger is-outlined",title:"Delete",onClick:()=>this.setState({delete:kr.getId(n)})})]})}),e&&(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"buttons",children:n.labels.filter((t=>t!==this.props.label)).map((t=>(0,a.jsx)(h,{label:t,database:this.props.database,tabManager:this.props.tabManager},t)))})}),t.map((t=>(0,a.jsx)("td",{children:t in n.properties&&Qr(n.properties[t])},"td-"+t)))]},"tr-"+kr.strInt(n.identity))))})]})}),(0,a.jsx)(oh,{page:this.state.page,pages:Math.ceil(this.state.total/this.perPage),action:this.handleChangePage})]})}}const lh=ah;class uh extends t.Component{constructor(){var t;super(...arguments),t=this,this.perPage=20,this.queryTabId=void 0,this.state={rows:[],page:1,total:0,sort:[],delete:!1,error:null,search:"",loading:!1},this.requestData=()=>{const t=!!this.state.search.length&&/^\d+$/.test(this.state.search);let e="MATCH (a)-["+(this.props.type.startsWith("*")?"r":"r:"+this.props.type)+"]->(b)";if(this.state.search.length){switch(kr.ecosystem){case s.Neo4j:e+=" WHERE any(prop IN keys(r) WHERE toStringOrNull(r[prop]) STARTS WITH $search)";break;case s.Memgraph:e+=' WHERE any(prop IN keys(r) WHERE NOT valueType(r[prop]) IN ["LIST", "MAP"] AND toString(r[prop]) STARTS WITH $search)';break;default:return}t&&(e+=" OR id(r) = $id OR id(a) = $id OR id(b) = $id")}kr.query(e+" RETURN COUNT(r) AS cnt",{search:this.state.search,id:t?kr.toInt(this.state.search):null},this.props.database).then((n=>{const r=kr.fromInt(n.records[0].get("cnt")),i=Math.min(this.state.page,Math.ceil(r/this.perPage));kr.query(e+" RETURN r "+(this.state.sort.length?"ORDER BY "+this.state.sort.join(", "):"")+" SKIP $skip LIMIT $limit",{skip:kr.toInt(Math.max(i-1,0)*this.perPage),limit:kr.toInt(this.perPage),search:this.state.search,id:t?kr.toInt(this.state.search):null},this.props.database).then((t=>{this.setState({rows:t.records.map((t=>t.get("r"))),total:r,page:Math.max(i,1),loading:!1})})).catch((t=>this.setState({error:"["+t.name+"] "+t.message,loading:!1})))})).catch((t=>this.setState({error:"["+t.name+"] "+t.message,loading:!1})))},this.handleChangePage=t=>{this.setState({page:t},this.requestData)},this.handleClearError=()=>{this.setState({error:null})},this.handleDeleteModalConfirm=t=>{kr.query("MATCH ()-[r]-() WHERE "+kr.fnId("r")+" = $id DELETE r",{id:t},this.props.database).then((e=>{if(e.summary.counters.updates().relationshipsDeleted>0){this.requestData(),this.props.toast("Relationship deleted");const e=this.props.tabManager.generateId({id:t,database:this.props.database});this.props.tabManager.setChanged(e,!1,(()=>{this.props.tabManager.close(e)}))}})).catch((t=>{this.setState({error:t.message})}))},this.handleSetSort=t=>{this.setState((e=>{const n=e.sort.indexOf(t),r=e.sort.indexOf(t+" DESC"),i=[...e.sort];return-1!==n?i[n]=t+" DESC":-1!==r?i.splice(n,1):i.push(t),{sort:i}}),this.requestData)},this.timeout=null,this.handleSearch=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.setState({search:e,loading:!0},(()=>{null!==t.timeout&&clearTimeout(t.timeout),t.timeout=setTimeout((()=>{t.requestData(),t.timeout=null}),300)}))}}componentDidMount(){this.requestData()}componentDidUpdate(t){t.active!==this.props.active&&this.props.active&&this.requestData()}render(){const t=[];for(const n of this.state.rows)for(const e in n.properties)t.includes(e)||t.push(e);for(let n of this.state.sort)n=n.replace(/^r\.([^ ]+)(?: DESC)?$/,"$1"),t.includes(n)||t.push(n);t.sort();let e="MATCH (a)-["+(this.props.type.startsWith("*")?"r":"r:"+this.props.type)+"]->(b)";if(this.state.search.length){switch(kr.ecosystem){case s.Neo4j:e+=' WHERE any(prop IN keys(r) WHERE toStringOrNull(r[prop]) STARTS WITH "'+this.state.search+'")';break;case s.Memgraph:e+=' WHERE any(prop IN keys(r) WHERE NOT valueType(r[prop]) IN ["LIST", "MAP"] AND toString(r[prop]) STARTS WITH "'+this.state.search+'")';break;default:return}/^\d+$/.test(this.state.search)&&(e+=" OR id(r) = "+this.state.search+" OR id(a) = "+this.state.search+" OR id(b) = "+this.state.search)}return e+=" RETURN n"+(this.state.sort.length?" ORDER BY "+this.state.sort.join(", "):"")+" SKIP "+Math.max(this.state.page-1,0)*this.perPage+" LIMIT "+this.perPage,(0,a.jsxs)(a.Fragment,{children:[this.state.delete&&(0,a.jsx)(ei,{delete:this.state.delete,handleConfirm:this.handleDeleteModalConfirm,handleClose:()=>this.setState({delete:!1})}),"string"===typeof this.state.error&&(0,a.jsxs)("div",{className:"message is-danger",children:[(0,a.jsxs)("div",{className:"message-header",children:[(0,a.jsx)("p",{children:"Error"}),(0,a.jsx)("button",{className:"delete","aria-label":"delete",onClick:this.handleClearError})]}),(0,a.jsx)("div",{className:"message-body",children:this.state.error})]}),(0,a.jsx)("div",{className:"mb-3",style:{overflowY:"auto"},children:(0,a.jsxs)("span",{className:"icon-text is-flex-wrap-nowrap",children:[(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:"fa-solid fa-terminal","aria-hidden":"true"})}),(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)("span",{className:"is-family-code is-pre-wrap is-copyable",onClick:t,children:e})})]})}),(0,a.jsxs)("div",{className:"buttons mb-3",children:[(0,a.jsx)(c,{icon:"fa-solid fa-plus",text:"Create relationship",color:"is-primary",onClick:()=>this.props.tabManager.add({prefix:"New relationship"},"fa-regular fa-square-plus",r.Rel,{id:null,database:this.props.database,type:this.props.type.startsWith("*")?"":this.props.type})}),(0,a.jsx)(c,{icon:"fa-solid fa-circle-nodes",text:"View as graph",onClick:()=>this.queryTabId=this.props.tabManager.add({prefix:"Query"},"fa-solid fa-terminal",r.Query,{query:e,execute:!0,view:o.Graph},this.queryTabId)}),(0,a.jsxs)("div",{className:"control has-icons-left is-align-self-flex-start "+(this.state.loading?"border-progress":""),children:[(0,a.jsx)("input",{className:"input",type:"search",placeholder:"Search",value:this.state.search,onChange:t=>this.handleSearch(t.currentTarget.value)}),(0,a.jsx)("span",{className:"icon is-left",children:(0,a.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})})]})]}),(0,a.jsx)("div",{className:"table-container",children:(0,a.jsxs)("table",{className:"table is-bordered is-striped is-narrow is-hoverable",children:[(0,a.jsxs)("thead",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{colSpan:oi().tableViewShowElementId&&kr.hasElementId?3:2,children:"Relationship"}),this.props.type.startsWith("*")&&(0,a.jsx)("th",{rowSpan:2,children:"Type"}),t.length>0?(0,a.jsx)("th",{colSpan:t.length,children:"properties"}):"",(0,a.jsx)("th",{colSpan:oi().tableViewShowElementId&&kr.hasElementId?2:1,children:"Start node"}),(0,a.jsx)("th",{colSpan:oi().tableViewShowElementId&&kr.hasElementId?2:1,children:"End node"})]}),(0,a.jsxs)("tr",{children:[(0,a.jsxs)("th",{rowSpan:2,className:"wspace-nowrap is-clickable",onClick:()=>this.handleSetSort("id(r)"),children:["id ",(0,a.jsx)(sh,{sort:"id(r)",current:this.state.sort})]}),oi().tableViewShowElementId&&kr.hasElementId&&(0,a.jsxs)("th",{rowSpan:2,className:"wspace-nowrap is-clickable",onClick:()=>this.handleSetSort("elementId(r)"),children:["elementId ",(0,a.jsx)(sh,{sort:"elementId(r)",current:this.state.sort})]}),(0,a.jsx)("th",{}),t.map((t=>(0,a.jsxs)("th",{className:"wspace-nowrap is-clickable",onClick:()=>this.handleSetSort("r."+t),children:[t," ",(0,a.jsx)(sh,{sort:"r."+t,current:this.state.sort})]},"th-"+t))),(0,a.jsxs)("th",{className:"wspace-nowrap is-clickable",onClick:()=>this.handleSetSort("id(a)"),children:["id ",(0,a.jsx)(sh,{sort:"id(a)",current:this.state.sort})]}),oi().tableViewShowElementId&&kr.hasElementId&&(0,a.jsxs)("th",{className:"wspace-nowrap is-clickable",onClick:()=>this.handleSetSort("elementId(a)"),children:["elementId ",(0,a.jsx)(sh,{sort:"elementId(a)",current:this.state.sort})]}),(0,a.jsxs)("th",{className:"wspace-nowrap is-clickable",onClick:()=>this.handleSetSort("id(b)"),children:["id ",(0,a.jsx)(sh,{sort:"id(b)",current:this.state.sort})]}),oi().tableViewShowElementId&&kr.hasElementId&&(0,a.jsxs)("th",{className:"wspace-nowrap is-clickable",onClick:()=>this.handleSetSort("elementId(b)"),children:["elementId ",(0,a.jsx)(sh,{sort:"elementId(b)",current:this.state.sort})]})]})]}),(0,a.jsx)("tbody",{children:this.state.rows.map((e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:(0,a.jsx)(c,{onClick:()=>this.props.tabManager.add({prefix:"Rel",i:e.identity},"fa-regular fa-pen-to-square",r.Rel,{id:kr.getId(e),database:this.props.database}),icon:"fa-solid fa-pen-clip",text:"#"+kr.strInt(e.identity)})}),oi().tableViewShowElementId&&kr.hasElementId&&(0,a.jsx)("td",{className:"wspace-nowrap",children:e.elementId}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"is-flex-wrap-nowrap buttons",children:[this.props.stashManager.button(e,this.props.database),(0,a.jsx)(c,{icon:"fa-regular fa-trash-can",color:"is-danger is-outlined",title:"Delete",onClick:()=>this.setState({delete:kr.getId(e)})})]})}),this.props.type.startsWith("*")&&(0,a.jsx)("td",{children:(0,a.jsx)(d,{type:e.type,database:this.props.database,tabManager:this.props.tabManager})}),t.map((t=>(0,a.jsx)("td",{children:t in e.properties&&Qr(e.properties[t])},"td-"+t))),(0,a.jsx)("td",{children:(0,a.jsx)(c,{onClick:()=>this.props.tabManager.add({prefix:"Node",i:e.start},"fa-solid fa-pen-to-square",r.Node,{id:kr.getId(e,"startNodeElementId","start"),database:this.props.database}),icon:"fa-solid fa-pen-clip",text:"#"+kr.strInt(e.start)})}),oi().tableViewShowElementId&&kr.hasElementId&&(0,a.jsx)("td",{className:"wspace-nowrap",children:e.startNodeElementId}),(0,a.jsx)("td",{children:(0,a.jsx)(c,{onClick:()=>this.props.tabManager.add({prefix:"Node",i:e.end},"fa-solid fa-pen-to-square",r.Node,{id:kr.getId(e,"endNodeElementId","end"),database:this.props.database}),icon:"fa-solid fa-pen-clip",text:"#"+kr.strInt(e.end)})}),oi().tableViewShowElementId&&kr.hasElementId&&(0,a.jsx)("td",{className:"wspace-nowrap",children:e.endNodeElementId})]},"tr-"+kr.strInt(e.identity))))})]})}),(0,a.jsx)(oh,{page:this.state.page,pages:Math.ceil(this.state.total/this.perPage),action:this.handleChangePage})]})}}const ch=uh;class hh extends t.Component{constructor(){var t;super(...arguments),t=this,this.state={rel:null,start:null,end:null,focus:null,type:this.props.type||"",properties:[],typeModal:!1,typeModalInput:"",error:null,delete:!1,selectNodeModal:null},this.create=null===this.props.id,this.requestData=()=>{this.create||kr.query("MATCH (a)-[r]->(b) WHERE "+kr.fnId("r")+" = $id RETURN r, a, b",{id:this.props.id},this.props.database).then((t=>{if(0===t.records.length)return void this.props.tabManager.close(this.props.tabId);const e=t.records[0].get("r"),n=[],r=(new Date).getTime();for(const o in e.properties){const t=Zr(e.properties[o]);if(t===i.List){const t=Zr(e.properties[o][0]);e.properties[o]=e.properties[o].map((e=>({value:e,type:t,temp:Gr(t,e)})))}if(t===i.Map){const t=[];for(const n in e.properties[o]){const r=Zr(e.properties[o][n]);t.push({key:n,value:e.properties[o][n],type:r,temp:Gr(r,e.properties[o][n])})}e.properties[o]=t}n.push({name:o+r,key:o,value:e.properties[o],type:t,temp:Gr(t,e.properties[o])})}n.sort(((t,e)=>t.name.toLowerCase().localeCompare(e.name.toLowerCase()))),this.setState({rel:e,start:t.records[0].get("a"),end:t.records[0].get("b"),type:e.type,properties:n})})).catch((()=>this.props.tabManager.close(this.props.tabId)))},this.handleTypeOpenModal=()=>{kr.query("MATCH ()-[r]->() RETURN collect(DISTINCT type(r)) AS c",{},this.props.database).then((t=>{this.setState({typeModal:t.records[0].get("c").filter((t=>this.state.type!==t))})})).catch((t=>this.setState({error:"["+t.name+"] "+t.message})))},this.handleTypeSelect=t=>{this.setState({type:t,typeModal:!1,typeModalInput:""},this.markChanged)},this.handleTypeInput=t=>{let e=t.currentTarget.value;oi().forceNamingRecommendations&&(e=e.replace(/^[^a-zA-Z]*/,"").replace(/[a-z]/,(t=>t.toUpperCase()))),this.setState({typeModalInput:e})},this.handleTypeModalClose=()=>{this.setState({typeModal:!1})},this.handleSubmit=t=>{if(t.preventDefault(),!this.state.type)return this.setState({error:"Not defined relationship type"}),!1;if(!this.state.start)return this.setState({error:"Not defined start node"}),!1;if(!this.state.end)return this.setState({error:"Not defined end node"}),!1;const{query:e,props:n}=this.generateQuery();kr.query(e,{id:this.state.rel?kr.hasElementId?this.state.rel.elementId:this.state.rel.identity:null,a:kr.hasElementId?this.state.start.elementId:this.state.start.identity,b:kr.hasElementId?this.state.end.elementId:this.state.end.identity,p:n},this.props.database).then((t=>{if(t.summary.counters.containsUpdates()&&this.props.toast(this.create?"Relationship created":"Relationship updated"),oi().closeEditAfterExecuteSuccess)this.props.tabManager.setChanged(this.props.tabId,!1,(()=>{this.props.tabManager.close(this.props.tabId)}));else if(this.create||this.state.rel.start!==this.state.start.identity||this.state.rel.end!==this.state.end.identity){const e=t.records[0].get("r");this.props.tabManager.setChanged(this.props.tabId,!1,(()=>{this.props.tabManager.add({prefix:"Rel",i:e.identity},"fa-solid fa-pen-to-square",r.Rel,{id:kr.getId(e),database:this.props.database}),this.props.tabManager.close(this.props.tabId)}))}})).catch((t=>this.setState({error:"["+t.name+"] "+t.message})))},this.generateQuery=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const n=Xr(t.state.properties);let r="";const i=t=>"number"===typeof t?t.toString():"'"+t+"'";if(t.create)r+="MATCH (a) WHERE "+kr.fnId("a")+" = "+(t.state.start?e?i(kr.getId(t.state.start)):"$a":""),r+=" MATCH (b) WHERE "+kr.fnId("b")+" = "+(t.state.end?e?i(kr.getId(t.state.end)):"$b":""),r+=" CREATE (a)-[r:"+t.state.type+"]->(b)";else{const n=kr.getId(t.state.rel,"startNodeElementId","start")!==kr.getId(t.state.start),o=kr.getId(t.state.rel,"endNodeElementId","end")!==kr.getId(t.state.end),s=n||o||t.state.rel.type!==t.state.type;r+="MATCH "+(n?"()":"(a)")+"-[r]->"+(o?"()":"(b)"),r+=" WHERE "+kr.fnId("r")+" = "+(e?i(t.props.id):"$id"),n&&(r+=" MATCH (a) WHERE "+kr.fnId("a")+" = "+(e?i(kr.getId(t.state.start)):"$a")),o&&(r+=" MATCH (b) WHERE "+kr.fnId("b")+" = "+(e?i(kr.getId(t.state.end)):"$b")),s&&(r+=" DELETE r"),s&&(r+=" WITH a, b CREATE (a)-[r:"+t.state.type+"]->(b)")}return e?t.state.properties.length&&(r+=" SET r = "+Yr(t.state.properties)):r+=" SET r = $p RETURN r",{query:r,props:n}},this.handleDeleteModalConfirm=t=>{kr.query("MATCH ()-[r]-() WHERE "+kr.fnId("r")+" = $id DELETE r",{id:t},this.props.database).then((t=>{t.summary.counters.updates().nodesDeleted>0&&(this.props.tabManager.setChanged(this.props.tabId,!1,(()=>this.props.tabManager.close(this.props.tabId))),this.props.toast("Relationship deleted"))})).catch((t=>{this.setState({error:t.message})}))},this.markChanged=()=>{this.props.tabManager.setChanged(this.props.tabId,this.create||this.state.rel.type!==this.state.type||this.state.rel.start!==this.state.start.identity||this.state.rel.end!==this.state.end.identity||Object.keys(this.state.rel.properties).sort().toString()!==this.state.properties.map((t=>t.key)).sort().toString()||this.state.properties.some((t=>t.value.toString()!==this.state.rel.properties[t.key].toString())))}}componentDidMount(){this.requestData()}componentDidUpdate(t){return!this.create&&this.props.active&&this.props.active!==t.active&&kr.query("MATCH ()-[r]->() WHERE "+kr.fnId("r")+" = $id RETURN COUNT(r) AS c",{id:this.props.id},this.props.database).then((t=>{1!==kr.fromInt(t.records[0].get("c"))&&this.props.tabManager.close(this.props.tabId)})).catch((()=>this.props.tabManager.close(this.props.tabId))),!0}render(){return this.create||null!==this.state.rel?(0,a.jsxs)(a.Fragment,{children:[this.state.delete&&(0,a.jsx)(ei,{delete:this.state.delete,handleConfirm:this.handleDeleteModalConfirm,handleClose:()=>this.setState({delete:!1})}),Array.isArray(this.state.typeModal)&&(0,a.jsxs)(Jr,{title:"Set type",icon:"fa-solid fa-tag",handleClose:this.handleTypeModalClose,children:[(0,a.jsx)("div",{className:"buttons",children:this.state.typeModal.map((t=>(0,a.jsx)(c,{text:t,color:"is-info is-rounded tag is-medium has-text-white",onClick:()=>this.handleTypeSelect(t)},t)))}),(0,a.jsxs)("form",{onSubmit:t=>(t.preventDefault(),this.handleTypeSelect(this.state.typeModalInput),!0),children:[(0,a.jsx)("label",{className:"label",children:"Or specify new one"}),(0,a.jsxs)("div",{className:"field is-grouped",children:[(0,a.jsx)("div",{className:"control is-expanded",children:(0,a.jsx)("input",{autoFocus:!0,pattern:"^[A-Za-z][A-Za-z_0-9]*$",required:!0,className:"input",type:"text",value:this.state.typeModalInput,onChange:this.handleTypeInput})}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(c,{icon:"fa-solid fa-check",type:"submit"})})]})]})]}),this.state.selectNodeModal&&(0,a.jsx)(dh,{stashManager:this.props.stashManager,handleNodeSelect:t=>{1===this.state.selectNodeModal?this.setState({start:t,selectNodeModal:null},this.markChanged):this.setState({end:t,selectNodeModal:null},this.markChanged)},handleClose:()=>this.setState({selectNodeModal:null}),database:this.props.database}),(0,a.jsxs)("form",{onSubmit:this.handleSubmit,children:[!this.create&&(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsxs)("div",{className:"columns",children:[(0,a.jsx)("div",{className:"column "+(kr.hasElementId?"is-half-desktop":""),children:(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",htmlFor:"rel-identity",children:"identity"}),(0,a.jsx)("div",{className:"control",onClick:t,children:(0,a.jsx)("input",{id:"rel-identity",className:"input is-copyable",readOnly:!0,type:"text",value:kr.strInt(this.state.rel.identity)})})]})}),kr.hasElementId&&(0,a.jsx)("div",{className:"column is-half-desktop",children:(0,a.jsxs)("div",{className:"field",children:[(0,a.jsx)("label",{className:"label",htmlFor:"rel-elementId",children:"elementId"}),(0,a.jsx)("div",{className:"control",onClick:t,children:(0,a.jsx)("input",{id:"rel-elementId",className:"input is-copyable",readOnly:!0,type:"text",value:this.state.rel.elementId})})]})})]})}),(0,a.jsxs)("fieldset",{className:"box",children:[(0,a.jsxs)("legend",{className:"tag is-link is-light",children:[(0,a.jsx)("i",{className:"fa-solid fa-tags mr-2"}),"Type"]}),(0,a.jsxs)("div",{className:"buttons tags",children:[this.state.type&&(0,a.jsx)("span",{className:"tag is-info is-medium is-rounded",children:(0,a.jsx)("a",{className:"has-text-white mr-1",onClick:()=>this.props.tabManager.add(this.state.type,"fa-regular fa-circle",r.Type,{type:this.state.type,database:this.props.database}),children:this.state.type})}),(0,a.jsx)(c,{icon:"fa-solid fa-pen-clip",onClick:this.handleTypeOpenModal})]})]}),(0,a.jsxs)("fieldset",{className:"box",children:[(0,a.jsxs)("legend",{className:"tag is-link is-light",children:[(0,a.jsx)("i",{className:"fa-solid fa-rectangle-list mr-2"}),"Properties"]}),(0,a.jsx)(nh,{properties:this.state.properties,updateProperties:t=>{this.setState({properties:t},this.markChanged)}})]}),(0,a.jsxs)("fieldset",{className:"box",children:[(0,a.jsxs)("legend",{className:"tag is-link is-light",children:[(0,a.jsx)("i",{className:"fa-solid fa-circle-nodes mr-2"}),"Start node"]}),(0,a.jsxs)("div",{className:"is-flex is-align-items-center is-justify-content-flex-start mb-3 mb-last-none",children:[this.state.start&&(0,a.jsx)(Hr,{node:this.state.start,tabManager:this.props.tabManager}),(0,a.jsx)("span",{className:"ml-auto",children:(0,a.jsx)(c,{icon:"fa-solid fa-shuffle",text:"Change",onClick:()=>this.setState({selectNodeModal:1})})})]})]}),(0,a.jsxs)("fieldset",{className:"box",children:[(0,a.jsxs)("legend",{className:"tag is-link is-light",children:[(0,a.jsx)("i",{className:"fa-solid fa-circle-nodes mr-2"}),"End node"]}),(0,a.jsxs)("div",{className:"is-flex is-align-items-center is-justify-content-flex-start mb-3 mb-last-none",children:[this.state.end&&(0,a.jsx)(Hr,{node:this.state.end,tabManager:this.props.tabManager}),(0,a.jsx)("span",{className:"ml-auto",children:(0,a.jsx)(c,{icon:"fa-solid fa-shuffle",text:"Change",onClick:()=>this.setState({selectNodeModal:2})})})]})]}),(0,a.jsx)("div",{className:"mb-3",style:{overflowY:"auto"},children:(0,a.jsxs)("span",{className:"icon-text is-flex-wrap-nowrap",children:[(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:"fa-solid fa-terminal","aria-hidden":"true"})}),(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)("span",{className:"is-family-code is-pre-wrap is-copyable",onClick:t,children:this.generateQuery(!0).query})})]})}),this.state.error&&(0,a.jsxs)("div",{className:"message is-danger",children:[(0,a.jsxs)("div",{className:"message-header",children:[(0,a.jsx)("p",{children:"Error"}),(0,a.jsx)("button",{className:"delete","aria-label":"delete",onClick:()=>this.setState({error:null})})]}),(0,a.jsx)("div",{className:"message-body",children:this.state.error})]}),(0,a.jsx)("div",{className:"field",children:(0,a.jsxs)("div",{className:"control buttons is-justify-content-flex-end",children:[(0,a.jsx)(c,{color:"is-success",type:"submit",icon:"fa-solid fa-check",text:"Execute"}),!this.create&&this.props.stashManager.button(this.state.rel,this.props.database),!this.create&&(0,a.jsx)(c,{icon:"fa-solid fa-refresh",text:"Reload",onClick:this.requestData}),(0,a.jsx)(c,{icon:"fa-solid fa-xmark",text:"Close",onClick:t=>this.props.tabManager.close(this.props.tabId,t)}),!this.create&&(0,a.jsx)(c,{icon:"fa-regular fa-trash-can",color:"is-danger",text:"Delete",onClick:()=>this.setState({delete:kr.getId(this.state.rel)})})]})})]})]}):(0,a.jsx)("span",{className:"has-text-grey-light",children:"Loading..."})}}class dh extends t.Component{constructor(){super(...arguments),this.state={id:"",error:null},this.handleSubmit=t=>{t.preventDefault();const e=/^\d+$/.test(this.state.id);kr.query("MATCH (n) WHERE "+(e?"id(n)":"elementId(n)")+" = $id RETURN n",{id:e?kr.toInt(this.state.id):this.state.id},this.props.database).then((t=>t.records.length>0?(this.props.handleNodeSelect(t.records[0].get("n")),!0):(this.setState({error:"Node not found"}),!1))).catch((t=>{this.setState({error:"["+t.name+"] "+t.message})}))}}render(){return(0,a.jsxs)(Jr,{title:"Select node",icon:"fa-regular fa-circle",handleClose:this.props.handleClose,backdrop:!0,children:[(0,a.jsx)("label",{className:"label",children:"Stashed nodes"}),this.props.stashManager.get().filter((t=>t.value instanceof p.Node)).length>0?(0,a.jsx)("div",{className:"buttons",children:this.props.stashManager.get().filter((t=>t.database===this.props.database&&t.value instanceof p.Node)).map((t=>(0,a.jsx)(c,{text:(t.value.labels.length>0?":"+t.value.labels.join(":")+" ":"")+"#"+kr.strInt(t.value.identity),onClick:()=>this.props.handleNodeSelect(t.value)},t.id)))}):(0,a.jsx)("div",{className:"has-text-grey-light mb-3",children:"none"}),(0,a.jsxs)("form",{onSubmit:this.handleSubmit,children:[(0,a.jsxs)("label",{className:"label",children:["Or enter id ",kr.hasElementId?"or elementId":""]}),(0,a.jsxs)("div",{className:"field is-grouped",children:[(0,a.jsx)("div",{className:"control is-expanded",children:(0,a.jsx)("input",{autoFocus:!0,required:!0,className:"input",type:"text",value:this.state.id,onChange:t=>{const e=t.currentTarget;this.setState({id:e.value,error:null})}})}),(0,a.jsx)("div",{className:"control",children:(0,a.jsx)(c,{icon:"fa-solid fa-check",type:"submit"})})]}),this.state.error&&(0,a.jsx)("div",{className:"notification is-danger",children:this.state.error})]})]})}}const fh=hh;class ph extends t.Component{constructor(){super(...arguments),this.state={logs:kr.logs},this.printDate=t=>t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,"0")+"-"+t.getDate().toString().padStart(2,"0")+" "+t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0")+":"+t.getSeconds().toString().padStart(2,"0")+"."+t.getMilliseconds().toString().padStart(3,"0")}componentDidUpdate(t,e){e.logs!=kr.logs&&this.setState({logs:kr.logs})}render(){return(0,a.jsx)("div",{className:"table-container",children:(0,a.jsxs)("table",{className:"table is-bordered is-striped is-narrow is-hoverable",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"DateTime"}),(0,a.jsx)("th",{}),(0,a.jsx)("th",{children:"Query"}),(0,a.jsx)("th",{children:"Parameters"}),(0,a.jsx)("th",{})]})}),(0,a.jsx)(Ir.Consumer,{children:t=>(0,a.jsx)("tbody",{children:this.state.logs.slice().reverse().map((e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:this.printDate(e.date)}),(0,a.jsx)("td",{className:"has-text-weight-bold "+(e.status?"has-text-success":"has-text-danger"),title:e.status?"Success":"Error",children:e.status?"S":"E"}),(0,a.jsx)("td",{children:(0,a.jsx)("span",{className:"is-family-code is-pre-wrap is-copyable",onClick:t,children:e.query})}),(0,a.jsx)("td",{children:(0,a.jsxs)("div",{className:"control has-icons-right",children:[(0,a.jsx)("pre",{children:Vr(e.params)}),(0,a.jsx)("span",{className:"icon is-right is-clickable",onClick:t,children:(0,a.jsx)("i",{className:"fa-regular fa-copy"})})]})}),(0,a.jsx)("td",{children:(0,a.jsx)(c,{icon:"fa-solid fa-terminal",title:"Open in query tab",onClick:()=>this.props.tabManager.add({prefix:"Query",i:e.date.toISOString()},"fa-solid fa-terminal",r.Query,{query:e.query})})})]})))})})]})})}}const mh=ph;class gh extends t.Component{constructor(){super(...arguments),this.state={active:!1,search:"",tab:"All",pulse:!1},this.shouldComponentUpdate=t=>(this.props.stashed.length===t.stashed.length||this.state.pulse||this.setState({pulse:!0}),!0),this.filter=t=>("Nodes"!==this.state.tab||t.value instanceof p.Node)&&(("Relationships"!==this.state.tab||t.value instanceof p.Relationship)&&(("Queries"!==this.state.tab||t.value instanceof qr)&&(0===this.state.search.length||(kr.strInt(t.value.identity)===this.state.search||(!!("elementId"in t.value&&kr.hasElementId&&t.value.elementId.includes(this.state.search))||(t.value instanceof p.Node&&t.value.labels.filter((t=>t.indexOf(this.state.search)>=0)).length>0||(t.value instanceof p.Relationship&&t.value.type.indexOf(this.state.search)>=0||t.value instanceof qr&&t.value.query.indexOf(this.state.search)>=0)))))))}render(){const t=[];for(let e=0;e<20;e++)t.push((0,a.jsxs)("a",{className:"panel-block",children:[(0,a.jsx)("span",{className:"panel-icon",children:(0,a.jsx)("i",{className:"fas fa-book","aria-hidden":"true"})}),"bulma"]}));return(0,a.jsxs)("section",{className:"stash panel is-link "+(this.state.active?"is-active":""),children:[(0,a.jsxs)("div",{className:"panel-heading is-clickable wspace-nowrap",onClick:()=>this.setState((t=>({active:!t.active}))),children:[(0,a.jsx)("span",{className:"icon mr-2 animate__animated "+(this.state.pulse?"animate__swing":""),onAnimationEnd:()=>this.setState({pulse:!1}),children:(0,a.jsx)("i",{className:"fa-regular fa-folder"+(this.state.active?"-open":"")})}),"Stash"]}),(0,a.jsxs)("div",{className:"panel-body",children:[(0,a.jsx)("div",{className:"panel-block",children:(0,a.jsxs)("p",{className:"control has-icons-left has-icons-right",children:[(0,a.jsx)("input",{className:"input",type:"text",placeholder:"Search",value:this.state.search,onChange:t=>this.setState({search:t.currentTarget.value})}),(0,a.jsx)("span",{className:"icon is-left",children:(0,a.jsx)("i",{className:"fas fa-search","aria-hidden":"true"})}),(0,a.jsx)("span",{className:"icon is-right is-clickable",onClick:()=>this.setState({search:""}),children:(0,a.jsx)("i",{className:"fa-solid fa-xmark"})})]})}),(0,a.jsx)("p",{className:"panel-tabs",children:["All","Nodes","Relationships","Queries"].map((t=>(0,a.jsx)("a",{className:this.state.tab===t?"is-active":"",onClick:()=>this.setState({tab:t}),children:t},t)))}),this.props.stashed.filter(this.filter).map((t=>(0,a.jsxs)("div",{className:"panel-block is-hoverable",children:[t.value instanceof p.Node&&(0,a.jsx)(Hr,{node:t.value,tabManager:this.props.tabManager,database:t.database,small:!0}),t.value instanceof p.Relationship&&(0,a.jsx)(Wr,{rel:t.value,tabManager:this.props.tabManager,database:t.database,small:!0}),t.value instanceof qr&&(0,a.jsxs)("a",{className:"is-align-items-center",title:t.value.query.length>25?t.value.query:"",onClick:()=>this.props.tabManager.add(t.value.identity,"fa-solid fa-terminal",r.Query,{query:t.value.query}),children:[t.value.query.substring(0,25)," ",t.value.query.length>25?"...":""]}),(t.value instanceof p.Node||t.value instanceof p.Relationship)&&kr.databases.length>1&&(0,a.jsxs)("span",{className:"ml-1",children:["(db: ",t.database,")"]}),(0,a.jsx)("button",{className:"delete ml-auto",onClick:()=>this.props.stashManager.remove(t.id)})]},t.id))),0===this.props.stashed.filter(this.filter).length&&(0,a.jsx)("span",{className:"panel-block has-text-grey-light",children:"empty"}),(0,a.jsx)("div",{className:"panel-block",children:(0,a.jsx)(c,{text:"Clear stash",color:"is-link is-outlined is-fullwidth",onClick:()=>this.props.stashManager.empty()})})]})]})}}const _h=gh;class yh extends t.Component{constructor(t){var e;super(t),e=this,this.state={activeTab:null,tabs:[],contents:[],toasts:[],settingsModal:!1,stashed:[],propertiesModal:null,confirmModal:null},this.components={[r.Start]:Fr,[r.Query]:Dc,[r.Node]:ih,[r.Label]:lh,[r.Type]:ch,[r.Rel]:fh,[r.History]:mh},this.tabManager={add:function(t,n,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return"object"===typeof t&&(t=e.tabManager.generateName(t.prefix,t.i)),0===o.length&&(o=e.tabManager.generateId(i,t)),e.setState((e=>{if(e.tabs.find((t=>t.id===o))){const t=e.contents.find((t=>t.id===o));t.props={...t.props,...i}}else{const s=e.tabs.findIndex((t=>t.id===e.activeTab));-1!==s?e.tabs.splice(s+1,0,{id:o,title:t,icon:n}):e.tabs.push({id:o,title:t,icon:n}),e.contents.push({id:o,page:r,props:i})}const a={tabs:e.tabs,contents:e.contents,activeTab:s||!e.activeTab?o:e.activeTab};return oi().rememberOpenTabs&&localStorage.setItem("tabs",JSON.stringify(a)),a})),o},close:function(t){var n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!==r&&r.stopPropagation(),oi().confirmCloseUnsavedChanges&&!e.state.confirmModal&&null!==(n=e.state.contents.find((e=>e.id===t)))&&void 0!==n&&n.changed?e.setState({confirmModal:t}):e.setState((e=>{let n=e.activeTab;if(n===t){const r=e.tabs.findIndex((e=>e.id===t));r>0&&(n=e.tabs[r-1].id)}const r={tabs:e.tabs.filter((e=>t!==e.id)),contents:e.contents.filter((e=>t!==e.id)),activeTab:n};return oi().rememberOpenTabs&&localStorage.setItem("tabs",JSON.stringify(r)),r}))},closeAll:t=>{t.stopPropagation(),this.setState((t=>{const e={tabs:t.tabs.filter((t=>"Start"===t.id)),contents:t.contents.filter((t=>"Start"===t.id)),activeTab:"Start"};return oi().rememberOpenTabs&&localStorage.setItem("tabs",JSON.stringify(e)),e}))},setChanged:(t,e,n)=>{this.setState({contents:this.state.contents.map((n=>n.id===t?{...n,changed:e}:n))},n)},setActive:t=>{this.setState((e=>(oi().rememberOpenTabs&&localStorage.setItem("tabs",JSON.stringify({tabs:e.tabs,contents:e.contents,activeTab:t})),{activeTab:t})))},generateName:function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n=null===n?Math.max(0,...e.state.tabs.filter((e=>e.title.startsWith(t))).map((t=>parseInt(t.title.split("#")[1]))))+1:kr.strInt(n),t+"#"+n},generateId:(t,e)=>{let n=!("id"in t)||"number"!==typeof t.id&&"string"!==typeof t.id?e:t.id.toString();return"database"in t&&(n+=t.database),n}},this.saveStashToStorage=()=>{localStorage.setItem("stash",JSON.stringify(this.state.stashed.map((t=>({database:t.value instanceof qr?t.value.query:t.database,type:t.value instanceof p.Node?"node":t.value instanceof p.Relationship?"rel":t.value instanceof qr?"query":"",identity:t.value instanceof p.Node||t.value instanceof p.Relationship?kr.getId(t.value):t.value.identity})))))},this.stashManager={add:function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(new Date).getTime();e.setState((i=>({stashed:-1===e.stashManager.indexOf(t,i.stashed)?i.stashed.concat({id:r,value:t,database:n}):i.stashed})),e.saveStashToStorage)},remove:t=>{this.setState((e=>({stashed:e.stashed.filter((e=>e.id!==t))})),this.saveStashToStorage)},indexOf:function(t){return((arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||e.state.stashed).findIndex((e=>t instanceof p.Node&&e.value instanceof p.Node||t instanceof p.Relationship&&e.value instanceof p.Relationship?kr.getId(t)===kr.getId(e.value):t instanceof qr&&e.value instanceof qr?t.identity===e.value.identity:void 0))},empty:()=>{this.state.stashed.length>0&&this.setState({stashed:[]}),localStorage.removeItem("stash")},button:function(t,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const i=e.stashManager.indexOf(t);return(0,a.jsx)(c,{title:-1===i?"Add to stash":"Remove from stash",onClick:()=>-1===i?e.stashManager.add(t,n):e.stashManager.remove(e.state.stashed[i].id),color:r,icon:-1===i?"fa-solid fa-folder-plus":"fa-solid fa-folder-minus"})},get:()=>this.state.stashed},this.toast=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"is-success",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const i=(new Date).getTime();e.setState({toasts:[{key:i,message:t,color:n,delay:r,timeout:setTimeout((()=>e.discardToast(i)),1e3*r)},...e.state.toasts]})},this.discardToast=t=>{this.setState((e=>({toasts:e.toasts.filter((e=>e.key!==t))})))},this.handleCopyToClipboard=t=>{const e=t.currentTarget;let n="";if(e.hasAttribute("data-copy"))n=e.getAttribute("data-copy");else if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLButtonElement)e.value.length>0&&(n=e.value);else if(e instanceof HTMLElement)if(e.firstChild instanceof HTMLInputElement||e.firstChild instanceof HTMLTextAreaElement)e.firstChild.value.length>0&&(n=e.firstChild.value);else if(e.className.includes("icon")&&e.className.includes("is-right")){let t;for(let r=0;r<e.parentElement.children.length;r++){if(t=e.parentElement.children[r],t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){t.value.length>0&&(n=t.value);break}if(!t.className.includes("icon")){t.innerText.length>0&&(n=t.innerText);break}}}else e.innerText.length>0&&(n=e.innerText);n.length>0&&navigator.clipboard.writeText(n).then((()=>this.toast("Copied to clipboard","is-success is-light")))},this.handleShowPropertiesModal=t=>{this.setState({propertiesModal:t})},oi().rememberOpenTabs||localStorage.removeItem("tabs");const n=localStorage.getItem("tabs");if(n){const t=JSON.parse(n);Array.isArray(t.tabs)&&t.tabs.every((t=>"id"in t&&"title"in t&&"icon"in t))&&Array.isArray(t.contents)&&t.contents.every((t=>"id"in t&&"page"in t&&"props"in t))&&t.tabs.length===t.contents.length&&(this.state.tabs=t.tabs,this.state.contents=t.contents,this.state.activeTab=t.activeTab)}}componentDidMount(){this.tabManager.add("Start","fa-solid fa-play",r.Start,{},"Start",!1);const t=localStorage.getItem("stash");if(t){const e=JSON.parse(t);let n=1;kr.databases.forEach((t=>{const r=t,i=e.filter((t=>t.database===r&&"node"===t.type)).map((t=>t.identity));i.length&&kr.query("MATCH (n) WHERE "+kr.fnId("n")+" IN $id RETURN n",{id:i},r).then((t=>{t.records.length&&t.records.forEach((t=>{this.stashManager.add(t.get("n"),r,n++)}))})).catch(console.error);const o=e.filter((t=>t.database===r&&"rel"===t.type)).map((t=>t.identity));o.length&&kr.query("MATCH ()-[r]->() WHERE "+kr.fnId("r")+" IN $id RETURN r",{id:o},r).then((t=>{t.records.length&&t.records.forEach((t=>{this.stashManager.add(t.get("r"),r,n++)}))})).catch(console.error)})),e.filter((t=>"query"===t.type)).forEach((t=>{this.stashManager.add(new qr(t.identity,t.database),"",n++)}))}}render(){if(0===this.state.tabs.length||null===this.state.activeTab)return;const t=this.state.contents.find((t=>t.id===this.state.activeTab));return document.title=this.state.tabs.find((t=>t.id===this.state.activeTab)).title+(kr.databases.length>1&&"database"in t.props?" (db: "+t.props.database+")":"")+" / cypherGUI",(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(zr,{handleLogout:this.props.handleLogout,handleOpenSettings:()=>this.setState({settingsModal:!0}),tabManager:this.tabManager,darkMode:this.props.darkMode}),(0,a.jsx)("section",{className:"tabs is-boxed sticky",children:(0,a.jsx)("ul",{children:this.state.tabs.map((t=>(0,a.jsx)(Dr,{active:t.id===this.state.activeTab,tabManager:this.tabManager,...t},"tab-"+t.id)))})}),(0,a.jsxs)(Pr.Provider,{value:this.handleShowPropertiesModal,children:[(0,a.jsx)(Ir.Provider,{value:this.handleCopyToClipboard,children:(0,a.jsx)(Nr.Provider,{value:this.toast,children:(0,a.jsx)("section",{className:"container is-fluid",children:this.state.contents.map((t=>{const e=this.components[t.page];return(0,a.jsx)("div",{className:t.id===this.state.activeTab?"":"is-hidden",children:(0,a.jsx)(e,{active:t.id===this.state.activeTab,tabName:this.state.tabs.filter((e=>e.id===t.id))[0].title,tabId:t.id,tabManager:this.tabManager,toast:this.toast,stashManager:this.stashManager,...t.props})},"content-"+t.id)}))})})}),(0,a.jsx)(_h,{stashed:this.state.stashed,tabManager:this.tabManager,stashManager:this.stashManager})]}),(0,a.jsx)("section",{className:"notifications","aria-label":"notifications",children:this.state.toasts.map((t=>(0,a.jsxs)("div",{className:"notification fadeOut pr-6 "+t.color,style:{animationDelay:t.delay-1+"s"},children:[(0,a.jsx)("button",{className:"delete",onClick:()=>this.discardToast(t.key)}),t.message]},t.key)))}),this.state.settingsModal&&(0,a.jsx)(ii,{handleClose:()=>{this.setState({settingsModal:!1})}}),this.state.propertiesModal&&(0,a.jsx)(Ir.Provider,{value:this.handleCopyToClipboard,children:(0,a.jsx)(ni,{properties:this.state.propertiesModal,handleClose:()=>this.setState({propertiesModal:null})})}),this.state.confirmModal&&(0,a.jsx)(ti,{handleConfirm:()=>{this.tabManager.close(this.state.confirmModal),this.setState({confirmModal:null})},handleClose:()=>this.setState({confirmModal:null})})]})}}const vh=yh;class bh extends t.Component{constructor(){super(...arguments),this.state={logged:!1,darkMode:oi().darkMode},this.handleLogin=()=>{this.setState({logged:!0})},this.handleLogout=()=>{localStorage.removeItem("login"),kr.disconnect(),this.setState({logged:!1})},this.themeSwitch=()=>{this.setState((t=>({darkMode:!t.darkMode})),(()=>{si("darkMode",this.state.darkMode),document.documentElement.className=this.state.darkMode?"theme-dark":"theme-light"}))}}componentDidMount(){document.documentElement.className=this.state.darkMode?"theme-dark":"theme-light"}render(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(Mr.Provider,{value:this.themeSwitch,children:this.state.logged?(0,a.jsx)(vh,{handleLogout:this.handleLogout,darkMode:this.state.darkMode}):(0,a.jsx)(Rr,{handleLogin:this.handleLogin,darkMode:this.state.darkMode})}),(0,a.jsx)("footer",{className:"footer page-footer",children:(0,a.jsxs)("div",{className:"content has-text-centered",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("b",{children:"cypherGUI"})," by Michal \u0160tefa\u0148\xe1k. Awarded author of PHP Bolt driver."]}),(0,a.jsxs)("div",{className:"buttons is-justify-content-center mt-2",children:[(0,a.jsxs)("a",{href:"https://github.com/stefanak-michal/cyphergui",target:"_blank",className:"button is-small",children:[(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:"fa-brands fa-github"})}),(0,a.jsx)("span",{children:"GitHub"})]}),(0,a.jsxs)("a",{href:"https://www.linkedin.com/in/michalstefanak/",target:"_blank",className:"button is-small",children:[(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:"fa-brands fa-linkedin"})}),(0,a.jsx)("span",{children:"LinkedIn"})]}),(0,a.jsxs)("a",{href:"https://eu.mixpanel.com/p/XtoyTU92SmmpUaweP7DUAn",target:"_blank",className:"button is-small",children:[(0,a.jsx)("span",{className:"icon",children:(0,a.jsx)("i",{className:"fa-solid fa-chart-simple"})}),(0,a.jsx)("span",{children:"Analytics"})]})]})]})})]})}}const wh=bh;"undefined"===typeof process&&Er.init("b79f8e7c618e117cb8648076ffde5154",{api_host:"https://api-eu.mixpanel.com",track_pageview:!0,persistence:"localStorage",secure_cookie:!0});e.H(document.getElementById("root")).render((0,a.jsx)(t.StrictMode,{children:(0,a.jsx)(wh,{})}))})()})();
//# sourceMappingURL=main.7f56e559.js.map